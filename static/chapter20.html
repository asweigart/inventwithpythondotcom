<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=utf-8">
<meta name=Generator content="Microsoft Word 14 (filtered)">
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
	{font-family:Tahoma;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:"Franklin Gothic Demi";
	panose-1:2 11 7 3 2 1 2 2 2 4;}
@font-face
	{font-family:"Lucida Sans Typewriter";
	panose-1:2 11 5 9 3 5 4 3 2 4;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:0in;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
h1
	{mso-style-link:"Heading 1 Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:24.0pt;
	margin-left:0in;
	line-height:115%;
	page-break-after:avoid;
	font-size:36.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";
	font-variant:small-caps;
	font-weight:bold;}
h2
	{mso-style-link:"Heading 2 Char";
	margin-top:10.0pt;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:0in;
	line-height:115%;
	page-break-after:avoid;
	font-size:16.0pt;
	font-family:"Calibri","sans-serif";
	color:#1F497D;
	font-weight:bold;}
h3
	{mso-style-link:"Heading 3 Char";
	margin-top:10.0pt;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:0in;
	line-height:115%;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"Calibri","sans-serif";
	color:#1F497D;
	font-weight:bold;
	font-style:italic;}
p.MsoToc1, li.MsoToc1, div.MsoToc1
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:0in;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.MsoToc2, li.MsoToc2, div.MsoToc2
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:11.0pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.MsoToc3, li.MsoToc3, div.MsoToc3
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:22.0pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.MsoToc4, li.MsoToc4, div.MsoToc4
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:33.0pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoToc5, li.MsoToc5, div.MsoToc5
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:44.0pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoToc6, li.MsoToc6, div.MsoToc6
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:55.0pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoToc7, li.MsoToc7, div.MsoToc7
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:66.0pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoToc8, li.MsoToc8, div.MsoToc8
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:77.0pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoToc9, li.MsoToc9, div.MsoToc9
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:88.0pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoHeader, li.MsoHeader, div.MsoHeader
	{mso-style-link:"Header Char";
	margin:0in;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.MsoFooter, li.MsoFooter, div.MsoFooter
	{mso-style-link:"Footer Char";
	margin:0in;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.MsoCaption, li.MsoCaption, div.MsoCaption
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:0in;
	text-align:center;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoTitle, li.MsoTitle, div.MsoTitle
	{mso-style-link:"Title Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:15.0pt;
	margin-left:0in;
	border:none;
	padding:0in;
	font-size:48.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";
	letter-spacing:.25pt;}
p.MsoTitleCxSpFirst, li.MsoTitleCxSpFirst, div.MsoTitleCxSpFirst
	{mso-style-link:"Title Char";
	margin:0in;
	margin-bottom:.0001pt;
	border:none;
	padding:0in;
	font-size:48.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";
	letter-spacing:.25pt;}
p.MsoTitleCxSpMiddle, li.MsoTitleCxSpMiddle, div.MsoTitleCxSpMiddle
	{mso-style-link:"Title Char";
	margin:0in;
	margin-bottom:.0001pt;
	border:none;
	padding:0in;
	font-size:48.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";
	letter-spacing:.25pt;}
p.MsoTitleCxSpLast, li.MsoTitleCxSpLast, div.MsoTitleCxSpLast
	{mso-style-link:"Title Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:15.0pt;
	margin-left:0in;
	border:none;
	padding:0in;
	font-size:48.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";
	letter-spacing:.25pt;}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;}
p
	{margin-right:0in;
	margin-left:0in;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";}
p.MsoAcetate, li.MsoAcetate, div.MsoAcetate
	{mso-style-link:"Balloon Text Char";
	margin:0in;
	margin-bottom:.0001pt;
	font-size:8.0pt;
	font-family:"Tahoma","sans-serif";}
p.MsoNoSpacing, li.MsoNoSpacing, div.MsoNoSpacing
	{mso-style-link:"No Spacing Char";
	margin:0in;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.MsoListParagraph, li.MsoListParagraph, div.MsoListParagraph
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:.5in;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.MsoListParagraphCxSpFirst, li.MsoListParagraphCxSpFirst, div.MsoListParagraphCxSpFirst
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.5in;
	margin-bottom:.0001pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.MsoListParagraphCxSpMiddle, li.MsoListParagraphCxSpMiddle, div.MsoListParagraphCxSpMiddle
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.5in;
	margin-bottom:.0001pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.MsoListParagraphCxSpLast, li.MsoListParagraphCxSpLast, div.MsoListParagraphCxSpLast
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:.5in;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.MsoTocHeading, li.MsoTocHeading, div.MsoTocHeading
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:24.0pt;
	margin-left:0in;
	line-height:115%;
	page-break-after:avoid;
	font-size:36.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";
	font-variant:small-caps;
	font-weight:bold;}
span.Heading1Char
	{mso-style-name:"Heading 1 Char";
	mso-style-link:"Heading 1";
	font-family:"Franklin Gothic Demi","sans-serif";
	font-variant:small-caps;
	font-weight:bold;}
span.Heading2Char
	{mso-style-name:"Heading 2 Char";
	mso-style-link:"Heading 2";
	font-family:"Times New Roman","serif";
	color:#1F497D;
	font-weight:bold;}
span.Definition
	{mso-style-name:Definition;
	font-family:"Calibri","sans-serif";
	font-weight:bold;}
span.URL
	{mso-style-name:URL;
	text-decoration:underline;}
span.Literal
	{mso-style-name:Literal;
	font-family:"Lucida Sans Typewriter";}
p.TopicsCoveredbox, li.TopicsCoveredbox, div.TopicsCoveredbox
	{mso-style-name:"Topics Covered box";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:0in;
	background:#DBE5F1;
	border:none;
	padding:0in;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.TopicsCoveredboxCxSpFirst, li.TopicsCoveredboxCxSpFirst, div.TopicsCoveredboxCxSpFirst
	{mso-style-name:"Topics Covered boxCxSpFirst";
	margin:0in;
	margin-bottom:.0001pt;
	background:#DBE5F1;
	border:none;
	padding:0in;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.TopicsCoveredboxCxSpMiddle, li.TopicsCoveredboxCxSpMiddle, div.TopicsCoveredboxCxSpMiddle
	{mso-style-name:"Topics Covered boxCxSpMiddle";
	margin:0in;
	margin-bottom:.0001pt;
	background:#DBE5F1;
	border:none;
	padding:0in;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.TopicsCoveredboxCxSpLast, li.TopicsCoveredboxCxSpLast, div.TopicsCoveredboxCxSpLast
	{mso-style-name:"Topics Covered boxCxSpLast";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:0in;
	background:#DBE5F1;
	border:none;
	padding:0in;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.CodeExample, li.CodeExample, div.CodeExample
	{mso-style-name:"Code Example";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:12.0pt;
	margin-left:0in;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
p.CodeExampleCxSpFirst, li.CodeExampleCxSpFirst, div.CodeExampleCxSpFirst
	{mso-style-name:"Code ExampleCxSpFirst";
	margin:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
p.CodeExampleCxSpMiddle, li.CodeExampleCxSpMiddle, div.CodeExampleCxSpMiddle
	{mso-style-name:"Code ExampleCxSpMiddle";
	margin:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
p.CodeExampleCxSpLast, li.CodeExampleCxSpLast, div.CodeExampleCxSpLast
	{mso-style-name:"Code ExampleCxSpLast";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:12.0pt;
	margin-left:0in;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
p.SourceCode, li.SourceCode, div.SourceCode
	{mso-style-name:"Source Code";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:12.0pt;
	margin-left:0in;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
p.SourceCodeCxSpFirst, li.SourceCodeCxSpFirst, div.SourceCodeCxSpFirst
	{mso-style-name:"Source CodeCxSpFirst";
	margin:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
p.SourceCodeCxSpMiddle, li.SourceCodeCxSpMiddle, div.SourceCodeCxSpMiddle
	{mso-style-name:"Source CodeCxSpMiddle";
	margin:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
p.SourceCodeCxSpLast, li.SourceCodeCxSpLast, div.SourceCodeCxSpLast
	{mso-style-name:"Source CodeCxSpLast";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:12.0pt;
	margin-left:0in;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
span.SourceLineNumber
	{mso-style-name:"Source Line Number";
	color:#7F7F7F;}
p.ImportantNote, li.ImportantNote, div.ImportantNote
	{mso-style-name:"Important Note";
	margin-top:0in;
	margin-right:.5in;
	margin-bottom:8.0pt;
	margin-left:.5in;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.ChapterNumber, li.ChapterNumber, div.ChapterNumber
	{mso-style-name:"Chapter Number";
	margin:0in;
	margin-bottom:.0001pt;
	font-size:26.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";}
p.Body, li.Body, div.Body
	{mso-style-name:Body;
	margin-top:0in;
	margin-right:0in;
	margin-bottom:8.0pt;
	margin-left:0in;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
span.Keycap
	{mso-style-name:Keycap;
	font-variant:small-caps;
	color:blue;}
p.Non-TOCHeading3, li.Non-TOCHeading3, div.Non-TOCHeading3
	{mso-style-name:"Non-TOC Heading 3";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:0in;
	line-height:115%;
	font-size:14.0pt;
	font-family:"Calibri","sans-serif";
	color:#1F497D;
	font-weight:bold;
	font-style:italic;}
span.BalloonTextChar
	{mso-style-name:"Balloon Text Char";
	mso-style-link:"Balloon Text";
	font-family:"Tahoma","sans-serif";}
p.TableHeading, li.TableHeading, div.TableHeading
	{mso-style-name:"Table Heading";
	margin:0in;
	margin-bottom:.0001pt;
	text-align:center;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";
	font-weight:bold;}
p.TableListing, li.TableListing, div.TableListing
	{mso-style-name:"Table Listing";
	margin:0in;
	margin-bottom:.0001pt;
	text-align:center;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.SampleRun, li.SampleRun, div.SampleRun
	{mso-style-name:"Sample Run";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:12.0pt;
	margin-left:0in;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
p.SampleRunCxSpFirst, li.SampleRunCxSpFirst, div.SampleRunCxSpFirst
	{mso-style-name:"Sample RunCxSpFirst";
	margin:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
p.SampleRunCxSpMiddle, li.SampleRunCxSpMiddle, div.SampleRunCxSpMiddle
	{mso-style-name:"Sample RunCxSpMiddle";
	margin:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
p.SampleRunCxSpLast, li.SampleRunCxSpLast, div.SampleRunCxSpLast
	{mso-style-name:"Sample RunCxSpLast";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:12.0pt;
	margin-left:0in;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
span.SampleRunResponse
	{mso-style-name:"Sample Run Response";
	color:#1F497D;
	font-weight:bold;}
span.SourceCodeComment
	{mso-style-name:"Source Code Comment";
	color:#7F7F7F;}
span.FigureImageBorder
	{mso-style-name:"Figure Image Border";
	border:solid windowtext 1.0pt;
	padding:0in;}
p.SourceCodeFilename, li.SourceCodeFilename, div.SourceCodeFilename
	{mso-style-name:"Source Code Filename";
	margin:0in;
	margin-bottom:.0001pt;
	text-align:right;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:"Lucida Sans Typewriter";}
p.SourceCodeFilenameCxSpFirst, li.SourceCodeFilenameCxSpFirst, div.SourceCodeFilenameCxSpFirst
	{mso-style-name:"Source Code FilenameCxSpFirst";
	margin:0in;
	margin-bottom:.0001pt;
	text-align:right;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:"Lucida Sans Typewriter";}
p.SourceCodeFilenameCxSpMiddle, li.SourceCodeFilenameCxSpMiddle, div.SourceCodeFilenameCxSpMiddle
	{mso-style-name:"Source Code FilenameCxSpMiddle";
	margin:0in;
	margin-bottom:.0001pt;
	text-align:right;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:"Lucida Sans Typewriter";}
p.SourceCodeFilenameCxSpLast, li.SourceCodeFilenameCxSpLast, div.SourceCodeFilenameCxSpLast
	{mso-style-name:"Source Code FilenameCxSpLast";
	margin:0in;
	margin-bottom:.0001pt;
	text-align:right;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:"Lucida Sans Typewriter";}
span.Heading3Char
	{mso-style-name:"Heading 3 Char";
	mso-style-link:"Heading 3";
	font-family:"Times New Roman","serif";
	color:#1F497D;
	font-weight:bold;
	font-style:italic;}
span.NoSpacingChar
	{mso-style-name:"No Spacing Char";
	mso-style-link:"No Spacing";
	font-family:"Times New Roman","serif";}
span.HeaderChar
	{mso-style-name:"Header Char";
	mso-style-link:Header;
	font-family:"Times New Roman","serif";}
span.FooterChar
	{mso-style-name:"Footer Char";
	mso-style-link:Footer;
	font-family:"Times New Roman","serif";}
span.StrongBoxed
	{mso-style-name:"Strong & Boxed";
	border:solid windowtext 1.0pt;
	padding:0in;
	font-weight:bold;}
span.TitleChar
	{mso-style-name:"Title Char";
	mso-style-link:Title;
	font-family:"Franklin Gothic Demi","sans-serif";
	letter-spacing:.25pt;}
p.BodyFirst, li.BodyFirst, div.BodyFirst
	{mso-style-name:"Body First";
	margin:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
.MsoChpDefault
	{font-family:"Calibri","sans-serif";}
.MsoPapDefault
	{margin-bottom:10.0pt;
	line-height:115%;}
@page WordSection1
	{size:8.0in 10.0in;
	margin:1.0in 1.0in 1.0in 1.0in;}
div.WordSection1
	{page:WordSection1;}
 /* List Definitions */
 ol
	{margin-bottom:0in;}
ul
	{margin-bottom:0in;}
-->
</style>

</head>

<body lang=EN-US link=blue vlink=purple>

<div style='float: right; height: 310px; font-family: sans-serif;'>Ad: Programming books by Al Sweigart<br />
    <a href='http://www.nostarch.com/automatestuff' onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_automate.link');"><img src='/images/cover_automate_thumb.webp' style="height: 200px; border: solid black 1px;" /></a>
    <a href='http://www.amazon.com/gp/product/1503212300?ie=UTF8&tag=playwithpyth-20&linkCode=as2&camp=1789&creative=9325&creativeASIN=1503212300' onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_invent.link');"><img src='/images/cover_inventwithpython_thumb.webp' style="height: 200px; border: solid black 1px;" /></a>
    <a href='http://www.amazon.com/Making-Games-Python-Pygame-Sweigart/dp/1469901730?ie=UTF8&tag=playwithpyth-20&linkCode=as2&camp=1789&creative=9325&creativeASIN=1469901730' onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_pygame.link');"><img src='/images/cover_makinggames_thumb.webp' style="height: 200px; border: solid black 1px;" /></a>
    <a href='http://www.amazon.com/gp/product/1482614375/ref=as_li_qf_sp_asin_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1482614375&linkCode=as2&tag=playwithpyth-20' onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_hacking.link');"><img src='/images/cover_hackingciphers_thumb.webp' style="height: 200px; border: solid black 1px;" /></a>
</div>

<div class=WordSection1>

<table class=MsoTableGrid border=0 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=101 rowspan=2 valign=top style='width:60.85pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=ChapterNumber><img width=84 height=96 id="Picture 161"
  src="chapter20_files/image001.webp"></p>
  </td>
  <td width=637 valign=top style='width:381.95pt;border:none;border-bottom:
  solid windowtext 1.0pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=ChapterNumber>Chapter 20</p>
  </td>
 </tr>
 <tr>
  <td width=637 valign=top style='width:381.95pt;border:none;padding:0in 5.4pt 0in 5.4pt'>
  <h1 style='line-height:normal'><a name="_Toc405145193"><span
  style='font-variant:normal !important;text-transform:uppercase'>Dodger</span></a></h1>
  </td>
 </tr>
</table>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt;
background:#DBE5F1'>

<p class=TopicsCoveredboxCxSpFirst style='background:#DBE5F1;border:none;
padding:0in'>Topics Covered In This Chapter:</p>

<p class=TopicsCoveredboxCxSpMiddle style='margin-left:.25in;text-indent:-.25in;
background:#DBE5F1;border:none;padding:0in'><span style='font-family:Symbol'>·<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>The <span class=Literal><span style='font-size:9.0pt'>pygame.FULLSCREEN</span></span>
flag</p>

<p class=TopicsCoveredboxCxSpMiddle style='margin-left:.25in;text-indent:-.25in;
background:#DBE5F1;border:none;padding:0in'><span style='font-family:Symbol'>·<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Pygame constant variables for keyboard keys</p>

<p class=TopicsCoveredboxCxSpMiddle style='margin-left:.25in;text-indent:-.25in;
background:#DBE5F1;border:none;padding:0in'><span style='font-family:Symbol'>·<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>The <span class=Literal><span style='font-size:9.0pt'>move_ip()</span></span>Rect
method</p>

<p class=TopicsCoveredboxCxSpMiddle style='margin-left:.25in;text-indent:-.25in;
background:#DBE5F1;border:none;padding:0in'><span style='font-family:Symbol'>·<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>The <span class=Literal><span style='font-size:9.0pt'>pygame.mouse.set_pos()</span></span>
function</p>

<p class=TopicsCoveredboxCxSpMiddle style='margin-left:.25in;text-indent:-.25in;
background:#DBE5F1;border:none;padding:0in'><span style='font-family:Symbol'>·<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Implementing cheat codes</p>

<p class=TopicsCoveredboxCxSpLast style='margin-left:.25in;text-indent:-.25in;
background:#DBE5F1;border:none;padding:0in'><span style='font-family:Symbol'>·<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Modifying the Dodger game</p>

</div>

<p class=Body>The last three chapters went over the Pygame module and
demonstrated how to use its many features. In this chapter, we’ll use that
knowledge to create a graphical game called Dodger.</p>

<p class=Body>The Dodger game has the player control a small person (which we
call the player’s character) who must dodge a whole bunch of baddies that fall
from the top of the screen. The longer the player can keep dodging the baddies,
the higher the score they will get.</p>

<p class=Body>Just for fun, we’ll also add some cheat modes to the game. If the
player holds down the “x” key, every baddie’s speed is reduced to a super slow
rate. If the player holds down the “z” key, the baddies will reverse their
direction and travel up the screen instead of downwards.</p>

<h2><a name="_Toc405145194">Review of the Basic Pygame Data Types</a></h2>

<p class=Body>Let’s review some of the basic data types used in Pygame:</p>

<p class=Body style='margin-left:.5in;text-indent:-.25in'><span
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span class=Literal><span style='font-size:9.0pt;line-height:
115%'>pygame.Rect</span></span> - Rect objects represent a rectangular space’s
location and size. The location can be determined by the Rect object’s <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>topleft</span></span>
attribute (or the <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>topright</span></span>, <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>bottomleft</span></span>, and <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>bottomright</span></span> attributes).
These corner attributes are a tuple of integers for the X- and Y-coordinates.
The size can be determined by the <span class=Literal><span style='font-size:
9.0pt;line-height:115%'>width</span></span> and <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>height</span></span> attributes, which
are integers of how many pixels long or high the rectangle area is. Rect
objects have a <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>colliderect()</span></span> method to check if they are colliding with
another Rect object.</p>

<p class=Body style='margin-left:.5in;text-indent:-.25in'><span
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span class=Literal><span style='font-size:9.0pt;line-height:
115%'>pygame.Surface</span></span> - Surface objects are areas of colored
pixels. Surface objects represent a rectangular image, while Rect objects only
represent a rectangular space and location. Surface objects have a <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>blit()</span></span>
method that is used to draw the image on one Surface object onto another
Surface object. The Surface object returned by the <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>pygame.display.set_mode()</span></span>
function is special because anything drawn on that Surface object is displayed
on the user’s screen when <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>pygame.display.update()</span></span> is called.</p>

<p class=MsoListParagraphCxSpFirst style='text-indent:-.25in'><span
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span class=Literal><span style='font-size:9.0pt;line-height:
115%'>pygame.event.Event</span></span> - The <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>pygame.event</span></span> module
generates Event objects whenever the user provides keyboard, mouse, or another
kind of input. The <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>pygame.event.get()</span></span> function returns a list of these Event
objects. You can check what type of event the Event object is by checking its <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>type</span></span>
attribute. <span class=Literal><span style='font-size:9.0pt;line-height:115%'>QUIT</span></span>,
<span class=Literal><span style='font-size:9.0pt;line-height:115%'>KEYDOWN</span></span>,
and <span class=Literal><span style='font-size:9.0pt;line-height:115%'>MOUSEBUTTONUP</span></span>
are examples of some event types.</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span class=Literal><span style='font-size:9.0pt;line-height:
115%'>pygame.font.Font</span></span> - The <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>pygame.font</span></span> module has
the Font data type which represents the typeface used for text in Pygame. The
arguments to pass to <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>pygame.font.SysFont()</span></span> are a string of the font
name and an integer of the font size. However it is common to pass <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>None</span></span>
for the font name to get the default system font.</p>

<p class=MsoListParagraphCxSpLast style='text-indent:-.25in'><span
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span class=Literal><span style='font-size:9.0pt;line-height:
115%'>pygame.time.Clock</span></span> - The Clock object in the <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>pygame.time</span></span>
module is helpful for keeping our games from running as fast as possible. The
Clock object has a <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>tick()</span></span> method, which we pass how many frames per second
(FPS) we want the game to run at. The higher the FPS, the faster the game runs.</p>

<p class=Body>Type in the following code and save it to a file named <em>dodger.py</em>.
This game also requires some other image and sound files, which you can
download from the URL <span class=URL><u>http://invpy.com/downloads</u></span>.</p>

<h2><a name="_Toc405145195">Source Code of Dodger</a></h2>

<p class=Body>You can download this code from the URL <span class=URL><u>http://invpy.com/chap20</u></span>.
If you get errors after typing this code in, compare the code you typed to the
book’s code with the online diff tool at <span class=URL><u>http://invpy.com/diff/dodger</u></span>.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>  1.</span> import
pygame, random, sys</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  2.</span> from
pygame.locals import *</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  3. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  4.</span>
WINDOWWIDTH = 600</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  5.</span>
WINDOWHEIGHT = 600</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  6.</span>
TEXTCOLOR = (255, 255, 255)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  7.</span>
BACKGROUNDCOLOR = (0, 0, 0)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  8.</span> FPS = 40</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  9.</span>
BADDIEMINSIZE = 10</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 10.</span>
BADDIEMAXSIZE = 40</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 11.</span>
BADDIEMINSPEED = 1</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 12.</span>
BADDIEMAXSPEED = 8</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 13.</span>
ADDNEWBADDIERATE = 6</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 14.</span>
PLAYERMOVERATE = 5</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 15. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 16.</span> def
terminate():</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 17.</span>    
pygame.quit()</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 18.</span>     sys.exit()</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 19. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 20.</span> def
waitForPlayerToPressKey():</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 21.</span>    
while True:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 22.</span>        
for event in pygame.event.get():</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 23.</span>            
if event.type == QUIT:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 24.</span>                
terminate()</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 25.</span>            
if event.type == KEYDOWN:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 26.</span>                
if event.key == K_ESCAPE: <span class=SourceCodeComment># pressing escape quits</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 27.</span>                    
terminate()</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 28.</span>                
return</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 29. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 30.</span> def
playerHasHitBaddie(playerRect, baddies):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 31.</span>     for
b in baddies:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 32.</span>        
if playerRect.colliderect(b['rect']):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 33.</span>             return
True</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 34.</span>    
return False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 35. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 36.</span> def
drawText(text, font, surface, x, y):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 37.</span>    
textobj = font.render(text, 1, TEXTCOLOR)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 38.</span>    
textrect = textobj.get_rect()</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 39.</span>    
textrect.topleft = (x, y)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 40.</span>    
surface.blit(textobj, textrect)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 41. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 42.</span> <span
class=SourceCodeComment># set up pygame, the window, and the mouse cursor</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 43.</span>
pygame.init()</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 44.</span>
mainClock = pygame.time.Clock()</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 45.</span>
windowSurface = pygame.display.set_mode((WINDOWWIDTH, WINDOWHEIGHT))</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 46.</span>
pygame.display.set_caption('Dodger')</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 47.</span>
pygame.mouse.set_visible(False)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 48. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 49.</span> <span
class=SourceCodeComment># set up fonts</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 50.</span> font =
pygame.font.SysFont(None, 48)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 51. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 52.</span> <span
class=SourceCodeComment># set up sounds</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 53.</span>
gameOverSound = pygame.mixer.Sound('gameover.wav')</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 54.</span>
pygame.mixer.music.load('background.mid')</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 55. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 56.</span> <span
class=SourceCodeComment># set up images</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 57.</span> playerImage
= pygame.image.load('player.png')</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 58.</span>
playerRect = playerImage.get_rect()</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 59.</span>
baddieImage = pygame.image.load('baddie.png')</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 60. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 61.</span> <span
class=SourceCodeComment># show the &quot;Start&quot; screen</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 62.</span>
drawText('Dodger', font, windowSurface, (WINDOWWIDTH / 3), (WINDOWHEIGHT / 3))</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 63.</span>
drawText('Press a key to start.', font, windowSurface, (WINDOWWIDTH / 3) - 30,
(WINDOWHEIGHT / 3) + 50)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 64.</span>
pygame.display.update()</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 65.</span>
waitForPlayerToPressKey()</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 66. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 67. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 68.</span> topScore
= 0</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 69.</span> while
True:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 70.</span>     <span
class=SourceCodeComment># set up the start of the game</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 71.</span>    
baddies = []</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 72.</span>    
score = 0</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 73.</span>    
playerRect.topleft = (WINDOWWIDTH / 2, WINDOWHEIGHT - 50)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 74.</span>    
moveLeft = moveRight = moveUp = moveDown = False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 75.</span>    
reverseCheat = slowCheat = False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 76.</span>    
baddieAddCounter = 0</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 77.</span>    
pygame.mixer.music.play(-1, 0.0)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 78. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 79.</span>    
while True: <span class=SourceCodeComment># the game loop runs while the game
part is playing</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 80.</span>        
score += 1 <span class=SourceCodeComment># increase score</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 81. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 82.</span>        
for event in pygame.event.get():</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 83.</span>            
if event.type == QUIT:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 84.</span>                
terminate()</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 85. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 86.</span>            
if event.type == KEYDOWN:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 87.</span>                
if event.key == ord('z'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 88.</span>                    
reverseCheat = True</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 89.</span>                
if event.key == ord('x'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 90.</span>                    
slowCheat = True</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 91.</span>            
    if event.key == K_LEFT or event.key == ord('a'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 92.</span>                    
moveRight = False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 93.</span>                    
moveLeft = True</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 94.</span>                
if event.key == K_RIGHT or event.key == ord('d'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 95.</span>                    
moveLeft = False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 96.</span>                     moveRight
= True</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 97.</span>                
if event.key == K_UP or event.key == ord('w'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 98.</span>                    
moveDown = False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 99.</span>                    
moveUp = True</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>100.</span>                
if event.key == K_DOWN or event.key == ord('s'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>101.</span>                    
moveUp = False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>102.</span>                    
moveDown = True</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>103. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>104.</span>            
if event.type == KEYUP:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>105.</span>                
if event.key == ord('z'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>106.</span>                    
reverseCheat = False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>107.</span>                    
score = 0</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>108.</span>                
if event.key == ord('x'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>109.</span>                    
slowCheat = False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>110.</span>                    
score = 0</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>111.</span>                
if event.key == K_ESCAPE:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>112.</span>                        
terminate()</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>113. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>114.</span>                
if event.key == K_LEFT or event.key == ord('a'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>115.</span>                    
moveLeft = False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>116.</span>                
if event.key == K_RIGHT or event.key == ord('d'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>117.</span>                    
moveRight = False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>118.</span>                
if event.key == K_UP or event.key == ord('w'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>119.</span>                    
moveUp = False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>120.</span>                
if event.key == K_DOWN or event.key == ord('s'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>121.</span>                    
moveDown = False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>122. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>123.</span>            
if event.type == MOUSEMOTION:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>124.</span>                
<span class=SourceCodeComment># If the mouse moves, move the player where the
cursor is.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>125.</span>                
playerRect.move_ip(event.pos[0] - playerRect.centerx, event.pos[1] -
playerRect.centery)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>126. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>127.</span>         <span
class=SourceCodeComment># Add new baddies at the top of the screen, if needed.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>128.</span>        
if not reverseCheat and not slowCheat:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>129.</span>            
baddieAddCounter += 1</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>130.</span>        
if baddieAddCounter == ADDNEWBADDIERATE:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>131.</span>            
baddieAddCounter = 0</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>132.</span>            
baddieSize = random.randint(BADDIEMINSIZE, BADDIEMAXSIZE)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>133.</span>            
newBaddie = {'rect': pygame.Rect(random.randint(0, WINDOWWIDTH-baddieSize), 0 -
baddieSize, baddieSize, baddieSize),</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>134.</span>                        
'speed': random.randint(BADDIEMINSPEED, BADDIEMAXSPEED),</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>135.</span>                        
'surface':pygame.transform.scale(baddieImage, (baddieSize, baddieSize)),</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>136.</span>                        
}</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>137. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>138.</span>            
baddies.append(newBaddie)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>139. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>140.</span>         <span
class=SourceCodeComment># Move the player around.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>141.</span>        
if moveLeft and playerRect.left &gt; 0:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>142.</span>            
playerRect.move_ip(-1 * PLAYERMOVERATE, 0)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>143.</span>        
if moveRight and playerRect.right &lt; WINDOWWIDTH:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>144.</span>            
playerRect.move_ip(PLAYERMOVERATE, 0)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>145.</span>        
if moveUp and playerRect.top &gt; 0:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>146.</span>            
playerRect.move_ip(0, -1 * PLAYERMOVERATE)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>147.</span>        
if moveDown and playerRect.bottom &lt; WINDOWHEIGHT:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>148.</span>            
playerRect.move_ip(0, PLAYERMOVERATE)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>149. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>150.</span>         <span
class=SourceCodeComment># Move the mouse cursor to match the player.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>151.</span>        
pygame.mouse.set_pos(playerRect.centerx, playerRect.centery)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>152. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>153.</span>         <span
class=SourceCodeComment># Move the baddies down.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>154.</span>        
for b in baddies:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>155.</span>            
if not reverseCheat and not slowCheat:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>156.</span>                
b['rect'].move_ip(0, b['speed'])</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>157.</span>            
elif reverseCheat:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>158.</span>                
b['rect'].move_ip(0, -5)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>159.</span>            
elif slowCheat:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>160.</span>                
b['rect'].move_ip(0, 1)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>161. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>162.</span>         <span
class=SourceCodeComment># Delete baddies that have fallen past the bottom.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>163.</span>        
for b in baddies[:]:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>164.</span>            
if b['rect'].top &gt; WINDOWHEIGHT:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>165.</span>                
baddies.remove(b)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>166. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>167.</span>         <span
class=SourceCodeComment># Draw the game world on the window.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>168.</span>        
windowSurface.fill(BACKGROUNDCOLOR)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>169. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>170.</span>         <span
class=SourceCodeComment># Draw the score and top score.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>171.</span>        
drawText('Score: %s' % (score), font, windowSurface, 10, 0)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>172.</span>        
drawText('Top Score: %s' % (topScore), font, windowSurface, 10, 40)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>173. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>174.</span>         <span
class=SourceCodeComment># Draw the player's rectangle</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>175.</span>        
windowSurface.blit(playerImage, playerRect)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>176. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>177.</span>         <span
class=SourceCodeComment># Draw each baddie</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>178.</span>        
for b in baddies:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>179.</span>            
windowSurface.blit(b['surface'], b['rect'])</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>180. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>181.</span>        
pygame.display.update()</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>182. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>183.</span>         <span
class=SourceCodeComment># Check if any of the baddies have hit the player.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>184.</span>        
if playerHasHitBaddie(playerRect, baddies):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>185.</span>            
if score &gt; topScore:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>186.</span>           
     topScore = score <span class=SourceCodeComment># set new top score</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>187.</span>            
break</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>188. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>189.</span>        
mainClock.tick(FPS)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>190. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>191.</span>     <span
class=SourceCodeComment># Stop the game and show the &quot;Game Over&quot;
screen.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>192.</span>    
pygame.mixer.music.stop()</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>193.</span>    
gameOverSound.play()</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>194. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>195.</span>    
drawText('GAME OVER', font, windowSurface, (WINDOWWIDTH / 3), (WINDOWHEIGHT /
3))</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>196.</span>    
drawText('Press a key to play again.', font, windowSurface, (WINDOWWIDTH / 3) -
80, (WINDOWHEIGHT / 3) + 50)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>197.</span>    
pygame.display.update()</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>198.</span>    
waitForPlayerToPressKey()</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>199. </span></p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>200.</span>    
gameOverSound.stop()</p>

</div>

<p class=Body>When you run this program, the game will look like Figure 20-1.</p>

<p class=MsoNormal align=center style='text-align:center'><img width=337
height=352 id="Picture 88" src="chapter20_files/image002.webp"></p>

<p class=MsoCaption>Figure 20-1: An altered screenshot of the Dodger game.</p>

<p class=Non-TOCHeading3>Importing the Modules</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>  1.</span> import
pygame, random, sys</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>  2.</span> from
pygame.locals import *</p>

</div>

<p class=Body>The Dodger game imports the same modules previous Pygame programs
have: <span class=Literal><span style='font-size:9.0pt;line-height:115%'>pygame</span></span>,
<span class=Literal><span style='font-size:9.0pt;line-height:115%'>random</span></span>,
<span class=Literal><span style='font-size:9.0pt;line-height:115%'>sys</span></span>,
and <span class=Literal><span style='font-size:9.0pt;line-height:115%'>pygame.locals</span></span>.
The <span class=Literal><span style='font-size:9.0pt;line-height:115%'>pygame.locals</span></span>
module contains several constant variables that Pygame uses such as the event
types (<span class=Literal><span style='font-size:9.0pt;line-height:115%'>QUIT</span></span>,
<span class=Literal><span style='font-size:9.0pt;line-height:115%'>KEYDOWN</span></span>,
etc.) and keyboard keys (<span class=Literal><span style='font-size:9.0pt;
line-height:115%'>K_ESCAPE</span></span>, <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>K_LEFT</span></span>, etc.). By using
the <span class=Literal><span style='font-size:9.0pt;line-height:115%'>from
pygame.locals import *</span></span> syntax, you can just type <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>QUIT</span></span>
in the source code instead of <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>pygame.locals.QUIT</span></span>.</p>

<p class=Non-TOCHeading3>Setting Up the Constant Variables</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>  4.</span>
WINDOWWIDTH = 600</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  5.</span>
WINDOWHEIGHT = 600</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  6.</span>
TEXTCOLOR = (255, 255, 255)</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>  7.</span>
BACKGROUNDCOLOR = (0, 0, 0)</p>

</div>

<p class=Body>The constant variables on lines 4 to 14 are much more descriptive
than typing out the values. For example, from the line <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>windowSurface.fill(BACKGROUNDCOLOR)</span></span>
is more understandable than <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>windowSurface.fill((0, 0, 0))</span></span>.</p>

<p class=Body>You can easily change the game by changing the constant
variables. By changing <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>WINDOWWIDTH</span></span> on line 4, you automatically change
the code everywhere <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>WINDOWWIDTH</span></span> is used. If you had used the value <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>600</span></span>
instead, then you would have to change each occurrence of <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>600</span></span> in the code. It is
easier to change the value in the constant once.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCode><span class=SourceLineNumber>  8.</span> FPS = 40</p>

</div>

<p class=Body>The <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>mainClock.tick()</span></span> method call on line 189 will slow the game
down enough to be playable. You pass an integer to <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>mainClock.tick()</span></span> so that
the function knows how long to pause the program. This integer (which you store
in <span class=Literal><span style='font-size:9.0pt;line-height:115%'>FPS</span></span>)
is the number of frames per second you want the game to run.</p>

<p class=Body>A “frame” is the drawing of graphics on the screen for a single
iteration through the game loop. You can set <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>FPS</span></span> to <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>40</span></span>,
and always call <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>mainClock.tick(FPS)</span></span>. Then you can change <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>FPS</span></span>
to a higher value to have the game run faster or a lower value to slow the game
down.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>  9.</span>
BADDIEMINSIZE = 10</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 10.</span>
BADDIEMAXSIZE = 40</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 11.</span>
BADDIEMINSPEED = 1</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 12.</span>
BADDIEMAXSPEED = 8</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber> 13.</span>
ADDNEWBADDIERATE = 6</p>

</div>

<p class=Body>Lines 9 to 13 set some more constant variables that will describe
the falling baddies. The width and height of the baddies will be between <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>BADDIEMINSIZE</span></span>
and <span class=Literal><span style='font-size:9.0pt;line-height:115%'>BADDIEMAXSIZE</span></span>.
The rate at which the baddies fall down the screen will be between <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>BADDIEMINSPEED</span></span>
and <span class=Literal><span style='font-size:9.0pt;line-height:115%'>BADDIEMAXSPEED</span></span>
pixels per iteration through the game loop. And a new baddie will be added to
the top of the window every <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>ADDNEWBADDIERATE</span></span> iterations through the game
loop.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCode><span class=SourceLineNumber>14.</span> PLAYERMOVERATE = 5</p>

</div>

<p class=Body>The <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>PLAYERMOVERATE</span></span> will store the number of pixels the player’s
character moves in the window on each iteration through the game loop if the
character is moving. By increasing this number, you can increase the speed the
character moves.</p>

<p class=Non-TOCHeading3>Defining Functions</p>

<p class=Body>There are several functions you’ll create for the game:</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber> 16.</span> def
terminate():</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 17.</span>    
pygame.quit()</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber> 18.</span>    
sys.exit()</p>

</div>

<p class=Body>Pygame requires that you call both <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>pygame.quit()</span></span> and <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>sys.exit()</span></span>.
Put them both into a function called <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>terminate()</span></span>. Now you
only need to call <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>terminate()</span></span>, instead of both of the <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>pygame.quit()</span></span> and <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>sys.exit()</span></span>
functions.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber> 20.</span> def
waitForPlayerToPressKey():</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 21.</span>    
while True:</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber> 22.</span>        
for event in pygame.event.get():</p>

</div>

<p class=Body>Sometimes you’ll want to pause the game until the player presses
a key. Create a new function called <span class=Literal><span style='font-size:
9.0pt;line-height:115%'>waitForPlayerToPressKey()</span></span>. Inside this
function, there’s an infinite loop that only breaks when a <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>KEYDOWN</span></span> or <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>QUIT</span></span>
event is received. At the start of the loop, <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>pygame.event.get()</span></span> to
return a list of Event objects to check out.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber> 23.</span>            
if event.type == QUIT:</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber> 24.</span>                
terminate()</p>

</div>

<p class=Body>If the player has closed the window while the program is waiting
for the player to press a key, Pygame will generate a <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>QUIT</span></span> event. In that
case, call the <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>terminate()</span></span> function on line 24.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber> 25.</span>            
if event.type == KEYDOWN:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 26.</span>                
if event.key == K_ESCAPE: <span class=SourceCodeComment># pressing escape quits</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 27.</span>                    
terminate()</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber> 28.</span>                
return</p>

</div>

<p class=Body>If you receive a <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>KEYDOWN</span></span> event, then you should first check if
it is the <span class=Keycap><span style='font-variant:normal !important;
text-transform:uppercase'>esc</span></span> key that was pressed. If the player
presses the <span class=Keycap><span style='font-variant:normal !important;
text-transform:uppercase'>esc</span></span> key, the program should terminate.
If that wasn’t the case, then execution will skip the if-block on line 27 and
go straight to the <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>return</span></span> statement, which exits the <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>waitForPlayerToPressKey()</span></span>
function.</p>

<p class=Body>If a <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>QUIT</span></span> or <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>KEYDOWN</span></span> event isn’t generated, then the code
keeps looping. Since the loop does nothing, this will make it look like the
game has frozen until the player presses a key.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber> 30.</span> def
playerHasHitBaddie(playerRect, baddies):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 31.</span>     for
b in baddies:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 32.</span>        
if playerRect.colliderect(b['rect']):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 33.</span>            
return True</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber> 34.</span>     return
False</p>

</div>

<p class=Body>The <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>playerHasHitBaddie()</span></span> function will return <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>True</span></span>
if the player’s character has collided with one of the baddies. The <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>baddies</span></span>
parameter is a list of “baddie” dictionary data structures. Each of these
dictionaries has a <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>'rect'</span></span> key, and the value for that key is a Rect object
that represents the baddie’s size and location.</p>

<p class=Body><span class=Literal><span style='font-size:9.0pt;line-height:
115%'>playerRect</span></span> is also a Rect object. Rect objects have a
method named <span class=Literal><span style='font-size:9.0pt;line-height:115%'>colliderect()</span></span>
that returns <span class=Literal><span style='font-size:9.0pt;line-height:115%'>True</span></span>
if the Rect object has collided with the Rect object that is passed to it.
Otherwise, <span class=Literal><span style='font-size:9.0pt;line-height:115%'>colliderect()</span></span>
will return <span class=Literal><span style='font-size:9.0pt;line-height:115%'>False</span></span>.</p>

<p class=Body>The <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>for</span></span> loop on line 31 iterates through each baddie dictionary
in the <span class=Literal><span style='font-size:9.0pt;line-height:115%'>baddies</span></span>
list. If any of these baddies collide with the player’s character, then <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>playerHasHitBaddie()</span></span>
will return <span class=Literal><span style='font-size:9.0pt;line-height:115%'>True</span></span>.
If the code manages to iterate through all the baddies in the <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>baddies</span></span>
list without detecting a collision with any of them, it will return <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>False</span></span>.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber> 36.</span> def
drawText(text, font, surface, x, y):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 37.</span>    
textobj = font.render(text, 1, TEXTCOLOR)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 38.</span>    
textrect = textobj.get_rect()</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 39.</span>    
textrect.topleft = (x, y)</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber> 40.</span>    
surface.blit(textobj, textrect)</p>

</div>

<p class=Body>Drawing text on the window involves a few steps. First, the <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>render()</span></span>
method call on line 37 creates a Surface object that has the text rendered in a
specific font on it.</p>

<p class=Body>Next, you need to know the size and location of the Surface
object. You can get a Rect object with this information from the <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>get_rect()</span></span>
Surface method.</p>

<p class=Body>The Rect object returned on line 38 from <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>get_rect()</span></span> has a copy of
the width and height information from the Surface object. Line 39 changes the
location of the Rect object by setting a new tuple value for its <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>topleft</span></span>
attribute.</p>

<p class=Body>Finally, line 40 blits the Surface object of the rendered text
onto the Surface object that was passed to the <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>drawText()</span></span> function.
Displaying text in Pygame take a few more steps than simply calling the <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>print()</span></span>
function. But if you put this code into a single function named <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>drawText()</span></span>,
then you only need to call this function to display text on the screen.</p>

<p class=Non-TOCHeading3>Initializing Pygame and Setting Up the Window</p>

<p class=Body>Now that the constant variables and functions are finished, start
calling the Pygame functions that set up the window and clock.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber> 42.</span> <span
class=SourceCodeComment># set up pygame, the window, and the mouse cursor</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 43.</span>
pygame.init()</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber> 44.</span> mainClock
= pygame.time.Clock()</p>

</div>

<p class=Body>Line 43 sets up the Pygame by calling the <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>pygame.init()</span></span> function.
Line 44 creates a <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>pygame.time.Clock()</span></span> object and stores it in the <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>mainClock</span></span>
variable. This object will help us keep the program from running too fast.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCode><span class=SourceLineNumber> 45.</span> windowSurface =
pygame.display.set_mode((WINDOWWIDTH, WINDOWHEIGHT))</p>

</div>

<p class=Body>Line 45 creates a new Surface object which is used for the window
displayed on the screen. You can specify the width and height of this Surface
object (and the window) by passing a tuple with the <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>WINDOWWIDTH</span></span> and <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>WINDOWHEIGHT</span></span>
constant variables. Notice that there’s only one argument passed to <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>pygame.display.set_mode()</span></span>:
a tuple. The arguments for <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>pygame.display.set_mode()</span></span> are not two integers
but one tuple of two integers.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCode><span class=SourceLineNumber> 46.</span>
pygame.display.set_caption('Dodger')</p>

</div>

<p class=Body>Line 46 sets the caption of the window to the string <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>'Dodger'</span></span>.
This caption will appear in the title bar at the top of the window.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCode><span class=SourceLineNumber> 47.</span>
pygame.mouse.set_visible(False)</p>

</div>

<p class=Body>In Dodger, the mouse cursor shouldn’t be visible. This is because
you want the mouse to be able to move the player’s character around the screen,
but the mouse cursor would get in the way of the character’s image on the
screen. Calling <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>pygame.mouse.set_visible(False)</span></span> will tell Pygame to make
the cursor not visible.</p>

<h2><a name="_Toc405145196">Fullscreen Mode</a></h2>

<p class=Body>The <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>pygame.display.set_mode()</span></span> function has a second, optional
parameter. You can pass the <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>pygame.FULLSCREEN</span></span> constant to make the window
take up the entire screen instead of being in a window. Look at this
modification to line 45:</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCode><span class=SourceLineNumber> 45.</span> windowSurface =
pygame.display.set_mode((WINDOWWIDTH, WINDOWHEIGHT), pygame.FULLSCREEN)</p>

</div>

<p class=Body>It will still be <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>WINDOWWIDTH</span></span> and <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>WINDOWHEIGHT</span></span> in size for
the windows width and height, but the image will be stretched larger to fit the
screen. Try running the program wiuth and without fullscreen mode.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber> 49.</span> <span
class=SourceCodeComment># set up fonts</span></p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber> 50.</span> font =
pygame.font.SysFont(None, 48)</p>

</div>

<p class=Body>Line 49 creates a Font object to use by calling <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>pygame.font.SysFont()</span></span>.
Passing <span class=Literal><span style='font-size:9.0pt;line-height:115%'>None</span></span>
uses the default font. Passing <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>48</span></span> makes the font have a size of 48 points.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber> 52.</span> <span
class=SourceCodeComment># set up sounds</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 53.</span> gameOverSound
= pygame.mixer.Sound('gameover.wav')</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber> 54.</span>
pygame.mixer.music.load('background.mid')</p>

</div>

<p class=Body>Next, create the Sound objects and set up the background music.
The background music will constantly be playing during the game, but Sound
objects will only be played when the player loses the game.</p>

<p class=Body>You can use any <em>.wav</em> or <em>.mid</em> file for this
game. Some sound files are available at this book’s website at <span class=URL><u>http://invpy.com/downloads</u></span>.
Or you can use your own sound files for this game, as long as they have the
filenames of <em>gameover.wav</em> and <em>background.mid</em>. (You can change
the strings used on lines 53 and 54 to match the filenames.)</p>

<p class=Body>The <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>pygame.mixer.Sound()</span></span> constructor function creates a new
Sound object and stores a reference to this object in the <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>gameOverSound</span></span> variable.
In your own games, you can create as many Sound objects as you like, each with
a different sound file.</p>

<p class=Body>The <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>pygame.mixer.music.load()</span></span> function loads a sound file to
play for the background music. This function doesn’t return any objects, and
only one background sound file can be loaded at a time.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber> 56.</span> <span
class=SourceCodeComment># set up images</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 57.</span>
playerImage = pygame.image.load('player.png')</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 58.</span>
playerRect = playerImage.get_rect()</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber> 59.</span>
baddieImage = pygame.image.load('baddie.png')</p>

</div>

<p class=Body>Next you’ll load the image files to be used for the player’s
character and the baddies on the screen. The image for the character is stored
in <em>player.png</em> and the image for the baddies is stored in <em>baddie.png</em>.
All the baddies look the same, so you only need one image file for them. You can
download these images from this book’s website at <span class=URL><u>http://invpy.com/downloads</u></span>.</p>

<p class=Non-TOCHeading3>Display the Start Screen</p>

<p class=Body>When the game first starts, display the “Dodger” name on the
screen. You also want to instruct the player that they can start the game by
pushing any key. This screen appears so that the player has time to get ready
to start playing after running the program.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber> 61.</span> <span
class=SourceCodeComment># show the &quot;Start&quot; screen</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 62.</span>
drawText('Dodger', font, windowSurface, (WINDOWWIDTH / 3), (WINDOWHEIGHT / 3))</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 63.</span>
drawText('Press a key to start.', font, windowSurface, (WINDOWWIDTH / 3) - 30,
(WINDOWHEIGHT / 3) + 50)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 64.</span>
pygame.display.update()</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber> 65.</span>
waitForPlayerToPressKey()</p>

</div>

<p class=Body>On lines 62 and 63, call the <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>drawText()</span></span> function and
pass it five arguments:</p>

<p class=Body style='margin-left:.5in;text-indent:-.25in'>1)<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span>The string
of the text you want to appear.</p>

<p class=Body style='margin-left:.5in;text-indent:-.25in'>2)<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span>The font
that you want the string to appear in.</p>

<p class=Body style='margin-left:.5in;text-indent:-.25in'>3)<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span>The
Surface object onto which to render the text.</p>

<p class=Body style='margin-left:.5in;text-indent:-.25in'>4)<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span>The X
coordinate on the Surface object to draw the text at.</p>

<p class=Body style='margin-left:.5in;text-indent:-.25in'>5)<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp; </span>The Y
coordinate on the Surface object to draw the text at.</p>

<p class=Body>This may seem like many arguments to pass for a function call,
but keep in mind that this function call replaces five lines of code each time
you call it. This shortens the program and makes it easier to find bugs since there’s
less code to check.</p>

<p class=Body>The <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>waitForPlayerToPressKey()</span></span> function will pause the game by looping
until a <span class=Literal><span style='font-size:9.0pt;line-height:115%'>KEYDOWN</span></span>
event is generated. Then the execution breaks out of the loop and the program
continues to run.</p>

<p class=Non-TOCHeading3>Start of the Main Game Code</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber> 68.</span> topScore
= 0</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber> 69.</span> while
True:</p>

</div>

<p class=Body>The value in the <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>topScore</span></span> variable starts at <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>0</span></span>
when the program first runs. Whenever the player loses and has a score larger
than the current top score, the top score is replaced with this larger score.</p>

<p class=Body>The infinite loop started on line 69 is technically not the “game
loop”. The game loop handles events and drawing the window while the game is
running. Instead, this <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>while</span></span> loop will iterate each time the player
starts a new game. When the player loses and the game resets, the program’s
execution will loop back to line 69.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber> 70.</span>     <span
class=SourceCodeComment># set up the start of the game</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 71.</span>    
baddies = []</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber> 72.</span>     score
= 0</p>

</div>

<p class=Body>At the beginning, you want to set <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>baddies</span></span> to an empty
list. The <span class=Literal><span style='font-size:9.0pt;line-height:115%'>baddies</span></span>
variable is a list of dictionary objects with the following keys:</p>

<p class=MsoListParagraphCxSpFirst style='text-indent:-.25in'><span
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span class=Literal><span style='font-size:9.0pt;line-height:
115%'>'rect'</span></span> - The Rect object that describes where and what size
the baddie is.</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span class=Literal><span style='font-size:9.0pt;line-height:
115%'>'speed'</span></span> - How fast the baddie falls down the screen. This
integer represents pixels per iteration through the game loop.</p>

<p class=MsoListParagraphCxSpLast style='text-indent:-.25in'><span
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span class=Literal><span style='font-size:9.0pt;line-height:
115%'>'surface'</span></span> - The Surface object that has the scaled baddie
image drawn on it. This is the Surface object that is blitted to the Surface
object returned by <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>pygame.display.set_mode()</span></span>.</p>

<p class=Body>Line 72 resets the player’s score to <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>0</span></span>.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCode><span class=SourceLineNumber> 73.</span>    
playerRect.topleft = (WINDOWWIDTH / 2, WINDOWHEIGHT - 50)</p>

</div>

<p class=Body>The starting location of the player is in the center of the
screen and 50 pixels up from the bottom. The first item in line 73’s tuple is
the X-coordinate of the left edge. The second item in the tuple is the
Y-coordinate of the top edge.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber> 74.</span>    
moveLeft = moveRight = moveUp = moveDown = False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 75.</span>    
reverseCheat = slowCheat = False</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber> 76.</span>    
baddieAddCounter = 0</p>

</div>

<p class=Body>The movement variables <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>moveLeft</span></span>, <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>moveRight</span></span>,
<span class=Literal><span style='font-size:9.0pt;line-height:115%'>moveUp</span></span>,
and <span class=Literal><span style='font-size:9.0pt;line-height:115%'>moveDown</span></span>
are set to <span class=Literal><span style='font-size:9.0pt;line-height:115%'>False</span></span>.
The <span class=Literal><span style='font-size:9.0pt;line-height:115%'>reverseCheat</span></span>
and <span class=Literal><span style='font-size:9.0pt;line-height:115%'>slowCheat</span></span>
variables are also set to <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>False</span></span>. They will be set to <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>True</span></span> only when the
player enables these cheats by holding down the “z” and “x” keys, respectively.</p>

<p class=Body>The <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>baddieAddCounter</span></span> variable is a counter to tell the program
when to add a new baddie at the top of the screen. The value in <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>baddieAddCounter</span></span>
increments by one each time the game loop iterates.</p>

<p class=Body>When <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>baddieAddCounter</span></span> is equal to <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>ADDNEWBADDIERATE</span></span>, then
the <span class=Literal><span style='font-size:9.0pt;line-height:115%'>baddieAddCounter</span></span>
counter resets to 0 and a new baddie is added to the top of the screen. (This
check is done later on line 130.)</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCode><span class=SourceLineNumber> 77.</span>    
pygame.mixer.music.play(-1, 0.0)</p>

</div>

<p class=Body>The background music starts playing on line 77 with a call to <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>pygame.mixer.music.play()</span></span>.
The first argument is the number of times the music should repeat itself. <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>-1</span></span>
is a special value that tells Pygame you want the music to repeat endlessly.</p>

<p class=Body>The second argument is a float that says how many seconds into
the music you want it to start playing. Passing <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>0.0</span></span> means the music
starts playing from the beginning.</p>

<h2><a name="_Toc405145197">The Game Loop</a></h2>

<p class=Body>The game loop’s code constantly updates the state of the game
world by changing the position of the player and baddies, handling events
generated by Pygame, and drawing the game world on the screen. All of this
happens several dozen times a second, which makes it run in “real time”.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber> 79.</span>     while
True: <span class=SourceCodeComment># the game loop runs while the game part is
playing</span></p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber> 80.</span>        
score += 1 <span class=SourceCodeComment># increase score</span></p>

</div>

<p class=Body>Line 79 is the start of the main game loop. Line 80 increases the
player’s score on each iteration of the game loop. The longer the player can go
without losing, the higher their score. The loop will only exit when the player
either loses the game or quits the program.</p>

<h2><a name="_Toc405145198">Event Handling</a></h2>

<p class=Body>There are four different types of events the program will handle:
<span class=Literal><span style='font-size:9.0pt;line-height:115%'>QUIT</span></span>,
<span class=Literal><span style='font-size:9.0pt;line-height:115%'>KEYDOWN</span></span>,
<span class=Literal><span style='font-size:9.0pt;line-height:115%'>KEYUP</span></span>,
and <span class=Literal><span style='font-size:9.0pt;line-height:115%'>MOUSEMOTION</span></span>.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber> 82.</span>        
for event in pygame.event.get():</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 83.</span>            
if event.type == QUIT:</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber> 84.</span>                
terminate()</p>

</div>

<p class=Body>Line 82 is the start of the event-handling code. It calls <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>pygame.event.get()</span></span>,
which returns a list of Event objects. Each Event object represents an event
that has happened since the last call to <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>pygame.event.get()</span></span>. The
code will check the <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>type</span></span> attribute of the event object to see what
type of event it is, and handle the event accordingly.</p>

<p class=Body>If the <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>type</span></span> attribute of the Event object is equal to <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>QUIT</span></span>,
then the user has closed the program. The <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>QUIT</span></span> constant variable
was imported from the <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>pygame.locals</span></span> module.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber> 86.</span>            
if event.type == KEYDOWN:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 87.</span>                
if event.key == ord('z'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 88.</span>                    
reverseCheat = True</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 89.</span>                
if event.key == ord('x'):</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber> 90.</span>                    
slowCheat = True</p>

</div>

<p class=Body>If the event’s type is <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>KEYDOWN</span></span>, the player has
pressed down a key. The Event object for keyboard events will also have a <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>key</span></span>
attribute that is set to the integer ordinal value of the key pressed. The <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>ord()</span></span>
function will return the ordinal value of the letter passed to it.</p>

<p class=Body>For example, line 87 checks if the event describes the “z” key
being pressed down with <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>event.key == ord('z')</span></span>. If this condition is <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>True</span></span>,
set the <span class=Literal><span style='font-size:9.0pt;line-height:115%'>reverseCheat</span></span>
variable to <span class=Literal><span style='font-size:9.0pt;line-height:115%'>True</span></span>
to indicate that the reverse cheat has been activated. Line 89 checks if the
“x” key has been pressed to activate the slow cheat.</p>

<p class=Body>Pygame’s keyboard events always use the ordinal values of
lowercase letters, not uppercase. Always use <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>event.key == ord('z')</span></span>
instead of <span class=Literal><span style='font-size:9.0pt;line-height:115%'>event.key
== ord('Z')</span></span>. Otherwise, your program may act as though the key
wasn’t pressed.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber> 91.</span>                
if event.key == K_LEFT or event.key == ord('a'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 92.</span>                    
moveRight = False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 93.</span>                    
moveLeft = True</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 94.</span>                
if event.key == K_RIGHT or event.key == ord('d'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 95.</span>                    
moveLeft = False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 96.</span>               
     moveRight = True</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 97.</span>                
if event.key == K_UP or event.key == ord('w'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 98.</span>                    
moveDown = False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 99.</span>                    
moveUp = True</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>100.</span>                
if event.key == K_DOWN or event.key == ord('s'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>101.</span>          
          moveUp = False</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>102.</span>                    
moveDown = True</p>

</div>

<p class=Body>Lines 91 to 102 check if the event was generated by the player
pressing one of the arrow or WASD keys. There isn’t an ordinal value for every
key on the keyboard, such as the arrow keys or the <span class=Keycap><span
style='font-variant:normal !important;text-transform:uppercase'>esc</span></span>
key. Instead, the <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>pygame.locals</span></span> module provides constant variables to use
instead.</p>

<p class=Body>Line 91 checks if the player has pressed the left arrow key with <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>event.key ==
K_LEFT</span></span>. Notice that pressing down on one of the arrow keys not
only sets a movement variable to <span class=Literal><span style='font-size:
9.0pt;line-height:115%'>True</span></span>, but it also sets the movement
variable in the opposite direction to <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>False</span></span>.</p>

<p class=Body>For example, if the left arrow key is pushed down, then the code
on line 93 sets <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>moveLeft</span></span> to <span class=Literal><span style='font-size:
9.0pt;line-height:115%'>True</span></span>, but it also sets <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>moveRight</span></span>
to <span class=Literal><span style='font-size:9.0pt;line-height:115%'>False</span></span>.
This prevents the player from confusing the program into thinking that the
player’s character should move in two opposite directions at the same time.</p>

<p class=Body>Table 20-1 lists commonly-used constant variables for the <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>key</span></span>
attribute of keyboard-related Event objects.</p>

<p class=TableListing>Table 20-1: Constant Variables for Keyboard Keys</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td valign=top style='border-top:double windowtext 1.5pt;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=TableHeading>Pygame Constant Variable</p>
  </td>
  <td valign=top style='border-top:double windowtext 1.5pt;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=TableHeading>Keyboard Key</p>
  </td>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=TableHeading>&nbsp;</p>
  </td>
  <td valign=top style='border-top:double windowtext 1.5pt;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=TableHeading>Pygame Constant Variable</p>
  </td>
  <td valign=top style='border-top:double windowtext 1.5pt;border-left:none;
  border-bottom:solid windowtext 1.0pt;border-right:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=TableHeading>Keyboard Key</p>
  </td>
 </tr>
 <tr>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span class=Literal><span style='font-size:9.0pt;
  line-height:115%'>K_LEFT</span></span></p>
  </td>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Left arrow</p>
  </td>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span class=Literal><span style='font-size:9.0pt;
  line-height:115%'>K_HOME</span></span></p>
  </td>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Home</p>
  </td>
 </tr>
 <tr>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span class=Literal><span style='font-size:9.0pt;
  line-height:115%'>K_RIGHT</span></span></p>
  </td>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Right arrow</p>
  </td>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span class=Literal><span style='font-size:9.0pt;
  line-height:115%'>K_END</span></span></p>
  </td>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>End</p>
  </td>
 </tr>
 <tr>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span class=Literal><span style='font-size:9.0pt;
  line-height:115%'>K_UP</span></span></p>
  </td>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Up arrow</p>
  </td>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span class=Literal><span style='font-size:9.0pt;
  line-height:115%'>K_PAGEUP</span></span></p>
  </td>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>PgUp</p>
  </td>
 </tr>
 <tr>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span class=Literal><span style='font-size:9.0pt;
  line-height:115%'>K_DOWN</span></span></p>
  </td>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Down arrow</p>
  </td>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span class=Literal><span style='font-size:9.0pt;
  line-height:115%'>K_PAGEDOWN</span></span></p>
  </td>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>PgDn</p>
  </td>
 </tr>
 <tr>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span class=Literal><span style='font-size:9.0pt;
  line-height:115%'>K_ESCAPE</span></span></p>
  </td>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Esc</p>
  </td>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span class=Literal><span style='font-size:9.0pt;
  line-height:115%'>K_F1</span></span></p>
  </td>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>F1</p>
  </td>
 </tr>
 <tr>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span class=Literal><span style='font-size:9.0pt;
  line-height:115%'>K_BACKSPACE</span></span></p>
  </td>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Backspace</p>
  </td>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span class=Literal><span style='font-size:9.0pt;
  line-height:115%'>K_F2</span></span></p>
  </td>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>F2</p>
  </td>
 </tr>
 <tr>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span class=Literal><span style='font-size:9.0pt;
  line-height:115%'>K_TAB</span></span></p>
  </td>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Tab</p>
  </td>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span class=Literal><span style='font-size:9.0pt;
  line-height:115%'>K_F3</span></span></p>
  </td>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>F3</p>
  </td>
 </tr>
 <tr>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span class=Literal><span style='font-size:9.0pt;
  line-height:115%'>K_RETURN</span></span></p>
  </td>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Return or Enter</p>
  </td>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span class=Literal><span style='font-size:9.0pt;
  line-height:115%'>K_F4</span></span></p>
  </td>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>F4</p>
  </td>
 </tr>
 <tr>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span class=Literal><span style='font-size:9.0pt;
  line-height:115%'>K_SPACE</span></span></p>
  </td>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Space bar</p>
  </td>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span class=Literal><span style='font-size:9.0pt;
  line-height:115%'>K_F5</span></span></p>
  </td>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>F5</p>
  </td>
 </tr>
 <tr>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span class=Literal><span style='font-size:9.0pt;
  line-height:115%'>K_DELETE</span></span></p>
  </td>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Del</p>
  </td>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span class=Literal><span style='font-size:9.0pt;
  line-height:115%'>K_F6</span></span></p>
  </td>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>F6</p>
  </td>
 </tr>
 <tr>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span class=Literal><span style='font-size:9.0pt;
  line-height:115%'>K_LSHIFT</span></span></p>
  </td>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Left Shift</p>
  </td>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span class=Literal><span style='font-size:9.0pt;
  line-height:115%'>K_F7</span></span></p>
  </td>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>F7</p>
  </td>
 </tr>
 <tr>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span class=Literal><span style='font-size:9.0pt;
  line-height:115%'>K_RSHIFT</span></span></p>
  </td>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Right Shift</p>
  </td>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span class=Literal><span style='font-size:9.0pt;
  line-height:115%'>K_F8</span></span></p>
  </td>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>F8</p>
  </td>
 </tr>
 <tr>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span class=Literal><span style='font-size:9.0pt;
  line-height:115%'>K_LCTRL</span></span></p>
  </td>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Left Ctrl</p>
  </td>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span class=Literal><span style='font-size:9.0pt;
  line-height:115%'>K_F9</span></span></p>
  </td>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>F9</p>
  </td>
 </tr>
 <tr>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span class=Literal><span style='font-size:9.0pt;
  line-height:115%'>K_RCTRL</span></span></p>
  </td>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Right Ctrl</p>
  </td>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span class=Literal><span style='font-size:9.0pt;
  line-height:115%'>K_F10</span></span></p>
  </td>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>F10</p>
  </td>
 </tr>
 <tr>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span class=Literal><span style='font-size:9.0pt;
  line-height:115%'>K_LALT</span></span></p>
  </td>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Left Alt</p>
  </td>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span class=Literal><span style='font-size:9.0pt;
  line-height:115%'>K_F11</span></span></p>
  </td>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>F11</p>
  </td>
 </tr>
 <tr>
  <td valign=top style='border:none;border-bottom:double windowtext 1.5pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span class=Literal><span style='font-size:9.0pt;
  line-height:115%'>K_RALT</span></span></p>
  </td>
  <td valign=top style='border:none;border-bottom:double windowtext 1.5pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Right Alt</p>
  </td>
  <td valign=top style='border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>&nbsp;</p>
  </td>
  <td valign=top style='border:none;border-bottom:double windowtext 1.5pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span class=Literal><span style='font-size:9.0pt;
  line-height:115%'>K_F12</span></span></p>
  </td>
  <td valign=top style='border:none;border-bottom:double windowtext 1.5pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>F12</p>
  </td>
 </tr>
</table>

<p class=MsoNormal>&nbsp;</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>104.</span>            
if event.type == KEYUP:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>105.</span>                
if event.key == ord('z'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>106.</span>                    
reverseCheat = False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>107.</span>                    
score = 0</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>108.</span>                
if event.key == ord('x'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>109.</span>                    
slowCheat = False</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>110.</span>                    
score = 0</p>

</div>

<p class=Body>The <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>KEYUP</span></span> event is created whenever the player stops pressing
down on a keyboard key and releases it. Event objects with a type of <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>KEYUP</span></span>
also have a <span class=Literal><span style='font-size:9.0pt;line-height:115%'>key</span></span>
attribute just like <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>KEYDOWN</span></span> events.</p>

<p class=Body>Line 105 checks if the player has released the “z” key, which
will deactivate the reverse cheat. In that case, line 106 sets <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>reverseCheat</span></span>
to <span class=Literal><span style='font-size:9.0pt;line-height:115%'>False</span></span>
and line 107 resets the score to <span class=Literal><span style='font-size:
9.0pt;line-height:115%'>0</span></span>. The score reset is to discourage the
player for using the cheats.</p>

<p class=Body>Lines 108 to 110 do the same thing for the “x” key and the slow
cheat. When the “x” key is released, <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>slowCheat</span></span> is set to <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>False</span></span>
and the player’s score is reset to <span class=Literal><span style='font-size:
9.0pt;line-height:115%'>0</span></span>.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>111.</span>                
if event.key == K_ESCAPE:</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>112.</span>                
        terminate()</p>

</div>

<p class=Body>At any time during the game, the player can press the <span
class=Keycap><span style='font-variant:normal !important;text-transform:uppercase'>esc</span></span>
key on the keyboard to quit. Line 14 checks if the key that was released was
the <span class=Keycap><span style='font-variant:normal !important;text-transform:
uppercase'>esc</span></span> key by checking <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>event.key == K_ESCAPE</span></span>.
If so, line 112 calls the <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>terminate()</span></span> function to exit the program.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>114.</span>                
if event.key == K_LEFT or event.key == ord('a'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>115.</span>                    
moveLeft = False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>116.</span>                
if event.key == K_RIGHT or event.key == ord('d'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>117.</span>                    
moveRight = False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>118.</span>           
     if event.key == K_UP or event.key == ord('w'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>119.</span>                    
moveUp = False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>120.</span>                
if event.key == K_DOWN or event.key == ord('s'):</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>121.</span>                    
moveDown = False</p>

</div>

<p class=Body>Lines 114 to 121 check if the player has stopped holding down one
of the arrow or WASD keys. In that case, the code sets the corresponding
movement variable to <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>False</span></span>.</p>

<p class=Body>For example, if the player was holding down the left arrow key,
then the <span class=Literal><span style='font-size:9.0pt;line-height:115%'>moveLeft</span></span>
would have been set to <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>True</span></span> on line 93. When they release it, the
condition on line 114 will evaluate to <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>True</span></span>, and the <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>moveLeft</span></span>
variable will be set to <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>False</span></span>.</p>

<h2><a name="_Toc405145199">The </a><span class=Literal><span style='font-size:
9.0pt;line-height:115%'>move_ip()</span></span> Method</h2>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>123.</span>            
if event.type == MOUSEMOTION:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>124.</span>                
<span class=SourceCodeComment># If the mouse moves, move the player where the
cursor is.</span></p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>125.</span>                 playerRect.move_ip(event.pos[0]
- playerRect.centerx, event.pos[1] - playerRect.centery)</p>

</div>

<p class=Body>Now that you’ve handled the keyboard events, let’s handle any
mouse events that may have been generated. The Dodger game doesn’t do anything
if the player has clicked a mouse button, but it does respond when the player
moves the mouse. This gives the player two ways of controlling the player
character in the game: the keyboard or the mouse.</p>

<p class=Body>The <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>MOUSEMOTION</span></span> event is generated whenever the mouse is moved.
Event objects with a <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>type</span></span> set to <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>MOUSEMOTION</span></span> also have an
attribute named <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>pos</span></span> for the position of the mouse event. The <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>pos</span></span>
attribute stores a tuple of the X- and Y-coordinates of where the mouse cursor
moved in the window. If the event’s type is <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>MOUSEMOTION</span></span>, the
player’s character moves to the position of the mouse cursor.</p>

<p class=Body>The <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>move_ip()</span></span> method for Rect objects will move the location of
the Rect object horizontally or vertically by a number of pixels. For example, <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>playerRect.move_ip(10,
20)</span></span> would move the Rect object 10 pixels to the right and 20
pixels down. To move the Rect object left or up, pass negative values. For
example, <span class=Literal><span style='font-size:9.0pt;line-height:115%'>playerRect.move_ip(-5,
-15)</span></span> will move the Rect object left by 5 pixels and up 15 pixels.</p>

<p class=Body>The “ip” at the end of <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>move_ip()</span></span> stands for “in
place”. This is because the method changes the Rect object itself, rather than
return a new Rect object with the changes. There is also a <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>move()</span></span> method which
doesn’t change the Rect object, but instead creates and returns a new Rect
object in the new location.</p>

<p class=Non-TOCHeading3>Adding New Baddies</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>127.</span>         <span
class=SourceCodeComment># Add new baddies at the top of the screen, if needed.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>128.</span>        
if not reverseCheat and not slowCheat:</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>129.</span>            
baddieAddCounter += 1</p>

</div>

<p class=Body>On each iteration of the game loop, increment the <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>baddieAddCounter</span></span>
variable by one. This only happens if the cheats are not enabled. Remember that
<span class=Literal><span style='font-size:9.0pt;line-height:115%'>reverseCheat</span></span>
and <span class=Literal><span style='font-size:9.0pt;line-height:115%'>slowCheat</span></span>
are set to <span class=Literal><span style='font-size:9.0pt;line-height:115%'>True</span></span>
as long as the “z” and “x” keys are being held down, respectively</p>

<p class=Body>And while those keys are being held down, <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>baddieAddCounter</span></span> isn’t
incremented. Therefore, no new baddies will appear at the top of the screen.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>130.</span>        
if baddieAddCounter == ADDNEWBADDIERATE:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>131.</span>            
baddieAddCounter = 0</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>132.</span>            
baddieSize = random.randint(BADDIEMINSIZE, BADDIEMAXSIZE)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>133.</span>            
newBaddie = {'rect': pygame.Rect(random.randint(0, WINDOWWIDTH-baddieSize), 0 -
baddieSize, baddieSize, baddieSize),</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>134.</span>                        
'speed': random.randint(BADDIEMINSPEED, BADDIEMAXSPEED),</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>135.</span>                        
'surface':pygame.transform.scale(baddieImage, (baddieSize, baddieSize)),</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>136.</span>                        
}</p>

</div>

<p class=Body>When the <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>baddieAddCounter</span></span> reaches the value in <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>ADDNEWBADDIERATE</span></span>,
it is time to add a new baddie to the top of the screen. First, the <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>baddieAddCounter</span></span>
counter is reset back to <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>0</span></span>.</p>

<p class=Body>Line 132 generates a size for the baddie in pixels. The size will
be a random integer between <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>BADDIEMINSIZE</span></span> and <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>BADDIEMAXSIZE</span></span>, which are
constants set to <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>10</span></span> and <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>40</span></span> on lines 9 and 10.</p>

<p class=Body>Line 133 is where a new baddie data structure is created.
Remember, the data structure for <span class=Literal><span style='font-size:
9.0pt;line-height:115%'>baddies</span></span> is simply a dictionary with keys <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>'rect'</span></span>,
<span class=Literal><span style='font-size:9.0pt;line-height:115%'>'speed'</span></span>,
and <span class=Literal><span style='font-size:9.0pt;line-height:115%'>'surface'</span></span>.
The <span class=Literal><span style='font-size:9.0pt;line-height:115%'>'rect'</span></span>
key holds a reference to a Rect object which stores the location and size of
the baddie. The call to the <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>pygame.Rect()</span></span> constructor function has four
parameters: the X-coordinate of the top edge of the area, the Y-coordinate of
the left edge of the area, the width in pixels, and the height in pixels.</p>

<p class=Body>The baddie needs to appear randomly across the top of the window,
so pass <span class=Literal><span style='font-size:9.0pt;line-height:115%'>random.randint(0,
WINDOWWIDTH-baddieSize)</span></span> for the X-coordinate of the left edge.
The reason you pass <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>WINDOWWIDTH-baddieSize</span></span> instead of <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>WINDOWWIDTH</span></span>
is because this value is for the left edge of the baddie. If the left edge of
the baddie is too far on the right side of the screen, then part of the baddie
will be off the edge of the window and not visible.</p>

<p class=Body>The bottom edge of the baddie should be just above the top edge
of the window. The Y-coordinate of the top edge of the window is 0. To put the
baddie’s bottom edge there, set the top edge to <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>0 - baddieSize</span></span>.</p>

<p class=Body>The baddie’s width and height should be the same (the image is a
square), so pass <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>baddieSize</span></span> for the third and fourth argument.</p>

<p class=Body>The rate of speed that the baddie moves down the screen is set in
the <span class=Literal><span style='font-size:9.0pt;line-height:115%'>'speed'</span></span>
key. Set it to a random integer between <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>BADDIEMINSPEED</span></span> and <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>BADDIEMAXSPEED</span></span>.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCode><span class=SourceLineNumber>138.</span>            
baddies.append(newBaddie)</p>

</div>

<p class=Body>Line 138 will add the newly created baddie data structure to the
list of baddie data structures. The program will use this list to check if the
player has collided with any of the baddies, and to know where to draw baddies
on the window.</p>

<p class=Non-TOCHeading3>Moving the Player’s Character</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>140.</span>         <span
class=SourceCodeComment># Move the player around.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>141.</span>        
if moveLeft and playerRect.left &gt; 0:</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>142.</span>            
playerRect.move_ip(-1 * PLAYERMOVERATE, 0)</p>

</div>

<p class=Body>The four movement variables <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>moveLeft</span></span>, <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>moveRight</span></span>,
<span class=Literal><span style='font-size:9.0pt;line-height:115%'>moveUp</span></span>
and <span class=Literal><span style='font-size:9.0pt;line-height:115%'>moveDown</span></span>
are set to <span class=Literal><span style='font-size:9.0pt;line-height:115%'>True</span></span>
and <span class=Literal><span style='font-size:9.0pt;line-height:115%'>False</span></span>
when Pygame generates the <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>KEYDOWN</span></span> and <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>KEYUP</span></span> events,
respectively.</p>

<p class=Body>If the player’s character is moving left and the left edge of the
player’s character is greater than <span class=Literal><span style='font-size:
9.0pt;line-height:115%'>0</span></span> (which is the left edge of the window),
then <span class=Literal><span style='font-size:9.0pt;line-height:115%'>playerRect</span></span>
should be moved to the left.</p>

<p class=Body>You’ll always move the <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>playerRect</span></span> object by the
number of pixels in <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>PLAYERMOVERATE</span></span>. To get the negative form of an
integer, multiple it by <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>-1</span></span>. On line 142, since <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>5</span></span> is stored in <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>PLAYERMOVERATE</span></span>,
the expression <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>-1 * PLAYERMOVERATE</span></span> evaluates to <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>-5</span></span>.</p>

<p class=Body>Therefore, calling <span class=Literal><span style='font-size:
9.0pt;line-height:115%'>playerRect.move_ip(-1 * PLAYERMOVERATE, 0)</span></span>
will change the location of <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>playerRect</span></span> by 5 pixels to the left of its
current location.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>143.</span>        
if moveRight and playerRect.right &lt; WINDOWWIDTH:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>144.</span>            
playerRect.move_ip(PLAYERMOVERATE, 0)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>145.</span>        
if moveUp and playerRect.top &gt; 0:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>146.</span>            
playerRect.move_ip(0, -1 * PLAYERMOVERATE)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>147.</span>        
if moveDown and playerRect.bottom &lt; WINDOWHEIGHT:</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>148.</span>            
playerRect.move_ip(0, PLAYERMOVERATE)</p>

</div>

<p class=Body>Lines 143 to 148 do the same thing for the other three
directions: right, up, and down. Each of the three <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>if</span></span> statements in lines
143 to 148 checks that their movement variable is set to <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>True</span></span> and that the edge
of the Rect object of the player is inside the window. Then it calls <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>move_ip()</span></span>
to move the Rect object.</p>

<h2><a name="_Toc405145200">The </a><span class=Literal><span style='font-size:
9.0pt;line-height:115%'>pygame.mouse.set_pos()</span></span> Function</h2>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>150.</span>         <span
class=SourceCodeComment># Move the mouse cursor to match the player.</span></p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>151.</span>        
pygame.mouse.set_pos(playerRect.centerx, playerRect.centery)</p>

</div>

<p class=Body>Line 151 moves the mouse cursor to the same position as the
player’s character. The <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>pygame.mouse.set_pos()</span></span> function moves the mouse
cursor to the X- and Y-coordinates you pass it. This is so that the mouse
cursor and player’s character are always in the same place.</p>

<p class=Body>Specifically, the cursor will be right in the middle of the
character’s Rect object because you passed the <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>centerx</span></span> and <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>centery</span></span>
attributes of <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>playerRect</span></span> for the coordinates. The mouse cursor still
exists and can be moved, even though it is invisible because of the <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>pygame.mouse.set_visible(False)</span></span>
call on line 47.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>153.</span>         <span
class=SourceCodeComment># Move the baddies down.</span></p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>154.</span>        
for b in baddies:</p>

</div>

<p class=Body>Now loop through each baddie data structure in the <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>baddies</span></span>
list to move them down a little.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>155.</span>             if
not reverseCheat and not slowCheat:</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>156.</span>                
b['rect'].move_ip(0, b['speed'])</p>

</div>

<p class=Body>If neither of the cheats have been activated, then move the
baddie’s location down a number of pixels equal to its speed, which is stored
in the <span class=Literal><span style='font-size:9.0pt;line-height:115%'>'speed'</span></span>
key.</p>

<p class=Non-TOCHeading3>Implementing the Cheat Codes</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>157.</span>            
elif reverseCheat:</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>158.</span>                
b['rect'].move_ip(0, -5)</p>

</div>

<p class=Body>If the reverse cheat is activated, then the baddie should move up
by five pixels. Passing <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>-5</span></span> for the second argument to <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>move_ip()</span></span>
will move the Rect object upwards by five pixels.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>159.</span>            
elif slowCheat:</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>160.</span>                
b['rect'].move_ip(0, 1)</p>

</div>

<p class=Body>If the slow cheat has been activated, then the baddie should move
downwards, but only by the slow speed of one pixel per iteration through the
game loop. The baddie’s normal speed (which is stored in the <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>'speed'</span></span>
key of the baddie’s data structure) is ignored while the slow cheat is
activated.</p>

<p class=Non-TOCHeading3>Removing the Baddies</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>162.</span>         <span
class=SourceCodeComment># Delete baddies that have fallen past the bottom.</span></p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>163.</span>         for
b in baddies[:]:</p>

</div>

<p class=Body>Any baddies that fell below the bottom edge of the window should
be removed from the <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>baddies</span></span> list. Remember that while iterating
through a list, do not modify the contents of the list by adding or removing
items. So instead of iterating through the <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>baddies</span></span> list with the <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>for</span></span>
loop, iterate through a copy of the <span class=Literal><span style='font-size:
9.0pt;line-height:115%'>baddies</span></span> list. This copy is made with the
blank slicing operator <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>[:]</span></span>.</p>

<p class=Body>The <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>for</span></span> loop on line 163 uses a variable <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>b</span></span> for the current item
in the iteration through <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>baddies[:]</span></span>.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>164.</span>             if
b['rect'].top &gt; WINDOWHEIGHT:</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>165.</span>                
baddies.remove(b)</p>

</div>

<p class=Body>Let’s evaluate the expression <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>b['rect'].top</span></span>. <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>b</span></span> is
the current baddie data structure from the <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>baddies[:]</span></span> list. Each
baddie data structure in the list is a dictionary with a <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>'rect'</span></span> key, which stores
a Rect object. So <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>b['rect']</span></span> is the Rect object for the baddie.</p>

<p class=Body>Finally, the <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>top</span></span> attribute is the Y-coordinate of the top
edge of the rectangular area. Remember that the Y-coordinates increase going
down. So <span class=Literal><span style='font-size:9.0pt;line-height:115%'>b['rect'].top
&gt; WINDOWHEIGHT</span></span> will check if the top edge of the baddie is
below the bottom of the window.</p>

<p class=Body>If this condition is <span class=Literal><span style='font-size:
9.0pt;line-height:115%'>True</span></span>, then line 165 removes the baddie
data structure from the <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>baddies</span></span> list.</p>

<p class=Non-TOCHeading3>Drawing the Window</p>

<p class=Body>After all the data structures have been updated, the game world should
be drawn using Pygame’s image functions. Because the game loop is executed
several times a second, drawing the baddies and player in new positions makes
their movement look smooth and natural.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>167.</span>         <span
class=SourceCodeComment># Draw the game world on the window.</span></p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>168.</span>         windowSurface.fill(BACKGROUNDCOLOR)</p>

</div>

<p class=Body>First, before drawing anything else, line 168 blacks out the
entire screen to erase anything drawn on it previously.</p>

<p class=Body>Remember that the Surface object in <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>windowSurface</span></span> is the
special Surface object because it was the one returned by <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>pygame.display.set_mode()</span></span>.
Therefore, anything drawn on that Surface object will appear on the screen
after <span class=Literal><span style='font-size:9.0pt;line-height:115%'>pygame.display.update()</span></span>
is called.</p>

<p class=Non-TOCHeading3>Drawing the Player’s Score</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>170.</span>         <span
class=SourceCodeComment># Draw the score and top score.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>171.</span>        
drawText('Score: %s' % (score), font, windowSurface, 10, 0)</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>172.</span>        
drawText('Top Score: %s' % (topScore), font, windowSurface, 10, 40)</p>

</div>

<p class=Body>Lines 171 and 172 render the text for the score and top score to
the top left corner of the window. The <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>'Score: %s' % (score)</span></span> expression
uses string interpolation to insert the value in the <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>score</span></span> variable into the
string.</p>

<p class=Body>Pass this string, the Font object stored in the <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>font</span></span>
variable, the Surface object on which to draw the text on, and the X- and
Y-coordinates of where the text should be placed. The <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>drawText()</span></span> will handle
the call to the <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>render()</span></span> and <span class=Literal><span style='font-size:
9.0pt;line-height:115%'>blit()</span></span> methods.</p>

<p class=Body>For the top score, do the same thing. Pass <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>40</span></span> for the Y-coordinate
instead of <span class=Literal><span style='font-size:9.0pt;line-height:115%'>0</span></span>
so that the top score text appears beneath the score text.</p>

<p class=Body>&nbsp;</p>

<p class=Body>&nbsp;</p>

<p class=Non-TOCHeading3>Drawing the Player’s Character</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>174.</span>         <span
class=SourceCodeComment># Draw the player's rectangle</span></p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>175.</span>        
windowSurface.blit(playerImage, playerRect)</p>

</div>

<p class=Body>The information about the player is kept in two different
variables. <span class=Literal><span style='font-size:9.0pt;line-height:115%'>playerImage</span></span>
is a Surface object that contains all the colored pixels that make up the
player’s character’s image. <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>playerRect</span></span> is a Rect object that stores the
information about the size and location of the player’s character.</p>

<p class=Body>The <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>blit()</span></span> method draws the player character’s image (in <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>playerImage</span></span>)
on <span class=Literal><span style='font-size:9.0pt;line-height:115%'>windowSurface</span></span>
at the location in <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>playerRect</span></span>.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>177.</span>         <span
class=SourceCodeComment># Draw each baddie</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>178.</span>        
for b in baddies:</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>179.</span>            
windowSurface.blit(b['surface'], b['rect'])</p>

</div>

<p class=Body>Line 178’s <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>for</span></span> loop draws every baddie on the <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>windowSurface</span></span>
object. Each item in the <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>baddies</span></span> list is a dictionary. The dictionaries’
<span class=Literal><span style='font-size:9.0pt;line-height:115%'>'surface'</span></span>
and <span class=Literal><span style='font-size:9.0pt;line-height:115%'>'rect'</span></span>
keys contain the Surface object with the baddie image and the Rect object with
the position and size information, respectively.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCode><span class=SourceLineNumber>181.</span>        
pygame.display.update()</p>

</div>

<p class=Body>Now that everything has been drawn to <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>windowSurface</span></span>, draw this
Surface object to the screen by calling <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>pygame.display.update()</span></span>.</p>

<p class=Non-TOCHeading3>Collision Detection</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>183.</span>         <span
class=SourceCodeComment># Check if any of the baddies have hit the player.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>184.</span>        
if playerHasHitBaddie(playerRect, baddies):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>185.</span>            
if score &gt; topScore:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>186.</span>         
       topScore = score <span class=SourceCodeComment># set new top score</span></p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>187.</span>            
break</p>

</div>

<p class=Body>Lines 184 checks if the player has collided with any baddies by
calling <span class=Literal><span style='font-size:9.0pt;line-height:115%'>playerHasHitBaddie()</span></span>.
This function will return <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>True</span></span> if the player’s character has collided
with any of the baddies in the <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>baddies</span></span> list. Otherwise, the function will
return <span class=Literal><span style='font-size:9.0pt;line-height:115%'>False</span></span>.</p>

<p class=Body>If the player’s character has hit a baddie, lines 185 and 186
update the top score if the current score is greater than it. Then the
execution breaks out of the game loop at line 187. The program’s execution will
move to line 191.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCode><span class=SourceLineNumber>189.</span>        
mainClock.tick(FPS)</p>

</div>

<p class=Body>To keep the computer from running through the game loop as fast
as possible (which would be much too fast for the player to keep up with), call
<span class=Literal><span style='font-size:9.0pt;line-height:115%'>mainClock.tick()</span></span>
to pause for a brief amount of time. The pause will be long enough to ensure
that about <span class=Literal><span style='font-size:9.0pt;line-height:115%'>40</span></span>
(the value stored inside the <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>FPS</span></span> variable) iterations through the game loop
occur each second.</p>

<p class=Non-TOCHeading3>The Game Over Screen</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>191.</span>     <span
class=SourceCodeComment># Stop the game and show the &quot;Game Over&quot;
screen.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>192.</span>    
pygame.mixer.music.stop()</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>193.</span>    
gameOverSound.play()</p>

</div>

<p class=Body>When the player loses, the game stops playing the background
music and plays the “game over” sound effect. Line 192 calls the <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>stop()</span></span>
function in the <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>pygame.mixer.music</span></span> module to stop the background music. Line
193 calls the <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>play()</span></span> method on the Sound object stored in <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>gameOverSound</span></span>.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>195.</span>    
drawText('GAME OVER', font, windowSurface, (WINDOWWIDTH / 3), (WINDOWHEIGHT /
3))</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>196.</span>    
drawText('Press a key to play again.', font, windowSurface, (WINDOWWIDTH / 3) -
80, (WINDOWHEIGHT / 3) + 50)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>197.</span>    
pygame.display.update()</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>198.</span>    
waitForPlayerToPressKey()</p>

</div>

<p class=Body>Lines 195 and 196 call the <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>drawText()</span></span> function to
draw the “game over” text to the <span class=Literal><span style='font-size:
9.0pt;line-height:115%'>windowSurface</span></span> object. Line 197 calls <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>pygame.display.update()</span></span>
to draw this Surface object to the screen. After displaying this text, the game
stops until the player presses a key by calling the <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>waitForPlayerToPressKey()</span></span>
function.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCode><span class=SourceLineNumber>200.</span>    
gameOverSound.stop()</p>

</div>

<p class=Body>After the player presses a key, the program execution will return
from the <span class=Literal><span style='font-size:9.0pt;line-height:115%'>waitForPlayerToPressKey()</span></span>
call on line 198. Depending on how long the player takes to press a key, the
“game over” sound effect may or may not still be playing. To stop this sound
effect before a new game starts, line 200 calls <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>gameOverSound.stop()</span></span>.</p>

<h2><a name="_Toc405145201">Modifying the Dodger Game</a></h2>

<p class=Body>That’s it for our graphical game. You may find that the game is
too easy or too hard. But the game is easy to modify because we took the time
to use constant variables instead of typing in the values directly. Now all we
need to do to change the game is modify the value set in the constant
variables.</p>

<p class=Body>For example, if you want the game to run slower in general,
change the <span class=Literal><span style='font-size:9.0pt;line-height:115%'>FPS</span></span>
variable on line 8 to a smaller value such as <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>20</span></span>. This will make both
the baddies and the player’s character move slower since the game loop will
only be executed <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>20</span></span> times a second instead of <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>40</span></span>.</p>

<p class=Body>If you just want to slow down the baddies and not the player,
then change <span class=Literal><span style='font-size:9.0pt;line-height:115%'>BADDIEMAXSPEED</span></span>
to a smaller value such as <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>4</span></span>. This will make all the baddies move between
1 (the value in <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>BADDIEMINSPEED</span></span>) and 4 pixels per iteration through the game
loop instead of 1 and 8.</p>

<p class=Body>If you want the game to have fewer but larger baddies instead of
many fast baddies, then increase <span class=Literal><span style='font-size:
9.0pt;line-height:115%'>ADDNEWBADDIERATE</span></span> to <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>12</span></span>, <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>BADDIEMINSIZE</span></span> to <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>40</span></span>,
and <span class=Literal><span style='font-size:9.0pt;line-height:115%'>BADDIEMAXSIZE</span></span>
to <span class=Literal><span style='font-size:9.0pt;line-height:115%'>80</span></span>.
Now that baddies are being added every 12 iterations through the game loop
instead of every 6 iterations, there will be half as many baddies as before.
But to keep the game interesting, the baddies are now much larger than before.</p>

<p class=Body>While the basic game remains the same, you can modify any of the
constant variables to drastically affect the behavior of the game. Keep trying
out new values for the constant variables until you find a set of values you
like the best.</p>

<p class=Non-TOCHeading3>Summary</p>

<p class=Body>Unlike our previous text-based games, Dodger really looks like
the kind of modern computer game we usually play. It has graphics and music and
uses the mouse. While Pygame provides functions and data types as building
blocks, it is you the programmer who puts them together to create fun, interactive
games.</p>

<p class=Body>And it is all because you know how to instruct the computer to do
it, step by step, line by line. You can speak the computer’s language, and get
it to do large amounts of number crunching and drawing for you. This is a
useful skill, and I hope you’ll continue to learn more about Python
programming. (And there’s still much more to learn!)</p>

<p class=Body>Here are several websites that can teach you more about
programming Python:</p>

<p class=MsoListParagraphCxSpFirst style='text-indent:-.25in'><span
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span class=URL><u>http://reddit.com/r/inventwithpython</u></span>
– This site has several users who could help you with the material in this book.</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span class=URL><u>http://inventwithpython.com</u></span> - This
book’s website, which includes all the source code for these programs and
additional information. This site also has the image and sound files used in
the Pygame programs.</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span class=URL><u>http://inventwithpython.com/pygame</u></span>
– My second book, <em>Making Games with Python &amp; Pygame</em>, which covers Pygame
in more detail. It’s free to download and has the source code for many more
games.</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span class=URL><u>http://inventwithpython.com/hacking</u></span>
– My third book, <em>Hacking Secret Ciphers with Python</em>, which covers more
cryptography and code breaking programs. It’s also free to download.</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span class=URL><u>http://inventwithpython.com/automate</u></span>
– My fourth book, <em>Automate the Boring Stuff with Python</em>, which teaches
you practical programming skills. It’s also free to download.</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span class=URL><u>http://python.org/doc/</u></span> - More
Python tutorials and the documentation of all the Python modules and functions.</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span><span class=URL><u>http://pygame.org/docs/</u></span> - Complete
documentation on the modules and functions for Pygame.</p>

<p class=MsoListParagraphCxSpLast style='text-indent:-.25in'><span
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>al@inventwithpython.com - My email address. Feel free to email me
your questions about this book or about Python programming.</p>

<p class=Body>Or you can find out more about Python by searching the web. Go to
<span class=URL><u>http://google.com</u></span> and search for “Python
programming” or “Python tutorials” to find websites that can teach you more
about Python programming.</p>

<p class=MsoNormal>Now get going and invent your own games. And good luck!</p>

</div>

</body>

</html>
