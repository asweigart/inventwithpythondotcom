<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=UTF-8">
<meta name=Generator content="Microsoft Word 14 (filtered)">
<style>
<!--
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:0in;
	line-height:115%;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";}
h1
	{mso-style-link:"Heading 1 Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:15.0pt;
	margin-left:0in;
	border:none;
	padding:0in;
	font-size:36.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";
	font-variant:small-caps;
	color:black;
	letter-spacing:.25pt;
	font-weight:normal;}
h1.CxSpFirst
	{mso-style-link:"Heading 1 Char";
	margin:0in;
	margin-bottom:.0001pt;
	border:none;
	padding:0in;
	font-size:36.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";
	font-variant:small-caps;
	color:black;
	letter-spacing:.25pt;
	font-weight:normal;}
h1.CxSpMiddle
	{mso-style-link:"Heading 1 Char";
	margin:0in;
	margin-bottom:.0001pt;
	border:none;
	padding:0in;
	font-size:36.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";
	font-variant:small-caps;
	color:black;
	letter-spacing:.25pt;
	font-weight:normal;}
h1.CxSpLast
	{mso-style-link:"Heading 1 Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:15.0pt;
	margin-left:0in;
	border:none;
	padding:0in;
	font-size:36.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";
	font-variant:small-caps;
	color:black;
	letter-spacing:.25pt;
	font-weight:normal;}
h2
	{mso-style-link:"Heading 2 Char";
	margin-top:10.0pt;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"Cambria","serif";
	color:black;}
h3
	{mso-style-link:"Heading 3 Char";
	margin-top:10.0pt;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	page-break-after:avoid;
	font-size:12.0pt;
	font-family:"Cambria","serif";
	color:#4F81BD;}
p.MsoToc1, li.MsoToc1, div.MsoToc1
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:0in;
	line-height:115%;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";}
p.MsoToc2, li.MsoToc2, div.MsoToc2
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:11.0pt;
	line-height:115%;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";}
p.MsoToc3, li.MsoToc3, div.MsoToc3
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:22.0pt;
	line-height:115%;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";}
p.MsoToc4, li.MsoToc4, div.MsoToc4
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:33.0pt;
	line-height:115%;
	font-size:12.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoToc5, li.MsoToc5, div.MsoToc5
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:44.0pt;
	line-height:115%;
	font-size:12.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoToc6, li.MsoToc6, div.MsoToc6
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:55.0pt;
	line-height:115%;
	font-size:12.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoToc7, li.MsoToc7, div.MsoToc7
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:66.0pt;
	line-height:115%;
	font-size:12.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoToc8, li.MsoToc8, div.MsoToc8
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:77.0pt;
	line-height:115%;
	font-size:12.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoToc9, li.MsoToc9, div.MsoToc9
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:88.0pt;
	line-height:115%;
	font-size:12.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoCommentText, li.MsoCommentText, div.MsoCommentText
	{mso-style-link:"Comment Text Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:0in;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";}
p.MsoHeader, li.MsoHeader, div.MsoHeader
	{mso-style-link:"Header Char";
	margin:0in;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";}
p.MsoFooter, li.MsoFooter, div.MsoFooter
	{mso-style-link:"Footer Char";
	margin:0in;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";}
p.MsoCaption, li.MsoCaption, div.MsoCaption
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:0in;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";
	color:#4F81BD;
	font-weight:bold;}
p.MsoTitle, li.MsoTitle, div.MsoTitle
	{mso-style-link:"Title Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:15.0pt;
	margin-left:0in;
	border:none;
	padding:0in;
	font-size:48.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";
	color:black;
	letter-spacing:.25pt;}
p.MsoTitleCxSpFirst, li.MsoTitleCxSpFirst, div.MsoTitleCxSpFirst
	{mso-style-link:"Title Char";
	margin:0in;
	margin-bottom:.0001pt;
	border:none;
	padding:0in;
	font-size:48.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";
	color:black;
	letter-spacing:.25pt;}
p.MsoTitleCxSpMiddle, li.MsoTitleCxSpMiddle, div.MsoTitleCxSpMiddle
	{mso-style-link:"Title Char";
	margin:0in;
	margin-bottom:.0001pt;
	border:none;
	padding:0in;
	font-size:48.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";
	color:black;
	letter-spacing:.25pt;}
p.MsoTitleCxSpLast, li.MsoTitleCxSpLast, div.MsoTitleCxSpLast
	{mso-style-link:"Title Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:15.0pt;
	margin-left:0in;
	border:none;
	padding:0in;
	font-size:48.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";
	color:black;
	letter-spacing:.25pt;}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;}
p.MsoCommentSubject, li.MsoCommentSubject, div.MsoCommentSubject
	{mso-style-link:"Comment Subject Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:0in;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";
	font-weight:bold;}
p.MsoAcetate, li.MsoAcetate, div.MsoAcetate
	{mso-style-link:"Balloon Text Char";
	margin:0in;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:"Tahoma","sans-serif";}
span.MsoPlaceholderText
	{color:gray;}
p.MsoRMPane, li.MsoRMPane, div.MsoRMPane
	{margin:0in;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";}
p.MsoListParagraph, li.MsoListParagraph, div.MsoListParagraph
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:.5in;
	line-height:115%;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";}
p.MsoListParagraphCxSpFirst, li.MsoListParagraphCxSpFirst, div.MsoListParagraphCxSpFirst
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.5in;
	margin-bottom:.0001pt;
	line-height:115%;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";}
p.MsoListParagraphCxSpMiddle, li.MsoListParagraphCxSpMiddle, div.MsoListParagraphCxSpMiddle
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.5in;
	margin-bottom:.0001pt;
	line-height:115%;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";}
p.MsoListParagraphCxSpLast, li.MsoListParagraphCxSpLast, div.MsoListParagraphCxSpLast
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:.5in;
	line-height:115%;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";}
p.MsoTocHeading, li.MsoTocHeading, div.MsoTocHeading
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:15.0pt;
	margin-left:0in;
	border:none;
	padding:0in;
	font-size:36.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";
	font-variant:small-caps;
	color:black;
	letter-spacing:.25pt;}
p.MsoTocHeadingCxSpFirst, li.MsoTocHeadingCxSpFirst, div.MsoTocHeadingCxSpFirst
	{margin:0in;
	margin-bottom:.0001pt;
	border:none;
	padding:0in;
	font-size:36.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";
	font-variant:small-caps;
	color:black;
	letter-spacing:.25pt;}
p.MsoTocHeadingCxSpMiddle, li.MsoTocHeadingCxSpMiddle, div.MsoTocHeadingCxSpMiddle
	{margin:0in;
	margin-bottom:.0001pt;
	border:none;
	padding:0in;
	font-size:36.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";
	font-variant:small-caps;
	color:black;
	letter-spacing:.25pt;}
p.MsoTocHeadingCxSpLast, li.MsoTocHeadingCxSpLast, div.MsoTocHeadingCxSpLast
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:15.0pt;
	margin-left:0in;
	border:none;
	padding:0in;
	font-size:36.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";
	font-variant:small-caps;
	color:black;
	letter-spacing:.25pt;}
span.Heading1Char
	{mso-style-name:"Heading 1 Char";
	mso-style-link:"Heading 1";
	font-family:"Franklin Gothic Demi","sans-serif";
	font-variant:small-caps;
	color:black;
	letter-spacing:.25pt;}
span.Heading2Char
	{mso-style-name:"Heading 2 Char";
	mso-style-link:"Heading 2";
	font-family:"Cambria","serif";
	color:black;
	font-weight:bold;}
span.Heading3Char
	{mso-style-name:"Heading 3 Char";
	mso-style-link:"Heading 3";
	font-family:"Cambria","serif";
	color:#4F81BD;
	font-weight:bold;}
span.TitleChar
	{mso-style-name:"Title Char";
	mso-style-link:Title;
	font-family:"Franklin Gothic Demi","sans-serif";
	color:black;
	letter-spacing:.25pt;}
span.Definition
	{mso-style-name:Definition;
	font-weight:bold;}
span.HeaderChar
	{mso-style-name:"Header Char";
	mso-style-link:Header;
	font-family:"Times New Roman","serif";}
span.FooterChar
	{mso-style-name:"Footer Char";
	mso-style-link:Footer;
	font-family:"Times New Roman","serif";}
span.BalloonTextChar
	{mso-style-name:"Balloon Text Char";
	mso-style-link:"Balloon Text";
	font-family:"Tahoma","sans-serif";}
span.TableHeading
	{mso-style-name:"Table Heading";
	font-weight:bold;}
p.ChapterTitle, li.ChapterTitle, div.ChapterTitle
	{mso-style-name:"Chapter Title";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:15.0pt;
	margin-left:0in;
	border:none;
	padding:0in;
	font-size:36.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";
	font-variant:small-caps;
	color:black;
	letter-spacing:.25pt;}
p.ChapterTitleCxSpFirst, li.ChapterTitleCxSpFirst, div.ChapterTitleCxSpFirst
	{mso-style-name:"Chapter TitleCxSpFirst";
	margin:0in;
	margin-bottom:.0001pt;
	border:none;
	padding:0in;
	font-size:36.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";
	font-variant:small-caps;
	color:black;
	letter-spacing:.25pt;}
p.ChapterTitleCxSpMiddle, li.ChapterTitleCxSpMiddle, div.ChapterTitleCxSpMiddle
	{mso-style-name:"Chapter TitleCxSpMiddle";
	margin:0in;
	margin-bottom:.0001pt;
	border:none;
	padding:0in;
	font-size:36.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";
	font-variant:small-caps;
	color:black;
	letter-spacing:.25pt;}
p.ChapterTitleCxSpLast, li.ChapterTitleCxSpLast, div.ChapterTitleCxSpLast
	{mso-style-name:"Chapter TitleCxSpLast";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:15.0pt;
	margin-left:0in;
	border:none;
	padding:0in;
	font-size:36.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";
	font-variant:small-caps;
	color:black;
	letter-spacing:.25pt;}
span.URL
	{mso-style-name:URL;
	color:black;
	text-decoration:underline;}
p.SourceCodeFeatured, li.SourceCodeFeatured, div.SourceCodeFeatured
	{mso-style-name:"Source Code \(Featured\)";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:6.0pt;
	margin-left:0in;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:"Courier";}
p.SourceCodeFeaturedCxSpFirst, li.SourceCodeFeaturedCxSpFirst, div.SourceCodeFeaturedCxSpFirst
	{mso-style-name:"Source Code \(Featured\)CxSpFirst";
	margin:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:"Courier";}
p.SourceCodeFeaturedCxSpMiddle, li.SourceCodeFeaturedCxSpMiddle, div.SourceCodeFeaturedCxSpMiddle
	{mso-style-name:"Source Code \(Featured\)CxSpMiddle";
	margin:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:"Courier";}
p.SourceCodeFeaturedCxSpLast, li.SourceCodeFeaturedCxSpLast, div.SourceCodeFeaturedCxSpLast
	{mso-style-name:"Source Code \(Featured\)CxSpLast";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:6.0pt;
	margin-left:0in;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:"Courier";}
p.SampleRun, li.SampleRun, div.SampleRun
	{mso-style-name:"Sample Run";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:6.0pt;
	margin-left:0in;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:"Courier";
	color:#1F497D;}
p.SampleRunCxSpFirst, li.SampleRunCxSpFirst, div.SampleRunCxSpFirst
	{mso-style-name:"Sample RunCxSpFirst";
	margin:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:"Courier";
	color:#1F497D;}
p.SampleRunCxSpMiddle, li.SampleRunCxSpMiddle, div.SampleRunCxSpMiddle
	{mso-style-name:"Sample RunCxSpMiddle";
	margin:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:"Courier";
	color:#1F497D;}
p.SampleRunCxSpLast, li.SampleRunCxSpLast, div.SampleRunCxSpLast
	{mso-style-name:"Sample RunCxSpLast";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:6.0pt;
	margin-left:0in;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:"Courier";
	color:#1F497D;}
span.SampleRunResponse
	{mso-style-name:"Sample Run Response";
	color:black;}
span.SourceCodeComment
	{mso-style-name:"Source Code Comment";
	color:#7F7F7F;}
span.SourceLineNumber
	{mso-style-name:"Source Line Number";
	color:gray;}
p.CodeExample, li.CodeExample, div.CodeExample
	{mso-style-name:"Code Example";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:0in;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:"Courier";}
p.CodeExampleCxSpFirst, li.CodeExampleCxSpFirst, div.CodeExampleCxSpFirst
	{mso-style-name:"Code ExampleCxSpFirst";
	margin:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:"Courier";}
p.CodeExampleCxSpMiddle, li.CodeExampleCxSpMiddle, div.CodeExampleCxSpMiddle
	{mso-style-name:"Code ExampleCxSpMiddle";
	margin:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:"Courier";}
p.CodeExampleCxSpLast, li.CodeExampleCxSpLast, div.CodeExampleCxSpLast
	{mso-style-name:"Code ExampleCxSpLast";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:0in;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:"Courier";}
span.Literal
	{mso-style-name:Literal;
	font-family:Courier;}
p.SourceCodeHeadline, li.SourceCodeHeadline, div.SourceCodeHeadline
	{mso-style-name:"Source Code Headline";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:6.0pt;
	margin-left:0in;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:"Calibri","sans-serif";
	font-weight:bold;}
p.SourceCodeHeadlineCxSpFirst, li.SourceCodeHeadlineCxSpFirst, div.SourceCodeHeadlineCxSpFirst
	{mso-style-name:"Source Code HeadlineCxSpFirst";
	margin:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:"Calibri","sans-serif";
	font-weight:bold;}
p.SourceCodeHeadlineCxSpMiddle, li.SourceCodeHeadlineCxSpMiddle, div.SourceCodeHeadlineCxSpMiddle
	{mso-style-name:"Source Code HeadlineCxSpMiddle";
	margin:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:"Calibri","sans-serif";
	font-weight:bold;}
p.SourceCodeHeadlineCxSpLast, li.SourceCodeHeadlineCxSpLast, div.SourceCodeHeadlineCxSpLast
	{mso-style-name:"Source Code HeadlineCxSpLast";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:6.0pt;
	margin-left:0in;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:"Calibri","sans-serif";
	font-weight:bold;}
span.CommentTextChar
	{mso-style-name:"Comment Text Char";
	mso-style-link:"Comment Text";
	font-family:"Times New Roman","serif";}
span.CommentSubjectChar
	{mso-style-name:"Comment Subject Char";
	mso-style-link:"Comment Subject";
	font-family:"Times New Roman","serif";
	font-weight:bold;}
span.XXX
	{mso-style-name:XXX;
	font-family:Courier;
	color:red;}
p.TableListing, li.TableListing, div.TableListing
	{mso-style-name:"Table Listing";
	margin:0in;
	margin-bottom:.0001pt;
	text-align:center;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";}
.MsoChpDefault
	{font-family:"Calibri","sans-serif";}
.MsoPapDefault
	{margin-bottom:10.0pt;
	line-height:115%;}
@page WordSection1
	{size:8.5in 11.0in;
	margin:1.0in 1.0in 1.0in 1.0in;}
div.WordSection1
	{page:WordSection1;}
 /* List Definitions */
 ol
	{margin-bottom:0in;}
ul
	{margin-bottom:0in;}
-->
</style>

</head>

<body lang=EN-US link=blue vlink=purple style="background-color: #fffeee;">


<div style="background-color: #eeeddd; float: right; height: 310px; font-family: sans-serif;" id="otherbooks">Other programming books by Al Sweigart:<br>
  <a href="#" onclick="document.getElementById('otherbooks').outerHTML='';" style="vertical-align: top;">X</a>

  <a target="_blank" href="https://www.amazon.com/gp/product/1593275994/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1593275994&linkCode=as2&tag=playwithpyth-20&linkId=385b77199fa1e9f4fd21652cc57dab33" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_automate.link');"><img src="/images/cover_automate_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://www.amazon.com/gp/product/1503212300?ie=UTF8&amp;tag=playwithpyth-20&amp;linkCode=as2&amp;camp=1789&amp;creative=9325&amp;creativeASIN=1503212300" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_invent.link');"><img src="/images/cover_invent4th_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://www.amazon.com/Making-Games-Python-Pygame-Sweigart/dp/1469901730?ie=UTF8&amp;tag=playwithpyth-20&amp;linkCode=as2&amp;camp=1789&amp;creative=9325&amp;creativeASIN=1469901730" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_pygame.link');"><img src="/images/cover_makinggames_thumb.webp" style="height: 200px; border: solid black 1px; /"></a>
  <a target="_blank" href="https://www.amazon.com/gp/product/1482614375/ref=as_li_qf_sp_asin_tl?ie=UTF8&amp;camp=1789&amp;creative=9325&amp;creativeASIN=1482614375&amp;linkCode=as2&amp;tag=playwithpyth-20" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_hacking.link');"><img src="/images/cover_crackingcodes_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://www.amazon.com/gp/product/1593277628/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1593277628&linkCode=as2&tag=playwithpyth-20&linkId=0f1bd157c25d2e97db13d6434e5476a8"><img src="/images/cover_scratchprogrammingplayground_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <br />
  <a href="https://www.udemy.com/automate/?couponCode=INVENT_WITH_PYTHON">Use this link to get 80%% off the Automate the Boring Stuff online video course.</a><br />
  <a href="https://www.patreon.com/AlSweigart">Support me on Patreon</a>
</div>




<div class=WordSection1>

<div style='border:none;border-bottom:solid #4F81BD 1.0pt;padding:0in 0in 4.0pt 0in'>

<h1><a name="_Toc316488616"><span style='font-variant:normal !important;
text-transform:uppercase'>Chapter 5 – Simulate</span></a></h1>

</div>

<p class=MsoNormal align=center style='text-align:center'><img width=286
height=226 id="Picture 46" src="chapter5_files/image001.webp"></p>

<h2><a name="_Toc316488617">How to Play Simulate</a></h2>

<p class=MsoNormal>Simulate is a clone of the game Simon. There are four
colored buttons on the screen. The buttons light up in a certain random
pattern, and then the player must repeat this pattern by pressing the buttons
in the correct order. Each time the player successfully simulates the pattern,
the pattern gets longer. The player tries to match the pattern for as long as
possible.</p>

<h2><a name="_Toc316488618">Source Code to Simulate</a></h2>

<p class=MsoNormal>This source code can be downloaded from <span class=URL><a href="http://invpy.com/simulate.py">http://invpy.com/simulate.py</a></span>.
If you get any error messages, look at the line number that is mentioned in the
error message and check your code for any typos. You can also copy and paste
your code into the web form at <span class=URL><a href="http://invpy.com/diff/simulate">http://invpy.com/diff/simulate</a></span>
to see if the differences between your code and the code in the book.</p>

<p class=MsoNormal>You can download the four sound files that this program uses
from:</p>

<p class=MsoListParagraphCxSpFirst style='text-indent:-.25in'><span class=URL><span
style='font-family:Symbol;text-decoration:none'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><span class=URL><a href="http://invpy.com/beep1.ogg">http://invpy.com/beep1.ogg</a></span></p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span class=URL><span
style='font-family:Symbol;text-decoration:none'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><span class=URL><a href="http://invpy.com/beep2.ogg">http://invpy.com/beep2.ogg</a></span></p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span class=URL><span
style='font-family:Symbol;text-decoration:none'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><span class=URL><a href="http://invpy.com/beep3.ogg">http://invpy.com/beep3.ogg</a></span></p>

<p class=MsoListParagraphCxSpLast style='text-indent:-.25in'><span class=URL><span
style='font-family:Symbol;text-decoration:none'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><span class=URL><a href="http://invpy.com/beep4.ogg">http://invpy.com/beep4.ogg</a></span></p>

<div style='border:double windowtext 1.5pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeFeaturedCxSpFirst><span class=SourceLineNumber>  1. </span><span
class=SourceCodeComment># Simulate (a Simon clone)</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>  2. </span><span
class=SourceCodeComment># By Al Sweigart al@inventwithpython.com</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>  3. </span><span
class=SourceCodeComment># http://inventwithpython.com/pygame</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>  4. </span><span
class=SourceCodeComment># Creative Commons BY-NC-SA 3.0 US</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>  5. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle>  <span class=SourceLineNumber>6. </span>import
random, sys, time, pygame</p>

<p class=SourceCodeFeaturedCxSpMiddle>  <span class=SourceLineNumber>7. </span>from
pygame.locals import *</p>

<p class=SourceCodeFeaturedCxSpMiddle>  <span class=SourceLineNumber>8. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle>  <span class=SourceLineNumber>9. </span>FPS
= 30</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>10. </span>WINDOWWIDTH
= 640</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>11. </span>WINDOWHEIGHT
= 480</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>12. </span>FLASHSPEED
= 500 <span class=SourceCodeComment># in milliseconds</span></p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>13. </span>FLASHDELAY
= 200 <span class=SourceCodeComment># in milliseconds</span></p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>14. </span>BUTTONSIZE
= 200</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>15. </span>BUTTONGAPSIZE
= 20</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>16. </span>TIMEOUT
= 4 <span class=SourceCodeComment># seconds before game over if no button is
pushed.</span></p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>17. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>18. </span><span
class=SourceCodeComment>#                R    G    B</span></p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>19. </span>WHITE       
= (255, 255, 255)</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>20. </span>BLACK       
= (  0,   0,   0)</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>21. </span>BRIGHTRED   
= (255,   0,   0)</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>22. </span>RED         
= (155,   0,   0)</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>23. </span>BRIGHTGREEN 
= (  0, 255,   0)</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>24. </span>GREEN       
= (  0, 155,   0)</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>25. </span>BRIGHTBLUE  
= (  0,   0, 255)</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>26. </span>BLUE        
= (  0,   0, 155)</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>27. </span>BRIGHTYELLOW
= (255, 255,   0)</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>28. </span>YELLOW   
   = (155, 155,   0)</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>29. </span>DARKGRAY    
= ( 40,  40,  40)</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>30. </span>bgColor
= BLACK</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>31. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>32. </span>XMARGIN
= int((WINDOWWIDTH - (2 * BUTTONSIZE) - BUTTONGAPSIZE) / 2)</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>33. </span>YMARGIN
= int((WINDOWHEIGHT - (2 * BUTTONSIZE) - BUTTONGAPSIZE) / 2)</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>34. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 35. </span><span
class=SourceCodeComment># Rect objects for each of the four buttons</span></p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>36. </span>YELLOWRECT
= pygame.Rect(XMARGIN, YMARGIN, BUTTONSIZE, BUTTONSIZE)</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>37. </span>BLUERECT  
= pygame.Rect(XMARGIN + BUTTONSIZE + BUTTONGAPSIZE, YMARGIN, BUTTONSIZE,
BUTTONSIZE)</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>38. </span>REDRECT   
= pygame.Rect(XMARGIN, YMARGIN + BUTTONSIZE + BUTTONGAPSIZE, BUTTONSIZE,
BUTTONSIZE)</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>39. </span>GREENRECT 
= pygame.Rect(XMARGIN + BUTTONSIZE + BUTTONGAPSIZE, YMARGIN + BUTTONSIZE +
BUTTONGAPSIZE, BUTTONSIZE, BUTTONSIZE)</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>40. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 41. </span>def
main():</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>42. </span>    global
FPSCLOCK, DISPLAYSURF, BASICFONT, BEEP1, BEEP2, BEEP3, BEEP4</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>43. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>44. </span>    pygame.init()</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>45. </span>    FPSCLOCK
= pygame.time.Clock()</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>46. </span>    DISPLAYSURF
= pygame.display.set_mode((WINDOWWIDTH, WINDOWHEIGHT))</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>47. </span>    pygame.display.set_caption('Simulate')</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>48. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>49. </span>    BASICFONT
= pygame.font.Font('freesansbold.ttf', 16)</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>50.</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 51. </span>    infoSurf
= BASICFONT.render('Match the pattern by clicking on the button or using the Q,
W, A, S keys.', 1, DARKGRAY)</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>52. </span>    infoRect
= infoSurf.get_rect()</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>53. </span>    infoRect.topleft
= (10, WINDOWHEIGHT - 25)</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>54. </span>    <span
class=SourceCodeComment># load the sound files</span></p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>55. </span>    BEEP1
= pygame.mixer.Sound('beep1.ogg')</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>56. </span>    BEEP2
= pygame.mixer.Sound('beep2.ogg')</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>57. </span>    BEEP3
= pygame.mixer.Sound('beep3.ogg')</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>58. </span>    BEEP4
= pygame.mixer.Sound('beep4.ogg')</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>59. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 60. </span>    <span
class=SourceCodeComment># Initialize some variables for a new game</span></p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>61. </span>    pattern
= [] <span class=SourceCodeComment># stores the pattern of colors</span></p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>62. </span>    currentStep
= 0 <span class=SourceCodeComment># the color the player must push next</span></p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>63. </span>    lastClickTime
= 0 <span class=SourceCodeComment># timestamp of the player's last button push</span></p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>64. </span>    score
= 0</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>65. </span>    <span
class=SourceCodeComment># when False, the pattern is playing. when True,
waiting for the player to click a colored button:</span></p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>66. </span>    waitingForInput
= False</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>67. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 68. </span>    while
True: <span class=SourceCodeComment># main game loop</span></p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>69. </span>        clickedButton
= None <span class=SourceCodeComment># button that was clicked (set to YELLOW,
RED, GREEN, or BLUE)</span></p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>70. </span>        DISPLAYSURF.fill(bgColor)</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>71. </span>        drawButtons()</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>72. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>73. </span>        scoreSurf
= BASICFONT.render('Score: ' + str(score), 1, WHITE)</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>74. </span>        scoreRect
= scoreSurf.get_rect()</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>75. </span>        scoreRect.topleft
= (WINDOWWIDTH - 100, 10)</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>76. </span>        DISPLAYSURF.blit(scoreSurf,
scoreRect)</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>77. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 78. </span>        DISPLAYSURF.blit(infoSurf,
infoRect)</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>79. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 80. </span>        checkForQuit()</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>81. </span>        for
event in pygame.event.get(): <span class=SourceCodeComment># event handling
loop</span></p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>82. </span>            if
event.type == MOUSEBUTTONUP:</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>83. </span>                mousex,
mousey = event.pos</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>84. </span>                clickedButton
= getButtonClicked(mousex, mousey)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 85. </span>            elif
event.type == KEYDOWN:</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 86. </span>                if
event.key == K_q:</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>87. </span>                    clickedButton
= YELLOW</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>88. </span>                elif
event.key == K_w:</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>89. </span>                    clickedButton
= BLUE</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>90. </span>                elif
event.key == K_a:</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>91. </span>                    clickedButton
= RED</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>92. </span>                elif
event.key == K_s:</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>93. </span>                    clickedButton
= GREEN</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 94.</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 95.</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 96.</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 97. </span>        if
not waitingForInput:</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>98. </span>            <span
class=SourceCodeComment># play the pattern</span></p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>99. </span>            pygame.display.update()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>100. </span>            pygame.time.wait(1000)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>101. </span>            pattern.append(random.choice((YELLOW,
BLUE, RED, GREEN)))</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>102. </span>            for
button in pattern:</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>103. </span>                flashButtonAnimation(button)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>104. </span>                pygame.time.wait(FLASHDELAY)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>105. </span>            waitingForInput
= True</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>106. </span>        else:</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>107. </span>            <span
class=SourceCodeComment># wait for the player to enter buttons</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>108. </span>            if
clickedButton and clickedButton == pattern[currentStep]:</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>109. </span>                <span
class=SourceCodeComment># pushed the correct button</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>110. </span>                flashButtonAnimation(clickedButton)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>111. </span>                currentStep
+= 1</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>112. </span>                lastClickTime
= time.time()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>113.</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>114. </span>                if
currentStep == len(pattern):</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>115. </span>                    <span
class=SourceCodeComment># pushed the last button in the pattern</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>116. </span>                    changeBackgroundAnimation()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>117. </span>                    score
+= 1</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>118. </span>                    waitingForInput
= False</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>119. </span>                    currentStep
= 0 <span class=SourceCodeComment># reset back to first step</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>120.</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>121. </span>            elif
(clickedButton and clickedButton != pattern[currentStep]) or (currentStep != 0
and time.time() - TIMEOUT &gt; lastClickTime):</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>122. </span>                <span
class=SourceCodeComment># pushed the incorrect button, or has timed out</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>123. </span>                gameOverAnimation()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>124. </span>                <span
class=SourceCodeComment># reset the variables for a new game:</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>125. </span>                pattern
= []</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>126. </span>                currentStep
= 0</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>127. </span>                waitingForInput
= False</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>128. </span>                score
= 0</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>129. </span>                pygame.time.wait(1000)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>130. </span>                changeBackgroundAnimation()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>131.</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>132. </span>        pygame.display.update()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>133. </span>        FPSCLOCK.tick(FPS)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>134.</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>135.</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>136. </span>def
terminate():</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>137. </span>    pygame.quit()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>138. </span>    sys.exit()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>139. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>140. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>141. </span>def
checkForQuit():</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>142. </span>    for
event in pygame.event.get(QUIT): <span class=SourceCodeComment># get all the
QUIT events</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>143. </span>        terminate()
<span class=SourceCodeComment># terminate if any QUIT events are present</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>144. </span>    for
event in pygame.event.get(KEYUP): <span class=SourceCodeComment># get all the
KEYUP events</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>145. </span>        if
event.key == K_ESCAPE:</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>146. </span>            terminate()
<span class=SourceCodeComment># terminate if the KEYUP event was for the Esc
key</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>147. </span>        pygame.event.post(event)
<span class=SourceCodeComment># put the other KEYUP event objects back</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>148.</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>149.</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>150. </span>def
flashButtonAnimation(color, animationSpeed=50):</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>151. </span>    if
color == YELLOW:</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>152. </span>        sound
= BEEP1</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>153. </span>        flashColor
= BRIGHTYELLOW</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>154. </span>        rectangle
= YELLOWRECT</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>155. </span>    elif
color == BLUE:</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>156. </span>        sound
= BEEP2</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>157. </span>        flashColor
= BRIGHTBLUE</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>158. </span>        rectangle
= BLUERECT</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>159. </span>    elif
color == RED:</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>160. </span>        sound
= BEEP3</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>161. </span>        flashColor
= BRIGHTRED</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>162. </span>        rectangle
= REDRECT</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>163. </span>    elif
color == GREEN:</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>164. </span>        sound
= BEEP4</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>165. </span>        flashColor
= BRIGHTGREEN</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>166. </span>        rectangle
= GREENRECT</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>167.</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>168. </span>    origSurf
= DISPLAYSURF.copy()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>169. </span>    flashSurf
= pygame.Surface((BUTTONSIZE, BUTTONSIZE))</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>170. </span>    flashSurf
= flashSurf.convert_alpha()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>171. </span>    r,
g, b = flashColor</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>172. </span>    sound.play()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>173. </span>    for
start, end, step in ((0, 255, 1), (255, 0, -1)): <span class=SourceCodeComment>#
animation loop</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>174. </span>        for
alpha in range(start, end, animationSpeed * step):</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>175. </span>            checkForQuit()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>176. </span>            DISPLAYSURF.blit(origSurf,
(0, 0))</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>177. </span>            flashSurf.fill((r,
g, b, alpha))</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>178. </span>            DISPLAYSURF.blit(flashSurf,
rectangle.topleft)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>179. </span>            pygame.display.update()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>180. </span>            FPSCLOCK.tick(FPS)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>181. </span>    DISPLAYSURF.blit(origSurf,
(0, 0))</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>182. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>183. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>184. </span>def
drawButtons():</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>185. </span>    pygame.draw.rect(DISPLAYSURF,
YELLOW, YELLOWRECT)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>186. </span>    pygame.draw.rect(DISPLAYSURF,
BLUE,   BLUERECT)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>187. </span>    pygame.draw.rect(DISPLAYSURF,
RED,    REDRECT)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>188. </span>    pygame.draw.rect(DISPLAYSURF,
GREEN,  GREENRECT)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>189.</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>190.</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>191. </span>def
changeBackgroundAnimation(animationSpeed=40):</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>192. </span>    global
bgColor</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>193. </span>    newBgColor
= (random.randint(0, 255), random.randint(0, 255), random.randint(0, 255))</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>194. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>195. </span>    newBgSurf
= pygame.Surface((WINDOWWIDTH, WINDOWHEIGHT))</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>196. </span>    newBgSurf
= newBgSurf.convert_alpha()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>197. </span>    r,
g, b = newBgColor</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>198. </span>    for
alpha in range(0, 255, animationSpeed): <span class=SourceCodeComment>#
animation loop</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>199. </span>        checkForQuit()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>200. </span>        DISPLAYSURF.fill(bgColor)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>201. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>202. </span>        newBgSurf.fill((r,
g, b, alpha))</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>203. </span>        DISPLAYSURF.blit(newBgSurf,
(0, 0))</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>204. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>205. </span>        drawButtons()
<span class=SourceCodeComment># redraw the buttons on top of the tint</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>206. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>207. </span>        pygame.display.update()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>208. </span>        FPSCLOCK.tick(FPS)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>209. </span>    bgColor
= newBgColor</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>210.</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>211.</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>212. </span>def
gameOverAnimation(color=WHITE, animationSpeed=50):</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>213. </span>    <span
class=SourceCodeComment># play all beeps at once, then flash the background</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>214. </span>    origSurf
= DISPLAYSURF.copy()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>215. </span>    flashSurf
= pygame.Surface(DISPLAYSURF.get_size())</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>216. </span>    flashSurf
= flashSurf.convert_alpha()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>217. </span>    BEEP1.play()
<span class=SourceCodeComment># play all four beeps at the same time, roughly.</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>218. </span>    BEEP2.play()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>219. </span>    BEEP3.play()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>220. </span>    BEEP4.play()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>221. </span>    r,
g, b = color</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>222. </span>    for
i in range(3): <span class=SourceCodeComment># do the flash 3 times</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>223. </span>        for
start, end, step in ((0, 255, 1), (255, 0, -1)):</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>224. </span>            <span
class=SourceCodeComment># The first iteration in this loop sets the following
for loop</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>225. </span>            <span
class=SourceCodeComment># to go from 0 to 255, the second from 255 to 0.</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>226. </span>            for
alpha in range(start, end, animationSpeed * step): <span
class=SourceCodeComment># animation loop</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>227. </span>                <span
class=SourceCodeComment># alpha means transparency. 255 is opaque, 0 is
invisible</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>228. </span>                checkForQuit()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>229. </span>                flashSurf.fill((r,
g, b, alpha))</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>230. </span>                DISPLAYSURF.blit(origSurf,
(0, 0))</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>231. </span>                DISPLAYSURF.blit(flashSurf,
(0, 0))</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>232. </span>                drawButtons()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>233. </span>                pygame.display.update()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>234. </span>                FPSCLOCK.tick(FPS)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>235. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>236.</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>237.</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>238. </span>def
getButtonClicked(x, y):</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>239. </span>    if
YELLOWRECT.collidepoint( (x, y) ):</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>240. </span>        return
YELLOW</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>241. </span>    elif
BLUERECT.collidepoint( (x, y) ):</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>242. </span>        return
BLUE</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>243. </span>    elif
REDRECT.collidepoint( (x, y) ):</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>244. </span>        return
RED</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>245. </span>    elif
GREENRECT.collidepoint( (x, y) ):</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>246. </span>        return
GREEN</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>247. </span>    return
None</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>248. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>249. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>250. </span>if
__name__ == '__main__':</p>

<p class=SourceCodeFeaturedCxSpLast><span class=SourceLineNumber>251. </span>    main()</p>

</div>

<h2><a name="_Toc316488619">The Usual Starting Stuff</a></h2>

<div style='border:double windowtext 1.5pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeFeaturedCxSpFirst><span class=SourceLineNumber>  1. </span><span
class=SourceCodeComment># Simulate (a Simon clone)</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>  2. </span><span
class=SourceCodeComment># By Al Sweigart al@inventwithpython.com</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>  3. </span><span
class=SourceCodeComment># http://inventwithpython.com/pygame</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>  4. </span><span
class=SourceCodeComment># Creative Commons BY-NC-SA 3.0 US</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>  5. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle>  <span class=SourceLineNumber>6. </span>import
random, sys, time, pygame</p>

<p class=SourceCodeFeaturedCxSpMiddle>  <span class=SourceLineNumber>7. </span>from
pygame.locals import *</p>

<p class=SourceCodeFeaturedCxSpMiddle>  <span class=SourceLineNumber>8. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle>  <span class=SourceLineNumber>9. </span>FPS
= 30</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>10. </span>WINDOWWIDTH
= 640</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>11. </span>WINDOWHEIGHT
= 480</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>12. </span>FLASHSPEED
= 500 <span class=SourceCodeComment># in milliseconds</span></p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>13. </span>FLASHDELAY
= 200 <span class=SourceCodeComment># in milliseconds</span></p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>14. </span>BUTTONSIZE
= 200</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>15. </span>BUTTONGAPSIZE
= 20</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>16. </span>TIMEOUT
= 4 <span class=SourceCodeComment># seconds before game over if no button is
pushed.</span></p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>17. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>18. </span><span
class=SourceCodeComment>#                R    G    B</span></p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>19. </span>WHITE       
= (255, 255, 255)</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>20. </span>BLACK       
= (  0,   0,   0)</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>21. </span>BRIGHTRED   
= (255,   0,   0)</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>22. </span>RED         
= (155,   0,   0)</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>23. </span>BRIGHTGREEN 
= (  0, 255,   0)</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>24. </span>GREEN       
= (  0, 155,   0)</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>25. </span>BRIGHTBLUE  
= (  0,   0, 255)</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>26. </span>BLUE        
= (  0,   0, 155)</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>27. </span>BRIGHTYELLOW
= (255, 255,   0)</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>28. </span>YELLOW      
= (155, 155,   0)</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>29. </span>DARKGRAY    
= ( 40,  40,  40)</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>30. </span>bgColor
= BLACK</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>31. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>32. </span>XMARGIN
= int((WINDOWWIDTH - (2 * BUTTONSIZE) - BUTTONGAPSIZE) / 2)</p>

<p class=SourceCodeFeaturedCxSpLast> <span class=SourceLineNumber>33. </span>YMARGIN
= int((WINDOWHEIGHT - (2 * BUTTONSIZE) - BUTTONGAPSIZE) / 2)</p>

</div>

<p class=MsoNormal>Here we set up the usual constants for things that we might
want to modify later such as the size of the four buttons, the shades of color
used for the buttons (the bright colors are used when the buttons light up) and
the amount of time the player has to push the next button in the sequence
before the game times out.</p>

<h2><a name="_Toc316488620">Setting Up the Buttons</a></h2>

<div style='border:double windowtext 1.5pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeFeaturedCxSpFirst> <span class=SourceLineNumber>35. </span><span
class=SourceCodeComment># Rect objects for each of the four buttons</span></p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>36. </span>YELLOWRECT
= pygame.Rect(XMARGIN, YMARGIN, BUTTONSIZE, BUTTONSIZE)</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>37. </span>BLUERECT  
= pygame.Rect(XMARGIN + BUTTONSIZE + BUTTONGAPSIZE, YMARGIN, BUTTONSIZE,
BUTTONSIZE)</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>38. </span>REDRECT   
= pygame.Rect(XMARGIN, YMARGIN + BUTTONSIZE + BUTTONGAPSIZE, BUTTONSIZE, BUTTONSIZE)</p>

<p class=SourceCodeFeaturedCxSpLast> <span class=SourceLineNumber>39. </span>GREENRECT 
= pygame.Rect(XMARGIN + BUTTONSIZE + BUTTONGAPSIZE, YMARGIN + BUTTONSIZE +
BUTTONGAPSIZE, BUTTONSIZE, BUTTONSIZE)</p>

</div>

<p class=MsoNormal>Just like the buttons in the Sliding Puzzle games for
“Reset”, “Solve” and “New Game”, the Simulate game has four rectangular areas
and code to handle when the player clicks inside of those areas. The program
will need Rect objects for the areas of the four buttons so it can call the <span
class=Literal>collidepoint()</span> method on them. Lines 36 to 39 set up these
Rect objects with the appropriate coordinates and sizes.</p>

<h2><a name="_Toc316488621">The </a><span class=Literal>main()</span> Function</h2>

<div style='border:double windowtext 1.5pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeFeaturedCxSpFirst> <span class=SourceLineNumber>41. </span>def
main():</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>42. </span>    global
FPSCLOCK, DISPLAYSURF, BASICFONT, BEEP1, BEEP2, BEEP3, BEEP4</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>43. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>44. </span>    pygame.init()</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>45. </span>    FPSCLOCK
= pygame.time.Clock()</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>46. </span>    DISPLAYSURF
= pygame.display.set_mode((WINDOWWIDTH, WINDOWHEIGHT))</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>47. </span>    pygame.display.set_caption('Simulate')</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>48. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>49. </span>    BASICFONT
= pygame.font.Font('freesansbold.ttf', 16)</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>50.</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 51. </span>    infoSurf
= BASICFONT.render('Match the pattern by clicking on the button or using the Q,
W, A, S keys.', 1, DARKGRAY)</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>52. </span>    infoRect
= infoSurf.get_rect()</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>53. </span>    infoRect.topleft
= (10, WINDOWHEIGHT - 25)</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>54. </span>    <span
class=SourceCodeComment># load the sound files</span></p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>55. </span>    BEEP1
= pygame.mixer.Sound('beep1.ogg')</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>56. </span>    BEEP2
= pygame.mixer.Sound('beep2.ogg')</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>57. </span>    BEEP3
= pygame.mixer.Sound('beep3.ogg')</p>

<p class=SourceCodeFeaturedCxSpLast> <span class=SourceLineNumber>58. </span>    BEEP4
= pygame.mixer.Sound('beep4.ogg')</p>

</div>

<p class=MsoNormal>The <span class=Literal>main()</span> function will implement
the bulk of the program and call the other functions as they are needed. The
usual Pygame setup functions are called to initialize the library, create a
Clock object, create a window, set the caption, and create a Font object that
will be used to display the score and the instructions on the window. The
objects that are created by these function calls will be stored in global
variables so that they can be used in other functions. But they are basically
constants since the value in them is never changed.</p>

<p class=MsoNormal>Lines 55 to 58 will load sound files so that Simulate can
play sound effects as the player clicks on each button. The <span
class=Literal>pygame.mixer.Sound()</span> constructor function will return a Sound
object, which we store in the variables <span class=Literal>BEEP1</span> to <span
class=Literal>BEEP4</span> which were made into global variables on line 42.</p>

<h2><a name="_Toc316488622">Some Local Variables Used in This Program</a></h2>

<div style='border:double windowtext 1.5pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeFeaturedCxSpFirst> <span class=SourceLineNumber>60. </span>    <span
class=SourceCodeComment># Initialize some variables for a new game</span></p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>61. </span>    pattern
= [] <span class=SourceCodeComment># stores the pattern of colors</span></p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>62. </span>    currentStep
= 0 <span class=SourceCodeComment># the color the player must push next</span></p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>63. </span>    lastClickTime
= 0 <span class=SourceCodeComment># timestamp of the player's last button push</span></p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>64. </span>    score
= 0</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>65. </span>    <span
class=SourceCodeComment># when False, the pattern is playing. when True,
waiting for the player to click a colored button:</span></p>

<p class=SourceCodeFeaturedCxSpLast> <span class=SourceLineNumber>66. </span>    waitingForInput
= False</p>

</div>

<p class=MsoNormal>The <span class=Literal>pattern</span> variable will be a
list of color values (either <span class=Literal>YELLOW</span>, <span
class=Literal>RED</span>, <span class=Literal>BLUE</span>, or <span
class=Literal>GREEN</span>) to keep track of the pattern that the player must
memorize. For example, if the value of pattern was <span class=Literal>[RED,
RED, YELLOW, RED, BLUE, BLUE, RED, GREEN]</span> then the player would have to
first click the red button twice, then the yellow button, then the red button,
and so on until the final green button. As the player finishes each round, a
new random color is added to the end of the list.</p>

<p class=MsoNormal>The <span class=Literal>currentStep</span> variable will
keep track of which color in the pattern list the player has to click next. If <span
class=Literal>currentStep</span> was <span class=Literal>0</span> and <span
class=Literal>pattern</span> was <span class=Literal>[GREEN, RED, RED, YELLOW]</span>,
then the player would have to click the green button. If they clicked on any
other button, the code will cause a game over.</p>

<p class=MsoNormal>There is a <span class=Literal>TIMEOUT</span> constant that
makes the player click on next button in the pattern within a number of
seconds, otherwise the code causes a game over. In order to check if enough time
has passed since the last button click, the <span class=Literal>lastClickTime</span>
variable needs to keep track of the last time the player clicked on a button.
(Python has a module named time and a <span class=Literal>time.time()</span>
function to return the current time. This will be explained later.)</p>

<p class=MsoNormal>It may be hard to believe, but the <span class=Literal>score</span>
variable keeps track of the score. Inconceivable!</p>

<p class=MsoNormal>There are also two modes that our program will be in. Either
the program is playing the pattern of buttons for the player (in which case, <span
class=Literal>waitingForInput</span> is set to <span class=Literal>False</span>),
or the program has finished playing the pattern and is waiting for the user to
click the buttons in the correct order (in which case, <span class=Literal>waitingForInput</span>
is set to <span class=Literal>True</span>).</p>

<h2><a name="_Toc316488623">Drawing the Board and Handling Input</a></h2>

<div style='border:double windowtext 1.5pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeFeaturedCxSpFirst> <span class=SourceLineNumber>68. </span>    while
True: <span class=SourceCodeComment># main game loop</span></p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>69. </span>        clickedButton
= None <span class=SourceCodeComment># button that was clicked (set to YELLOW,
RED, GREEN, or BLUE)</span></p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>70. </span>        DISPLAYSURF.fill(bgColor)</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>71. </span>        drawButtons()</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>72. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>73. </span>        scoreSurf
= BASICFONT.render('Score: ' + str(score), 1, WHITE)</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>74. </span>        scoreRect
= scoreSurf.get_rect()</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>75. </span>        scoreRect.topleft
= (WINDOWWIDTH - 100, 10)</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>76. </span>        DISPLAYSURF.blit(scoreSurf,
scoreRect)</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>77. </span></p>

<p class=SourceCodeFeaturedCxSpLast><span class=SourceLineNumber> 78. </span>        DISPLAYSURF.blit(infoSurf,
infoRect)</p>

</div>

<p class=MsoNormal>Line 68 is the start of the main game loop. The <span
class=Literal>clickedButton</span> will be reset to <span class=Literal>None</span>
at the beginning of each iteration. If a button is clicked during this
iteration, then <span class=Literal>clickedButton</span> will be set to one of
the color values to match the button (<span class=Literal>YELLOW</span>, <span
class=Literal>RED</span>, <span class=Literal>GREEN</span>, or <span
class=Literal>BLUE</span>).</p>

<p class=MsoNormal>The <span class=Literal>fill()</span> method is called on
line 70 to repaint the entire display Surface so that we can start drawing from
scratch. The four colored buttons are drawn with a call to the <span
class=Literal>drawButtons()</span> (explained later). Then the text for the
score is created on lines 73 to 76.</p>

<p class=MsoNormal>There will also be text that tells the player what their
current score is. Unlike the call to the <span class=Literal>render()</span>
method on line 51 for the instruction text, the text for the score changes. It
starts off as <span class=Literal>'Score: 0'</span> and then becomes <span
class=Literal>'Score: 1'</span> and then <span class=Literal>'Score: 2'</span>
and so on. This is why we create new Surface objects by calling the <span
class=Literal>render()</span> method on line 73 inside the game loop. Since the
instruction text (“Match the pattern by…”) never changes, we only need one call
to <span class=Literal>render()</span> outside the game loop on line 50.</p>

<h2><a name="_Toc316488624">Checking for Mouse Clicks</a></h2>

<div style='border:double windowtext 1.5pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeFeaturedCxSpFirst> <span class=SourceLineNumber>80. </span>        checkForQuit()</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>81. </span>        for
event in pygame.event.get(): <span class=SourceCodeComment># event handling
loop</span></p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>82. </span>            if
event.type == MOUSEBUTTONUP:</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>83. </span>                mousex,
mousey = event.pos</p>

<p class=SourceCodeFeaturedCxSpLast> <span class=SourceLineNumber>84. </span>                clickedButton
= getButtonClicked(mousex, mousey)</p>

</div>

<p class=MsoNormal>Line 80 does a quick check for any <span class=Literal>QUIT</span>
events, and then line 81 is the start of the event handling loop. The XY
coordinates of any mouse clicks will be stored in the <span class=Literal>mousex</span>
and <span class=Literal>mousey</span> variables. If the mouse click was over
one of the four buttons, then our <span class=Literal>getButtonClicked()</span>
function will return a Color object of the button clicked (otherwise it returns
<span class=Literal>None</span>).</p>

<h2><a name="_Toc316488625">Checking for Keyboard Presses</a></h2>

<div style='border:double windowtext 1.5pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeFeaturedCxSpFirst> <span class=SourceLineNumber>85. </span>            elif
event.type == KEYDOWN:</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 86. </span>                if
event.key == K_q:</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>87. </span>                    clickedButton
= YELLOW</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>88. </span>                elif
event.key == K_w:</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>89. </span>                    clickedButton
= BLUE</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>90. </span>                elif
event.key == K_a:</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>91. </span>                    clickedButton
= RED</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>92. </span>                elif
event.key == K_s:</p>

<p class=SourceCodeFeaturedCxSpLast> <span class=SourceLineNumber>93. </span>                    clickedButton
= GREEN</p>

</div>

<p class=MsoNormal>Lines 85 to 93 check for any <span class=Literal>KEYDOWN</span>
events (created when the user presses a key on the keyboard). The Q, W, A, and
S keys correspond to the buttons because they are arranged in a square shape on
the keyboard.</p>

<p class=MsoNormal>The Q key is in the upper left of the four keyboard keys,
just like the yellow button on the screen is in the upper left, so we will make
pressing the Q key the same as clicking on the yellow button. We can do this by
setting the <span class=Literal>clickedButton</span> variable to the value in the
constant variable <span class=Literal>YELLOW</span>. We can do the same for the
three other keys. This way, the user can play Simulate with either the mouse or
keyboard.</p>

<h2><a name="_Toc316488626">The Two States of the Game Loop</a></h2>

<div style='border:double windowtext 1.5pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeFeaturedCxSpFirst> <span class=SourceLineNumber>97. </span>        if
not waitingForInput:</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>98. </span>            <span
class=SourceCodeComment># play the pattern</span></p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>99. </span>            pygame.display.update()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>100. </span>            pygame.time.wait(1000)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>101. </span>            pattern.append(random.choice((YELLOW,
BLUE, RED, GREEN)))</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>102. </span>            for
button in pattern:</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>103. </span>                flashButtonAnimation(button)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>104. </span>                pygame.time.wait(FLASHDELAY)</p>

<p class=SourceCodeFeaturedCxSpLast><span class=SourceLineNumber>105. </span>            waitingForInput
= True</p>

</div>

<p class=MsoNormal>There are two different “modes” or “states” that the program
can be in. When <span class=Literal>waitingForInput</span> is <span
class=Literal>False</span>, the program will be displaying the animation for
the pattern. When <span class=Literal>waitingForInput</span> is <span
class=Literal>True</span>, the program will be waiting for the user to select
buttons.</p>

<p class=MsoNormal>Lines 97 to 105 will cover the case where the program
displays the pattern animation. Since this is done at the start of the game or
when the player finishes a pattern, line 101 will add a random color to the
pattern list to make the pattern one step longer. Then lines 102 to 104 loops
through each of the values in the pattern list and calls <span class=Literal>flashButtonAnimation()</span>
which makes that button light up. After it is done lighting up all the buttons
in the pattern list, the program sets the <span class=Literal>waitingForInput</span>
variable to <span class=Literal>True</span>.</p>

<h2><a name="_Toc316488627">Figuring Out if the Player Pressed the Right
Buttons</a></h2>

<div style='border:double windowtext 1.5pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeFeaturedCxSpFirst><span class=SourceLineNumber>106. </span>        else:</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>107. </span>            <span
class=SourceCodeComment># wait for the player to enter buttons</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>108. </span>            if
clickedButton and clickedButton == pattern[currentStep]:</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>109. </span>                <span
class=SourceCodeComment># pushed the correct button</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>110. </span>                flashButtonAnimation(clickedButton)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>111. </span>                currentStep
+= 1</p>

<p class=SourceCodeFeaturedCxSpLast><span class=SourceLineNumber>112. </span>                lastClickTime
= time.time()</p>

</div>

<p class=MsoNormal>If <span class=Literal>waitingForInput</span> is <span
class=Literal>True</span>, then the code in line 106’s <span class=Literal>else</span>
statement will execute. Line 108 checks if the player has clicked on a button
during this iteration of the game loop and if that button was the correct one.
The <span class=Literal>currentStep</span> variable keeps track of the index in
the pattern list for the button that the player should click on next.</p>

<p class=MsoNormal>For example, if pattern was set to <span class=Literal>[YELLOW,
RED, RED]</span> and the <span class=Literal>currentStep</span> variable was
set to <span class=Literal>0</span> (like it would be when the player first
starts the game), then the correct button for the player to click would be <span
class=Literal>pattern[0]</span> (the yellow button).</p>

<p class=MsoNormal>If the player has clicked on the correct button, we want to
flash the button the player clicked by calling <span class=Literal>flashButtonAnimation()</span>
then, increase the <span class=Literal>currentStep</span> to the next step, and
then update the <span class=Literal>lastClickTime</span> variable to the
current time. (The <span class=Literal>time.time()</span> function returns a
float value of the number of seconds since January 1<sup>st</sup>, 1970, so we
can use it to keep track of time.)</p>

<div style='border:double windowtext 1.5pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeFeaturedCxSpFirst><span class=SourceLineNumber>114. </span>                if
currentStep == len(pattern):</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>115. </span>                    <span
class=SourceCodeComment># pushed the last button in the pattern</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>116. </span>                    changeBackgroundAnimation()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>117. </span>                    score
+= 1</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>118. </span>                    waitingForInput
= False</p>

<p class=SourceCodeFeaturedCxSpLast><span class=SourceLineNumber>119. </span>                    currentStep
= 0 <span class=SourceCodeComment># reset back to first step</span></p>

</div>

<p class=MsoNormal>Lines 114 to 119 are inside the <span class=Literal>else</span>
statement that started on line 106. If the execution is inside that <span
class=Literal>else</span> statement, we know the player clicked on a button and
also it was the correct button. Line 114 checks if this was the last correct
button in the pattern list by checking if the integer stored in <span
class=Literal>currentStep</span> is equal to the number of values inside the
pattern list.</p>

<p class=MsoNormal>If this is <span class=Literal>True</span>, then we want to
change the background color by calling our <span class=Literal>changeBackgroundAnimation()</span>.
This is a simple way to let the player know they have entered the entire
pattern correctly. The score is incremented, <span class=Literal>currentStep</span>
is set back to <span class=Literal>0</span>, and the <span class=Literal>waitingForInput</span>
variable is set to <span class=Literal>False</span> so that on the next
iteration of the game loop the code will add a new Color value to the pattern
list and then flash the buttons.</p>

<div style='border:double windowtext 1.5pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeFeatured><span class=SourceLineNumber>121. </span>            elif
(clickedButton and clickedButton != pattern[currentStep]) or (currentStep != 0
and time.time() - TIMEOUT &gt; lastClickTime):</p>

</div>

<p class=MsoNormal>If the player did not click on the correct button, the <span
class=Literal>elif</span> statement on line 121 handles the case where either
the player clicked on the wrong button or the player has waited too long to
click on a button. Either way, we need to show the “game over” animation and
start a new game.</p>

<p class=MsoNormal>The <span class=Literal>(clickedButton and clickedButton !=
pattern[currentStep])</span> part of the <span class=Literal>elif</span>
statement’s condition checks if a button was clicked and was the wrong button
to click. You can compare this to line 108’s <span class=Literal>if</span>
statement’s condition <span class=Literal>clickedButton and clickedButton ==
pattern[currentStep]</span> which evaluates to <span class=Literal>True</span>
if the player clicked a button and it was the correct button to click.</p>

<p class=MsoNormal>The other part of line 121’s <span class=Literal>elif</span>
condition is <span class=Literal>(currentStep != 0 and time.time() - TIMEOUT
&gt; lastClickTime)</span>. This handles making sure the player did not “time
out”. Notice that this part of the condition has two expressions connected by
an <span class=Literal>and</span> keyword. That means both sides of the and
keyword need to evaluate to <span class=Literal>True</span>.</p>

<p class=MsoNormal>In order to “time out”, it must not be the player’s first
button click. But once they’ve started to click buttons, they must keep clicking
the buttons quickly enough until they’ve entered the entire pattern (or have
clicked on the wrong pattern and gotten a “game over”). If <span class=Literal>currentStep
!= 0</span> is <span class=Literal>True</span>, then we know the player has
begun clicking the buttons.</p>

<h2><a name="_Toc316488628">Epoch Time</a></h2>

<p class=MsoNormal>Also in order to “time out”, the current time (returned by <span
class=Literal>time.time()</span>) minus four seconds (because <span
class=Literal>4</span> is stored in <span class=Literal>TIMEOUT</span>) must be
greater than the last time clicked a button (stored in <span class=Literal>lastClickTime</span>).
The reason why <span class=Literal>time.time() - TIMEOUT &gt; lastClickTime</span>
works has to do with how epoch time works. Epoch time (also called Unix epoch
time) is the number of seconds it has been since January 1<sup>st</sup>, 1970. This
date is called the Unix epoch.</p>

<p class=MsoNormal>For example, when I run <span class=Literal>time.time()</span>
from the interactive shell (don’t forget to import the time module first), it
looks like this:</p>

<div style='border:solid windowtext 1.0pt;padding:4.0pt 4.0pt 4.0pt 4.0pt'>

<p class=CodeExampleCxSpFirst style='border:none;padding:0in'>&gt;&gt;&gt;
import time</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>&gt;&gt;&gt;
time.time()</p>

<p class=CodeExampleCxSpLast style='border:none;padding:0in'>1320460242.118</p>

</div>

<p class=MsoNormal>What this number means is that the moment the <span
class=Literal>time.time()</span> function was called was a little over
1,320,460,242 seconds since midnight of January 1<sup>st</sup>, 1970. (This
translates to November 4<sup>th</sup>, 2011 at 7:30:42pm. You can learn how to
convert from Unix epoch time to regular English time at <span class=URL><a href="http://invpy.com/epochtime">http://invpy.com/epochtime</a></span>)</p>

<p class=MsoNormal>If I call <span class=Literal>time.time()</span> from the
interactive shell a few seconds later, it might look like this:</p>

<div style='border:solid windowtext 1.0pt;padding:4.0pt 4.0pt 4.0pt 4.0pt'>

<p class=CodeExampleCxSpFirst style='border:none;padding:0in'>&gt;&gt;&gt;
time.time()</p>

<p class=CodeExampleCxSpLast style='border:none;padding:0in'>1320460261.315</p>

</div>

<p class=MsoNormal>1320460261.315 seconds after midnight of the Unix epoch is
November 4<sup>th</sup>, 2011 at 7:31:01pm. (Actually, it’s 7:31 and 0.315
seconds if you want to be precise.)</p>

<p class=MsoNormal>Dealing with time would be difficult if we had to deal with
strings. It’s hard to tell that 19 seconds have passed if we only had the
string values <span class=Literal>'7:30:42 PM'</span> and <span class=Literal>'7:31:01
PM'</span> to compare. But with epoch time, it’s just a matter of subtracting
the integers <span class=Literal>1320460261.315 - 1320460242.118</span>, which
evaluates to <span class=Literal>19.197000026702881</span>. This value is the
number of seconds between those two times. (The extra <span class=Literal>0.000026702881</span>
comes from very small rounding errors that happen when you do math with
floating point numbers. They only happen sometimes and are usually too tiny to
matter. You can learn more about floating point rounding errors at <span
class=URL><a href="http://invpy.com/roundingerrors">http://invpy.com/roundingerrors</a></span>.)</p>

<p class=MsoNormal>Going back to line 121, if <span class=Literal>time.time() -
TIMEOUT &gt; lastClickTime</span> evaluates to <span class=Literal>True</span>,
then it has been longer than 4 seconds since <span class=Literal>time.time()</span>
was called and stored in <span class=Literal>lastClickTime</span>. If it evaluates
to <span class=Literal>False</span>, then it has been less than 4 seconds.</p>

<div style='border:double windowtext 1.5pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeFeaturedCxSpFirst><span class=SourceLineNumber>122. </span>                <span
class=SourceCodeComment># pushed the incorrect button, or has timed out</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>123. </span>                gameOverAnimation()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>124. </span>                <span
class=SourceCodeComment># reset the variables for a new game:</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>125. </span>                pattern
= []</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>126. </span>                currentStep
= 0</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>127. </span>                waitingForInput
= False</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>128. </span>                score
= 0</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>129. </span>                pygame.time.wait(1000)</p>

<p class=SourceCodeFeaturedCxSpLast><span class=SourceLineNumber>130. </span>                changeBackgroundAnimation()</p>

</div>

<p class=MsoNormal>If either the player clicked on the wrong button or has
timed out, the program should play the “game over” animation and then reset the
variables for a new game. This involves setting the <span class=Literal>pattern</span>
list to a blank list, <span class=Literal>currentStep</span> to <span
class=Literal>0</span>, <span class=Literal>waitingForInput</span> to <span
class=Literal>False</span>, and then <span class=Literal>score</span> to <span
class=Literal>0</span>. A small pause and a new background color will be set to
indicate to the player the start of a new game, which will begin on the next
iteration of the game loop.</p>

<h2><a name="_Toc316488629">Drawing the Board to the Screen</a></h2>

<div style='border:double windowtext 1.5pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeFeaturedCxSpFirst><span class=SourceLineNumber>132. </span>        pygame.display.update()</p>

<p class=SourceCodeFeaturedCxSpLast><span class=SourceLineNumber>133. </span>        FPSCLOCK.tick(FPS)</p>

</div>

<p class=MsoNormal>Just like the other game programs, the last thing done in
the game loop is drawing the display Surface object to the screen and calling
the <span class=Literal>tick()</span> method.</p>

<h2><a name="_Toc316488630">Same Old </a><span class=Literal>terminate()</span>
Function</h2>

<div style='border:double windowtext 1.5pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeFeaturedCxSpFirst><span class=SourceLineNumber>136. </span>def
terminate():</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>137. </span>    pygame.quit()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>138. </span>    sys.exit()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>139. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>140. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>141. </span>def
checkForQuit():</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>142. </span>    for
event in pygame.event.get(QUIT): <span class=SourceCodeComment># get all the
QUIT events</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>143. </span>        terminate()
<span class=SourceCodeComment># terminate if any QUIT events are present</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>144. </span>    for
event in pygame.event.get(KEYUP): <span class=SourceCodeComment># get all the
KEYUP events</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>145. </span>        if
event.key == K_ESCAPE:</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>146. </span>            terminate()
<span class=SourceCodeComment># terminate if the KEYUP event was for the Esc
key</span></p>

<p class=SourceCodeFeaturedCxSpLast><span class=SourceLineNumber>147. </span>        pygame.event.post(event)
<span class=SourceCodeComment># put the other KEYUP event objects back</span></p>

</div>

<p class=MsoNormal>The <span class=Literal>terminate()</span> and <span
class=Literal>checkForQuit()</span> functions were used and explained in the
Sliding Puzzle chapter, so we will skip describing them again.</p>

<h2><a name="_Toc316488631">Reusing The Constant Variables</a></h2>

<div style='border:double windowtext 1.5pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeFeaturedCxSpFirst><span class=SourceLineNumber>150. </span>def
flashButtonAnimation(color, animationSpeed=50):</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>151. </span>    if
color == YELLOW:</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>152. </span>        sound
= BEEP1</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>153. </span>        flashColor
= BRIGHTYELLOW</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>154. </span>        rectangle
= YELLOWRECT</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>155. </span>    elif
color == BLUE:</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>156. </span>        sound
= BEEP2</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>157. </span>        flashColor
= BRIGHTBLUE</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>158. </span>        rectangle
= BLUERECT</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>159. </span>    elif
color == RED:</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>160. </span>        sound
= BEEP3</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>161. </span>        flashColor
= BRIGHTRED</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>162. </span>        rectangle
= REDRECT</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>163. </span>    elif
color == GREEN:</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>164. </span>        sound
= BEEP4</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>165. </span>        flashColor
= BRIGHTGREEN</p>

<p class=SourceCodeFeaturedCxSpLast><span class=SourceLineNumber>166. </span>        rectangle
= GREENRECT</p>

</div>

<p class=MsoNormal>Depending on which Color value is passed as an argument for
the color parameter, the sound, color of the bright flash, and rectangular area
of the flash will be different. Line 151 to 166 sets three local variables
differently depending on the value in the <span class=Literal>color</span>
parameter: <span class=Literal>sound</span>, <span class=Literal>flashColor</span>,
and <span class=Literal>rectangle</span>.</p>

<h2><a name="_Toc316488632">Animating the Button Flash</a></h2>

<div style='border:double windowtext 1.5pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeFeaturedCxSpFirst><span class=SourceLineNumber>168. </span>    origSurf
= DISPLAYSURF.copy()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>169. </span>    flashSurf
= pygame.Surface((BUTTONSIZE, BUTTONSIZE))</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>170. </span>    flashSurf
= flashSurf.convert_alpha()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>171. </span>    r,
g, b = flashColor</p>

<p class=SourceCodeFeaturedCxSpLast><span class=SourceLineNumber>172. </span>    sound.play()</p>

</div>

<p class=MsoNormal>The process of animating the button flash is simple: On each
frame of the animation, the normal board is drawn and then on top of that, the
bright color version of the button that is flashing is drawn over the button.
The alpha value of the bright color starts off at <span class=Literal>0</span>
for the first frame of animation, but then on each frame after the alpha value
is slowly increased until it is fully opaque and the bright color version
completely paints over the normal button color. This will make it look like the
button is slowly brightening up.</p>

<p class=MsoNormal>The brightening up is the first half of the animation. The
second half is the button dimming. This is done with the same code, except that
instead of the alpha value increasing for each frame, it will be decreasing. As
the alpha value gets lower and lower, the bright color painted on top will
become more and more invisible, until only the original board with the dull
colors is visible.</p>

<p class=MsoNormal>To do this in code, line 168 creates a copy of the display
Surface object and stores it in <span class=Literal>origSurf</span>. Line 169
creates a new Surface object the size of a single button and stores it in <span
class=Literal>flashSurf</span>. The <span class=Literal>convert_alpha()</span>
method is called on <span class=Literal>flashSurf</span> so that the Surface
object can have transparent colors drawn on it (otherwise, the alpha value in
the Color objects we use will be ignored and automatically assumed to be 255).
In your own game programs, if you are having trouble getting color transparency
to work, make sure that you have called the <span class=Literal>convert_alpha()</span>
method on any Surface objects that have transparent colors painted on them.</p>

<p class=MsoNormal>Line 171 creates individual local variables named <span
class=Literal>r</span>, <span class=Literal>g</span>, and <span class=Literal>b</span>
to store the individual RGB values of the tuple stored in <span class=Literal>flashColor</span>.
This is just some syntactic sugar that makes the rest of the code in this
function easier to read. Before we begin animating the button flash, line 172
will play the sound effect for that button. The program execution keeps going
after the sound effect has started to play, so the sound will be playing during
the button flash animation.</p>

<div style='border:double windowtext 1.5pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeFeaturedCxSpFirst><span class=SourceLineNumber>173. </span>    for
start, end, step in ((0, 255, 1), (255, 0, -1)): <span class=SourceCodeComment>#
animation loop</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>174. </span>        for
alpha in range(start, end, animationSpeed * step):</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>175. </span>            checkForQuit()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>176. </span>            DISPLAYSURF.blit(origSurf,
(0, 0))</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>177. </span>            flashSurf.fill((r,
g, b, alpha))</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>178. </span>            DISPLAYSURF.blit(flashSurf,
rectangle.topleft)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>179. </span>            pygame.display.update()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>180. </span>            FPSCLOCK.tick(FPS)</p>

<p class=SourceCodeFeaturedCxSpLast><span class=SourceLineNumber>181. </span>    DISPLAYSURF.blit(origSurf,
(0, 0))</p>

</div>

<p class=MsoNormal>Remember that to do the animation, we want to first draw the
<span class=Literal>flashSurf</span> with color that has increasing alpha
values from <span class=Literal>0</span> to <span class=Literal>255</span> to
do the brightening part of the animation. Then to do the dimming, we want the
alpha value to go from <span class=Literal>255</span> to <span class=Literal>0</span>.
We <em>could</em> do that with code like this:</p>

<div style='border:solid windowtext 1.0pt;padding:4.0pt 4.0pt 4.0pt 4.0pt'>

<p class=CodeExampleCxSpFirst style='border:none;padding:0in'>    for alpha in <strong><span
style='font-family:"Courier"'>range(0, 255, animationSpeed)</span></strong>:
# brightening</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>       
checkForQuit()</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>        DISPLAYSURF.blit(origSurf,
(0, 0))</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>       
flashSurf.fill((r, g, b, alpha))</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>        DISPLAYSURF.blit(flashSurf,
rectangle.topleft)</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>       
pygame.display.update()</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>       
FPSCLOCK.tick(FPS)</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>    for alpha in
<strong><span style='font-family:"Courier"'>range(255, 0,
-animationSpeed)</span></strong>: # dimming</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>       
checkForQuit()</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>        DISPLAYSURF.blit(origSurf,
(0, 0))</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>       
flashSurf.fill((r, g, b, alpha))</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>        DISPLAYSURF.blit(flashSurf,
rectangle.topleft)</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>       
pygame.display.update()</p>

<p class=CodeExampleCxSpLast style='border:none;padding:0in'>       
FPSCLOCK.tick(FPS)</p>

</div>

<p class=MsoNormal>But notice that the code inside the <span class=Literal>for</span>
loops handles drawing the frame and are identical to each other. If we wrote
the code like the above, then the first <span class=Literal>for</span> loop
would handle the brightening part of the animation (where the alpha value goes
from <span class=Literal>0</span> to <span class=Literal>255</span>) and the
second <span class=Literal>for</span> loop would handle the dimming part of the
animation (where the alpha values goes from <span class=Literal>255</span> to <span
class=Literal>0</span>). Note that for the second <span class=Literal>for</span>
loop, the third argument to the <span class=Literal>range()</span> call is a
negative number.</p>

<p class=MsoNormal>Whenever we have identical code like this, we can probably shorten
our code so we don’t have to repeat it. This is what we do with the <span
class=Literal>for</span> loop on line 173, which supplies different values for
the <span class=Literal>range()</span> call on line 174:</p>

<div style='border:double windowtext 1.5pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeFeaturedCxSpFirst><span class=SourceLineNumber>173. </span>    for
start, end, step in ((0, 255, 1), (255, 0, -1)): <span class=SourceCodeComment>#
animation loop</span></p>

<p class=SourceCodeFeaturedCxSpLast><span class=SourceLineNumber>174. </span>        for
alpha in range(start, end, animationSpeed * step):</p>

</div>

<p class=MsoNormal>On the first iteration of line 173’s <span class=Literal>for</span>
loop, <span class=Literal>start</span> is set to <span class=Literal>0</span>, <span
class=Literal>end</span> is set to <span class=Literal>255</span>, and <span
class=Literal>step</span> is set to <span class=Literal>1</span>. This way,
when the <span class=Literal>for</span> loop on line 174 is executed, it is
calling <span class=Literal>range(0, 255, animationSpeed)</span>. (Note that <span
class=Literal>animationSpeed * 1</span> is the same as <span class=Literal>animationSpeed</span>.
Multiplying a number by <span class=Literal>1</span> gives us the same number.)</p>

<p class=MsoNormal>Line 174’s <span class=Literal>for</span> loop then executes
and performs the brightening animation.</p>

<p class=MsoNormal>On the second iteration of line 173’s <span class=Literal>for</span>
loop (there are always two and only two iterations of this inner <span
class=Literal>for</span> loop), <span class=Literal>start</span> is set to <span
class=Literal>255</span>, <span class=Literal>end</span> is set to <span
class=Literal>0</span>, and <span class=Literal>step</span> is set to <span
class=Literal>-1</span>. When the line 174’s <span class=Literal>for</span>
loop is executed, it is calling <span class=Literal>range(255, 0,
-animationSpeed)</span>. (Note that <span class=Literal>animationSpeed * -1</span>
evaluates to <span class=Literal>-animationSpeed</span>, since multiplying any
number by <span class=Literal>-1</span> returns the negative form of that same
number.)</p>

<p class=MsoNormal>This way, we don’t have to have two separate <span
class=Literal>for</span> loops and repeat all the code that is inside of them.
Here’s the code again that is inside line 174’s <span class=Literal>for</span>
loop:</p>

<div style='border:double windowtext 1.5pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeFeaturedCxSpFirst><span class=SourceLineNumber>175. </span>            checkForQuit()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>176. </span>            DISPLAYSURF.blit(origSurf,
(0, 0))</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>177. </span>            flashSurf.fill((r,
g, b, alpha))</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>178. </span>            DISPLAYSURF.blit(flashSurf,
rectangle.topleft)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>179. </span>            pygame.display.update()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>180. </span>            FPSCLOCK.tick(FPS)</p>

<p class=SourceCodeFeaturedCxSpLast><span class=SourceLineNumber>181. </span>    DISPLAYSURF.blit(origSurf,
(0, 0))</p>

</div>

<p class=MsoNormal>We check for any <span class=Literal>QUIT</span> events (in
case the user tried to close the program during the animation), then blit the <span
class=Literal>origSurf</span> Surface to the display Surface. Then we paint the
<span class=Literal>flashSurf</span> Surface by calling <span class=Literal>fill()</span>
(supplying the <span class=Literal>r</span>, <span class=Literal>g</span>, <span
class=Literal>b</span> values of the color we got on line 171 and the alpha
value that the <span class=Literal>for</span> loop sets in the <span
class=Literal>alpha</span> variable). Then the <span class=Literal>flashSurf</span>
Surface is blitted to the display Surface. </p>

<p class=MsoNormal>Then, to make the display Surface appear on the screen, <span
class=Literal>pygame.display.update()</span> is called on line 179. To make
sure the animation doesn’t play as fast as the computer can draw it, we add
short pauses with a call to the <span class=Literal>tick()</span> method. (If
you want to see the flashing animation play very slowly, put a low number like
1 or 2 as the argument to <span class=Literal>tick()</span> instead of <span
class=Literal>FPS</span>.)</p>

<h2><a name="_Toc316488633">Drawing the Buttons</a></h2>

<div style='border:double windowtext 1.5pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeFeaturedCxSpFirst><span class=SourceLineNumber>184. </span>def
drawButtons():</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>185. </span>    pygame.draw.rect(DISPLAYSURF,
YELLOW, YELLOWRECT)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>186. </span>    pygame.draw.rect(DISPLAYSURF,
BLUE,   BLUERECT)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>187. </span>    pygame.draw.rect(DISPLAYSURF,
RED,    REDRECT)</p>

<p class=SourceCodeFeaturedCxSpLast><span class=SourceLineNumber>188. </span>    pygame.draw.rect(DISPLAYSURF,
GREEN,  GREENRECT)</p>

</div>

<p class=MsoNormal>Since each of the buttons is just a rectangle of a certain
color in a certain place, we just make four calls to <span class=Literal>pygame.draw.rect()</span>
to draw the buttons on the display Surface. The Color object and the Rect
object we use to position them never change, which is why we stored them in
constant variables like <span class=Literal>YELLOW</span> and <span
class=Literal>YELLOWRECT</span>.</p>

<h2><a name="_Toc316488634">Animating the Background Change</a></h2>

<div style='border:double windowtext 1.5pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeFeaturedCxSpFirst><span class=SourceLineNumber>191. </span>def
changeBackgroundAnimation(animationSpeed=40):</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>192. </span>    global
bgColor</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>193. </span>    newBgColor
= (random.randint(0, 255), random.randint(0, 255), random.randint(0, 255))</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>194. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>195. </span>    newBgSurf
= pygame.Surface((WINDOWWIDTH, WINDOWHEIGHT))</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>196. </span>    newBgSurf
= newBgSurf.convert_alpha()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>197. </span>    r,
g, b = newBgColor</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>198. </span>    for
alpha in range(0, 255, animationSpeed): <span class=SourceCodeComment>#
animation loop</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>199. </span>        checkForQuit()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>200. </span>        DISPLAYSURF.fill(bgColor)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>201. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>202. </span>        newBgSurf.fill((r,
g, b, alpha))</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>203. </span>        DISPLAYSURF.blit(newBgSurf,
(0, 0))</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>204. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>205. </span>        drawButtons()
<span class=SourceCodeComment># redraw the buttons on top of the tint</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>206. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>207. </span>        pygame.display.update()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>208. </span>        FPSCLOCK.tick(FPS)</p>

<p class=SourceCodeFeaturedCxSpLast><span class=SourceLineNumber>209. </span>    bgColor
= newBgColor</p>

</div>

<p class=MsoNormal>The background color change animation happens whenever the
player finishes entering the entire pattern correctly. On each iteration
through the loop which starts on line 198 the entire display Surface has to be
redrawn (blended with a less and less transparent new background color, until
the background is completely covered by the new color). The steps done on each
iteration of the loop are:</p>

<p class=MsoListParagraphCxSpFirst style='text-indent:-.25in'><span
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Line 200 fills in the entire display Surface (stored in <span
class=Literal>DISPLAYSURF</span>) with the old background color (which is
stored in <span class=Literal>bgColor</span>).</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Line 202 fills in a different Surface object (stored in <span
class=Literal>newBgSurf</span>) with the new background color’s RGB values (and
the alpha transparency value changes on each iteration since that is what the <span
class=Literal>for</span> loop on line 198 does).</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Line 203 then draws the <span class=Literal>newBgSurf</span>
Surface to the display Surface in <span class=Literal>DISPLAYSURF</span>. The
reason we didn’t just paint our semitransparent new background color on <span
class=Literal>DISPLAYSURF</span> to begin with is because the <span
class=Literal>fill()</span> method will just replace the color on the Surface,
whereas the <span class=Literal>blit()</span> method will blend the colors.</p>

<p class=MsoListParagraphCxSpMiddle style='text-indent:-.25in'><span
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Now that we have the background the way we want it, we’ll draw
the buttons over it with a call to <span class=Literal>drawButtons()</span> on
line 205. </p>

<p class=MsoListParagraphCxSpLast style='text-indent:-.25in'><span
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Line 207 and 208 then just draws the display Surface to the
screen and adds a pause.</p>

<p class=MsoNormal>The reason there is a <span class=Literal>global</span>
statement at the beginning of the <span class=Literal>changeBackgroundAnimation()</span>
function is for the <span class=Literal>bgColor</span> variable is because this
function modifies the content of the variable with an assignment statement on
line 209. Any function can read the value of a global variable without
specifying the <span class=Literal>global</span> statement. </p>

<p class=MsoNormal>If that function assigns a value to a global variable
without a <span class=Literal>global</span> statement, then Python considers
that variable to be a local variable that just happens to have the same name as
a global variable. The <span class=Literal>main()</span> function uses the <span
class=Literal>bgColor</span> variable but doesn’t need a global statement for
it because it only reads the contents of the <span class=Literal>bgColor</span>
the <span class=Literal>main()</span> function never assigns <span
class=Literal>bgColor</span> a new value. This concept is explained in more
detail at <span class=URL><a href="http://invpy.com/global">http://invpy.com/global</a></span>.</p>

<h2><a name="_Toc316488635">The Game Over Animation</a></h2>

<div style='border:double windowtext 1.5pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeFeaturedCxSpFirst><span class=SourceLineNumber>212. </span>def
gameOverAnimation(color=WHITE, animationSpeed=50):</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>213. </span>    <span
class=SourceCodeComment># play all beeps at once, then flash the background</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>214. </span>    origSurf
= DISPLAYSURF.copy()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>215. </span>    flashSurf
= pygame.Surface(DISPLAYSURF.get_size())</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>216. </span>    flashSurf
= flashSurf.convert_alpha()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>217. </span>    BEEP1.play()
<span class=SourceCodeComment># play all four beeps at the same time, roughly.</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>218. </span>    BEEP2.play()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>219. </span>    BEEP3.play()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>220. </span>    BEEP4.play()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>221. </span>    r,
g, b = color</p>

<p class=SourceCodeFeaturedCxSpLast><span class=SourceLineNumber>222. </span>    for
i in range(3): <span class=SourceCodeComment># do the flash 3 times</span></p>

</div>

<p class=MsoNormal>Each of the iterations of the <span class=Literal>for</span>
loop on the next line (line 223 below) will perform a flash. To have three
flashes done, we put all of that code in a <span class=Literal>for</span> loop
that has three iterations. If you want more or fewer flashes, then change the
integer that is passed to <span class=Literal>range()</span> on line 222.</p>

<div style='border:double windowtext 1.5pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeFeatured><span class=SourceLineNumber>223. </span>        for
start, end, step in ((0, 255, 1), (255, 0, -1)):</p>

</div>

<p class=MsoNormal>The <span class=Literal>for</span> loop on line 223 is
exactly the same as the one line 173. The <span class=Literal>start</span>, <span
class=Literal>end</span>, and <span class=Literal>step</span> variables will be
used on the next <span class=Literal>for</span> loop (on line 224) to control
how the <span class=Literal>alpha</span> variable changes. Reread the “Animating
the Button Flash” section if you need to refresh yourself on how these loops
work.</p>

<div style='border:double windowtext 1.5pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeFeaturedCxSpFirst><span class=SourceLineNumber>224. </span>            <span
class=SourceCodeComment># The first iteration in this loop sets the following
for loop</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>225. </span>            <span
class=SourceCodeComment># to go from 0 to 255, the second from 255 to 0.</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>226. </span>            for
alpha in range(start, end, animationSpeed * step): <span
class=SourceCodeComment># animation loop</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>227. </span>                <span
class=SourceCodeComment># alpha means transparency. 255 is opaque, 0 is
invisible</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>228. </span>                checkForQuit()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>229. </span>                flashSurf.fill((r,
g, b, alpha))</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>230. </span>                DISPLAYSURF.blit(origSurf,
(0, 0))</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>231. </span>                DISPLAYSURF.blit(flashSurf,
(0, 0))</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>232. </span>                drawButtons()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>233. </span>                pygame.display.update()</p>

<p class=SourceCodeFeaturedCxSpLast><span class=SourceLineNumber>234. </span>                FPSCLOCK.tick(FPS)</p>

</div>

<p class=MsoNormal>This animation loop works the same as the previous flashing
animation code in the “Animating the Background Change” section. The copy of
the original Surface object stored in <span class=Literal>origSurf</span> is
drawn on the display Surface, then <span class=Literal>flashSurf</span> (which
has the new flashing color painted on it) is blitted on top of the display
Surface. After the background color is set up, the buttons are drawn on top on
line 232. Finally the display Surface is drawn to the screen with the call to <span
class=Literal>pygame.display.update()</span>.</p>

<p class=MsoNormal>The <span class=Literal>for</span> loop on line 226 adjusts
the alpha value for the color used for each frame of animation (increasing at
first, and then decreasing).</p>

<h2><a name="_Toc316488636">Converting from Pixel Coordinates to Buttons</a></h2>

<div style='border:double windowtext 1.5pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeFeaturedCxSpFirst><span class=SourceLineNumber>238. </span>def
getButtonClicked(x, y):</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>239. </span>    if
YELLOWRECT.collidepoint( (x, y) ):</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>240. </span>        return
YELLOW</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>241. </span>    elif
BLUERECT.collidepoint( (x, y) ):</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>242. </span>        return
BLUE</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>243. </span>    elif
REDRECT.collidepoint( (x, y) ):</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>244. </span>        return
RED</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>245. </span>    elif
GREENRECT.collidepoint( (x, y) ):</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>246. </span>        return
GREEN</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>247. </span>    return
None</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>248. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>249. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>250. </span>if
__name__ == '__main__':</p>

<p class=SourceCodeFeaturedCxSpLast><span class=SourceLineNumber>251. </span>    main()</p>

</div>

<p class=MsoNormal>The <span class=Literal>getButtonClicked()</span> function
simply takes XY pixel coordinates and returns either the values <span
class=Literal>YELLOW</span>, <span class=Literal>BLUE</span>, <span
class=Literal>RED</span>, or <span class=Literal>GREEN</span> if one of the
buttons was clicked, or returns <span class=Literal>None</span> if the XY pixel
coordinates are not over any of the four buttons.</p>

<h2><a name="_Toc316488637">Explicit is Better Than Implicit</a></h2>

<p class=MsoNormal>You may have noticed that the code for <span class=Literal>getButtonClicked()</span>
ends with a return <span class=Literal>None</span> statement on line 247. This
might seem like an odd thing to type out, since all functions return <span
class=Literal>None</span> if they don’t have any <span class=Literal>return</span>
statement at all. We could have left line 47 out entirely and the program would
have worked the exact same way. So why bother writing it in?</p>

<p class=MsoNormal>Normally when a function reaches the end and returns the <span
class=Literal>None</span> value implicitly (that is, there is no <span
class=Literal>return</span> statement outright saying that it is returning <span
class=Literal>None</span>) the code that calls it doesn’t care about the return
value. All function calls have to return a value (so that they can evaluate to
something and be part of expressions), but our code doesn’t always make use of
the return value.</p>

<p class=MsoNormal>For example, think about the <span class=Literal>print()</span>
function. Technically, this function returns the <span class=Literal>None</span>
value, but we never care about it:</p>

<div style='border:solid windowtext 1.0pt;padding:4.0pt 4.0pt 4.0pt 4.0pt'>

<p class=CodeExampleCxSpFirst style='border:none;padding:0in'>&gt;&gt;&gt; spam
= print('Hello')</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>Hello</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>&gt;&gt;&gt;
spam == None</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>True</p>

<p class=CodeExampleCxSpLast style='border:none;padding:0in'>&gt;&gt;&gt;&nbsp;</p>

</div>

<p class=MsoNormal>However, when <span class=Literal>getButtonClicked()</span>
returns <span class=Literal>None</span>, it means that the coordinates that
were passed to it were not over any of the four buttons. To make it clear that
in this case the value <span class=Literal>None</span> is returned from <span
class=Literal>getButtonClicked()</span>, we have the <span class=Literal>return</span>
<span class=Literal>None</span> line at the end of the function.</p>

<p class=MsoNormal>To make your code more readable, it is better to have your
code be explicit (that is, clearly state something even if it might be obvious)
rather than implicit (that is, leaving it up to the person reading code to know
how it works without outright telling them). In fact, “explicit is better than
implicit” is one of the Python Koans. </p>

<p class=MsoNormal>The koans are a group of little sayings about how to write good
code. There’s an Easter egg (that is, a little hidden surprise) in the Python
interactive shell where if you try to import a module named <span
class=Literal>this</span>, then it will display “The Zen of Python” koans. Try
it out in the interactive shell:</p>

<div style='border:solid windowtext 1.0pt;padding:4.0pt 4.0pt 4.0pt 4.0pt'>

<p class=CodeExampleCxSpFirst style='border:none;padding:0in'>&gt;&gt;&gt;
import this</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>The Zen of Python,
by Tim Peters</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>&nbsp;</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>Beautiful is
better than ugly.</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>Explicit is
better than implicit.</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>Simple is better
than complex.</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>Complex is
better than complicated.</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>Flat is better
than nested.</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>Sparse is better
than dense.</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>Readability
counts.</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>Special cases
aren't special enough to break the rules.</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>Although
practicality beats purity.</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>Errors should
never pass silently.</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>Unless
explicitly silenced.</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>In the face of
ambiguity, refuse the temptation to guess.</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>There should be
one-- and preferably only one --obvious way to do it.</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>Although that
way may not be obvious at first unless you're Dutch.</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>Now is better
than never.</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>Although never
is often better than *right* now.</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>If the
implementation is hard to explain, it's a bad idea.</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>If the
implementation is easy to explain, it may be a good idea.</p>

<p class=CodeExampleCxSpLast style='border:none;padding:0in'>Namespaces are one
honking great idea -- let's do more of those!</p>

</div>

<p class=MsoNormal>If you’d like to know more about what these individual koans
mean, visit <span class=URL><a href="http://invpy.com/zen">http://invpy.com/zen</a></span>.</p>

</div>

</body>

</html>
