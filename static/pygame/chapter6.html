<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=UTF-8">
<meta name=Generator content="Microsoft Word 14 (filtered)">
<style>
<!--
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:0in;
	line-height:115%;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";}
h1
	{mso-style-link:"Heading 1 Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:15.0pt;
	margin-left:0in;
	border:none;
	padding:0in;
	font-size:36.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";
	font-variant:small-caps;
	color:black;
	letter-spacing:.25pt;
	font-weight:normal;}
h1.CxSpFirst
	{mso-style-link:"Heading 1 Char";
	margin:0in;
	margin-bottom:.0001pt;
	border:none;
	padding:0in;
	font-size:36.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";
	font-variant:small-caps;
	color:black;
	letter-spacing:.25pt;
	font-weight:normal;}
h1.CxSpMiddle
	{mso-style-link:"Heading 1 Char";
	margin:0in;
	margin-bottom:.0001pt;
	border:none;
	padding:0in;
	font-size:36.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";
	font-variant:small-caps;
	color:black;
	letter-spacing:.25pt;
	font-weight:normal;}
h1.CxSpLast
	{mso-style-link:"Heading 1 Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:15.0pt;
	margin-left:0in;
	border:none;
	padding:0in;
	font-size:36.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";
	font-variant:small-caps;
	color:black;
	letter-spacing:.25pt;
	font-weight:normal;}
h2
	{mso-style-link:"Heading 2 Char";
	margin-top:10.0pt;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"Cambria","serif";
	color:black;}
h3
	{mso-style-link:"Heading 3 Char";
	margin-top:10.0pt;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	page-break-after:avoid;
	font-size:12.0pt;
	font-family:"Cambria","serif";
	color:#4F81BD;}
p.MsoToc1, li.MsoToc1, div.MsoToc1
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:0in;
	line-height:115%;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";}
p.MsoToc2, li.MsoToc2, div.MsoToc2
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:11.0pt;
	line-height:115%;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";}
p.MsoToc3, li.MsoToc3, div.MsoToc3
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:22.0pt;
	line-height:115%;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";}
p.MsoToc4, li.MsoToc4, div.MsoToc4
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:33.0pt;
	line-height:115%;
	font-size:12.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoToc5, li.MsoToc5, div.MsoToc5
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:44.0pt;
	line-height:115%;
	font-size:12.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoToc6, li.MsoToc6, div.MsoToc6
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:55.0pt;
	line-height:115%;
	font-size:12.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoToc7, li.MsoToc7, div.MsoToc7
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:66.0pt;
	line-height:115%;
	font-size:12.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoToc8, li.MsoToc8, div.MsoToc8
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:77.0pt;
	line-height:115%;
	font-size:12.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoToc9, li.MsoToc9, div.MsoToc9
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:88.0pt;
	line-height:115%;
	font-size:12.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoCommentText, li.MsoCommentText, div.MsoCommentText
	{mso-style-link:"Comment Text Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:0in;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";}
p.MsoHeader, li.MsoHeader, div.MsoHeader
	{mso-style-link:"Header Char";
	margin:0in;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";}
p.MsoFooter, li.MsoFooter, div.MsoFooter
	{mso-style-link:"Footer Char";
	margin:0in;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";}
p.MsoCaption, li.MsoCaption, div.MsoCaption
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:0in;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";
	color:#4F81BD;
	font-weight:bold;}
p.MsoTitle, li.MsoTitle, div.MsoTitle
	{mso-style-link:"Title Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:15.0pt;
	margin-left:0in;
	border:none;
	padding:0in;
	font-size:48.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";
	color:black;
	letter-spacing:.25pt;}
p.MsoTitleCxSpFirst, li.MsoTitleCxSpFirst, div.MsoTitleCxSpFirst
	{mso-style-link:"Title Char";
	margin:0in;
	margin-bottom:.0001pt;
	border:none;
	padding:0in;
	font-size:48.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";
	color:black;
	letter-spacing:.25pt;}
p.MsoTitleCxSpMiddle, li.MsoTitleCxSpMiddle, div.MsoTitleCxSpMiddle
	{mso-style-link:"Title Char";
	margin:0in;
	margin-bottom:.0001pt;
	border:none;
	padding:0in;
	font-size:48.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";
	color:black;
	letter-spacing:.25pt;}
p.MsoTitleCxSpLast, li.MsoTitleCxSpLast, div.MsoTitleCxSpLast
	{mso-style-link:"Title Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:15.0pt;
	margin-left:0in;
	border:none;
	padding:0in;
	font-size:48.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";
	color:black;
	letter-spacing:.25pt;}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;}
p.MsoCommentSubject, li.MsoCommentSubject, div.MsoCommentSubject
	{mso-style-link:"Comment Subject Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:0in;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";
	font-weight:bold;}
p.MsoAcetate, li.MsoAcetate, div.MsoAcetate
	{mso-style-link:"Balloon Text Char";
	margin:0in;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:"Tahoma","sans-serif";}
span.MsoPlaceholderText
	{color:gray;}
p.MsoRMPane, li.MsoRMPane, div.MsoRMPane
	{margin:0in;
	margin-bottom:.0001pt;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";}
p.MsoListParagraph, li.MsoListParagraph, div.MsoListParagraph
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:.5in;
	line-height:115%;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";}
p.MsoListParagraphCxSpFirst, li.MsoListParagraphCxSpFirst, div.MsoListParagraphCxSpFirst
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.5in;
	margin-bottom:.0001pt;
	line-height:115%;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";}
p.MsoListParagraphCxSpMiddle, li.MsoListParagraphCxSpMiddle, div.MsoListParagraphCxSpMiddle
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.5in;
	margin-bottom:.0001pt;
	line-height:115%;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";}
p.MsoListParagraphCxSpLast, li.MsoListParagraphCxSpLast, div.MsoListParagraphCxSpLast
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:.5in;
	line-height:115%;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";}
p.MsoTocHeading, li.MsoTocHeading, div.MsoTocHeading
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:15.0pt;
	margin-left:0in;
	border:none;
	padding:0in;
	font-size:36.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";
	font-variant:small-caps;
	color:black;
	letter-spacing:.25pt;}
p.MsoTocHeadingCxSpFirst, li.MsoTocHeadingCxSpFirst, div.MsoTocHeadingCxSpFirst
	{margin:0in;
	margin-bottom:.0001pt;
	border:none;
	padding:0in;
	font-size:36.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";
	font-variant:small-caps;
	color:black;
	letter-spacing:.25pt;}
p.MsoTocHeadingCxSpMiddle, li.MsoTocHeadingCxSpMiddle, div.MsoTocHeadingCxSpMiddle
	{margin:0in;
	margin-bottom:.0001pt;
	border:none;
	padding:0in;
	font-size:36.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";
	font-variant:small-caps;
	color:black;
	letter-spacing:.25pt;}
p.MsoTocHeadingCxSpLast, li.MsoTocHeadingCxSpLast, div.MsoTocHeadingCxSpLast
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:15.0pt;
	margin-left:0in;
	border:none;
	padding:0in;
	font-size:36.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";
	font-variant:small-caps;
	color:black;
	letter-spacing:.25pt;}
span.Heading1Char
	{mso-style-name:"Heading 1 Char";
	mso-style-link:"Heading 1";
	font-family:"Franklin Gothic Demi","sans-serif";
	font-variant:small-caps;
	color:black;
	letter-spacing:.25pt;}
span.Heading2Char
	{mso-style-name:"Heading 2 Char";
	mso-style-link:"Heading 2";
	font-family:"Cambria","serif";
	color:black;
	font-weight:bold;}
span.Heading3Char
	{mso-style-name:"Heading 3 Char";
	mso-style-link:"Heading 3";
	font-family:"Cambria","serif";
	color:#4F81BD;
	font-weight:bold;}
span.TitleChar
	{mso-style-name:"Title Char";
	mso-style-link:Title;
	font-family:"Franklin Gothic Demi","sans-serif";
	color:black;
	letter-spacing:.25pt;}
span.Definition
	{mso-style-name:Definition;
	font-weight:bold;}
span.HeaderChar
	{mso-style-name:"Header Char";
	mso-style-link:Header;
	font-family:"Times New Roman","serif";}
span.FooterChar
	{mso-style-name:"Footer Char";
	mso-style-link:Footer;
	font-family:"Times New Roman","serif";}
span.BalloonTextChar
	{mso-style-name:"Balloon Text Char";
	mso-style-link:"Balloon Text";
	font-family:"Tahoma","sans-serif";}
span.TableHeading
	{mso-style-name:"Table Heading";
	font-weight:bold;}
p.ChapterTitle, li.ChapterTitle, div.ChapterTitle
	{mso-style-name:"Chapter Title";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:15.0pt;
	margin-left:0in;
	border:none;
	padding:0in;
	font-size:36.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";
	font-variant:small-caps;
	color:black;
	letter-spacing:.25pt;}
p.ChapterTitleCxSpFirst, li.ChapterTitleCxSpFirst, div.ChapterTitleCxSpFirst
	{mso-style-name:"Chapter TitleCxSpFirst";
	margin:0in;
	margin-bottom:.0001pt;
	border:none;
	padding:0in;
	font-size:36.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";
	font-variant:small-caps;
	color:black;
	letter-spacing:.25pt;}
p.ChapterTitleCxSpMiddle, li.ChapterTitleCxSpMiddle, div.ChapterTitleCxSpMiddle
	{mso-style-name:"Chapter TitleCxSpMiddle";
	margin:0in;
	margin-bottom:.0001pt;
	border:none;
	padding:0in;
	font-size:36.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";
	font-variant:small-caps;
	color:black;
	letter-spacing:.25pt;}
p.ChapterTitleCxSpLast, li.ChapterTitleCxSpLast, div.ChapterTitleCxSpLast
	{mso-style-name:"Chapter TitleCxSpLast";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:15.0pt;
	margin-left:0in;
	border:none;
	padding:0in;
	font-size:36.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";
	font-variant:small-caps;
	color:black;
	letter-spacing:.25pt;}
span.URL
	{mso-style-name:URL;
	color:black;
	text-decoration:underline;}
p.SourceCodeFeatured, li.SourceCodeFeatured, div.SourceCodeFeatured
	{mso-style-name:"Source Code \(Featured\)";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:6.0pt;
	margin-left:0in;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:"Courier";}
p.SourceCodeFeaturedCxSpFirst, li.SourceCodeFeaturedCxSpFirst, div.SourceCodeFeaturedCxSpFirst
	{mso-style-name:"Source Code \(Featured\)CxSpFirst";
	margin:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:"Courier";}
p.SourceCodeFeaturedCxSpMiddle, li.SourceCodeFeaturedCxSpMiddle, div.SourceCodeFeaturedCxSpMiddle
	{mso-style-name:"Source Code \(Featured\)CxSpMiddle";
	margin:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:"Courier";}
p.SourceCodeFeaturedCxSpLast, li.SourceCodeFeaturedCxSpLast, div.SourceCodeFeaturedCxSpLast
	{mso-style-name:"Source Code \(Featured\)CxSpLast";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:6.0pt;
	margin-left:0in;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:"Courier";}
p.SampleRun, li.SampleRun, div.SampleRun
	{mso-style-name:"Sample Run";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:6.0pt;
	margin-left:0in;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:"Courier";
	color:#1F497D;}
p.SampleRunCxSpFirst, li.SampleRunCxSpFirst, div.SampleRunCxSpFirst
	{mso-style-name:"Sample RunCxSpFirst";
	margin:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:"Courier";
	color:#1F497D;}
p.SampleRunCxSpMiddle, li.SampleRunCxSpMiddle, div.SampleRunCxSpMiddle
	{mso-style-name:"Sample RunCxSpMiddle";
	margin:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:"Courier";
	color:#1F497D;}
p.SampleRunCxSpLast, li.SampleRunCxSpLast, div.SampleRunCxSpLast
	{mso-style-name:"Sample RunCxSpLast";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:6.0pt;
	margin-left:0in;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:"Courier";
	color:#1F497D;}
span.SampleRunResponse
	{mso-style-name:"Sample Run Response";
	color:black;}
span.SourceCodeComment
	{mso-style-name:"Source Code Comment";
	color:#7F7F7F;}
span.SourceLineNumber
	{mso-style-name:"Source Line Number";
	color:gray;}
p.CodeExample, li.CodeExample, div.CodeExample
	{mso-style-name:"Code Example";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:0in;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:"Courier";}
p.CodeExampleCxSpFirst, li.CodeExampleCxSpFirst, div.CodeExampleCxSpFirst
	{mso-style-name:"Code ExampleCxSpFirst";
	margin:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:"Courier";}
p.CodeExampleCxSpMiddle, li.CodeExampleCxSpMiddle, div.CodeExampleCxSpMiddle
	{mso-style-name:"Code ExampleCxSpMiddle";
	margin:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:"Courier";}
p.CodeExampleCxSpLast, li.CodeExampleCxSpLast, div.CodeExampleCxSpLast
	{mso-style-name:"Code ExampleCxSpLast";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:0in;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:"Courier";}
span.Literal
	{mso-style-name:Literal;
	font-family:Courier;}
p.SourceCodeHeadline, li.SourceCodeHeadline, div.SourceCodeHeadline
	{mso-style-name:"Source Code Headline";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:6.0pt;
	margin-left:0in;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:"Calibri","sans-serif";
	font-weight:bold;}
p.SourceCodeHeadlineCxSpFirst, li.SourceCodeHeadlineCxSpFirst, div.SourceCodeHeadlineCxSpFirst
	{mso-style-name:"Source Code HeadlineCxSpFirst";
	margin:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:"Calibri","sans-serif";
	font-weight:bold;}
p.SourceCodeHeadlineCxSpMiddle, li.SourceCodeHeadlineCxSpMiddle, div.SourceCodeHeadlineCxSpMiddle
	{mso-style-name:"Source Code HeadlineCxSpMiddle";
	margin:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:"Calibri","sans-serif";
	font-weight:bold;}
p.SourceCodeHeadlineCxSpLast, li.SourceCodeHeadlineCxSpLast, div.SourceCodeHeadlineCxSpLast
	{mso-style-name:"Source Code HeadlineCxSpLast";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:6.0pt;
	margin-left:0in;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:"Calibri","sans-serif";
	font-weight:bold;}
span.CommentTextChar
	{mso-style-name:"Comment Text Char";
	mso-style-link:"Comment Text";
	font-family:"Times New Roman","serif";}
span.CommentSubjectChar
	{mso-style-name:"Comment Subject Char";
	mso-style-link:"Comment Subject";
	font-family:"Times New Roman","serif";
	font-weight:bold;}
span.XXX
	{mso-style-name:XXX;
	font-family:Courier;
	color:red;}
p.TableListing, li.TableListing, div.TableListing
	{mso-style-name:"Table Listing";
	margin:0in;
	margin-bottom:.0001pt;
	text-align:center;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";}
.MsoChpDefault
	{font-family:"Calibri","sans-serif";}
.MsoPapDefault
	{margin-bottom:10.0pt;
	line-height:115%;}
@page WordSection1
	{size:8.5in 11.0in;
	margin:1.0in 1.0in 1.0in 1.0in;}
div.WordSection1
	{page:WordSection1;}
 /* List Definitions */
 ol
	{margin-bottom:0in;}
ul
	{margin-bottom:0in;}
-->
</style>

</head>

<body lang=EN-US link=blue vlink=purple style="background-color: #fffeee;">


<div style="background-color: #eeeddd; float: right; height: 310px; font-family: sans-serif;" id="otherbooks">Other programming books by Al Sweigart:<br>
  <a href="#" onclick="document.getElementById('otherbooks').outerHTML='';" style="vertical-align: top;">X</a>

  <a target="_blank" href="https://www.amazon.com/gp/product/1593275994/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1593275994&linkCode=as2&tag=playwithpyth-20&linkId=385b77199fa1e9f4fd21652cc57dab33" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_automate.link');"><img src="/images/cover_automate_thumb.png" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://www.amazon.com/gp/product/1503212300?ie=UTF8&amp;tag=playwithpyth-20&amp;linkCode=as2&amp;camp=1789&amp;creative=9325&amp;creativeASIN=1503212300" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_invent.link');"><img src="/images/cover_invent4th_thumb.png" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://www.amazon.com/Making-Games-Python-Pygame-Sweigart/dp/1469901730?ie=UTF8&amp;tag=playwithpyth-20&amp;linkCode=as2&amp;camp=1789&amp;creative=9325&amp;creativeASIN=1469901730" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_pygame.link');"><img src="/images/cover_makinggames_thumb.png" style="height: 200px; border: solid black 1px; /"></a>
  <a target="_blank" href="https://www.amazon.com/gp/product/1482614375/ref=as_li_qf_sp_asin_tl?ie=UTF8&amp;camp=1789&amp;creative=9325&amp;creativeASIN=1482614375&amp;linkCode=as2&amp;tag=playwithpyth-20" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_hacking.link');"><img src="/images/cover_crackingcodes_thumb.png" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://www.amazon.com/gp/product/1593277628/ref=as_li_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1593277628&linkCode=as2&tag=playwithpyth-20&linkId=0f1bd157c25d2e97db13d6434e5476a8"><img src="/images/cover_scratchprogrammingplayground_thumb.png" style="height: 200px; border: solid black 1px;" /></a>
  <br />
  <a href="https://www.udemy.com/automate/?couponCode=INVENT_WITH_PYTHON">Use this link to get 80%% off the Automate the Boring Stuff online video course.</a><br />
  <a href="https://www.patreon.com/AlSweigart">Support me on Patreon</a>
</div>




<div class=WordSection1>

<div style='border:none;border-bottom:solid #4F81BD 1.0pt;padding:0in 0in 4.0pt 0in'>

<h1><a name="_Toc316488638"><span style='font-variant:normal !important;
text-transform:uppercase'>Chapter 6 – Wormy</span></a></h1>

</div>

<p class=MsoNormal align=center style='text-align:center'><img width=268
height=212 id="Picture 2" src="chapter6_files/image001.png">     <img
width=268 height=212 id="Picture 24" src="chapter6_files/image002.jpg"></p>

<h2><a name="_Toc316488639">How to Play Wormy</a></h2>

<p class=MsoNormal>Wormy is a Nibbles clone. The player starts out controlling
a short worm that is constantly moving around the screen. The player cannot
stop or slow down the worm, but they can control which direction it turns. A
red apple appears randomly on the screen, and the player must move the worm so
that it eats the apple. Each time the worm eats an apple, the worm grows longer
by one segment and a new apply randomly appears on the screen. The game is over
if the worm crashes into itself or the edges of the screen.</p>

<h2><a name="_Toc316488640">Source Code to Wormy</a></h2>

<p class=MsoNormal>This source code can be downloaded from <span class=URL><a href="http://invpy.com/wormy.py">http://invpy.com/wormy.py</a></span>.
If you get any error messages, look at the line number that is mentioned in the
error message and check your code for any typos. You can also copy and paste
your code into the web form at <span class=URL><a href="http://invpy.com/diff/wormy">http://invpy.com/diff/wormy</a></span>
to see if the differences between your code and the code in the book.</p>

<div style='border:double windowtext 1.5pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeFeaturedCxSpFirst><a name="OLE_LINK4"></a><a name="OLE_LINK3"> 
<span class=SourceLineNumber>1. </span><span class=SourceCodeComment># Wormy (a
Nibbles clone)</span></a></p>

<p class=SourceCodeFeaturedCxSpMiddle>  <span class=SourceLineNumber>2. </span><span
class=SourceCodeComment># By Al Sweigart al@inventwithpython.com</span></p>

<p class=SourceCodeFeaturedCxSpMiddle>  <span class=SourceLineNumber>3. </span><span
class=SourceCodeComment># http://inventwithpython.com/pygame</span></p>

<p class=SourceCodeFeaturedCxSpMiddle>  <span class=SourceLineNumber>4. </span><span
class=SourceCodeComment># Creative Commons BY-NC-SA 3.0 US</span></p>

<p class=SourceCodeFeaturedCxSpMiddle>  <span class=SourceLineNumber>5. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle>  <span class=SourceLineNumber>6. </span>import
random, pygame, sys</p>

<p class=SourceCodeFeaturedCxSpMiddle>  <span class=SourceLineNumber>7. </span>from
pygame.locals import *</p>

<p class=SourceCodeFeaturedCxSpMiddle>  <span class=SourceLineNumber>8. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle>  <span class=SourceLineNumber>9. </span>FPS
= 15</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>10. </span>WINDOWWIDTH
= 640</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>11. </span>WINDOWHEIGHT
= 480</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>12. </span>CELLSIZE
= 20</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>13. </span>assert
WINDOWWIDTH % CELLSIZE == 0, &quot;Window width must be a multiple of cell
size.&quot;</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>14. </span>assert
WINDOWHEIGHT % CELLSIZE == 0, &quot;Window height must be a multiple of cell
size.&quot;</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>15. </span>CELLWIDTH
= int(WINDOWWIDTH / CELLSIZE)</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>16. </span>CELLHEIGHT
= int(WINDOWHEIGHT / CELLSIZE)</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>17. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 18. </span><span
class=SourceCodeComment>#             R    G    B</span></p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>19. </span>WHITE    
= (255, 255, 255)</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>20. </span>BLACK    
= (  0,   0,   0)</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>21. </span>RED      
= (255,   0,   0)</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>22. </span>GREEN    
= (  0, 255,   0)</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>23. </span>DARKGREEN
= (  0, 155,   0)</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>24. </span>DARKGRAY 
= ( 40,  40,  40)</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>25. </span>BGCOLOR
= BLACK</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>26. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>27. </span>UP
= 'up'</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>28. </span>DOWN
= 'down'</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>29. </span>LEFT
= 'left'</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>30. </span>RIGHT
= 'right'</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>31. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>32. </span>HEAD
= 0 <span class=SourceCodeComment># syntactic sugar: index of the worm's head</span></p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>33. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 34. </span>def
main():</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>35. </span>    global
FPSCLOCK, DISPLAYSURF, BASICFONT</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>36. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>37. </span>    pygame.init()</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>38. </span>    FPSCLOCK
= pygame.time.Clock()</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>39. </span>    DISPLAYSURF
= pygame.display.set_mode((WINDOWWIDTH, WINDOWHEIGHT))</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>40. </span>    BASICFONT
= pygame.font.Font('freesansbold.ttf', 18)</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>41. </span>    pygame.display.set_caption('Wormy')</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>42. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>43. </span>    showStartScreen()</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>44. </span>    while
True:</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>45. </span>        runGame()</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>46. </span>        showGameOverScreen()</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>47. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>48. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 49. </span>def
runGame():</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 50. </span>    <span
class=SourceCodeComment># Set a random start point.</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 51. </span>    startx
= random.randint(5, CELLWIDTH - 6)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 52. </span>    starty
= random.randint(5, CELLHEIGHT - 6)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 53. </span>    wormCoords
= [{'x': startx,     'y': starty},</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 54. </span>                  {'x':
startx - 1, 'y': starty},</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 55. </span>                  {'x':
startx - 2, 'y': starty}]</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 56. </span>    direction
= RIGHT</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 57. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 58. </span>    <span
class=SourceCodeComment># Start the apple in a random place.</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 59. </span>    apple
= getRandomLocation()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 60. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 61. </span>    while
True: <span class=SourceCodeComment># main game loop</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 62. </span>        for
event in pygame.event.get(): <span class=SourceCodeComment># event handling
loop</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 63. </span>            if
event.type == QUIT:</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 64. </span>                terminate()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 65. </span>            elif
event.type == KEYDOWN:</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 66. </span>                if
(event.key == K_LEFT or event.key == K_a) and direction != RIGHT:</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 67. </span>                    direction
= LEFT</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 68. </span>                elif
(event.key == K_RIGHT or event.key == K_d) and direction != LEFT:</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 69. </span>                    direction
= RIGHT</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 70. </span>                elif
(event.key == K_UP or event.key == K_w) and direction != DOWN:</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 71. </span>                    direction
= UP</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 72. </span>                elif
(event.key == K_DOWN or event.key == K_s) and direction != UP:</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 73. </span>                    direction
= DOWN</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 74. </span>                elif
event.key == K_ESCAPE:</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 75. </span>                    terminate()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 76. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 77. </span>        <span
class=SourceCodeComment># check if the worm has hit itself or the edge</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 78. </span>        if
wormCoords[HEAD]['x'] == -1 or wormCoords[HEAD]['x'] == CELLWIDTH or
wormCoords[HEAD]['y'] == -1 or wormCoords[HEAD]['y'] == CELLHEIGHT:</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 79. </span>            return
<span class=SourceCodeComment># game over</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 80. </span>        for
wormBody in wormCoords[1:]:</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 81. </span>            if
wormBody['x'] == wormCoords[HEAD]['x'] and wormBody['y'] ==
wormCoords[HEAD]['y']:</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 82. </span>                return
<span class=SourceCodeComment># game over</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 83. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 84. </span>        <span
class=SourceCodeComment># check if worm has eaten an apply</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 85. </span>        if
wormCoords[HEAD]['x'] == apple['x'] and wormCoords[HEAD]['y'] == apple['y']:</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 86. </span>            <span
class=SourceCodeComment># don't remove worm's tail segment</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 87. </span>            apple
= getRandomLocation() <span class=SourceCodeComment># set a new apple somewhere</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 88. </span>        else:</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 89. </span>            del
wormCoords[-1] <span class=SourceCodeComment># remove worm's tail segment</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 90. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 91. </span>        <span
class=SourceCodeComment># move the worm by adding a segment in the direction it
is moving</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 92. </span>        if
direction == UP:</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 93. </span>            newHead
= {'x': wormCoords[HEAD]['x'], 'y': wormCoords[HEAD]['y'] - 1}</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 94. </span>        elif
direction == DOWN:</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 95. </span>            newHead
= {'x': wormCoords[HEAD]['x'], 'y': wormCoords[HEAD]['y'] + 1}</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 96. </span>        elif
direction == LEFT:</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 97. </span>            newHead
= {'x': wormCoords[HEAD]['x'] - 1, 'y': wormCoords[HEAD]['y']}</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 98. </span>        elif
direction == RIGHT:</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 99. </span>            newHead
= {'x': wormCoords[HEAD]['x'] + 1, 'y': wormCoords[HEAD]['y']}</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>100.</span>        
wormCoords.insert(0, newHead)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>101. </span>        DISPLAYSURF.fill(BGCOLOR)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>102.</span>         drawGrid()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>103. </span>        drawWorm(wormCoords)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>104. </span>        drawApple(apple)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>105. </span>        drawScore(len(wormCoords)
- 3)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>106. </span>        pygame.display.update()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>107. </span>        FPSCLOCK.tick(FPS)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>108. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>109. </span>def
drawPressKeyMsg():</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>110. </span>    pressKeySurf
= BASICFONT.render('Press a key to play.', True, DARKGRAY)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>111. </span>    pressKeyRect
= pressKeySurf.get_rect()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>112. </span>    pressKeyRect.topleft
= (WINDOWWIDTH - 200, WINDOWHEIGHT - 30)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>113. </span>    DISPLAYSURF.blit(pressKeySurf,
pressKeyRect)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>114. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>115.</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>116. </span>def
checkForKeyPress():</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>117. </span>    if
len(pygame.event.get(QUIT)) &gt; 0:</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>118. </span>        terminate()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>119. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>120. </span>    keyUpEvents
= pygame.event.get(KEYUP)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>121.</span>    
if len(keyUpEvents) == 0:</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>122.</span>        
return None</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>123. </span>    if
keyUpEvents[0].key == K_ESCAPE:</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>124. </span>        terminate()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>125. </span>    return
keyUpEvents[0].key</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>126.</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>127.</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>128. </span>def
showStartScreen():</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>129. </span>    titleFont
= pygame.font.Font('freesansbold.ttf', 100)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>130. </span>    titleSurf1
= titleFont.render('Wormy!', True, WHITE, DARKGREEN)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>131. </span>    titleSurf2
= titleFont.render('Wormy!', True, GREEN)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>132. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>133. </span>    degrees1
= 0</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>134. </span>    degrees2
= 0</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>135. </span>    while
True:</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>136. </span>        DISPLAYSURF.fill(BGCOLOR)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>137. </span>        rotatedSurf1
= pygame.transform.rotate(titleSurf1, degrees1)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>138. </span>        rotatedRect1
= rotatedSurf1.get_rect()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>139. </span>        rotatedRect1.center
= (WINDOWWIDTH / 2, WINDOWHEIGHT / 2)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>140. </span>        DISPLAYSURF.blit(rotatedSurf1,
rotatedRect1)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>141. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>142. </span>        rotatedSurf2
= pygame.transform.rotate(titleSurf2, degrees2)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>143. </span>        rotatedRect2
= rotatedSurf2.get_rect()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>144. </span>        rotatedRect2.center
= (WINDOWWIDTH / 2, WINDOWHEIGHT / 2)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>145. </span>        DISPLAYSURF.blit(rotatedSurf2,
rotatedRect2)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>146. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>147. </span>        drawPressKeyMsg()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>148. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>149. </span>        if
checkForKeyPress():</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>150. </span>            pygame.event.get()
<span class=SourceCodeComment># clear event queue</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>151.</span>            
return</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>152. </span>        pygame.display.update()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>153. </span>        FPSCLOCK.tick(FPS)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>154. </span>        degrees1
+= 3 <span class=SourceCodeComment># rotate by 3 degrees each frame</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>155. </span>        degrees2
+= 7 <span class=SourceCodeComment># rotate by 7 degrees each frame</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>156. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>157. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>158. </span>def
terminate():</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>159. </span>    pygame.quit()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>160. </span>    sys.exit()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>161. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>162. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>163. </span>def
getRandomLocation():</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>164. </span>    return
{'x': random.randint(0, CELLWIDTH - 1), 'y': random.randint(0, CELLHEIGHT - 1)}</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>165. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>166. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>167. </span>def
showGameOverScreen():</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>168. </span>    gameOverFont
= pygame.font.Font('freesansbold.ttf', 150)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>169. </span>    gameSurf
= gameOverFont.render('Game', True, WHITE)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>170. </span>    overSurf
= gameOverFont.render('Over', True, WHITE)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>171. </span>    gameRect
= gameSurf.get_rect()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>172. </span>    overRect
= overSurf.get_rect()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>173. </span>    gameRect.midtop
= (WINDOWWIDTH / 2, 10)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>174. </span>    overRect.midtop
= (WINDOWWIDTH / 2, gameRect.height + 10 + 25)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>175. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>176. </span>    DISPLAYSURF.blit(gameSurf,
gameRect)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>177. </span>    DISPLAYSURF.blit(overSurf,
overRect)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>178. </span>    drawPressKeyMsg()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>179. </span>    pygame.display.update()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>180. </span>    pygame.time.wait(500)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>181. </span>    checkForKeyPress()
<span class=SourceCodeComment># clear out any key presses in the event queue</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>182. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>183. </span>    while
True:</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>184. </span>        if
checkForKeyPress():</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>185. </span>            pygame.event.get()
<span class=SourceCodeComment># clear event queue</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>186.</span>            
return</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>187. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>188. </span>def
drawScore(score):</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>189. </span>    scoreSurf
= BASICFONT.render('Score: %s' % (score), True, WHITE)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>190. </span>    scoreRect
= scoreSurf.get_rect()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>191. </span>    scoreRect.topleft
= (WINDOWWIDTH - 120, 10)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>192. </span>    DISPLAYSURF.blit(scoreSurf,
scoreRect)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>193. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>194. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>195. </span>def
drawWorm(wormCoords):</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>196. </span>    for
coord in wormCoords:</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>197. </span>        x
= coord['x'] * CELLSIZE</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>198. </span>        y
= coord['y'] * CELLSIZE</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>199. </span>        wormSegmentRect
= pygame.Rect(x, y, CELLSIZE, CELLSIZE)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>200. </span>        pygame.draw.rect(DISPLAYSURF,
DARKGREEN, wormSegmentRect)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>201. </span>        wormInnerSegmentRect
= pygame.Rect(x + 4, y + 4, CELLSIZE - 8, CELLSIZE - 8)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>202. </span>        pygame.draw.rect(DISPLAYSURF,
GREEN, wormInnerSegmentRect)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>203. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>204. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>205. </span>def
drawApple(coord):</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>206. </span>    x
= coord['x'] * CELLSIZE</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>207. </span>    y
= coord['y'] * CELLSIZE</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>208. </span>    appleRect
= pygame.Rect(x, y, CELLSIZE, CELLSIZE)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>209. </span>    pygame.draw.rect(DISPLAYSURF,
RED, appleRect)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>210. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>211. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>212. </span>def
drawGrid():</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>213. </span>    for
x in range(0, WINDOWWIDTH, CELLSIZE): <span class=SourceCodeComment># draw
vertical lines</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>214. </span>        pygame.draw.line(DISPLAYSURF,
DARKGRAY, (x, 0), (x, WINDOWHEIGHT))</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>215. </span>    for
y in range(0, WINDOWHEIGHT, CELLSIZE): <span class=SourceCodeComment># draw
horizontal lines</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>216. </span>        pygame.draw.line(DISPLAYSURF,
DARKGRAY, (0, y), (WINDOWWIDTH, y))</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>217.</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>218.</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>219. </span>if
__name__ == '__main__':</p>

<p class=SourceCodeFeaturedCxSpLast><span class=SourceLineNumber>220. </span>    main()</p>

</div>

<h2><a name="_Toc316488641">The Grid</a></h2>

<p class=MsoNormal align=center style='text-align:center'><img width=315
height=249 id="Picture 19" src="chapter6_files/image003.jpg"></p>

<p class=MsoNormal>If you play the game a little, you’ll notice that the apple
and the segments of the worm’s body always fit along a grid of lines. We will call
each of the squares in this grid a cell (it’s not always what a space in a grid
is called, it’s just a name I came up with). The cells have their own Cartesian
coordinate system, with (0, 0) being the top left cell and (31, 23) being the
bottom right cell.</p>

<h2><a name="_Toc316488642">The Setup Code</a></h2>

<div style='border:double windowtext 1.5pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeFeaturedCxSpFirst>  <span class=SourceLineNumber>1. </span><span
class=SourceCodeComment># Wormy (a Nibbles clone)</span></p>

<p class=SourceCodeFeaturedCxSpMiddle>  <span class=SourceLineNumber>2. </span><span
class=SourceCodeComment># By Al Sweigart al@inventwithpython.com</span></p>

<p class=SourceCodeFeaturedCxSpMiddle>  <span class=SourceLineNumber>3. </span><span
class=SourceCodeComment># http://inventwithpython.com/pygame</span></p>

<p class=SourceCodeFeaturedCxSpMiddle>  <span class=SourceLineNumber>4. </span><span
class=SourceCodeComment># Creative Commons BY-NC-SA 3.0 US</span></p>

<p class=SourceCodeFeaturedCxSpMiddle>  <span class=SourceLineNumber>5. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle>  <span class=SourceLineNumber>6. </span>import
random, pygame, sys</p>

<p class=SourceCodeFeaturedCxSpMiddle>  <span class=SourceLineNumber>7. </span>from
pygame.locals import *</p>

<p class=SourceCodeFeaturedCxSpMiddle>  <span class=SourceLineNumber>8. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle>  <span class=SourceLineNumber>9. </span>FPS
= 15</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>10. </span>WINDOWWIDTH
= 640</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>11. </span>WINDOWHEIGHT
= 480</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>12. </span>CELLSIZE
= 20</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>13. </span>assert
WINDOWWIDTH % CELLSIZE == 0, &quot;Window width must be a multiple of cell
size.&quot;</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>14. </span>assert
WINDOWHEIGHT % CELLSIZE == 0, &quot;Window height must be a multiple of cell
size.&quot;</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>15. </span>CELLWIDTH
= int(WINDOWWIDTH / CELLSIZE)</p>

<p class=SourceCodeFeaturedCxSpLast> <span class=SourceLineNumber>16. </span>CELLHEIGHT
= int(WINDOWHEIGHT / CELLSIZE)</p>

</div>

<p class=MsoNormal>The code at the start of the program just sets up some
constant variables used in the game. The width and height of the cells are
stored in <span class=Literal>CELLSIZE</span>. The <span class=Literal>assert</span>
statements on lines 13 and 14 ensure that the cells fit perfectly in the
window. For example, if the <span class=Literal>CELLSIZE</span> was <span
class=Literal>10</span> and the <span class=Literal>WINDOWWIDTH</span> or <span
class=Literal>WINDOWHEIGHT</span> constants were set to <span class=Literal>15</span>,
then only 1.5 cells could fit. The <span class=Literal>assert</span> statements
make sure that only a whole integer number of cells fits in the window.</p>

<div style='border:double windowtext 1.5pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeFeaturedCxSpFirst> <span class=SourceLineNumber>18. </span><span
class=SourceCodeComment>#             R    G    B</span></p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>19. </span>WHITE    
= (255, 255, 255)</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>20. </span>BLACK    
= (  0,   0,   0)</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>21. </span>RED      
= (255,   0,   0)</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>22. </span>GREEN    
= (  0, 255,   0)</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>23. </span>DARKGREEN
= (  0, 155,   0)</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>24. </span>DARKGRAY 
= ( 40,  40,  40)</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>25. </span>BGCOLOR
= BLACK</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>26. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>27. </span>UP
= 'up'</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>28. </span>DOWN
= 'down'</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>29. </span>LEFT
= 'left'</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>30. </span>RIGHT
= 'right'</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>31. </span></p>

<p class=SourceCodeFeaturedCxSpLast> <span class=SourceLineNumber>32. </span>HEAD
= 0 <span class=SourceCodeComment># syntactic sugar: index of the worm's head</span></p>

</div>

<p class=MsoNormal>Some more constants are set on lines 19 to 32. The <span
class=Literal>HEAD</span> constant will be explained later in this chapter.</p>

<h2><a name="_Toc316488643">The </a><span class=Literal>main()</span> Function</h2>

<div style='border:double windowtext 1.5pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeFeaturedCxSpFirst> <span class=SourceLineNumber>34. </span>def
main():</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>35. </span>    global
FPSCLOCK, DISPLAYSURF, BASICFONT</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>36. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>37. </span>    pygame.init()</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>38. </span>    FPSCLOCK
= pygame.time.Clock()</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>39. </span>    DISPLAYSURF
= pygame.display.set_mode((WINDOWWIDTH, WINDOWHEIGHT))</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>40. </span>    BASICFONT
= pygame.font.Font('freesansbold.ttf', 18)</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>41. </span>    pygame.display.set_caption('Wormy')</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>42. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>43. </span>    showStartScreen()</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>44. </span>    while
True:</p>

<p class=SourceCodeFeaturedCxSpMiddle> <span class=SourceLineNumber>45. </span>        runGame()</p>

<p class=SourceCodeFeaturedCxSpLast> <span class=SourceLineNumber>46. </span>        showGameOverScreen()</p>

</div>

<p class=MsoNormal>In the Wormy game program, we’ve put the main part of the
code in a function called <span class=Literal>runGame()</span>. This is because
we only want to show the “start screen” (the animation with the rotating
“Wormy” text) once when the program starts (by calling the <span class=Literal>showStartScreen()</span>
function). Then we want to call <span class=Literal>runGame()</span>, which
will start a game of Wormy. This function will return when the player’s worm
collides into a wall or into itself and causes a game over.</p>

<p class=MsoNormal>At that point we will show the game over screen by calling <span
class=Literal>showGameOverScreen()</span>. When that function call returns, the
loop goes back to the start and <span class=Literal>calls runGame()</span>
again. The <span class=Literal>while</span> loop on line 44 will loop forever
until the program terminates.</p>

<h2><a name="_Toc316488644">A Separate </a><span class=Literal>runGame()</span>
Function</h2>

<div style='border:double windowtext 1.5pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeFeaturedCxSpFirst><span class=SourceLineNumber> 49. </span>def
runGame():</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 50. </span>    <span
class=SourceCodeComment># Set a random start point.</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 51. </span>    startx
= random.randint(5, CELLWIDTH - 6)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 52. </span>    starty
= random.randint(5, CELLHEIGHT - 6)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 53. </span>    wormCoords
= [{'x': startx,     'y': starty},</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 54. </span>                  {'x':
startx - 1, 'y': starty},</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 55. </span>                  {'x':
startx - 2, 'y': starty}]</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 56. </span>    direction
= RIGHT</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 57. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 58. </span>    <span
class=SourceCodeComment># Start the apple in a random place.</span></p>

<p class=SourceCodeFeaturedCxSpLast><span class=SourceLineNumber> 59. </span>    apple
= getRandomLocation()</p>

</div>

<p class=MsoNormal>At the beginning of a game, we want the worm to start in a
random position (but not too close to the edges of the board) so we store a
random coordinate in <span class=Literal>startx</span> and <span class=Literal>starty</span>.
(Remember that <span class=Literal>CELLWIDTH</span> and <span class=Literal>CELLHEIGHT</span>
is the number of cells wide and high the window is, not the number of pixels
wide and high).</p>

<p class=MsoNormal>The body of the worm will be stored in a list of dictionary
values. There will be one dictionary value per body segment of the worm. The
dictionary will have keys <span class=Literal>'x'</span> and <span
class=Literal>'y'</span> for the XY coordinates of that body segment. The head
of the body to be at <span class=Literal>startx</span> and <span class=Literal>starty</span>.
The other two body segments will be one and two cells to the left of the head.</p>

<p class=MsoNormal>The head of the worm will always be the body part at <span
class=Literal>wormCoords[0]</span>. To make this code more readable, we’ve set
the <span class=Literal>HEAD</span> constant to <span class=Literal>0</span> on
line 32, so that we can use <span class=Literal>wormCoords[HEAD]</span> instead
of <span class=Literal>wormCoords[0]</span>.</p>

<h2><a name="_Toc316488645">The Event Handling Loop</a></h2>

<div style='border:double windowtext 1.5pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeFeaturedCxSpFirst><span class=SourceLineNumber> 61. </span>    while
True: <span class=SourceCodeComment># main game loop</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 62. </span>        for
event in pygame.event.get(): <span class=SourceCodeComment># event handling
loop</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 63. </span>            if
event.type == QUIT:</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 64. </span>                terminate()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 65. </span>            elif
event.type == KEYDOWN:</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 66. </span>                if
(event.key == K_LEFT or event.key == K_a) and direction != RIGHT:</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 67. </span>                    direction
= LEFT</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 68. </span>                elif
(event.key == K_RIGHT or event.key == K_d) and direction != LEFT:</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 69. </span>                    direction
= RIGHT</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 70. </span>                elif
(event.key == K_UP or event.key == K_w) and direction != DOWN:</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 71. </span>                    direction
= UP</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 72. </span>                elif
(event.key == K_DOWN or event.key == K_s) and direction != UP:</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 73. </span>                    direction
= DOWN</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 74. </span>                elif
event.key == K_ESCAPE:</p>

<p class=SourceCodeFeaturedCxSpLast><span class=SourceLineNumber> 75. </span>                    terminate()</p>

</div>

<p class=MsoNormal>Line 61 is the start of the main game loop and line 62 is
the start of the event handling loop. If the event is a <span class=Literal>QUIT</span>
event, then we call <span class=Literal>terminate()</span> (which we’ve defined
the same as the <span class=Literal>terminate()</span> function in the previous
game programs).</p>

<p class=MsoNormal>Otherwise, if the event is a <span class=Literal>KEYDOWN</span>
event, then we check if the key that was pressed down is an arrow key or a WASD
key. We want an additional check so that the worm does not turn in on itself.
For example, if the worm is moving left, then if the player accidentally
presses the right arrow key, the worm would immediate start going right and
crash into itself.</p>

<p class=MsoNormal>That is why we have this check for the current value of the <span
class=Literal>direction</span> variable. That way, if the player accidentally
presses an arrow key that would cause them to immediately crash the worm, we
just ignore that key press.</p>

<h2><a name="_Toc316488646">Collision Detection</a></h2>

<div style='border:double windowtext 1.5pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeFeaturedCxSpFirst><span class=SourceLineNumber>77. </span>        <span
class=SourceCodeComment># check if the worm has hit itself or the edge</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>78. </span>        if
wormCoords[HEAD]['x'] == -1 or wormCoords[HEAD]['x'] == CELLWIDTH or
wormCoords[HEAD]['y'] == -1 or wormCoords[HEAD]['y'] == CELLHEIGHT:</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>79. </span>            return
<span class=SourceCodeComment># game over</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>80. </span>        for
wormBody in wormCoords[1:]:</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>81. </span>            if
wormBody['x'] == wormCoords[HEAD]['x'] and wormBody['y'] ==
wormCoords[HEAD]['y']:</p>

<p class=SourceCodeFeaturedCxSpLast><span class=SourceLineNumber>82. </span>                return
<span class=SourceCodeComment># game over</span></p>

</div>

<p class=MsoNormal>The worm has crashed when the head has moved off the edge of
the grid or when the head moves onto a cell that is already occupied by another
body segment.</p>

<p class=MsoNormal>We can check if the head has moved off the edge of the grid
by seeing if either the X coordinate of the head (which is stored in <span
class=Literal>wormCoords[HEAD]['x']</span>) is <span class=Literal>-1</span>
(which is past the left edge of the grid) or equal to <span class=Literal>CELLWIDTH</span>
(which is past the right edge, since the rightmost X cell coordinate is one
less than <span class=Literal>CELLWIDTH</span>). </p>

<p class=MsoNormal>The head has also moved off the grid if the Y coordinate of
the head (which is stored in <span class=Literal>wormCoords[HEAD]['y']</span>)
is either <span class=Literal>-1</span> (which is past the top edge) or <span
class=Literal>CELLHEIGHT</span> (which is past the bottom edge).</p>

<p class=MsoNormal>All we have to do to end the current game is to return out
of <span class=Literal>runGame()</span>. When <span class=Literal>runGame()</span>
returns to the function call in <span class=Literal>main()</span>, the next
line after the <span class=Literal>runGame()</span> call (line 46) is the call to
<span class=Literal>showGameOverScreen()</span> which makes the large “Game
Over” text appear. This is why we have the <span class=Literal>return</span>
statement on line 79.</p>

<p class=MsoNormal>Line 80 loops through every body segment in <span
class=Literal>wormCoords</span> after the head (which is at index <span
class=Literal>0</span>. This is why the <span class=Literal>for</span> loop
iterates over <span class=Literal>wormCoords[1:]</span> instead of just <span
class=Literal>wormCoords</span>). If both the <span class=Literal>'x'</span>
and <span class=Literal>'y'</span> values of the body segment are the same as
the <span class=Literal>'x'</span> and <span class=Literal>'y'</span> of the
head, then we also end the game by returning out of the <span class=Literal>runGame()</span>
function.</p>

<h2><a name="_Toc316488647">Detecting Collisions with the Apple</a></h2>

<div style='border:double windowtext 1.5pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeFeaturedCxSpFirst><span class=SourceLineNumber> 84. </span>        <span
class=SourceCodeComment># check if worm has eaten an apply</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 85. </span>        if
wormCoords[HEAD]['x'] == apple['x'] and wormCoords[HEAD]['y'] == apple['y']:</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 86. </span>            <span
class=SourceCodeComment># don't remove worm's tail segment</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 87. </span>            apple
= getRandomLocation() <span class=SourceCodeComment># set a new apple somewhere</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 88. </span>        else:</p>

<p class=SourceCodeFeaturedCxSpLast><span class=SourceLineNumber> 89. </span>            del
wormCoords[-1] <span class=SourceCodeComment># remove worm's tail segment</span></p>

</div>

<p class=MsoNormal>We do a similar collision detection check between the head
of the worm and the apple’s XY coordinates. If they match, we set the
coordinates of the apple to a random new location (which we get from the return
value of <span class=Literal>getRandomLocation()</span>).</p>

<p class=MsoNormal>If the head has not collided with an apple, then we delete
the last body segment in the <span class=Literal>wormCoords</span> list.
Remember that negative integers for indexes count from the end of the list. So
while <span class=Literal>0</span> is the index of the first item in the list
and <span class=Literal>1</span> is for the second item, <span class=Literal>-1</span>
is for the last item in the list and <span class=Literal>-2</span> is for the
second to last item.</p>

<p class=MsoNormal>The code on lines 91 to 100 (described next in the “Moving
the Worm” section) will add a new body segment (for the head) in the direction
that the worm is going. This will make the worm one segment longer. By not
deleting the last body segment when the worm eats an apple, the overall length
of the worm increases by one. But when line 89 deletes the last body segment,
the size remains the same because a new head segment is added right afterwards.</p>

<h2><a name="_Toc316488648">Moving the Worm</a></h2>

<div style='border:double windowtext 1.5pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeFeaturedCxSpFirst><span class=SourceLineNumber> 91. </span>        <span
class=SourceCodeComment># move the worm by adding a segment in the direction it
is moving</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 92. </span>        if
direction == UP:</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 93. </span>            newHead
= {'x': wormCoords[HEAD]['x'], 'y': wormCoords[HEAD]['y'] - 1}</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 94. </span>        elif
direction == DOWN:</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 95. </span>            newHead
= {'x': wormCoords[HEAD]['x'], 'y': wormCoords[HEAD]['y'] + 1}</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 96. </span>        elif
direction == LEFT:</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 97. </span>            newHead
= {'x': wormCoords[HEAD]['x'] - 1, 'y': wormCoords[HEAD]['y']}</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 98. </span>        elif
direction == RIGHT:</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber> 99. </span>            newHead
= {'x': wormCoords[HEAD]['x'] + 1, 'y': wormCoords[HEAD]['y']}</p>

<p class=SourceCodeFeaturedCxSpLast><span class=SourceLineNumber>100.</span>         wormCoords.insert(0,
newHead)</p>

</div>

<p class=MsoNormal>To move the worm, we add a new body segment to the beginning
of the <span class=Literal>wormCoords</span> list. Because the body segment is
being added to the beginning of the list, it will become the new head. The
coordinates of the new head will be right next to the old head’s coordinates.
Whether <span class=Literal>1</span> is added or subtracted from either the X
or Y coordinate depends on the direction the worm was going.</p>

<p class=MsoNormal>This new head segment is added to <span class=Literal>wormCoords</span>
with the <span class=Literal>insert()</span> list method on line 100.</p>

<h2><a name="_Toc316488649">The </a><span class=Literal>insert()</span> List
Method</h2>

<p class=MsoNormal>Unlike the <span class=Literal>append()</span> list method
that can only add items to the end of a list, the <span class=Literal>insert()</span>
list method can add items anywhere inside the list. The first parameter for <span
class=Literal>insert()</span> is the index where the item should go (all the
items originally at this index and after have their indexes increase by one).
If the argument passed for the first parameter is larger than the length of the
list, the item is simply added to the end of the list (just like what <span
class=Literal>append()</span> does). The second parameter for <span
class=Literal>insert()</span> is the item value to be added. Type the following
into the interactive shell to see how <span class=Literal>insert()</span> works:</p>

<div style='border:solid windowtext 1.0pt;padding:4.0pt 4.0pt 4.0pt 4.0pt'>

<p class=CodeExampleCxSpFirst style='border:none;padding:0in'>&gt;&gt;&gt; spam
= ['cat', 'dog', 'bat']</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>&gt;&gt;&gt;
spam.insert(0, 'frog')</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>&gt;&gt;&gt;
spam</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>['frog', 'cat',
'dog', 'bat']</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>&gt;&gt;&gt;
spam.insert(10, 42)</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>&gt;&gt;&gt;
spam</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>['frog', 'cat',
'dog', 'bat', 42]</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>&gt;&gt;&gt;
spam.insert(2, 'horse')</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>&gt;&gt;&gt;
spam</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>['frog', 'cat',
'horse', 'dog', 'bat', 42]</p>

<p class=CodeExampleCxSpLast style='border:none;padding:0in'>&gt;&gt;&gt;&nbsp;</p>

</div>

<h2><a name="_Toc316488650">Drawing the Screen</a></h2>

<div style='border:double windowtext 1.5pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeFeaturedCxSpFirst><span class=SourceLineNumber>101. </span>        DISPLAYSURF.fill(BGCOLOR)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>102.</span>         drawGrid()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>103. </span>        drawWorm(wormCoords)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>104. </span>        drawApple(apple)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>105. </span>        drawScore(len(wormCoords)
- 3)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>106. </span>        pygame.display.update()</p>

<p class=SourceCodeFeaturedCxSpLast><span class=SourceLineNumber>107. </span>        FPSCLOCK.tick(FPS)</p>

</div>

<p class=MsoNormal>The code for drawing the screen in the <span class=Literal>runGame()</span>
function is fairly simple. Line 101 fills in the entire display Surface with
the background color. Lines 102 to 105 draw the grid, worm, apple, and score to
the display Surface. Then the call to <span class=Literal>pygame.display.update()</span>
draws the display Surface to the actual computer screen.</p>

<h2><a name="_Toc316488651">Drawing “Press a key” Text to the Screen</a></h2>

<div style='border:double windowtext 1.5pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeFeaturedCxSpFirst><span class=SourceLineNumber>109. </span>def
drawPressKeyMsg():</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>110. </span>    pressKeySurf
= BASICFONT.render('Press a key to play.', True, DARKGRAY)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>111. </span>    pressKeyRect
= pressKeySurf.get_rect()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>112. </span>    pressKeyRect.topleft
= (WINDOWWIDTH - 200, WINDOWHEIGHT - 30)</p>

<p class=SourceCodeFeaturedCxSpLast><span class=SourceLineNumber>113. </span>    DISPLAYSURF.blit(pressKeySurf,
pressKeyRect)</p>

</div>

<p class=MsoNormal>While the start screen animation is playing or the game over
screen is being shown, there will be some small text in the bottom right corner
that says “Press a key to play.” Rather than have the code typed out in both
the <span class=Literal>showStartScreen()</span> and the <span class=Literal>showGameOverScreen()</span>,
we put it in a this separate function and simply call the function from <span
class=Literal>showStartScreen()</span> and <span class=Literal>showGameOverScreen()</span>.</p>

<h2><a name="_Toc316488652">The </a><span class=Literal>checkForKeyPress()</span>
Function</h2>

<div style='border:double windowtext 1.5pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeFeaturedCxSpFirst><span class=SourceLineNumber>116. </span>def
checkForKeyPress():</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>117. </span>    if
len(pygame.event.get(QUIT)) &gt; 0:</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>118. </span>        terminate()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>119. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>120. </span>    keyUpEvents
= pygame.event.get(KEYUP)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>121.</span>    
if len(keyUpEvents) == 0:</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>122.</span>        
return None</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>123. </span>    if
keyUpEvents[0].key == K_ESCAPE:</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>124. </span>        terminate()</p>

<p class=SourceCodeFeaturedCxSpLast><span class=SourceLineNumber>125. </span>    return
keyUpEvents[0].key</p>

</div>

<p class=MsoNormal>This function first checks if there are any <span
class=Literal>QUIT</span> events in the event queue. The call to <span
class=Literal>pygame.event.get()</span> on line 117 returns a list of all the <span
class=Literal>QUIT</span> events in the event queue (because we pass <span
class=Literal>QUIT</span> as an argument). If there are not <span
class=Literal>QUIT</span> events in the event queue, then the list that <span
class=Literal>pygame.event.get()</span> returns will be the empty list: <span
class=Literal>[]</span></p>

<p class=MsoNormal>The <span class=Literal>len()</span> call on line 117 will
return <span class=Literal>0</span> if <span class=Literal>pygame.event.get()</span>
returned an empty list. If there are more than zero items in the list returned
by <span class=Literal>pygame.event.get()</span> (and remember, any items in
this list will only be <span class=Literal>QUIT</span> events because we passed
<span class=Literal>QUIT</span> as the argument to <span class=Literal>pygame.event.get()</span>),
then the <span class=Literal>terminate()</span> function gets called on line
118 and the program terminates.</p>

<p class=MsoNormal>After that, the call to <span class=Literal>pygame.event.get()</span>
gets a list of any <span class=Literal>KEYUP</span> events in the event queue.
If the key event is for the Esc key, then the program terminates in that case
as well. Otherwise, the first key event object in the list that was returned by
<span class=Literal>pygame.event.get()</span> is returned from this <span
class=Literal>checkForKeyPress()</span> function.</p>

<h2><a name="_Toc316488653">The Start Screen</a></h2>

<div style='border:double windowtext 1.5pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeFeaturedCxSpFirst><span class=SourceLineNumber>128. </span>def
showStartScreen():</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>129. </span>    titleFont
= pygame.font.Font('freesansbold.ttf', 100)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>130. </span>    titleSurf1
= titleFont.render('Wormy!', True, WHITE, DARKGREEN)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>131. </span>    titleSurf2
= titleFont.render('Wormy!', True, GREEN)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>132. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>133. </span>    degrees1
= 0</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>134. </span>    degrees2
= 0</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>135. </span>    while
True:</p>

<p class=SourceCodeFeaturedCxSpLast><span class=SourceLineNumber>136. </span>        DISPLAYSURF.fill(BGCOLOR)</p>

</div>

<p class=MsoNormal>When the Wormy game program first begins running, the player
doesn’t automatically begin playing the game. Instead, a start screen appears
which tells the player what program they are running. A start screen also gives
the player a chance to prepare for the game to begin (otherwise the player
might not be ready and crash on their first game).</p>

<p class=MsoNormal>The Wormy start screen requires two Surface objects with the
“Wormy!” text drawn on them. These are what the <span class=Literal>render()</span>
method calls create on lines 130 and 131. The text will be large: the <span
class=Literal>Font()</span> constructor function call on line 129 creates a
Font object that is 100 points in size. The first “Wormy!” text will have white
text with a dark green background, and the other will have green text with a
transparent background.</p>

<p class=MsoNormal>Line 135 begins the animation loop for the start screen.
During this animation, the two pieces of text will be rotated and drawn to the
display Surface object.</p>

<h2><a name="_Toc316488654">Rotating the Start Screen Text</a></h2>

<div style='border:double windowtext 1.5pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeFeaturedCxSpFirst><span class=SourceLineNumber>137. </span>        rotatedSurf1
= pygame.transform.rotate(titleSurf1, degrees1)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>138. </span>        rotatedRect1
= rotatedSurf1.get_rect()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>139. </span>        rotatedRect1.center
= (WINDOWWIDTH / 2, WINDOWHEIGHT / 2)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>140. </span>        DISPLAYSURF.blit(rotatedSurf1,
rotatedRect1)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>141. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>142. </span>        rotatedSurf2
= pygame.transform.rotate(titleSurf2, degrees2)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>143. </span>        rotatedRect2
= rotatedSurf2.get_rect()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>144. </span>        rotatedRect2.center
= (WINDOWWIDTH / 2, WINDOWHEIGHT / 2)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>145. </span>        DISPLAYSURF.blit(rotatedSurf2,
rotatedRect2)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>146. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>147. </span>        drawPressKeyMsg()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>148. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>149. </span>        if
checkForKeyPress():</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>150. </span>            pygame.event.get()
<span class=SourceCodeComment># clear event queue</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>151.</span>             return</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>152. </span>        pygame.display.update()</p>

<p class=SourceCodeFeaturedCxSpLast><span class=SourceLineNumber>153. </span>        FPSCLOCK.tick(FPS)</p>

</div>

<p class=MsoNormal>The <span class=Literal>showStartScreen()</span> function
will rotate the images on the Surface objects that the “Wormy!” text is written
on. The first parameter is the Surface object to make a rotated copy of. The
second parameter is the number of degrees to rotate the Surface. The <span
class=Literal>pygame.transform.rotate()</span> function doesn’t change the
Surface object you pass it, but rather returns a new Surface object with the
rotated image drawn on it.</p>

<p class=MsoNormal>Note that this new Surface object will probably be larger
than the original one, since all Surface objects represent rectangular areas
and the corners of the rotated Surface will stick out past the width and height
of original Surface. The picture below has a black rectangle along with a
slightly rotated version of itself. In order to make a Surface object that can
fit the rotated rectangle (which is colored gray in the picture below), it must
be larger than the original black rectangle’s Surface object:</p>

<p class=MsoNormal align=center style='text-align:center'><img width=136
height=61 id="Picture 56" src="chapter6_files/image004.jpg"></p>

<p class=MsoNormal>The amount you rotate it is given in degrees, which is a
measure of rotation. There are 360 degrees in a circle. Not rotated at all is 0
degrees. Rotating to one quarter counter-clockwise is 90 degrees. To rotate
clockwise, pass a negative integer. Rotating 360 degrees is rotating the image
all the way around, which means you end up with the same image as if you
rotated it 0 degrees. In fact, if the rotation argument you pass to <span
class=Literal>pygame.transform.rotate()</span> is 360 or larger, then Pygame
automatically keeps subtracting 360 from it until it gets a number less than
360. This image shows several examples of different rotation amounts:</p>

<p class=MsoNormal align=center style='text-align:center'><img width=576
height=204 id="Picture 22" src="chapter6_files/image005.png"></p>

<p class=MsoNormal>The two rotated “Wormy!” Surface objects are blitted to the
display Surface on each frame of the animation loop on lines 140 and 145.</p>

<p class=MsoNormal>On line 147 the <span class=Literal>drawPressKeyMsg()</span>
function call draws the “Press a key to play.” text in the lower corner of the
display Surface object. This animation loop will keep looping until <span
class=Literal>checkForKeyPress()</span> returns a value that is not <span
class=Literal>None</span>, which happens if the player presses a key. Before
returning, <span class=Literal>pygame.event.get()</span> is called simply to
clear out any other events that have accumulated in the event queue which the
start screen was displayed.</p>

<h2><a name="_Toc316488655">Rotations Are Not Perfect</a></h2>

<p class=MsoNormal>You may wonder why we store the rotated Surface in a
separate variable, rather than just overwrite the <span class=Literal>titleSurf1</span>
and <span class=Literal>titleSurf2</span> variables. There are two reasons.</p>

<p class=MsoNormal>First, rotating a 2D image is never completely perfect. The
rotated image is always approximate. If you rotate an image by 10 degrees
counterclockwise, and then rotate it back 10 degrees clockwise, the image you
have will not be the exact same image you started with. Think of it as making a
photocopy, and then a photocopy of the first photocopy, and the another
photocopy of that photocopy. If you keep doing this, the image gets worse and
worse as the slight distortions add up.</p>

<p class=MsoNormal>(The only exception to this is if you rotate an image by a
multiple of 90 degrees, such as 0, 90, 180, 270, or 360 degrees. In that case,
the pixels can be rotated without any distortion.)</p>

<p class=MsoNormal>Second, if you rotate a 2D image then the rotated image will
be slightly larger than the original image. If you rotate that rotated image,
then the next rotated image will be slightly larger again. If you keep doing
this, eventually the image will become too large for Pygame to handle, and your
program will crash with the error message, <span class=Literal>pygame.error:
Width or height is too large</span>.</p>

<div style='border:double windowtext 1.5pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeFeaturedCxSpFirst><span class=SourceLineNumber>154. </span>        degrees1
+= 3 <span class=SourceCodeComment># rotate by 3 degrees each frame</span></p>

<p class=SourceCodeFeaturedCxSpLast><span class=SourceLineNumber>155. </span>        degrees2
+= 7 <span class=SourceCodeComment># rotate by 7 degrees each frame</span></p>

</div>

<p class=MsoNormal>The amount that we rotate the two “Wormy!” text Surface
objects is stored in <span class=Literal>degrees1</span> and <span
class=Literal>degrees2</span>. On each iteration through the animation loop, we
increase the number stored in <span class=Literal>degrees1</span> by <span
class=Literal>3</span> and <span class=Literal>degrees2</span> by <span
class=Literal>7</span>. This means on the next iteration of the animation loop
the white text “Wormy!” Surface object will be rotated by another 3 degrees and
the green text “Wormy!” Surface object will be rotated by another 7 degrees.
This is why the one of the Surface objects rotates slower than the other.</p>

<div style='border:double windowtext 1.5pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeFeaturedCxSpFirst><span class=SourceLineNumber>158. </span>def
terminate():</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>159. </span>    pygame.quit()</p>

<p class=SourceCodeFeaturedCxSpLast><span class=SourceLineNumber>160. </span>    sys.exit()</p>

</div>

<p class=MsoNormal>The <span class=Literal>terminate()</span> function calls <span
class=Literal>pygame.quit()</span> and <span class=Literal>sys.exit()</span> so
that the game correctly shuts down. It is identical to the <span class=Literal>terminate()</span>
functions in the previous game programs.</p>

<h2><a name="_Toc316488656">Deciding Where the Apple Appears</a></h2>

<div style='border:double windowtext 1.5pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeFeaturedCxSpFirst><span class=SourceLineNumber>163. </span>def
getRandomLocation():</p>

<p class=SourceCodeFeaturedCxSpLast><span class=SourceLineNumber>164. </span>    return
{'x': random.randint(0, CELLWIDTH - 1), 'y': random.randint(0, CELLHEIGHT - 1)}</p>

</div>

<p class=MsoNormal>The <span class=Literal>getRandomLocation()</span> function
is called whenever new coordinates for the apple are needed. This function
returns a dictionary with keys <span class=Literal>'x'</span> and <span
class=Literal>'y'</span>, with the values set to random XY coordinates.</p>

<h2><a name="_Toc316488657">Game Over Screens</a></h2>

<div style='border:double windowtext 1.5pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeFeaturedCxSpFirst><span class=SourceLineNumber>167. </span>def
showGameOverScreen():</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>168. </span>    gameOverFont
= pygame.font.Font('freesansbold.ttf', 150)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>169. </span>    gameSurf
= gameOverFont.render('Game', True, WHITE)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>170. </span>    overSurf
= gameOverFont.render('Over', True, WHITE)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>171. </span>    gameRect
= gameSurf.get_rect()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>172. </span>    overRect
= overSurf.get_rect()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>173. </span>    gameRect.midtop
= (WINDOWWIDTH / 2, 10)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>174. </span>    overRect.midtop
= (WINDOWWIDTH / 2, gameRect.height + 10 + 25)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>175. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>176. </span>    DISPLAYSURF.blit(gameSurf,
gameRect)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>177. </span>    DISPLAYSURF.blit(overSurf,
overRect)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>178. </span>    drawPressKeyMsg()</p>

<p class=SourceCodeFeaturedCxSpLast><span class=SourceLineNumber>179. </span>    pygame.display.update()</p>

</div>

<p class=MsoNormal>The game over screen is similar to the start screen, except
it isn’t animated. The words “Game” and “Over” are rendered to two Surface
objects which are then drawn on the screen.</p>

<div style='border:double windowtext 1.5pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeFeaturedCxSpFirst><span class=SourceLineNumber>180. </span>    pygame.time.wait(500)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>181. </span>    checkForKeyPress()
<span class=SourceCodeComment># clear out any key presses in the event queue</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>182. </span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>183. </span>    while
True:</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>184. </span>        if
checkForKeyPress():</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>185. </span>            pygame.event.get()
<span class=SourceCodeComment># clear event queue</span></p>

<p class=SourceCodeFeaturedCxSpLast><span class=SourceLineNumber>186.</span>             return</p>

</div>

<p class=MsoNormal>The Game Over text will stay on the screen until the player
pushes a key. Just to make sure the player doesn’t accidentally press a key too
soon, we will put a half second pause with the call to <span class=Literal>pygame.time.wait()</span>
on line 180. (The 500 argument stands for a 500 millisecond pause, which is
half of one second.) </p>

<p class=MsoNormal>Then, <span class=Literal>checkForKeyPress()</span> is
called so that any key events that were made since the <span class=Literal>showGameOverScreen()</span>
function started are ignored. This pause and dropping of the key events is to
prevent the following situation: Say the player was trying to turn away from
the edge of the screen at the last minute, but pressed the key too late and
crashed into the edge of the board. If this happens, then the key press would
have happened after the <span class=Literal>showGameOverScreen()</span> was
called, and that key press would cause the game over screen to disappear almost
instantly. The next game would start immediately after that, and might take the
player by surprise. Adding this pause helps the make the game more “user
friendly”.</p>

<h2><a name="_Toc316488658">Drawing Functions</a></h2>

<p class=MsoNormal>The code to draw the score, worm, apple, and grid are all
put into separate functions.</p>

<div style='border:double windowtext 1.5pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeFeaturedCxSpFirst><span class=SourceLineNumber>188. </span>def
drawScore(score):</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>189. </span>    scoreSurf
= BASICFONT.render('Score: %s' % (score), True, WHITE)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>190. </span>    scoreRect
= scoreSurf.get_rect()</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>191. </span>    scoreRect.topleft
= (WINDOWWIDTH - 120, 10)</p>

<p class=SourceCodeFeaturedCxSpLast><span class=SourceLineNumber>192. </span>    DISPLAYSURF.blit(scoreSurf,
scoreRect)</p>

</div>

<p class=MsoNormal>The <span class=Literal>drawScore()</span> function simply
renders and draws the text of the score that was passed in its <span
class=Literal>score</span> parameter on the display Surface object.</p>

<div style='border:double windowtext 1.5pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeFeaturedCxSpFirst><span class=SourceLineNumber>195. </span>def
drawWorm(wormCoords):</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>196. </span>    for
coord in wormCoords:</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>197. </span>        x
= coord['x'] * CELLSIZE</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>198. </span>        y
= coord['y'] * CELLSIZE</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>199. </span>        wormSegmentRect
= pygame.Rect(x, y, CELLSIZE, CELLSIZE)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>200. </span>        pygame.draw.rect(DISPLAYSURF,
DARKGREEN, wormSegmentRect)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>201. </span>        wormInnerSegmentRect
= pygame.Rect(x + 4, y + 4, CELLSIZE - 8, CELLSIZE - 8)</p>

<p class=SourceCodeFeaturedCxSpLast><span class=SourceLineNumber>202. </span>        pygame.draw.rect(DISPLAYSURF,
GREEN, wormInnerSegmentRect)</p>

</div>

<p class=MsoNormal>The <span class=Literal>drawWorm()</span> function will draw
a green box for each of the segments of the worm’s body. The segments are
passed in the <span class=Literal>wormCoords</span> parameter, which is a list
of dictionaries each with an <span class=Literal>'x'</span> key and a <span
class=Literal>'y'</span> key. The <span class=Literal>for</span> loop on line
196 loops through each of the dictionary values in <span class=Literal>wormCoords</span>.</p>

<p class=MsoNormal>Because the grid coordinates take up the entire window and
also begin a 0, 0 pixel, it is fairly easy to convert from grid coordinates to
pixel coordinates. Line 197 and 198 simply multiply the <span class=Literal>coord['x']</span>
and <span class=Literal>coord['y']</span> coordinate by the <span
class=Literal>CELLSIZE</span>.</p>

<p class=MsoNormal>Line 199 creates a Rect object for the worm segment that
will be passed to the <span class=Literal>pygame.draw.rect()</span> function on
line 200. Remember that each cell in the grid is <span class=Literal>CELLSIZE</span>
in width and height, so that’s what the size of the segment’s Rect object
should be. Line 200 draws a dark green rectangle for the segment. Then on top
of this, a smaller bright green rectangle is drawn. This makes the worm look a
little nicer. </p>

<p class=MsoNormal>The inner bright green rectangle starts 4 pixels to the
right and 4 pixels below the topleft corner of the cell. The width and height
of this rectangle are 8 pixels less than the cell size, so there will be a 4
pixel margin on the right and bottom sides as well.</p>

<div style='border:double windowtext 1.5pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeFeaturedCxSpFirst><span class=SourceLineNumber>205. </span>def
drawApple(coord):</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>206. </span>    x
= coord['x'] * CELLSIZE</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>207. </span>    y
= coord['y'] * CELLSIZE</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>208. </span>    appleRect
= pygame.Rect(x, y, CELLSIZE, CELLSIZE)</p>

<p class=SourceCodeFeaturedCxSpLast><span class=SourceLineNumber>209. </span>    pygame.draw.rect(DISPLAYSURF,
RED, appleRect)</p>

</div>

<p class=MsoNormal>The <span class=Literal>drawApple()</span> function is very
similar to <span class=Literal>drawWorm()</span>, except since the red apple is
just a single rectangle that fills up the cell, all the function needs to do is
convert to pixel coordinates (which is what lines 206 and 207 do), create the
Rect object with the location and size of the apple (line 208), and then pass
this Rect object to the <span class=Literal>pygame.draw.rect()</span> function.</p>

<div style='border:double windowtext 1.5pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeFeaturedCxSpFirst><span class=SourceLineNumber>212. </span>def
drawGrid():</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>213. </span>    for
x in range(0, WINDOWWIDTH, CELLSIZE): <span class=SourceCodeComment># draw vertical
lines</span></p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>214. </span>        pygame.draw.line(DISPLAYSURF,
DARKGRAY, (x, 0), (x, WINDOWHEIGHT))</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>215. </span>    for
y in range(0, WINDOWHEIGHT, CELLSIZE): <span class=SourceCodeComment># draw
horizontal lines</span></p>

<p class=SourceCodeFeaturedCxSpLast><span class=SourceLineNumber>216. </span>        pygame.draw.line(DISPLAYSURF,
DARKGRAY, (0, y), (WINDOWWIDTH, y))</p>

</div>

<p class=MsoNormal>Just to make it easier to visualize the grid of cells, we
call <span class=Literal>pygame.draw.line()</span> to draw out each of the
vertical and horizontal lines of the grid.</p>

<p class=MsoNormal>Normally, to draw the 32 vertical lines needed, we would
need 32 calls to <span class=Literal>pygame.draw.line()</span> with the
following coordinates:</p>

<div style='border:solid windowtext 1.0pt;padding:4.0pt 4.0pt 4.0pt 4.0pt'>

<p class=CodeExampleCxSpFirst style='border:none;padding:0in'>pygame.draw.line(DISPLAYSURF,
DARKGRAY, (0, 0), (0, WINDOWHEIGHT))</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>pygame.draw.line(DISPLAYSURF,
DARKGRAY, (20, 0), (20, WINDOWHEIGHT))</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>pygame.draw.line(DISPLAYSURF,
DARKGRAY, (40, 0), (40, WINDOWHEIGHT))</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>pygame.draw.line(DISPLAYSURF,
DARKGRAY, (60, 0), (60, WINDOWHEIGHT))</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>...skipped for
brevity...</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>pygame.draw.line(DISPLAYSURF,
DARKGRAY, (560, 0), (560, WINDOWHEIGHT))</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>pygame.draw.line(DISPLAYSURF,
DARKGRAY, (580, 0), (580, WINDOWHEIGHT))</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>pygame.draw.line(DISPLAYSURF,
DARKGRAY, (600, 0), (600, WINDOWHEIGHT))</p>

<p class=CodeExampleCxSpLast style='border:none;padding:0in'>pygame.draw.line(DISPLAYSURF,
DARKGRAY, (620, 0), (620, WINDOWHEIGHT))</p>

</div>

<p class=MsoNormal>Instead of typing out all these lines of code, we can just
have one line of code inside a <span class=Literal>for</span> loop. Notice that
the pattern for the vertical lines is that the X coordinate of the start and
end point starts at <span class=Literal>0</span> and goes up to <span
class=Literal>620</span>, increasing by <span class=Literal>20</span> each
time. The Y coordinate is always <span class=Literal>0</span> for the start
point and <span class=Literal>WINDOWHEIGHT</span> for the end point parameter.
That means the <span class=Literal>for</span> loop should iterate over <span
class=Literal>range(0, 640, 20)</span>. This is why the <span class=Literal>for</span>
loop on line 213 iterates over <span class=Literal>range(0, WINDOWWIDTH,
CELLSIZE)</span>.</p>

<p class=MsoNormal>For the horizontal lines, the coordinates would have to be:</p>

<div style='border:solid windowtext 1.0pt;padding:4.0pt 4.0pt 4.0pt 4.0pt'>

<p class=CodeExampleCxSpFirst style='border:none;padding:0in'>pygame.draw.line(DISPLAYSURF,
DARKGRAY, (0, 0), (WINDOWWIDTH, 0))</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>pygame.draw.line(DISPLAYSURF,
DARKGRAY, (0, 20), (WINDOWWIDTH, 20))</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>pygame.draw.line(DISPLAYSURF,
DARKGRAY, (0, 40), (WINDOWWIDTH, 40))</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>pygame.draw.line(DISPLAYSURF,
DARKGRAY, (0, 60), (WINDOWWIDTH, 60))</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>...skipped for
brevity...</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>pygame.draw.line(DISPLAYSURF,
DARKGRAY, (0, 400), (WINDOWWIDTH, 400))</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>pygame.draw.line(DISPLAYSURF,
DARKGRAY, (0, 420), (WINDOWWIDTH, 420))</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>pygame.draw.line(DISPLAYSURF,
DARKGRAY, (0, 440), (WINDOWWIDTH, 440))</p>

<p class=CodeExampleCxSpLast style='border:none;padding:0in'>pygame.draw.line(DISPLAYSURF,
DARKGRAY, (0, 460), (WINDOWWIDTH, 460))</p>

</div>

<p class=MsoNormal>The Y coordinate ranges from <span class=Literal>0</span> to
<span class=Literal>460</span>, increasing by <span class=Literal>20</span>
each time. The X coordinate is always <span class=Literal>0</span> for the
start point and <span class=Literal>WINDOWWIDTH</span> for the end point
parameter. We can also use a <span class=Literal>for</span> loop here so we
don’t have to type out all those <span class=Literal>pygame.draw.line()</span>
calls.</p>

<p class=MsoNormal>Noticing regular patterns needed by the calls and using
loops is a clever programmer trick to save us from a lot of typing. We could
have typed out all 56 <span class=Literal>pygame.draw.line()</span> calls and
the program would have worked the exact same. But by being a little bit clever,
we can save ourselves a lot of work.</p>

<div style='border:double windowtext 1.5pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeFeaturedCxSpFirst><span class=SourceLineNumber>219. </span>if
__name__ == '__main__':</p>

<p class=SourceCodeFeaturedCxSpLast><span class=SourceLineNumber>220. </span>    main()</p>

</div>

<p class=MsoNormal>After all the functions and constants and global variables
have been defined and created, the <span class=Literal>main()</span> function
is called to start the game.</p>

<h2><a name="_Toc316488659">Don’t Reuse Variable Names</a></h2>

<p class=MsoNormal>Take a look at a few lines of code from the <span
class=Literal>drawWorm()</span> function again:</p>

<div style='border:double windowtext 1.5pt;padding:6.0pt 4.0pt 6.0pt 4.0pt'>

<p class=SourceCodeFeaturedCxSpFirst><span class=SourceLineNumber>199. </span>        wormSegmentRect
= pygame.Rect(x, y, CELLSIZE, CELLSIZE)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>200. </span>        pygame.draw.rect(DISPLAYSURF,
DARKGREEN, wormSegmentRect)</p>

<p class=SourceCodeFeaturedCxSpMiddle><span class=SourceLineNumber>201. </span>        wormInnerSegmentRect
= pygame.Rect(x + 4, y + 4, CELLSIZE - 8, CELLSIZE - 8)</p>

<p class=SourceCodeFeaturedCxSpLast><span class=SourceLineNumber>202. </span>        pygame.draw.rect(DISPLAYSURF,
GREEN, wormInnerSegmentRect)</p>

</div>

<p class=MsoNormal>Notice that two different Rect objects are created on lines 199
and 201. The Rect object created on line 199 is stored in the <span
class=Literal>wormSegmentRect</span> local variable and is passed to the <span
class=Literal>pygame.draw.rect()</span> function on line 200. The Rect object
created on line 201 is stored in the <span class=Literal>wormInnerSegmentRect</span>
local variable and is passed to the <span class=Literal>pygame.draw.rect()</span>
function on line 202.</p>

<p class=MsoNormal>Every time you create a variable, it takes up a small amount
of the computer’s memory. You might think it would be clever to reuse the <span
class=Literal>wormSegmentRect</span> variable for both Rect objects, like this:</p>

<div style='border:solid windowtext 1.0pt;padding:4.0pt 4.0pt 4.0pt 4.0pt'>

<p class=CodeExampleCxSpFirst style='border:none;padding:0in'><span
class=SourceLineNumber>199. </span>        wormSegmentRect = pygame.Rect(x, y,
CELLSIZE, CELLSIZE)</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'><span
class=SourceLineNumber>200. </span>        pygame.draw.rect(DISPLAYSURF,
DARKGREEN, wormSegmentRect)</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'><span
class=SourceLineNumber>201. </span>        wormSegmentRect = pygame.Rect(x + 4,
y + 4, CELLSIZE - 8, CELLSIZE - 8)</p>

<p class=CodeExampleCxSpLast style='border:none;padding:0in'><span
class=SourceLineNumber>202. </span>        pygame.draw.rect(DISPLAYSURF, GREEN,
wormInnerSegmentRect)</p>

</div>

<p class=MsoNormal>Because the Rect object returned by <span class=Literal>pygame.Rect()</span>
on line 199 won’t be needed after 200, we can overwrite this value and reuse
the variable to store the Rect object returned by <span class=Literal>pygame.Rect()</span>
on line 201. Since we are now using fewer variables we are saving memory,
right?</p>

<p class=MsoNormal>While this is technically true, you really are only saving a
few bytes. Modern computers have memory of several billion bytes. So the
savings aren’t that great. Meanwhile, reusing variables reduces the code readability.
If a programmer was reading through this code after it was written, they would
see that <span class=Literal>wormSegmentRect</span> is passed to the <span
class=Literal>pygame.draw.rect()</span> calls on line 200 and 202. If they
tried to find the first time the <span class=Literal>wormSegmentRect</span>
variable was assigned a value, they would see the <span class=Literal>pygame.Rect()</span>
call on line 199. They might not realize that the Rect object returned by line
199’s <span class=Literal>pygame.Rect()</span> call isn’t the same as the one
that is passed to the <span class=Literal>pygame.draw.rect()</span> call on
line 202.</p>

<p class=MsoNormal>Little things like this make it harder to understand how
exactly your program works. It won’t just be other programmers looking at your
code who will be confused. When you look at your own code a couple weeks after
writing it, you may have a hard time remembering how exactly it works. Code
readability is much more important than saving a few bytes of memory here and
there.</p>

<p class=MsoNormal>For additional programming practice, you can download buggy
versions of Wormy from <span class=URL><a href="http://invpy.com/buggy/wormy">http://invpy.com/buggy/wormy</a></span>
and try to figure out how to fix the bugs.</p>

</div>

</body>

</html>
