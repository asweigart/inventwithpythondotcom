<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=utf-8">
<meta name=Generator content="Microsoft Word 14 (filtered)">
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
	{font-family:Tahoma;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:"Franklin Gothic Demi";
	panose-1:2 11 7 3 2 1 2 2 2 4;}
@font-face
	{font-family:"Lucida Sans Typewriter";
	panose-1:2 11 5 9 3 5 4 3 2 4;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:0in;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
h1
	{mso-style-link:"Heading 1 Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:24.0pt;
	margin-left:0in;
	line-height:115%;
	page-break-after:avoid;
	font-size:36.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";
	font-variant:small-caps;
	font-weight:bold;}
h2
	{mso-style-link:"Heading 2 Char";
	margin-top:10.0pt;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:0in;
	line-height:115%;
	page-break-after:avoid;
	font-size:16.0pt;
	font-family:"Calibri","sans-serif";
	color:#1F497D;
	font-weight:bold;}
h3
	{mso-style-link:"Heading 3 Char";
	margin-top:10.0pt;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:0in;
	line-height:115%;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"Calibri","sans-serif";
	color:#1F497D;
	font-weight:bold;
	font-style:italic;}
p.MsoToc1, li.MsoToc1, div.MsoToc1
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:0in;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.MsoToc2, li.MsoToc2, div.MsoToc2
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:11.0pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.MsoToc3, li.MsoToc3, div.MsoToc3
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:22.0pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.MsoToc4, li.MsoToc4, div.MsoToc4
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:33.0pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoToc5, li.MsoToc5, div.MsoToc5
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:44.0pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoToc6, li.MsoToc6, div.MsoToc6
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:55.0pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoToc7, li.MsoToc7, div.MsoToc7
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:66.0pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoToc8, li.MsoToc8, div.MsoToc8
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:77.0pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoToc9, li.MsoToc9, div.MsoToc9
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:88.0pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoHeader, li.MsoHeader, div.MsoHeader
	{mso-style-link:"Header Char";
	margin:0in;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.MsoFooter, li.MsoFooter, div.MsoFooter
	{mso-style-link:"Footer Char";
	margin:0in;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.MsoCaption, li.MsoCaption, div.MsoCaption
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:0in;
	text-align:center;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoTitle, li.MsoTitle, div.MsoTitle
	{mso-style-link:"Title Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:15.0pt;
	margin-left:0in;
	border:none;
	padding:0in;
	font-size:48.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";
	letter-spacing:.25pt;}
p.MsoTitleCxSpFirst, li.MsoTitleCxSpFirst, div.MsoTitleCxSpFirst
	{mso-style-link:"Title Char";
	margin:0in;
	margin-bottom:.0001pt;
	border:none;
	padding:0in;
	font-size:48.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";
	letter-spacing:.25pt;}
p.MsoTitleCxSpMiddle, li.MsoTitleCxSpMiddle, div.MsoTitleCxSpMiddle
	{mso-style-link:"Title Char";
	margin:0in;
	margin-bottom:.0001pt;
	border:none;
	padding:0in;
	font-size:48.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";
	letter-spacing:.25pt;}
p.MsoTitleCxSpLast, li.MsoTitleCxSpLast, div.MsoTitleCxSpLast
	{mso-style-link:"Title Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:15.0pt;
	margin-left:0in;
	border:none;
	padding:0in;
	font-size:48.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";
	letter-spacing:.25pt;}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;}
p
	{margin-right:0in;
	margin-left:0in;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";}
p.MsoAcetate, li.MsoAcetate, div.MsoAcetate
	{mso-style-link:"Balloon Text Char";
	margin:0in;
	margin-bottom:.0001pt;
	font-size:8.0pt;
	font-family:"Tahoma","sans-serif";}
p.MsoNoSpacing, li.MsoNoSpacing, div.MsoNoSpacing
	{mso-style-link:"No Spacing Char";
	margin:0in;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.MsoListParagraph, li.MsoListParagraph, div.MsoListParagraph
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:.5in;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.MsoListParagraphCxSpFirst, li.MsoListParagraphCxSpFirst, div.MsoListParagraphCxSpFirst
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.5in;
	margin-bottom:.0001pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.MsoListParagraphCxSpMiddle, li.MsoListParagraphCxSpMiddle, div.MsoListParagraphCxSpMiddle
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.5in;
	margin-bottom:.0001pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.MsoListParagraphCxSpLast, li.MsoListParagraphCxSpLast, div.MsoListParagraphCxSpLast
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:.5in;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.MsoTocHeading, li.MsoTocHeading, div.MsoTocHeading
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:24.0pt;
	margin-left:0in;
	line-height:115%;
	page-break-after:avoid;
	font-size:36.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";
	font-variant:small-caps;
	font-weight:bold;}
span.Heading1Char
	{mso-style-name:"Heading 1 Char";
	mso-style-link:"Heading 1";
	font-family:"Franklin Gothic Demi","sans-serif";
	font-variant:small-caps;
	font-weight:bold;}
span.Heading2Char
	{mso-style-name:"Heading 2 Char";
	mso-style-link:"Heading 2";
	font-family:"Times New Roman","serif";
	color:#1F497D;
	font-weight:bold;}
span.Definition
	{mso-style-name:Definition;
	font-family:"Calibri","sans-serif";
	font-weight:bold;}
span.URL
	{mso-style-name:URL;
	text-decoration:underline;}
span.Literal
	{mso-style-name:Literal;
	font-family:"Lucida Sans Typewriter";}
p.TopicsCoveredbox, li.TopicsCoveredbox, div.TopicsCoveredbox
	{mso-style-name:"Topics Covered box";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:0in;
	background:#DBE5F1;
	border:none;
	padding:0in;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.TopicsCoveredboxCxSpFirst, li.TopicsCoveredboxCxSpFirst, div.TopicsCoveredboxCxSpFirst
	{mso-style-name:"Topics Covered boxCxSpFirst";
	margin:0in;
	margin-bottom:.0001pt;
	background:#DBE5F1;
	border:none;
	padding:0in;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.TopicsCoveredboxCxSpMiddle, li.TopicsCoveredboxCxSpMiddle, div.TopicsCoveredboxCxSpMiddle
	{mso-style-name:"Topics Covered boxCxSpMiddle";
	margin:0in;
	margin-bottom:.0001pt;
	background:#DBE5F1;
	border:none;
	padding:0in;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.TopicsCoveredboxCxSpLast, li.TopicsCoveredboxCxSpLast, div.TopicsCoveredboxCxSpLast
	{mso-style-name:"Topics Covered boxCxSpLast";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:0in;
	background:#DBE5F1;
	border:none;
	padding:0in;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.CodeExample, li.CodeExample, div.CodeExample
	{mso-style-name:"Code Example";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:12.0pt;
	margin-left:0in;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
p.CodeExampleCxSpFirst, li.CodeExampleCxSpFirst, div.CodeExampleCxSpFirst
	{mso-style-name:"Code ExampleCxSpFirst";
	margin:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
p.CodeExampleCxSpMiddle, li.CodeExampleCxSpMiddle, div.CodeExampleCxSpMiddle
	{mso-style-name:"Code ExampleCxSpMiddle";
	margin:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
p.CodeExampleCxSpLast, li.CodeExampleCxSpLast, div.CodeExampleCxSpLast
	{mso-style-name:"Code ExampleCxSpLast";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:12.0pt;
	margin-left:0in;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
p.SourceCode, li.SourceCode, div.SourceCode
	{mso-style-name:"Source Code";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:12.0pt;
	margin-left:0in;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
p.SourceCodeCxSpFirst, li.SourceCodeCxSpFirst, div.SourceCodeCxSpFirst
	{mso-style-name:"Source CodeCxSpFirst";
	margin:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
p.SourceCodeCxSpMiddle, li.SourceCodeCxSpMiddle, div.SourceCodeCxSpMiddle
	{mso-style-name:"Source CodeCxSpMiddle";
	margin:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
p.SourceCodeCxSpLast, li.SourceCodeCxSpLast, div.SourceCodeCxSpLast
	{mso-style-name:"Source CodeCxSpLast";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:12.0pt;
	margin-left:0in;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
span.SourceLineNumber
	{mso-style-name:"Source Line Number";
	color:#7F7F7F;}
p.ImportantNote, li.ImportantNote, div.ImportantNote
	{mso-style-name:"Important Note";
	margin-top:0in;
	margin-right:.5in;
	margin-bottom:8.0pt;
	margin-left:.5in;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.ChapterNumber, li.ChapterNumber, div.ChapterNumber
	{mso-style-name:"Chapter Number";
	margin:0in;
	margin-bottom:.0001pt;
	font-size:26.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";}
p.Body, li.Body, div.Body
	{mso-style-name:Body;
	margin-top:0in;
	margin-right:0in;
	margin-bottom:8.0pt;
	margin-left:0in;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
span.Keycap
	{mso-style-name:Keycap;
	font-variant:small-caps;
	color:blue;}
p.Non-TOCHeading3, li.Non-TOCHeading3, div.Non-TOCHeading3
	{mso-style-name:"Non-TOC Heading 3";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:0in;
	line-height:115%;
	font-size:14.0pt;
	font-family:"Calibri","sans-serif";
	color:#1F497D;
	font-weight:bold;
	font-style:italic;}
span.BalloonTextChar
	{mso-style-name:"Balloon Text Char";
	mso-style-link:"Balloon Text";
	font-family:"Tahoma","sans-serif";}
p.TableHeading, li.TableHeading, div.TableHeading
	{mso-style-name:"Table Heading";
	margin:0in;
	margin-bottom:.0001pt;
	text-align:center;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";
	font-weight:bold;}
p.TableListing, li.TableListing, div.TableListing
	{mso-style-name:"Table Listing";
	margin:0in;
	margin-bottom:.0001pt;
	text-align:center;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.SampleRun, li.SampleRun, div.SampleRun
	{mso-style-name:"Sample Run";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:12.0pt;
	margin-left:0in;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
p.SampleRunCxSpFirst, li.SampleRunCxSpFirst, div.SampleRunCxSpFirst
	{mso-style-name:"Sample RunCxSpFirst";
	margin:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
p.SampleRunCxSpMiddle, li.SampleRunCxSpMiddle, div.SampleRunCxSpMiddle
	{mso-style-name:"Sample RunCxSpMiddle";
	margin:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
p.SampleRunCxSpLast, li.SampleRunCxSpLast, div.SampleRunCxSpLast
	{mso-style-name:"Sample RunCxSpLast";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:12.0pt;
	margin-left:0in;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
span.SampleRunResponse
	{mso-style-name:"Sample Run Response";
	color:#1F497D;
	font-weight:bold;}
span.SourceCodeComment
	{mso-style-name:"Source Code Comment";
	color:#7F7F7F;}
span.FigureImageBorder
	{mso-style-name:"Figure Image Border";
	border:solid windowtext 1.0pt;
	padding:0in;}
p.SourceCodeFilename, li.SourceCodeFilename, div.SourceCodeFilename
	{mso-style-name:"Source Code Filename";
	margin:0in;
	margin-bottom:.0001pt;
	text-align:right;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:"Lucida Sans Typewriter";}
p.SourceCodeFilenameCxSpFirst, li.SourceCodeFilenameCxSpFirst, div.SourceCodeFilenameCxSpFirst
	{mso-style-name:"Source Code FilenameCxSpFirst";
	margin:0in;
	margin-bottom:.0001pt;
	text-align:right;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:"Lucida Sans Typewriter";}
p.SourceCodeFilenameCxSpMiddle, li.SourceCodeFilenameCxSpMiddle, div.SourceCodeFilenameCxSpMiddle
	{mso-style-name:"Source Code FilenameCxSpMiddle";
	margin:0in;
	margin-bottom:.0001pt;
	text-align:right;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:"Lucida Sans Typewriter";}
p.SourceCodeFilenameCxSpLast, li.SourceCodeFilenameCxSpLast, div.SourceCodeFilenameCxSpLast
	{mso-style-name:"Source Code FilenameCxSpLast";
	margin:0in;
	margin-bottom:.0001pt;
	text-align:right;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:"Lucida Sans Typewriter";}
span.Heading3Char
	{mso-style-name:"Heading 3 Char";
	mso-style-link:"Heading 3";
	font-family:"Times New Roman","serif";
	color:#1F497D;
	font-weight:bold;
	font-style:italic;}
span.NoSpacingChar
	{mso-style-name:"No Spacing Char";
	mso-style-link:"No Spacing";
	font-family:"Times New Roman","serif";}
span.HeaderChar
	{mso-style-name:"Header Char";
	mso-style-link:Header;
	font-family:"Times New Roman","serif";}
span.FooterChar
	{mso-style-name:"Footer Char";
	mso-style-link:Footer;
	font-family:"Times New Roman","serif";}
span.StrongBoxed
	{mso-style-name:"Strong & Boxed";
	border:solid windowtext 1.0pt;
	padding:0in;
	font-weight:bold;}
span.TitleChar
	{mso-style-name:"Title Char";
	mso-style-link:Title;
	font-family:"Franklin Gothic Demi","sans-serif";
	letter-spacing:.25pt;}
p.BodyFirst, li.BodyFirst, div.BodyFirst
	{mso-style-name:"Body First";
	margin:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
.MsoChpDefault
	{font-family:"Calibri","sans-serif";}
.MsoPapDefault
	{margin-bottom:10.0pt;
	line-height:115%;}
@page WordSection1
	{size:8.0in 10.0in;
	margin:1.0in 1.0in 1.0in 1.0in;}
div.WordSection1
	{page:WordSection1;}
 /* List Definitions */
 ol
	{margin-bottom:0in;}
ul
	{margin-bottom:0in;}
-->
</style>

</head>

<body lang=EN-US link=blue vlink=purple>


<div style='float: right; height: 310px; font-family: sans-serif;'>Ad: Programming books by Al Sweigart<br />
    <a href='http://www.nostarch.com/automatestuff' onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_automate.link');"><img src='/images/cover_automate_thumb.webp' style="height: 200px; border: solid black 1px;" /></a>
    <a href='http://www.amazon.com/gp/product/1503212300?ie=UTF8&tag=playwithpyth-20&linkCode=as2&camp=1789&creative=9325&creativeASIN=1503212300' onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_invent.link');"><img src='/images/cover_inventwithpython_thumb.webp' style="height: 200px; border: solid black 1px;" /></a>
    <a href='http://www.amazon.com/Making-Games-Python-Pygame-Sweigart/dp/1469901730?ie=UTF8&tag=playwithpyth-20&linkCode=as2&camp=1789&creative=9325&creativeASIN=1469901730' onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_pygame.link');"><img src='/images/cover_makinggames_thumb.webp' style="height: 200px; border: solid black 1px;" /></a>
    <a href='http://www.amazon.com/gp/product/1482614375/ref=as_li_qf_sp_asin_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1482614375&linkCode=as2&tag=playwithpyth-20' onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_hacking.link');"><img src='/images/cover_hackingciphers_thumb.webp' style="height: 200px; border: solid black 1px;" /></a>
</div>


<div class=WordSection1>

<table class=MsoTableGrid border=0 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=101 rowspan=2 valign=top style='width:60.85pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=ChapterNumber><img width=84 height=96 id="Picture 154"
  src="chapter13_files/image001.webp"></p>
  </td>
  <td width=637 valign=top style='width:381.95pt;border:none;border-bottom:
  solid windowtext 1.0pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=ChapterNumber>Chapter 13</p>
  </td>
 </tr>
 <tr>
  <td width=637 valign=top style='width:381.95pt;border:none;padding:0in 5.4pt 0in 5.4pt'>
  <h1 style='line-height:normal'><a name="_Toc405145138"><span
  style='font-variant:normal !important;text-transform:uppercase'>Sonar
  Treasure Hunt</span></a></h1>
  </td>
 </tr>
</table>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt;
background:#DBE5F1'>

<p class=TopicsCoveredboxCxSpFirst style='background:#DBE5F1;border:none;
padding:0in'>Topics Covered In This Chapter:</p>

<p class=TopicsCoveredboxCxSpMiddle style='margin-left:.25in;text-indent:-.25in;
background:#DBE5F1;border:none;padding:0in'><span style='font-family:Symbol'>·<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Data structures</p>

<p class=TopicsCoveredboxCxSpMiddle style='margin-left:.25in;text-indent:-.25in;
background:#DBE5F1;border:none;padding:0in'><span style='font-family:Symbol'>·<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>The <span class=Literal><span style='font-size:9.0pt'>remove()</span></span>
list method</p>

<p class=TopicsCoveredboxCxSpMiddle style='margin-left:.25in;text-indent:-.25in;
background:#DBE5F1;border:none;padding:0in'><span style='font-family:Symbol'>·<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>The <span class=Literal><span style='font-size:9.0pt'>isdigit()</span></span>
string method</p>

<p class=TopicsCoveredboxCxSpLast style='margin-left:.25in;text-indent:-.25in;
background:#DBE5F1;border:none;padding:0in'><span style='font-family:Symbol'>·<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>The <span class=Literal><span style='font-size:9.0pt'>sys.exit()</span></span>
function</p>

</div>

<p class=Body>The game in this chapter is the first to make use of Cartesian
coordinates that you learned about in Chapter 12. The game also has <span
class=Definition>data structures</span> (which is just a fancy way of saying
complex variables such as those that contain lists of lists.) As the games you
program become more complicated, you’ll need to organize your data in data
structures.</p>

<p class=Body>In this chapter’s game, the player places sonar devices at
various places in the ocean to locate sunken treasure chests. Sonar is a
technology that ships use to locate objects under the sea. The sonar devices
(in this game) will tell the player how far away the closest treasure chest is,
but not in what direction. But by placing multiple sonar devices down, the
player can figure out where the treasure chest is.</p>

<p class=Body>There are three chests to collect, but the player has only
sixteen sonar devices to use to find them. Imagine that you could not see the
treasure chest in the following picture. Because each sonar device can only
find the distance, not direction, the possible places the treasure could be is
anywhere in a square ring around the sonar device (see Figure 13-1).</p>

<p class=MsoNormal align=center style='text-align:center'><img width=252
height=250 id="Picture 68" src="chapter13_files/image002.webp"></p>

<p class=MsoCaption>Figure 13-1: The sonar device’s square ring touches the
(hidden) treasure chest.</p>

<p class=MsoNormal align=center style='text-align:center'><img width=252
height=250 id="Picture 69" src="chapter13_files/image003.webp"></p>

<p class=MsoCaption>Figure 13-2: Combining multiple square rings of shows where
treasure chests could be.</p>

<p class=Body>But multiple sonar devices working together can narrow it to an
exact place where the rings intersect each other. See Figure 13-2. (Normally
these rings would be circles, but this game will use squares to make
programming it easier.)</p>

<h2><a name="_Toc405145139">Sample Run of Sonar Treasure Hunt</a></h2>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt'>

<p class=SampleRunCxSpFirst>S O N A R !</p>

<p class=SampleRunCxSpMiddle>Would you like to view the instructions? (yes/no)</p>

<p class=SampleRunCxSpMiddle><span class=SampleRunResponse>no</span></p>

<p class=SampleRunCxSpMiddle>             1         2         3        
4         5</p>

<p class=SampleRunCxSpMiddle>  
012345678901234567890123456789012345678901234567890123456789</p>

<p class=SampleRunCxSpMiddle> 0 `~~~`~~~`~`~~`~~~~~`~``~~~~`~`~~~`~``~``~~````~`~```~`~~~~``
0</p>

<p class=SampleRunCxSpMiddle> 1
~`~~~```~~~~`~`~~`~``~`~~```~`~`~~`~`~~~~~~`~`````~`~~`~~~~` 1</p>

<p class=SampleRunCxSpMiddle> 2
`~``~``~~~`~``~`~`~``~`````~~~~~~~~~`~`~~`~``~~~~~```~~`~``` 2</p>

<p class=SampleRunCxSpMiddle> 3
``~`~~``~`~``~`~`~`~~`~`~~`~`~``~~~`~``~````~``````~~~~``~`` 3</p>

<p class=SampleRunCxSpMiddle> 4 ``~~`~~~``~``~~````~`~`~`~``~~~``~~```~`~~`~~`~`~`~~`~~~~```
4</p>

<p class=SampleRunCxSpMiddle> 5
~~```~~~`~`~~``~`~``~```~`~~`~~~~~`~~``~`~`~~~`~~`~`~`~`~~~` 5</p>

<p class=SampleRunCxSpMiddle> 6
``~~`````~~~~`~`~~~```~~~~`~~`~~`~~```~~`~~~`~~~``~`~~~``~~~ 6</p>

<p class=SampleRunCxSpMiddle> 7
`~`````````~```~``~``~~`~~~~`~~``~``~~~```~`~~`~``~``~~```~~ 7</p>

<p class=SampleRunCxSpMiddle> 8
`~````~```~`~~`~~~`~~``~~~``~`~``~~~``~`~`````~`~~```~`~~~~` 8</p>

<p class=SampleRunCxSpMiddle> 9
~```~~`~`~``~``~~``~``~```~`~``~~~~`~`~`~~~`~`~`~`~~~``~~``` 9</p>

<p class=SampleRunCxSpMiddle>10
```~`~```~``~``~`~~`~``~````~``~~~`~~`~~``~~~~`~~~`~`~~````~ 10</p>

<p class=SampleRunCxSpMiddle>11
```~```~~~`~```~~`~~~`~`````~`~~`~`~~`~~`~`~~`~~~````~````~` 11</p>

<p class=SampleRunCxSpMiddle>12
~~~`~`~~~``~~~~~~`~~~``~`~`~~`~`~~`~```~~~```~~`~~`~``~``~`~ 12</p>

<p class=SampleRunCxSpMiddle>13
`~~````~~``~```~~~`~```~`~~~~~~~~~`~~``~~~~~`````~`~`~``~~~~ 13</p>

<p class=SampleRunCxSpMiddle>14
`~~`~`~````~```~`~`~```~~`~~~~`~```~``~``~``~~~````~~``````~ 14</p>

<p class=SampleRunCxSpMiddle>   012345678901234567890123456789012345678901234567890123456789</p>

<p class=SampleRunCxSpMiddle>             1         2         3        
4         5</p>

<p class=SampleRunCxSpMiddle>You have 16 sonar devices left. 3 treasure chests
remaining.</p>

<p class=SampleRunCxSpMiddle>Where do you want to drop the next sonar device?
(0-59 0-14) (or type quit)</p>

<p class=SampleRunCxSpMiddle><span class=SampleRunResponse>10 10</span></p>

<p class=SampleRunCxSpMiddle>             1         2         3         4        
5</p>

<p class=SampleRunCxSpMiddle>  
012345678901234567890123456789012345678901234567890123456789</p>

<p class=SampleRunCxSpMiddle> 0
`~~~`~~~`~`~~`~~~~~`~``~~~~`~`~~~`~``~``~~````~`~```~`~~~~`` 0</p>

<p class=SampleRunCxSpMiddle> 1
~`~~~```~~~~`~`~~`~``~`~~```~`~`~~`~`~~~~~~`~`````~`~~`~~~~` 1</p>

<p class=SampleRunCxSpMiddle> 2 `~``~``~~~`~``~`~`~``~`````~~~~~~~~~`~`~~`~``~~~~~```~~`~```
2</p>

<p class=SampleRunCxSpMiddle> 3
``~`~~``~`~``~`~`~`~~`~`~~`~`~``~~~`~``~````~``````~~~~``~`` 3</p>

<p class=SampleRunCxSpMiddle> 4
``~~`~~~``~``~~````~`~`~`~``~~~``~~```~`~~`~~`~`~`~~`~~~~``` 4</p>

<p class=SampleRunCxSpMiddle> 5
~~```~~~`~`~~``~`~``~```~`~~`~~~~~`~~``~`~`~~~`~~`~`~`~`~~~` 5</p>

<p class=SampleRunCxSpMiddle> 6 ``~~`````~~~~`~`~~~```~~~~`~~`~~`~~```~~`~~~`~~~``~`~~~``~~~
6</p>

<p class=SampleRunCxSpMiddle> 7
`~`````````~```~``~``~~`~~~~`~~``~``~~~```~`~~`~``~``~~```~~ 7</p>

<p class=SampleRunCxSpMiddle> 8
`~````~```~`~~`~~~`~~``~~~``~`~``~~~``~`~`````~`~~```~`~~~~` 8</p>

<p class=SampleRunCxSpMiddle> 9
~```~~`~`~``~``~~``~``~```~`~``~~~~`~`~`~~~`~`~`~`~~~``~~``` 9</p>

<p class=SampleRunCxSpMiddle>10 ```~`~```~5`~``~`~~`~``~````~``~~~`~~`~~``~~~~`~~~`~`~~````~
10</p>

<p class=SampleRunCxSpMiddle>11
```~```~~~`~```~~`~~~`~`````~`~~`~`~~`~~`~`~~`~~~````~````~` 11</p>

<p class=SampleRunCxSpMiddle>12
~~~`~`~~~``~~~~~~`~~~``~`~`~~`~`~~`~```~~~```~~`~~`~``~``~`~ 12</p>

<p class=SampleRunCxSpMiddle>13
`~~````~~``~```~~~`~```~`~~~~~~~~~`~~``~~~~~`````~`~`~``~~~~ 13</p>

<p class=SampleRunCxSpMiddle>14 `~~`~`~````~```~`~`~```~~`~~~~`~```~``~``~``~~~````~~``````~
14</p>

<p class=SampleRunCxSpMiddle>  
012345678901234567890123456789012345678901234567890123456789</p>

<p class=SampleRunCxSpMiddle>             1         2         3        
4         5</p>

<p class=SampleRunCxSpMiddle>Treasure detected at a distance of 5 from the
sonar device.</p>

<p class=SampleRunCxSpMiddle>You have 15 sonar devices left. 3 treasure chests
remaining.</p>

<p class=SampleRunCxSpMiddle>Where do you want to drop the next sonar device?
(0-59 0-14) (or type quit)</p>

<p class=SampleRunCxSpMiddle><span class=SampleRunResponse>15 6</span></p>

<p class=SampleRunCxSpMiddle>             1         2         3        
4         5</p>

<p class=SampleRunCxSpMiddle>  
012345678901234567890123456789012345678901234567890123456789</p>

<p class=SampleRunCxSpMiddle> 0 `~~~`~~~`~`~~`~~~~~`~``~~~~`~`~~~`~``~``~~````~`~```~`~~~~``
0</p>

<p class=SampleRunCxSpMiddle> 1
~`~~~```~~~~`~`~~`~``~`~~```~`~`~~`~`~~~~~~`~`````~`~~`~~~~` 1</p>

<p class=SampleRunCxSpMiddle> 2
`~``~``~~~`~``~`~`~``~`````~~~~~~~~~`~`~~`~``~~~~~```~~`~``` 2</p>

<p class=SampleRunCxSpMiddle> 3
``~`~~``~`~``~`~`~`~~`~`~~`~`~``~~~`~``~````~``````~~~~``~`` 3</p>

<p class=SampleRunCxSpMiddle> 4 ``~~`~~~``~``~~````~`~`~`~``~~~``~~```~`~~`~~`~`~`~~`~~~~```
4</p>

<p class=SampleRunCxSpMiddle> 5
~~```~~~`~`~~``~`~``~```~`~~`~~~~~`~~``~`~`~~~`~~`~`~`~`~~~` 5</p>

<p class=SampleRunCxSpMiddle> 6
``~~`````~~~~`~4~~~```~~~~`~~`~~`~~```~~`~~~`~~~``~`~~~``~~~ 6</p>

<p class=SampleRunCxSpMiddle> 7
`~`````````~```~``~``~~`~~~~`~~``~``~~~```~`~~`~``~``~~```~~ 7</p>

<p class=SampleRunCxSpMiddle> 8 `~````~```~`~~`~~~`~~``~~~``~`~``~~~``~`~`````~`~~```~`~~~~`
8</p>

<p class=SampleRunCxSpMiddle> 9
~```~~`~`~``~``~~``~``~```~`~``~~~~`~`~`~~~`~`~`~`~~~``~~``` 9</p>

<p class=SampleRunCxSpMiddle>10
```~`~```~5`~``~`~~`~``~````~``~~~`~~`~~``~~~~`~~~`~`~~````~ 10</p>

<p class=SampleRunCxSpMiddle>11
```~```~~~`~```~~`~~~`~`````~`~~`~`~~`~~`~`~~`~~~````~````~` 11</p>

<p class=SampleRunCxSpMiddle>12
~~~`~`~~~``~~~~~~`~~~``~`~`~~`~`~~`~```~~~```~~`~~`~``~``~`~ 12</p>

<p class=SampleRunCxSpMiddle>13
`~~````~~``~```~~~`~```~`~~~~~~~~~`~~``~~~~~`````~`~`~``~~~~ 13</p>

<p class=SampleRunCxSpMiddle>14
`~~`~`~````~```~`~`~```~~`~~~~`~```~``~``~``~~~````~~``````~ 14</p>

<p class=SampleRunCxSpMiddle>   012345678901234567890123456789012345678901234567890123456789</p>

<p class=SampleRunCxSpMiddle>             1         2         3        
4         5</p>

<p class=SampleRunCxSpMiddle>Treasure detected at a distance of 4 from the
sonar device.</p>

<p class=SampleRunCxSpMiddle>You have 14 sonar devices left. 3 treasure chests
remaining.</p>

<p class=SampleRunCxSpMiddle>Where do you want to drop the next sonar device?
(0-59 0-14) (or type quit)</p>

<p class=SampleRunCxSpMiddle><span class=SampleRunResponse>15 10</span></p>

<p class=SampleRunCxSpMiddle>             1         2         3        
4         5</p>

<p class=SampleRunCxSpMiddle>  
012345678901234567890123456789012345678901234567890123456789</p>

<p class=SampleRunCxSpMiddle> 0
`~~~`~~~`~`~~`~~~~~`~``~~~~`~`~~~`~``~``~~````~`~```~`~~~~`` 0</p>

<p class=SampleRunCxSpMiddle> 1
~`~~~```~~~~`~`~~`~``~`~~```~`~`~~`~`~~~~~~`~`````~`~~`~~~~` 1</p>

<p class=SampleRunCxSpMiddle> 2
`~``~``~~~`~``~`~`~``~`````~~~~~~~~~`~`~~`~``~~~~~```~~`~``` 2</p>

<p class=SampleRunCxSpMiddle> 3
``~`~~``~`~``~`~`~`~~`~`~~`~`~``~~~`~``~````~``````~~~~``~`` 3</p>

<p class=SampleRunCxSpMiddle> 4
``~~`~~~``~``~~````~`~`~`~``~~~``~~```~`~~`~~`~`~`~~`~~~~``` 4</p>

<p class=SampleRunCxSpMiddle> 5
~~```~~~`~`~~``~`~``~```~`~~`~~~~~`~~``~`~`~~~`~~`~`~`~`~~~` 5</p>

<p class=SampleRunCxSpMiddle> 6
``~~`````~~~~`~O~~~```~~~~`~~`~~`~~```~~`~~~`~~~``~`~~~``~~~ 6</p>

<p class=SampleRunCxSpMiddle> 7
`~`````````~```~``~``~~`~~~~`~~``~``~~~```~`~~`~``~``~~```~~ 7</p>

<p class=SampleRunCxSpMiddle> 8 `~````~```~`~~`~~~`~~``~~~``~`~``~~~``~`~`````~`~~```~`~~~~`
8</p>

<p class=SampleRunCxSpMiddle> 9
~```~~`~`~``~``~~``~``~```~`~``~~~~`~`~`~~~`~`~`~`~~~``~~``` 9</p>

<p class=SampleRunCxSpMiddle>10
```~`~```~O`~``O`~~`~``~````~``~~~`~~`~~``~~~~`~~~`~`~~````~ 10</p>

<p class=SampleRunCxSpMiddle>11
```~```~~~`~```~~`~~~`~`````~`~~`~`~~`~~`~`~~`~~~````~````~` 11</p>

<p class=SampleRunCxSpMiddle>12 ~~~`~`~~~``~~~~~~`~~~``~`~`~~`~`~~`~```~~~```~~`~~`~``~``~`~
12</p>

<p class=SampleRunCxSpMiddle>13
`~~````~~``~```~~~`~```~`~~~~~~~~~`~~``~~~~~`````~`~`~``~~~~ 13</p>

<p class=SampleRunCxSpMiddle>14
`~~`~`~````~```~`~`~```~~`~~~~`~```~``~``~``~~~````~~``````~ 14</p>

<p class=SampleRunCxSpMiddle>  
012345678901234567890123456789012345678901234567890123456789</p>

<p class=SampleRunCxSpMiddle>             1         2         3        
4         5</p>

<p class=SampleRunCxSpMiddle>You have found a sunken treasure chest!</p>

<p class=SampleRunCxSpMiddle>You have 13 sonar devices left. 2 treasure chests
remaining.</p>

<p class=SampleRunCxSpMiddle>Where do you want to drop the next sonar device?
(0-59 0-14) (or type quit)</p>

<p class=SampleRunCxSpMiddle>&nbsp;</p>

<p class=SampleRunCxSpMiddle>...skipped over for brevity...</p>

<p class=SampleRunCxSpMiddle>&nbsp;</p>

<p class=SampleRunCxSpMiddle>             1         2         3        
4         5</p>

<p class=SampleRunCxSpMiddle>  
012345678901234567890123456789012345678901234567890123456789</p>

<p class=SampleRunCxSpMiddle> 0
`~~~`~~~`~`~~`~~~~~`~``~~~~`~`~~~`~``~``~~````~`~```~`~~~~`` 0</p>

<p class=SampleRunCxSpMiddle> 1
~`~~~```~~~~`~`~~`~``~`~~```~O~`~~`~`~~~~~~`~`````~`~~`~~~~` 1</p>

<p class=SampleRunCxSpMiddle> 2
`~``~``~~~`~``~`~`~``~`````~~O~~~O~~`~`~~`~``~~~~~```~~`~``` 2</p>

<p class=SampleRunCxSpMiddle> 3
``~3~~``8`~``~`~`~`~~`~`~~`~`~``~~~`~`O~````~``````~~~~``~`` 3</p>

<p class=SampleRunCxSpMiddle> 4
``~~`~~~``~``~~````~`~`~`~O`~~O``~~```~`~~`~~`~`~`~~`~~~~``` 4</p>

<p class=SampleRunCxSpMiddle> 5
~~```~~~`~`~~``~`~``~```~`~~`~~~~~`~~``~`~`~~~`~~`~`~`~`~~~` 5</p>

<p class=SampleRunCxSpMiddle> 6
``~~`````~~~~`~O~~~```~~~~`~~`~~`~~```~~`~~~`~~~``O`~~~``~~~ 6</p>

<p class=SampleRunCxSpMiddle> 7
`~`````````~```~``~``~~`~~~~`~~``~``~~~```~`~~`~``~``~~```~~ 7</p>

<p class=SampleRunCxSpMiddle> 8
`~````~```~`~~`~~~`~~``~~~``~`~``~~~``~`O```0`~`~~```~`~~~~` 8</p>

<p class=SampleRunCxSpMiddle> 9 ~```~~`~`~``~``~~``~``~```~O~``~~~~`~`~`~~~`~`~`~`~~~``~~```
9</p>

<p class=SampleRunCxSpMiddle>10
```~`~```~O`~``O`~~`~``~````~``~~~`~~`~~``~~~~`~~~`~`~~````~ 10</p>

<p class=SampleRunCxSpMiddle>11
```~```~~~`~```~~`~~~`~`````~`~~`~`~~`~~`~`~~`~~~````~````~` 11</p>

<p class=SampleRunCxSpMiddle>12
~~~`~`~~~``~~~~~~`~~~``~`~`~~`~`~~`~```~~~```~~`~~`~``~``~`~ 12</p>

<p class=SampleRunCxSpMiddle>13 `~~````~~``~```~~~`~```~`~~~~~~~~~`~~``~~~~~`````~`~`~``~~~~
13</p>

<p class=SampleRunCxSpMiddle>14
`~~`~`~````~```~`~`~```~~`~~~~`~```~``~``~``~~~````~~``````~ 14</p>

<p class=SampleRunCxSpMiddle>  
012345678901234567890123456789012345678901234567890123456789</p>

<p class=SampleRunCxSpMiddle>             1         2         3        
4         5</p>

<p class=SampleRunCxSpMiddle>Treasure detected at a distance of 4 from the
sonar device.</p>

<p class=SampleRunCxSpMiddle>We've run out of sonar devices! Now we have to
turn the ship around and head</p>

<p class=SampleRunCxSpMiddle>for home with treasure chests still out there!
Game over.</p>

<p class=SampleRunCxSpMiddle>    The remaining chests were here:</p>

<p class=SampleRunCxSpMiddle>    0, 4</p>

<p class=SampleRunCxSpMiddle>Do you want to play again? (yes or no)</p>

<p class=SampleRunCxSpLast><span class=SampleRunResponse>no</span></p>

</div>

<h2><a name="_Toc405145140">Source Code of Sonar Treasure Hunt</a></h2>

<p class=Body>Below is the source code for the game. Type it into a new file,
then save the file as <em>sonar.py</em> and run it by pressing the <strong>F5</strong>
key. If you get errors after typing this code in, compare the code you typed to
the book’s code with the online diff tool at <span class=URL><u>http://invpy.com/diff/sonar</u></span>.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeFilename>sonar.py</p>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>  1.</span> <span
class=SourceCodeComment># Sonar</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  2. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  3.</span> import
random</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  4.</span> import
sys</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  5. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  6.</span> def
drawBoard(board):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  7.</span>     <span
class=SourceCodeComment># Draw the board data structure.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  8. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  9.</span>    
hline = '    ' <span class=SourceCodeComment># initial space for the numbers
down the left side of the board</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 10.</span>     for
i in range(1, 6):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 11.</span>        
hline += (' ' * 9) + str(i)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 12. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 13.</span>     <span
class=SourceCodeComment># print the numbers across the top</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 14.</span>    
print(hline)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 15.</span>    
print('   ' + ('0123456789' * 6))</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 16.</span>    
print()</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 17. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 18.</span>     <span
class=SourceCodeComment># print each of the 15 rows</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 19.</span>     for
i in range(15):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 20.</span>         <span
class=SourceCodeComment># single-digit numbers need to be padded with an extra
space</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 21.</span>        
if i &lt; 10:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 22.</span>            
extraSpace = ' '</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 23.</span>        
else:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 24.</span>            
extraSpace = ''</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 25.</span>        
print('%s%s %s %s' % (extraSpace, i, getRow(board, i), i))</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 26. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 27.</span>     <span
class=SourceCodeComment># print the numbers across the bottom</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 28.</span>    
print()</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 29.</span>    
print('   ' + ('0123456789' * 6))</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 30.</span>    
print(hline)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 31. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 32.</span> </p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 33.</span> def
getRow(board, row):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 34.</span>     <span
class=SourceCodeComment># Return a string from the board data structure at a
certain row.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 35.</span>    
boardRow = ''</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 36.</span>     for
i in range(60):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 37.</span>        
boardRow += board[i][row]</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 38.</span>    
return boardRow</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 39. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 40.</span> def
getNewBoard():</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 41.</span>     <span
class=SourceCodeComment># Create a new 60x15 board data structure.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 42.</span>    
board = []</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 43.</span>     for
x in range(60): <span class=SourceCodeComment># the main list is a list of 60
lists</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 44.</span>        
board.append([])</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 45.</span>        
for y in range(15): <span class=SourceCodeComment># each list in the main list
has 15 single-character strings</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 46.</span>            
<span class=SourceCodeComment># use different characters for the ocean to make
it more readable.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 47.</span>            
if random.randint(0, 1) == 0:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 48.</span>                
board[x].append('~')</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 49.</span>            
else:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 50.</span>                
board[x].append('`')</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 51.</span>    
return board</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 52. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 53.</span> def
getRandomChests(numChests):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 54.</span>     <span
class=SourceCodeComment># Create a list of chest data structures (two-item
lists of x, y int coordinates)</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 55.</span>    
chests = []</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 56.</span>     for
i in range(numChests):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 57.</span>        
chests.append([random.randint(0, 59), random.randint(0, 14)])</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 58.</span>    
return chests</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 59. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 60.</span> def
isValidMove(x, y):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 61.</span>     <span
class=SourceCodeComment># Return True if the coordinates are on the board,
otherwise False.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 62.</span>    
return x &gt;= 0 and x &lt;= 59 and y &gt;= 0 and y &lt;= 14</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 63. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 64.</span> def
makeMove(board, chests, x, y):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 65.</span>     <span
class=SourceCodeComment># Change the board data structure with a sonar device
character. Remove treasure chests</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 66.</span>     #
from the chests list as they are found. Return False if this is an invalid
move.</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 67.</span>     <span
class=SourceCodeComment># Otherwise, return the string of the result of this
move.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 68.</span>     if
not isValidMove(x, y):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 69.</span>        
return False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 70. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 71.</span>    
smallestDistance = 100 <span class=SourceCodeComment># any chest will be closer
than 100.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 72.</span>     for
cx, cy in chests:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 73.</span>        
if abs(cx - x) &gt; abs(cy - y):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 74.</span>            
distance = abs(cx - x)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 75.</span>        
else:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 76.</span>            
distance = abs(cy - y)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 77. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 78.</span>        
if distance &lt; smallestDistance: <span class=SourceCodeComment># we want the
closest treasure chest.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 79.</span>            
smallestDistance = distance</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 80. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 81.</span>     if
smallestDistance == 0:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 82.</span>         <span
class=SourceCodeComment># xy is directly on a treasure chest!</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 83.</span>        
chests.remove([x, y])</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 84.</span>        
return 'You have found a sunken treasure chest!'</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 85.</span>    
else:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 86.</span>        
if smallestDistance &lt; 10:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 87.</span>            
board[x][y] = str(smallestDistance)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 88.</span>            
return 'Treasure detected at a distance of %s from the sonar device.' %
(smallestDistance)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 89.</span>        
else:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 90.</span>            
board[x][y] = 'O'</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 91.</span>            
return 'Sonar did not detect anything. All treasure chests out of range.'</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 92. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 93. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 94.</span> def
enterPlayerMove():</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 95.</span>     <span
class=SourceCodeComment># Let the player type in their move. Return a two-item
list of int xy coordinates.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 96.</span>    
print('Where do you want to drop the next sonar device? (0-59 0-14) (or type
quit)')</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 97.</span>    
while True:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 98.</span>        
move = input()</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 99.</span>        
if move.lower() == 'quit':</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>100.</span>            
print('Thanks for playing!')</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>101.</span>            
sys.exit()</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>102. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>103.</span>        
move = move.split()</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>104.</span>        
if len(move) == 2 and move[0].isdigit() and move[1].isdigit() and
isValidMove(int(move[0]), int(move[1])):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>105.</span>            
return [int(move[0]), int(move[1])]</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>106.</span>        
print('Enter a number from 0 to 59, a space, then a number from 0 to 14.')</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>107. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>108. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>109.</span> def
playAgain():</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>110.</span>     <span
class=SourceCodeComment># This function returns True if the player wants to
play again, otherwise it returns False.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>111.</span>    
print('Do you want to play again? (yes or no)')</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>112.</span>    
return input().lower().startswith('y')</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>113. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>114. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>115.</span> def
showInstructions():</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>116.</span>    
print('''Instructions:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>117.</span> You are
the captain of the Simon, a treasure-hunting ship. Your current mission</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>118.</span> is to
find the three sunken treasure chests that are lurking in the part of the</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>119.</span> ocean
you are in and collect them.</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>120.</span> </p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>121.</span> To play,
enter the coordinates of the point in the ocean you wish to drop a</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>122.</span> sonar
device. The sonar can find out how far away the closest chest is to it.</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>123.</span> For
example, the d below marks where the device was dropped, and the 2's</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>124.</span>
represent distances of 2 away from the device. The 4's represent</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>125.</span>
distances of 4 away from the device.</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>126. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>127.</span>    
444444444</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>128.</span>     4      
4</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>129.</span>     4
22222 4</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>130.</span>     4
2   2 4</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>131.</span>     4 2
d 2 4</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>132.</span>     4
2   2 4</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>133.</span>     4
22222 4</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>134.</span>    
4       4</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>135.</span>    
444444444</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>136.</span> Press
enter to continue...''')</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>137.</span>    
input()</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>138. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>139.</span>    
print('''For example, here is a treasure chest (the c) located a distance of 2
away</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>140.</span> from the
sonar device (the d):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>141. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>142.</span>    
22222</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>143.</span>     c  
2</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>144.</span>     2 d
2</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>145.</span>     2  
2</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>146.</span>    
22222</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>147. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>148.</span> The
point where the device was dropped will be marked with a 2.</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>149. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>150.</span> The
treasure chests don’t move around. Sonar devices can detect treasure</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>151.</span> chests
up to a distance of 9. If all chests are out of range, the point</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>152.</span> will be
marked with O</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>153. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>154.</span> If a
device is directly dropped on a treasure chest, you have discovered</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>155.</span> the
location of the chest, and it will be collected. The sonar device will</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>156.</span> remain
there.</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>157. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>158.</span> When you
collect a chest, all sonar devices will update to locate the next</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>159.</span> closest
sunken treasure chest.</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>160.</span> Press
enter to continue...''')</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>161.</span>    
input()</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>162.</span>    
print()</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>163. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>164. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>165.</span> print('S
O N A R !')</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>166.</span> print()</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>167.</span>
print('Would you like to view the instructions? (yes/no)')</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>168.</span> if
input().lower().startswith('y'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>169.</span>    
showInstructions()</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>170. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>171.</span> while
True:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>172.</span>     <span
class=SourceCodeComment># game setup</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>173.</span>    
sonarDevices = 16</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>174.</span>    
theBoard = getNewBoard()</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>175.</span>    
theChests = getRandomChests(3)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>176.</span>    
drawBoard(theBoard)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>177.</span>    
previousMoves = []</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>178. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>179.</span>    
while sonarDevices &gt; 0:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>180.</span>         <span
class=SourceCodeComment># Start of a turn:</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>181. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>182.</span>         <span
class=SourceCodeComment># show sonar device/chest status</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>183.</span>        
if sonarDevices &gt; 1: extraSsonar = 's'</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>184.</span>        
else: extraSsonar = ''</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>185.</span>        
if len(theChests) &gt; 1: extraSchest = 's'</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>186.</span>        
else: extraSchest = ''</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>187.</span>        
print('You have %s sonar device%s left. %s treasure chest%s remaining.' %
(sonarDevices, extraSsonar, len(theChests), extraSchest))</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>188.</span> </p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>189.</span>        
x, y = enterPlayerMove()</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>190.</span>        
previousMoves.append([x, y]) <span class=SourceCodeComment># we must track all
moves so that sonar devices can be updated.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>191. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>192.</span>        
moveResult = makeMove(theBoard, theChests, x, y)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>193.</span>        
if moveResult == False:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>194.</span>            
continue</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>195.</span>        
else:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>196.</span>            
if moveResult == 'You have found a sunken treasure chest!':</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>197.</span>                
<span class=SourceCodeComment># update all the sonar devices currently on the
map.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>198.</span>                
for x, y in previousMoves:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>199.</span>                    
makeMove(theBoard, theChests, x, y)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>200.</span>            
drawBoard(theBoard)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>201.</span>            
print(moveResult)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>202. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>203.</span>        
if len(theChests) == 0:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>204.</span>            
print('You have found all the sunken treasure chests! Congratulations and good
game!')</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>205.</span>            
break</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>206. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>207.</span>        
sonarDevices -= 1</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>208. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>209.</span>     if
sonarDevices == 0:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>210.</span>        
print('We\'ve run out of sonar devices! Now we have to turn the ship around and
head')</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>211.</span>        
print('for home with treasure chests still out there! Game over.')</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>212.</span>        
print('    The remaining chests were here:')</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>213.</span>        
for x, y in theChests:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>214.</span>            
print('    %s, %s' % (x, y))</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>215. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>216.</span>     if
not playAgain():</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>217.</span>        
sys.exit()</p>

</div>

<h2><a name="_Toc405145141">Designing the Program</a></h2>

<p class=Body>Before trying to understand the source code, play the game a few
times first to understand what is going on. The Sonar game uses lists of lists
and other such complicated variables, called <span class=Definition>data
structures</span>. Data structures are variables that store arrangements of
values to represent something. For example, in the Tic Tac Toe chapter, a Tic
Tac Toe board data structure was a list of strings. The string represented an
X, O, or empty space and the index of the string in the list represented the
space on the board. The Sonar game will have similar data structures for the
locations of treasure chests and sonar devices.</p>

<p class=Non-TOCHeading3>How the Code Works</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>  1.</span> <span
class=SourceCodeComment># Sonar</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  2. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  3.</span> import
random</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>  4.</span> import sys</p>

</div>

<p class=Body>Lines 3 and 4 import modules <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>random</span></span> and <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>sys</span></span>.
The <span class=Literal><span style='font-size:9.0pt;line-height:115%'>sys</span></span>
module contains the <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>exit()</span></span> function, which causes the program to
terminate immediately. This function is used later in the program.</p>

<p class=Non-TOCHeading3>Drawing the Game Board</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCode><span class=SourceLineNumber>  6.</span> def
drawBoard(board):</p>

</div>

<p class=Body>The Sonar game’s board is an ASCII art ocean with X- and Y-axis
coordinates around it. The back tick (`) and tilde (~) characters are located
next to the 1 key on your keyboard will be used for the ocean waves. It looks
like this:</p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt'>

<p class=SampleRunCxSpFirst>             1         2         3        
4         5</p>

<p class=SampleRunCxSpMiddle>  
012345678901234567890123456789012345678901234567890123456789</p>

<p class=SampleRunCxSpMiddle> 0
~~~`~``~~~``~~~~``~`~`~`~`~~`~~~`~~`~``````~~`~``~`~~```~`~` 0</p>

<p class=SampleRunCxSpMiddle> 1
`~`~````~~``~`~```~```~```~`~~~``~~`~~~``````~`~``~~``~~`~~` 1</p>

<p class=SampleRunCxSpMiddle> 2
```~~~~`~`~~```~~~``~````~~`~`~~`~`~`~```~~`~``~~`~`~~~~~~`~ 2</p>

<p class=SampleRunCxSpMiddle> 3
~~~~`~~~``~```~``~~`~`~~`~`~~``~````~`~````~```~`~`~`~`````~ 3</p>

<p class=SampleRunCxSpMiddle> 4
~```~~~~~`~~````~~~~```~~~`~`~`~````~`~~`~`~~``~~`~``~`~``~~ 4</p>

<p class=SampleRunCxSpMiddle> 5
`~```~`~`~~`~~~```~~``~``````~~``~`~`~~~~`~~``~~~~~~`~```~~` 5</p>

<p class=SampleRunCxSpMiddle> 6
``~~`~~`~``~`````~````~~``~`~~~~`~~```~~~``~`~`~~``~~~```~~~ 6</p>

<p class=SampleRunCxSpMiddle> 7
``~``~~~~~~```~`~```~~~``~`~``~`~~~~~~```````~~~`~~`~~`~~`~~ 7</p>

<p class=SampleRunCxSpMiddle> 8 ~~`~`~~```~``~~``~~~``~~`~`~~`~`~```~```~~~```~~~~~~`~`~~~~`
8</p>

<p class=SampleRunCxSpMiddle> 9
```~``~`~~~`~~```~``~``~~~```~````~```~`~~`~~~~~`~``~~~~~``` 9</p>

<p class=SampleRunCxSpMiddle>10
`~~~~```~`~````~`~`~~``~`~~~~`~``~``~```~~```````~`~``~````` 10</p>

<p class=SampleRunCxSpMiddle>11
~~`~`~~`~``~`~~~````````````````~~`````~`~~``~`~~~~`~~~`~~`~ 11</p>

<p class=SampleRunCxSpMiddle>12 ~~`~~~~```~~~`````~~``~`~`~~``````~`~~``~```````~~``~~~`~~`~
12</p>

<p class=SampleRunCxSpMiddle>13
`~``````~~``~`~~~```~~~~```~~`~`~~~`~```````~~`~```~``~`~~~~ 13</p>

<p class=SampleRunCxSpMiddle>14
~~~``~```~`````~~`~`~``~~`~``~`~~`~`~``~`~``~~``~`~``~```~~~ 14</p>

<p class=SampleRunCxSpMiddle>  
012345678901234567890123456789012345678901234567890123456789</p>

<p class=SampleRunCxSpLast>             1         2         3         4        
5</p>

</div>

<p class=Body>The drawing in the <span class=Literal><span style='font-size:
9.0pt;line-height:115%'>drawBoard()</span></span> function has four steps.</p>

<p class=Body style='margin-left:.5in;text-indent:-.25in'><span
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>First, create a string variable of the line with 1, 2, 3, 4, and
5 spaced out with wide gaps (to mark the coordinates for 10, 20, 30, 40, and 50
on the X-axis). </p>

<p class=Body style='margin-left:.5in;text-indent:-.25in'><span
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Second, use that string to display the X-axis coordinates along
the top of the screen. </p>

<p class=Body style='margin-left:.5in;text-indent:-.25in'><span
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Third, print each row of the ocean along with the Y-axis
coordinates on both sides of the screen. </p>

<p class=Body style='margin-left:.5in;text-indent:-.25in'><span
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Fourth, print the X-axis again at the bottom. Coordinates on all
sides makes it easier to see coordinates for where to place a sonar device.</p>

<p class=Non-TOCHeading3>Drawing the X-Coordinates Along the Top</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>  7.</span>     <span
class=SourceCodeComment># Draw the board data structure.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  8.</span> </p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  9.</span>    
hline = '    ' <span class=SourceCodeComment># initial space for the numbers
down the left side of the board</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 10.</span>     for
i in range(1, 6):</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber> 11.</span>        
hline += (' ' * 9) + str(i)</p>

</div>

<p class=Body>Look again at the top part of the board in Figure 13-3.  It has +
plus signs instead of blank spaces so you can count the blank spaces easier:</p>

<p class=MsoNormal align=center style='text-align:center'><img width=660
height=120 id="Picture 38" src="chapter13_files/image004.webp"
alt="Description: C:\book1svn\4thed\images\13-3.webp"></p>

<p class=MsoCaption>Figure 13-3: The spacing used for printing the top of the
game board.</p>

<p class=Body>The numbers on the first line which mark the tens position all
have nine spaces between them, and there are thirteen spaces in front of the 1.
Lines 9 to 11 create this string with this line and store it in a variable
named <span class=Literal><span style='font-size:9.0pt;line-height:115%'>hline</span></span>.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber> 13.</span>     <span
class=SourceCodeComment># print the numbers across the top</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 14.</span>    
print(hline)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 15.</span>    
print('   ' + ('0123456789' * 6))</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber> 16.</span>    
print()</p>

</div>

<p class=Body>To print the numbers across the top of the sonar board, first
print the contents of the <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>hline</span></span> variable. Then on the next line, print
three spaces (so that this row lines up correctly), and then print the string <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>'012345678901234567890123456789012345678901234567890123456789'</span></span>.
But as a shortcut you can use <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>('0123456789' * 6)</span></span>, which evaluates to the same
string.</p>

<p class=Non-TOCHeading3>Drawing the Rows of the Ocean</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber> 18.</span>     <span
class=SourceCodeComment># print each of the 15 rows</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 19.</span>     for
i in range(15):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 20.</span>         <span
class=SourceCodeComment># single-digit numbers need to be padded with an extra
space</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 21.</span>        
if i &lt; 10:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 22.</span>            
extraSpace = ' '</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 23.</span>        
else:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 24.</span>            
extraSpace = ''</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber> 25.</span>        
print('%s%s %s %s' % (extraSpace, i, getRow(board, i), i))</p>

</div>

<p class=Body>Lines 19 to 25 print each row of ocean waves, including the
numbers down the side to label the Y-axis. The <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>for</span></span> loop prints rows 0
through 14, along with the row numbers on either side of the board.</p>

<p class=Body>There’s a small problem. Numbers with only one digit (like 0, 1,
2, and so on) only take up one space when printed, but numbers with two digits
(like 10, 11, and 12) take up two spaces. The rows won’t line up if the
coordinates have different sizes. It will look like this:</p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt'>

<p class=SampleRunCxSpFirst>8
~~`~`~~```~``~~``~~~``~~`~`~~`~`~```~```~~~```~~~~~~`~`~~~~` 8</p>

<p class=SampleRunCxSpMiddle>9
```~``~`~~~`~~```~``~``~~~```~````~```~`~~`~~~~~`~``~~~~~``` 9</p>

<p class=SampleRunCxSpMiddle>10
`~~~~```~`~````~`~`~~``~`~~~~`~``~``~```~~```````~`~``~````` 10</p>

<p class=SampleRunCxSpLast>11 ~~`~`~~`~``~`~~~````````````````~~`````~`~~``~`~~~~`~~~`~~`~
11</p>

</div>

<p class=Body>The solution is easy. Add a space only in front of all the
single-digit numbers. Lines 21 to 24 set the variable <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>extraSpace</span></span> to either a
space or an empty string. The <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>extraSpace</span></span> variable is always printed, but only
has a space character in it for single-digit row numbers. Otherwise, it is the
empty string. This way, all of the rows will line up when you print them.</p>

<p class=Body>The <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>getRow()</span></span> function takes a row number and returns a string
representing that row’s ocean waves. Its two parameters are the board data
structure stored in the <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>board</span></span> variable and a row number. Let’s look at
this function next.</p>

<p class=Non-TOCHeading3>Drawing the X-Coordinates Along the Bottom</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber> 27.</span>     <span
class=SourceCodeComment># print the numbers across the bottom</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 28.</span>    
print()</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 29.</span>    
print('   ' + ('0123456789' * 6))</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber> 30.</span>    
print(hline)</p>

</div>

<p class=Body>Lines 27 to 30 are similar to lines 13 to 16. They print the
X-axis coordinates at the bottom of the screen.</p>

<p class=Non-TOCHeading3>Getting the State of a Row in the Ocean</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber> 33.</span> def
getRow(board, row):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 34.</span>     <span
class=SourceCodeComment># Return a string from the board data structure at a
certain row.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 35.</span>    
boardRow = ''</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 36.</span>     for
i in range(60):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 37.</span>        
boardRow += board[i][row]</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber> 38.</span>     return
boardRow</p>

</div>

<p class=Body>While the <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>board</span></span> parameter is a data structure for the
entire ocean’s waves, the <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>getRow()</span></span> function creates a string for a single
row.</p>

<p class=Body>First set <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>boardRow</span></span> to the blank string. The Y-axis
coordinate is passed as the <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>row</span></span> parameter. The string is made by
concatenating <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>board[0][row]</span></span>, <span class=Literal><span style='font-size:
9.0pt;line-height:115%'>board[1][row]</span></span>, <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>board[2][row]</span></span>, and so on
up to <span class=Literal><span style='font-size:9.0pt;line-height:115%'>board[59][row]</span></span>.
This is because the row contains 60 characters, from index <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>0</span></span> to index <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>59</span></span>.</p>

<p class=Body>The <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>for</span></span> loop on line 36 iterates over integers <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>0</span></span> to
<span class=Literal><span style='font-size:9.0pt;line-height:115%'>59</span></span>.
On each iteration, the next character in the board data structure is copied on
to the end of <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>boardRow</span></span>. By the time the loop is done, <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>boardRow</span></span>
has the complete row’s ASCII art waves and is returned.</p>

<p class=Non-TOCHeading3>Creating a New Game Board</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber> 40.</span> def
getNewBoard():</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 41.</span>     <span
class=SourceCodeComment># Create a new 60x15 board data structure.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 42.</span>    
board = []</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 43.</span>     for
x in range(60): <span class=SourceCodeComment># the main list is a list of 60
lists</span></p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber> 44.</span>        
board.append([])</p>

</div>

<p class=Body>A new <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>board</span></span> data structure is needed at the start of
each new game. The <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>board</span></span> data structure is a list of lists of strings. The
first list represents the X coordinate. Since the game’s board is 60 characters
across, this first list needs to contain 60 lists. Create a <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>for</span></span>
loop that will append 60 blank lists to it.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber> 45.</span>        
for y in range(15): <span class=SourceCodeComment># each list in the main list
has 15 single-character strings</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 46.</span>            
<span class=SourceCodeComment># use different characters for the ocean to make
it more readable.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 47.</span>            
if random.randint(0, 1) == 0:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 48.</span>                
board[x].append('~')</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 49.</span>            
else:</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber> 50.</span>                
board[x].append('`')</p>

</div>

<p class=Body>But <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>board</span></span> is more than just a list of 60 blank lists. Each of
the 60 lists represents an X coordinate of the game board. There are 15 rows in
the board, so each of these 60 lists must have 15 characters in them. Line 45
is another <span class=Literal><span style='font-size:9.0pt;line-height:115%'>for</span></span>
loop to add 15 single-character strings that represent the ocean.</p>

<p class=Body>The “ocean” will be a bunch of randomly chosen <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>'~' </span></span>and
<span class=Literal><span style='font-size:9.0pt;line-height:115%'>'`'</span></span>
strings. If the return value of <span class=Literal><span style='font-size:
9.0pt;line-height:115%'>random.randint()</span></span> is <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>0</span></span>, add the <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>'~'</span></span>
string. Otherwise add the <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>'`'</span></span> string. This will give the ocean a random,
choppy look to it.</p>

<p class=Body>Remember that the <span class=Literal><span style='font-size:
9.0pt;line-height:115%'>board</span></span> variable is a list of 60 lists,
each list having 15 strings. That means to get the string at coordinate 26, 12,
you would access <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>board[26][12]</span></span>, and not <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>board[12][26]</span></span>. The X
coordinate is first, then the Y coordinate.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCode><span class=SourceLineNumber> 51.</span>     return board</p>

</div>

<p class=Body>Finally, the function returns the value in the <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>board</span></span>
variable.</p>

<p class=Non-TOCHeading3>Creating the Random Treasure Chests</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber> 53.</span> def
getRandomChests(numChests):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 54.</span>     <span
class=SourceCodeComment># Create a list of chest data structures (two-item
lists of x, y int coordinates)</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 55.</span>    
chests = []</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 56.</span>     for
i in range(numChests):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 57.</span>        
chests.append([random.randint(0, 59), random.randint(0, 14)])</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber> 58.</span>     return
chests</p>

</div>

<p class=Body>The game also randomly decides where the hidden treasure chests
are. The treasure chests are represented as a list of lists of two integers.
These two integers will be the X and Y coordinates of a single chest.</p>

<p class=Body>For example, if the chest data structure was <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>[[2, 2], [2, 4], [10, 0]]</span></span>,
then this would mean there are three treasure chests, one at 2, 2, another
chest at 2, 4, and a third one at 10, 0.</p>

<p class=Body>The <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>numChests</span></span> parameter tells the function how many treasure
chests to generate. Line 56’s <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>for</span></span> loop will iterate <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>numChests</span></span> number of
times, and on each iteration line 57 appends a list of two random integers. The
X coordinate can be anywhere from 0 to 59, and the Y coordinate can be from
anywhere between 0 and 14. The expression <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>[random.randint(0, 59),
random.randint(0, 14)]</span></span> that is passed to the append method will
evaluate to a list value like <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>[2, 2]</span></span> or <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>[2, 4]</span></span> or <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>[10, 0]</span></span>.
This list value is appended to <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>chests</span></span>.</p>

<p class=Non-TOCHeading3>Determining if a Move is Valid</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber> 60.</span> def
isValidMove(x, y):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 61.</span>     <span
class=SourceCodeComment># Return True if the coordinates are on the board,
otherwise False.</span></p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber> 62.</span>     return
x &gt;= 0 and x &lt;= 59 and y &gt;= 0 and y &lt;= 14</p>

</div>

<p class=Body>When the player types in X and Y coordinates of where they want
to drop a sonar device, they may not type invalid coordinates. The X coordinate
must be between 0 and 59 and the Y coordinate must be between 0 and 14.</p>

<p class=Body>The <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>isValidMove()</span></span> function uses a simple expression that uses <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>and</span></span>
operators to ensure that each part of the condition is <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>True</span></span>. If even one part
is <span class=Literal><span style='font-size:9.0pt;line-height:115%'>False</span></span>,
then the entire expression evaluates to <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>False</span></span>. This function
returns this Boolean value.</p>

<p class=Non-TOCHeading3>Placing a Move on the Board</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber> 64.</span> def
makeMove(board, chests, x, y):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 65.</span>     <span
class=SourceCodeComment># Change the board data structure with a sonar device
character. Remove treasure chests</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 66.</span>     <span
class=SourceCodeComment># from the chests list as they are found. Return False
if this is an invalid move.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 67.</span>     <span
class=SourceCodeComment># Otherwise, return the string of the result of this
move.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 68.</span>     if
not isValidMove(x, y):</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber> 69.</span>        
return False</p>

</div>

<p class=Body>In the Sonar game, the game board is updated to display a number
for each sonar device dropped to show how far away the closest treasure chest
is. So when the player makes a move by giving the program an X and Y
coordinate, the board changes based on the positions of the treasure chests. </p>

<p class=Body>The <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>makeMove()</span></span> function takes four parameters: the game board
data structure, the treasure chests data structure, and the X and Y
coordinates. Line 69 returns <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>False</span></span> if the X and Y coordinates if it was passed
do not exist on the game board. If <span class=Literal><span style='font-size:
9.0pt;line-height:115%'>isValidMove()</span></span> returns <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>False</span></span>,
then <span class=Literal><span style='font-size:9.0pt;line-height:115%'>makeMove()</span></span>
will itself return <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>False</span></span>.</p>

<p class=Body>Otherwise, <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>makeMove()</span></span> will return a string value
describing what happened in response to the move: </p>

<p class=Body style='margin-left:.5in;text-indent:-.25in'><span
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>If the coordinates land directly on the treasure, <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>makeMove()</span></span>
returns <span class=Literal><span style='font-size:9.0pt;line-height:115%'>'You
have found a sunken treasure chest!'</span></span>. </p>

<p class=Body style='margin-left:.5in;text-indent:-.25in'><span
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>If the coordinates are within a distance of 9 or less, <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>makeMove()</span></span>
returns <span class=Literal><span style='font-size:9.0pt;line-height:115%'>'Treasure
detected at a distance of %s from the sonar device.'</span></span> (where <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>%s</span></span>
is replaced with the integer distance). </p>

<p class=Body style='margin-left:.5in;text-indent:-.25in'><span
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Otherwise, <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>makeMove()</span></span> will return <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>'Sonar did not detect anything. All
treasure chests out of range.'</span></span>.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber> 71.</span>    
smallestDistance = 100 <span class=SourceCodeComment># any chest will be closer
than 100.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 72.</span>     for
cx, cy in chests:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 73.</span>        
if abs(cx - x) &gt; abs(cy - y):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 74.</span>            
distance = abs(cx - x)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 75.</span>        
else:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 76.</span>            
distance = abs(cy - y)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 77.</span> </p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 78.</span>        
if distance &lt; smallestDistance: <span class=SourceCodeComment># we want the
closest treasure chest.</span></p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber> 79.</span>            
smallestDistance = distance</p>

</div>

<p class=Body>Given the coordinates of where the player wants to drop the sonar
device and a list of XY coordinates for the treasure chests, you’ll need an
algorithm to find out which treasure chest is closest.</p>

<h2><a name="_Toc405145142">An Algorithm for Finding the Closest Treasure Chest</a></h2>

<p class=Body>The <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>x</span></span> and <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>y</span></span> parameters are integers (say, <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>3</span></span>
and <span class=Literal><span style='font-size:9.0pt;line-height:115%'>2</span></span>),
and together they represent the location on the game board where the player
guessed. The <span class=Literal><span style='font-size:9.0pt;line-height:115%'>chests</span></span>
variable will have a value such as <span class=Literal><span style='font-size:
9.0pt;line-height:115%'>[[5, 0], [0, 2], [4, 2]]</span></span>. That value
represents the locations of three treasure chests. You can visualize it as the
picture in Figure 13-3. The distances form “rings” around the sonar device
located at 3, 2 as in Figure 13-4.</p>

<p class=MsoNormal align=center style='text-align:center'><img width=277
height=286 id="Picture 71" src="chapter13_files/image005.webp"></p>

<p class=MsoCaption>Figure 13-3: The treasure chests that <span class=Literal><span
style='font-size:9.0pt'>[[5, 0], [0, 2], [4, 2]]</span></span> represents.</p>

<p class=MsoNormal align=center style='text-align:center'><img width=281
height=290 id="Picture 74" src="chapter13_files/image006.webp"></p>

<p class=MsoCaption>Figure 13-4: The board marked with distances from the 3, 2
position.</p>

<p class=Body>But how do you translate this into code for the game? You need a
way to represent the square ring distance as an expression. Notice that the
distance from an XY coordinate is always the larger of two values: the absolute
value of the difference of the two X coordinates and the absolute value of the
difference of the two Y coordinates.</p>

<p class=Body>That means you should subtract the sonar device’s X coordinate
and a treasure chest’s X coordinate, and then take the absolute value of this
number. Do the same for the sonar device’s Y coordinate and a treasure chest’s
Y coordinate. The <em>larger</em> of these two values is the distance.</p>

<p class=Body>For example, consider the sonar’s X and Y coordinates are 3 and
2, like in Figure 13-4. The first treasure chest’s X and Y coordinates (that
is, first in the list <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>[[5, 0], [0, 2], [4, 2]]</span></span>) are <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>5</span></span>
and <span class=Literal><span style='font-size:9.0pt;line-height:115%'>0</span></span>.</p>

<p class=Body style='margin-left:.5in;text-indent:-.25in'>1.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>For
the X coordinates, <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>3 - 5</span></span> evaluates to <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>-2</span></span>, and the absolute
value of <span class=Literal><span style='font-size:9.0pt;line-height:115%'>-2</span></span>
is <span class=Literal><span style='font-size:9.0pt;line-height:115%'>2</span></span>.</p>

<p class=Body style='margin-left:.5in;text-indent:-.25in'>2.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>For
the Y coordinates, <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>2 - 1</span></span> evaluates to <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>1</span></span>, and the absolute
value of <span class=Literal><span style='font-size:9.0pt;line-height:115%'>1</span></span>
is <span class=Literal><span style='font-size:9.0pt;line-height:115%'>1</span></span>.</p>

<p class=Body style='margin-left:.5in;text-indent:-.25in'>3.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span>Comparing
the two absolute values <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>2</span></span> and <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>1</span></span>, the larger value is <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>2</span></span>,
so <span class=Literal><span style='font-size:9.0pt;line-height:115%'>2</span></span>
should be the distance between the sonar device and the treasure chest at
coordinates 5, 1. </p>

<p class=Body>We can look at the board in Figure 13-4 and see that this
algorithm works, because the treasure chest at 5, 1 is in the sonar device’s
2nd ring. Let’s quickly compare the other two chests to see if the distances
work out correctly also.</p>

<p class=Body>Let’s find the distance from the sonar device at 3, 2 and the
treasure chest at 0, 2:</p>

<p class=Body style='margin-left:.5in;text-indent:-.25in'>1.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
class=Literal><span style='font-size:9.0pt;line-height:115%'>abs(3 - 0)</span></span>
evaluates to <span class=Literal><span style='font-size:9.0pt;line-height:115%'>3</span></span>.
</p>

<p class=Body style='margin-left:.5in;text-indent:-.25in'>2.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
class=Literal><span style='font-size:9.0pt;line-height:115%'>abs(2 - 2)</span></span>
evaluates to <span class=Literal><span style='font-size:9.0pt;line-height:115%'>0</span></span>.
</p>

<p class=Body style='margin-left:.5in;text-indent:-.25in'>3.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
class=Literal><span style='font-size:9.0pt;line-height:115%'>3</span></span> is
larger than <span class=Literal><span style='font-size:9.0pt;line-height:115%'>0</span></span>,
so the distance from the sonar device at 3, 2 and the treasure chest at 0, 2 is
<span class=Literal><span style='font-size:9.0pt;line-height:115%'>3</span></span>.</p>

<p class=Body>Let’s find the distance from the sonar device at 3, 2 and the
last treasure chest at 4, 2:</p>

<p class=Body style='margin-left:.5in;text-indent:-.25in'>1.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
class=Literal><span style='font-size:9.0pt;line-height:115%'>abs(3 - 4)</span></span>
evaluates to <span class=Literal><span style='font-size:9.0pt;line-height:115%'>1</span></span>.
</p>

<p class=Body style='margin-left:.5in;text-indent:-.25in'>2.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
class=Literal><span style='font-size:9.0pt;line-height:115%'>abs(2 - 2)</span></span>
evaluates to <span class=Literal><span style='font-size:9.0pt;line-height:115%'>0</span></span>.
</p>

<p class=Body style='margin-left:.5in;text-indent:-.25in'>3.<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><span
class=Literal><span style='font-size:9.0pt;line-height:115%'>1</span></span> is
larger than <span class=Literal><span style='font-size:9.0pt;line-height:115%'>0</span></span>,
so the distance is <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>1</span></span>.</p>

<p class=Body>Looking at Figure 13-4 you can see all three distances worked out
correctly. It seems this algorithm works. The distances from the sonar device
to the three sunken treasure chests are <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>2</span></span>, <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>3</span></span>, and <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>1</span></span>.
On each guess, you want to know the distance from the sonar device to the
closest of the three treasure chest distances. To do this, use a variable
called <span class=Literal><span style='font-size:9.0pt;line-height:115%'>smallestDistance</span></span>.
Let’s look at the code again:</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber> 71.</span>    
smallestDistance = 100 <span class=SourceCodeComment># any chest will be closer
than 100.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 72.</span>     for
cx, cy in chests:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 73.</span>        
if abs(cx - x) &gt; abs(cy - y):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 74.</span>            
distance = abs(cx - x)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 75.</span>        
else:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 76.</span>            
distance = abs(cy - y)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 77.</span> </p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 78.</span>        
if distance &lt; smallestDistance: <span class=SourceCodeComment># we want the
closest treasure chest.</span></p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber> 79.</span>            
smallestDistance = distance</p>

</div>

<p class=Body>Line 72 uses the multiple assignment trick in a <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>for</span></span>
loop. For example, the assignment statement <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>spam, eggs = [5, 10]</span></span>
will assign <span class=Literal><span style='font-size:9.0pt;line-height:115%'>5</span></span>
to <span class=Literal><span style='font-size:9.0pt;line-height:115%'>spam</span></span>
and <span class=Literal><span style='font-size:9.0pt;line-height:115%'>10</span></span>
to <span class=Literal><span style='font-size:9.0pt;line-height:115%'>eggs</span></span>.</p>

<p class=Body>Because <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>chests</span></span> is a list where each item in the list is
itself a list of two integers, the first of these integers is assigned to <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>cx</span></span>
and the second integer is assigned to <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>cy</span></span>. So if <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>chests</span></span>
has the value <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>[[5, 0], [0, 2], [4, 2]]</span></span>, <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>cx</span></span> will have the value <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>5</span></span>
and <span class=Literal><span style='font-size:9.0pt;line-height:115%'>cy</span></span>
will have the value <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>0</span></span> on the first iteration through the loop.</p>

<p class=Body>Line 73 determines which is larger: the absolute value of the
difference of the X coordinates, or the absolute value of the difference of the
Y coordinates. <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>abs(cx - x) &gt; abs(cy - y)</span></span> seems like much shorter way to
say that, doesn’t it? Lines 73 to 76 assign the larger of the values to the <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>distance</span></span>
variable.</p>

<p class=Body>So on each iteration of the <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>for</span></span> loop, the <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>distance</span></span>
variable holds the treasure chest’s distance from the sonar device. But you
want the smallest distance of all the treasure chests. This is where the <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>smallestDistance</span></span>
variable comes in. Whenever the <span class=Literal><span style='font-size:
9.0pt;line-height:115%'>distance</span></span> variable is smaller than <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>smallestDistance</span></span>,
then the value in <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>distance</span></span> becomes the new value of <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>smallestDistance</span></span>.</p>

<p class=Body>Give <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>smallestDistance</span></span> the impossibly high value of <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>100</span></span>
at the beginning of the loop so that at least one of the treasure chests you
found will be put into <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>smallestDistance</span></span>. By the time the <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>for</span></span>
loop has finished, you know that <span class=Literal><span style='font-size:
9.0pt;line-height:115%'>smallestDistanc</span></span>e holds the shortest
distance between the sonar device and all of the treasure chests in the game.</p>

<h2><a name="_Toc405145143">The </a><span class=Literal><span style='font-size:
9.0pt;line-height:115%'>remove()</span></span> List Method</h2>

<p class=Body>The <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>remove()</span></span> list method will remove the first occurrence of a
value matching the passed in argument. For example, try entering the following
into the interactive shell:</p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt'>

<p class=CodeExampleCxSpFirst style='border:none;padding:0in'>&gt;&gt;&gt; x =
[42, 5, 10, 42, 15, 42]</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>&gt;&gt;&gt;
x.remove(10)</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>&gt;&gt;&gt; x</p>

<p class=CodeExampleCxSpLast style='border:none;padding:0in'>[42, 5, 42, 15,
42]</p>

</div>

<p class=Body>The <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>10</span></span> value has been removed from the <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>x</span></span> list. The <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>remove()</span></span>
method removes the first occurrence of the value you pass it, and only the
first. For example, type the following into the interactive shell:</p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt'>

<p class=CodeExampleCxSpFirst style='border:none;padding:0in'>&gt;&gt;&gt; x =
[42, 5, 10, 42, 15, 42]</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>&gt;&gt;&gt;
x.remove(42)</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>&gt;&gt;&gt; x</p>

<p class=CodeExampleCxSpLast style='border:none;padding:0in'>[5, 10, 42, 15,
42]</p>

</div>

<p class=Body>Notice that only the first <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>42</span></span> value was removed,
but the second and third ones are still there. The <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>remove()</span></span> method will
cause an error if you try to remove a value that isn’t in the list:</p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt'>

<p class=CodeExampleCxSpFirst style='border:none;padding:0in'>&gt;&gt;&gt; x =
[5, 42]</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>&gt;&gt;&gt;
x.remove(10)</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>Traceback (most
recent call last):</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>  File
&quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;</p>

<p class=CodeExampleCxSpLast style='border:none;padding:0in'>ValueError:
list.remove(x): x not in list</p>

</div>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber> 81.</span>     if
smallestDistance == 0:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 82.</span>         <span
class=SourceCodeComment># xy is directly on a treasure chest!</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 83.</span>        
chests.remove([x, y])</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber> 84.</span>        
return 'You have found a sunken treasure chest!'</p>

</div>

<p class=MsoNormal>The only time that <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>smallestDistance</span></span> is
equal to <span class=Literal><span style='font-size:9.0pt;line-height:115%'>0</span></span>
is when the sonar device’s XY coordinates are the same as a treasure chest’s XY
coordinates. This means the player has correctly guessed the location of a
treasure chest. Remove this chest’s two-integer list from the <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>chests</span></span>
data structure with the <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>remove()</span></span> list method. Then the function returns
<span class=Literal><span style='font-size:9.0pt;line-height:115%'>'You have
found a sunken treasure chest!'</span></span>.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber> 85.</span>     else:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 86.</span>        
if smallestDistance &lt; 10:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 87.</span>            
board[x][y] = str(smallestDistance)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 88.</span>            
return 'Treasure detected at a distance of %s from the sonar device.' %
(smallestDistance)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 89.</span>        
else:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 90.</span>            
board[x][y] = 'O'</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber> 91.</span>            
return 'Sonar did not detect anything. All treasure chests out of range.'</p>

</div>

<p class=Body>The else-block starting on line 86 executes if <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>smallestDistance</span></span>
was not <span class=Literal><span style='font-size:9.0pt;line-height:115%'>0</span></span>,
which means the player didn’t guess an exact location of a treasure chest. If
the sonar device’s distance was less than 10, line 87 marks the board with the
string version of <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>smallestDistance</span></span>. If not, mark the board with a <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>'0'</span></span>.</p>

<p class=Non-TOCHeading3>Getting the Player’s Move</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber> 94.</span> def
enterPlayerMove():</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 95.</span>     <span
class=SourceCodeComment># Let the player type in their move. Return a two-item
list of int xy coordinates.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 96.</span>    
print('Where do you want to drop the next sonar device? (0-59 0-14) (or type
quit)')</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 97.</span>    
while True:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 98.</span>        
move = input()</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 99.</span>        
if move.lower() == 'quit':</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>100.</span>            
print('Thanks for playing!')</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>101.</span>           
 sys.exit()</p>

</div>

<p class=Body>The <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>enterPlayerMove()</span></span> function collects the XY coordinates of
the player’s next move. The <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>while</span></span> loop will keep asking the player for
their next move until they enter a valid move. The player can also type in <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>'quit'</span></span>
to quit the game. In that case, line 101 calls the <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>sys.exit()</span></span> function to
terminate the program immediately.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>103.</span>        
move = move.split()</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>104.</span>        
if len(move) == 2 and move[0].isdigit() and move[1].isdigit() and
isValidMove(int(move[0]), int(move[1])):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>105.</span>            
return [int(move[0]), int(move[1])]</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>106.</span>        
print('Enter a number from 0 to 59, a space, then a number from 0 to 14.')</p>

</div>

<p class=Body>Assuming the player has not typed in <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>'quit'</span></span>, the code must
ensure it is a valid move: two integers separated by a space. Line 103 calls
the <span class=Literal><span style='font-size:9.0pt;line-height:115%'>split()</span></span>
method on <span class=Literal><span style='font-size:9.0pt;line-height:115%'>move</span></span>
as the new value of <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>move</span></span>.</p>

<p class=Body>If the player typed in a value like <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>'1 2 3'</span></span>, then the list
returned by <span class=Literal><span style='font-size:9.0pt;line-height:115%'>split()</span></span>
would be <span class=Literal><span style='font-size:9.0pt;line-height:115%'>['1',
'2', '3']</span></span>. In that case, the expression <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>len(move) == 2</span></span> would be <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>False</span></span>
and the entire expression evaluates immediately to <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>False</span></span> . Python doesn’t
check the rest of the expression because of short-circuiting (which was
described in Chapter 10).</p>

<p class=Body>If the list’s length is <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>2</span></span> then the two values
will be at indexes <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>move[0]</span></span> and <span class=Literal><span style='font-size:
9.0pt;line-height:115%'>move[1]</span></span>. To check if those values are
numeric digits (like <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>'2'</span></span> or <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>'17'</span></span>), you could use a
function like <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>isOnlyDigits()</span></span> from Chapter 11. But Python already has a
function that does this.</p>

<p class=Body>The string method <span class=Literal><span style='font-size:
9.0pt;line-height:115%'>isdigit()</span></span> returns <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>True</span></span> if the string
consists solely of numbers. Otherwise it returns <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>False</span></span>. Try entering the
following into the interactive shell:</p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt'>

<p class=CodeExampleCxSpFirst style='border:none;padding:0in'>&gt;&gt;&gt;
'42'.isdigit()</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>True</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>&gt;&gt;&gt;
'forty'.isdigit()</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>False</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>&gt;&gt;&gt;
''.isdigit()</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>False</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>&gt;&gt;&gt;
'hello'.isdigit()</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>False</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>&gt;&gt;&gt; x =
'10'</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>&gt;&gt;&gt;
x.isdigit()</p>

<p class=CodeExampleCxSpLast style='border:none;padding:0in'>True</p>

</div>

<p class=Body>Both <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>move[0].isdigit()</span></span> and <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>move[1].isdigit()</span></span> must
be <span class=Literal><span style='font-size:9.0pt;line-height:115%'>True</span></span>
for the whole condition to be <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>True</span></span>. The final part of line 104’s condition
calls the <span class=Literal><span style='font-size:9.0pt;line-height:115%'>isValidMove()</span></span>
function to check if the XY coordinates exist on the board.</p>

<p class=Body>If the entire condition is <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>True</span></span>, line 105 returns a
two-integer list of the XY coordinates. Otherwise, the execution loops and the
player will be asked to enter coordinates again.</p>

<p class=Non-TOCHeading3>Asking the Player to Play Again</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>109.</span> def
playAgain():</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>110.</span>     <span
class=SourceCodeComment># This function returns True if the player wants to
play again, otherwise it returns False.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>111.</span>    
print('Do you want to play again? (yes or no)')</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>112.</span>     return
input().lower().startswith('y')</p>

</div>

<p class=Body>The <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>playAgain()</span></span> function is similar to the <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>playAgain()</span></span> functions in
previous chapters.</p>

<p class=Non-TOCHeading3>Printing the Game Instructions for the Player</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>115.</span> def showInstructions():</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>116.</span>    
print('''Instructions:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>117.</span> You are
the captain of the Simon, a treasure-hunting ship. Your current mission</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>118.</span> is to
find the three sunken treasure chests that are lurking in the part of the</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>119.</span> ocean
you are in and collect them.</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>120. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>121.</span> To play,
enter the coordinates of the point in the ocean you wish to drop a</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>122.</span> sonar
device. The sonar can find out how far away the closest chest is to it.</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>123.</span> For
example, the d below marks where the device was dropped, and the 2's</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>124.</span>
represent distances of 2 away from the device. The 4's represent</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>125.</span>
distances of 4 away from the device.</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>126. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>127.</span>    
444444444</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>128.</span>    
4       4</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>129.</span>     4
22222 4</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>130.</span>     4
2   2 4</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>131.</span>     4 2
d 2 4</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>132.</span>     4
2   2 4</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>133.</span>     4
22222 4</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>134.</span>    
4       4</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>135.</span>    
444444444</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>136.</span> Press
enter to continue...''')</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>137.</span>    
input()</p>

</div>

<p class=Body>The <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>showInstructions()</span></span> is a couple of <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>print()</span></span> calls that print
multi-line strings. The <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>input()</span></span> function gives the player a chance to
press <span class=Keycap><span style='font-variant:normal !important;
text-transform:uppercase'>enter</span></span> before printing the next string.
This is because the IDLE window can only show so much text at a time.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>139.</span>    
print('''For example, here is a treasure chest (the c) located a distance of 2
away</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>140.</span> from the
sonar device (the d):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>141. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>142.</span>    
22222</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>143.</span>     c  
2</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>144.</span>     2 d
2</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>145.</span>     2  
2</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>146.</span>    
22222</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>147. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>148.</span> The
point where the device was dropped will be marked with a 2.</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>149. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>150.</span> The
treasure chests don’t move around. Sonar devices can detect treasure</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>151.</span> chests
up to a distance of 9. If all chests are out of range, the point</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>152.</span> will be
marked with O</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>153. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>154.</span> If a
device is directly dropped on a treasure chest, you have discovered</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>155.</span> the
location of the chest, and it will be collected. The sonar device will</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>156.</span> remain
there.</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>157. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>158.</span> When you
collect a chest, all sonar devices will update to locate the next</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>159.</span> closest
sunken treasure chest.</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>160.</span> Press
enter to continue...''')</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>161.</span>    
input()</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>162.</span>    
print()</p>

</div>

<p class=Body>After the player presses <span class=Keycap><span
style='font-variant:normal !important;text-transform:uppercase'>enter</span></span>,
the function returns.</p>

<p class=Non-TOCHeading3>The Start of the Game</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>165.</span> print('S
O N A R !')</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>166.</span> print()</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>167.</span>
print('Would you like to view the instructions? (yes/no)')</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>168.</span> if
input().lower().startswith('y'):</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>169.</span>    
showInstructions()</p>

</div>

<p class=Body>The expression <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>input().lower().startswith('y')</span></span> asks the player
if they want to see the instructions, and evaluates to <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>True</span></span> if the player typed
in a string that began with <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>'y'</span></span> or <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>'Y'</span></span>. If so, <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>showInstructions()</span></span>
is called. Otherwise, the game begins.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>171.</span> while
True:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>172.</span>     <span
class=SourceCodeComment># game setup</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>173.</span>    
sonarDevices = 16</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>174.</span>    
theBoard = getNewBoard()</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>175.</span>    
theChests = getRandomChests(3)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>176.</span>    
drawBoard(theBoard)</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>177.</span>    
previousMoves = []</p>

</div>

<p class=Body>Line 171’s <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>while</span></span> loop is the main loop for the program.
Several variables are set up on lines 173 to 177 and are described in Table
13-1.</p>

<p class=Body>&nbsp;</p>

<p class=Body>&nbsp;</p>

<p class=TableListing>Table 13-1: Variables used in the main game loop.</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=174 valign=top style='width:1.45in;border-top:double windowtext 1.5pt;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:none;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=TableHeading style='page-break-after:avoid'>Variable</p>
  </td>
  <td width=624 valign=top style='width:5.2in;border-top:double windowtext 1.5pt;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:none;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=TableHeading style='page-break-after:avoid'>Description</p>
  </td>
 </tr>
 <tr>
  <td width=174 valign=top style='width:1.45in;border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='page-break-after:avoid'><span class=Literal><span
  style='font-size:9.0pt;line-height:115%'>sonarDevices</span></span></p>
  </td>
  <td width=624 valign=top style='width:5.2in;border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='page-break-after:avoid'>The number of sonar devices
  (and turns) the player has left.</p>
  </td>
 </tr>
 <tr>
  <td width=174 valign=top style='width:1.45in;border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='page-break-after:avoid'><span class=Literal><span
  style='font-size:9.0pt;line-height:115%'>theBoard</span></span></p>
  </td>
  <td width=624 valign=top style='width:5.2in;border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='page-break-after:avoid'>The board data structure
  used for this game.</p>
  </td>
 </tr>
 <tr>
  <td width=174 valign=top style='width:1.45in;border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='page-break-after:avoid'><span class=Literal><span
  style='font-size:9.0pt;line-height:115%'>theChests</span></span></p>
  </td>
  <td width=624 valign=top style='width:5.2in;border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='page-break-after:avoid'>The list of chest data
  structures. <span class=Literal><span style='font-size:9.0pt;line-height:
  115%'>getRandomChests()</span></span> will return a list of three treasure
  chests at random places on the board.</p>
  </td>
 </tr>
 <tr>
  <td width=174 valign=top style='width:1.45in;border:none;border-bottom:double windowtext 1.5pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span class=Literal><span style='font-size:9.0pt;
  line-height:115%'>previousMoves</span></span></p>
  </td>
  <td width=624 valign=top style='width:5.2in;border:none;border-bottom:double windowtext 1.5pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>A list of all the XY moves that the player has made in the
  game.</p>
  </td>
 </tr>
</table>

<p class=MsoNormal>&nbsp;</p>

<p class=Non-TOCHeading3>Displaying the Game Status for the Player</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>179.</span>     while
sonarDevices &gt; 0:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>180.</span>         <span
class=SourceCodeComment># Start of a turn:</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>181.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>182.</span>         <span
class=SourceCodeComment># show sonar device/chest status</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>183.</span>        
if sonarDevices &gt; 1: extraSsonar = 's'</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>184.</span>        
else: extraSsonar = ''</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>185.</span>        
if len(theChests) &gt; 1: extraSchest = 's'</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>186.</span>        
else: extraSchest = ''</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>187.</span>        
print('You have %s sonar device%s left. %s treasure chest%s remaining.' %
(sonarDevices, extraSsonar, len(theChests), extraSchest))</p>

</div>

<p class=Body>Line 179’s <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>while</span></span> loop executes as long as the player has
sonar devices remaining. Line 187 prints a message telling the user how many
sonar devices and treasure chests are left. But there’s a small problem. </p>

<p class=Body>If there are two or more sonar devices left, you want to print <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>'2 sonar devices'</span></span>.
But if there’s only one sonar device left, you want to print <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>'1 sonar device'</span></span>
left. You only want the plural form of “devices” if there are multiple sonar
devices. The same goes for <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>'2 treasure chests'</span></span> and <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>'1 treasure chest'</span></span>.</p>

<p class=MsoNormal>Lines 183 through 186 have code after the <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>if</span></span>
and <span class=Literal><span style='font-size:9.0pt;line-height:115%'>else</span></span>
statements' colon. This is perfectly valid Python. Instead of having a block of
code after the statement, you can use the rest of the same line to make your
code more concise.</p>

<p class=Body>The two variables named <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>extraSsonar</span></span> and <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>extraSchest</span></span>
are set to <span class=Literal><span style='font-size:9.0pt;line-height:115%'>'s'</span></span>
(space) if there are multiple sonar devices or treasures chests. Otherwise,
they are blank strings. These variables are used on line 187.</p>

<p class=Non-TOCHeading3>Getting the Player’s Move</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>189.</span>        
x, y = enterPlayerMove()</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>190.</span>        
previousMoves.append([x, y]) <span class=SourceCodeComment># we must track all
moves so that sonar devices can be updated.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>191.</span>        
moveResult = makeMove(theBoard, theChests, x, y)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>192.</span>        
if moveResult == False:</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>193.</span>            
continue</p>

</div>

<p class=Body>Line 189 uses multiple assignment since <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>enterPlayerMove()</span></span>
returns a two-item list. The first item in the returned list is assigned to the
<span class=Literal><span style='font-size:9.0pt;line-height:115%'>x</span></span>
variable. The second is assigned to the <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>y</span></span> variable. </p>

<p class=Body>They are then appended to the end of the <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>previousMoves</span></span> list. This
means <span class=Literal><span style='font-size:9.0pt;line-height:115%'>previousMoves</span></span>
is a list of XY coordinates of each move the player makes in this game. This
list is used later in the program on line 198.</p>

<p class=Body>The <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>x</span></span>, <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>y</span></span>, <span class=Literal><span style='font-size:
9.0pt;line-height:115%'>theBoard</span></span>, and <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>theChests</span></span> variables are
all passed to the <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>makeMove()</span></span> function. This function will make the necessary
modifications to the game board to place a sonar device on the board.</p>

<p class=Body>If <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>makeMove()</span></span> returns the value <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>False</span></span>, then there was a
problem with the <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>x</span></span> and <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>y</span></span> values you passed it. The <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>continue</span></span>
statement will send the execution back to the start of the <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>while</span></span> loop on line 179
to ask the player for XY coordinates again.</p>

<p class=Non-TOCHeading3>Finding a Sunken Treasure Chest</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>195.</span>        
else:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>196.</span>            
if moveResult == 'You have found a sunken treasure chest!':</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>197.</span>                
<span class=SourceCodeComment># update all the sonar devices currently on the
map.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>198.</span>                
for x, y in previousMoves:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>199.</span>                    
makeMove(theBoard, theChests, x, y)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>200.</span>            
drawBoard(theBoard)</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>201.</span>            
print(moveResult)</p>

</div>

<p class=Body>If <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>makeMove()</span></span> didn’t return the value <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>False</span></span>, it would have
returned a string of the results of that move. If this string was <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>'You have found a
sunken treasure chest!'</span></span>, then all the sonar devices on the board
should be updated to detect the <em>next</em> closest treasure chest on the
board. The XY coordinates of all the sonar devices are in <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>previousMoves</span></span>. By
iterating over <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>previousMoves</span></span> on line 198, you can pass all of these XY
coordinates to the <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>makeMove()</span></span> function again to redraw the values on the
board.</p>

<p class=Body>Because the program doesn’t print anything new here, the player
doesn’t realize the program is redoing all of the previous moves. It just
appears that the board updates itself.</p>

<p class=Non-TOCHeading3>Checking if the Player has Won</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>203.</span>        
if len(theChests) == 0:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>204.</span>            
print('You have found all the sunken treasure chests! Congratulations and good
game!')</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>205.</span>            
break</p>

</div>

<p class=Body>Remember that the <span class=Literal><span style='font-size:
9.0pt;line-height:115%'>makeMove()</span></span> function modifies the <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>theChests</span></span>
list you sent it. Because <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>theChests</span></span> is a list, any changes made to it
inside the function will persist after execution returns from the function. <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>makeMove()</span></span>
removes items from <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>theChests</span></span> when treasure chests are found, so eventually (if
the player keeps guessing correctly) all of the treasure chests will have been
removed. Remember, by “treasure chest” we mean the two-item lists of the XY
coordinates inside the <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>theChests</span></span> list.</p>

<p class=Body>When all the treasure chests have been found on the board and
removed from <span class=Literal><span style='font-size:9.0pt;line-height:115%'>theChests</span></span>,
the <span class=Literal><span style='font-size:9.0pt;line-height:115%'>theChests</span></span>
list will have a length of <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>0</span></span>. When that happens, display a congratulations
to the player, and then execute a <span class=Literal><span style='font-size:
9.0pt;line-height:115%'>break</span></span> statement to break out of this <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>while</span></span>
loop. Execution will then move to line 209, the first line after the
while-block.</p>

<p class=Non-TOCHeading3>Checking if the Player has Lost</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCode><span class=SourceLineNumber>207.</span>        
sonarDevices -= 1</p>

</div>

<p class=Body>Line 207 is the last line of the <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>while</span></span> loop that started
on line 179. Decrement the <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>sonarDevices</span></span> variable because the player has
used one. If the player keeps missing the treasure chests, eventually <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>sonarDevices</span></span>
will be reduced to <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>0</span></span>. After this line, execution jumps back up to line 179 so
it can re-evaluate the <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>while</span></span> statement’s condition (which is <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>sonarDevices &gt;
0</span></span>). </p>

<p class=Body>If <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>sonarDevices</span></span> is <span class=Literal><span style='font-size:
9.0pt;line-height:115%'>0</span></span>, then the condition will be <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>False</span></span>
and execution will continue outside the while-block on line 209. But until
then, the condition will remain <span class=Literal><span style='font-size:
9.0pt;line-height:115%'>True</span></span> and the player can keep making
guesses.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>209.</span>     if
sonarDevices == 0:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>210.</span>        
print('We\'ve run out of sonar devices! Now we have to turn the ship around and
head')</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>211.</span>        
print('for home with treasure chests still out there! Game over.')</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>212.</span>        
print('    The remaining chests were here:')</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>213.</span>        
for x, y in theChests:</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>214.</span>            
print('    %s, %s' % (x, y))</p>

</div>

<p class=Body>Line 209 is the first line outside the <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>while</span></span> loop. When the
execution reaches this point the game is over. If <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>sonarDevices</span></span> is <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>0</span></span>,
you know the player ran out of sonar devices before finding all the chests and
lost.</p>

<p class=Body>Lines 210 to 212 will tell the player they’ve lost. The <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>for</span></span>
loop on line 213 will go through the treasure chests remaining in <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>theChests</span></span>
and show their location to the player so that they can know where the treasure
chests had been lurking.</p>

<p class=Non-TOCHeading3>The sys.exit() Function</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>216.</span>     if
not playAgain():</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>217.</span>        
sys.exit()</p>

</div>

<p class=Body>Win or lose, <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>playAgain()</span></span> is called again to let the player
type in whether they want to keep playing or not. If not, then <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>playAgain()</span></span>
returns <span class=Literal><span style='font-size:9.0pt;line-height:115%'>False</span></span>.
The <span class=Literal><span style='font-size:9.0pt;line-height:115%'>not</span></span>
operator on line 216 changes this to <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>True</span></span>, making the <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>if</span></span> statement’s
condition <span class=Literal><span style='font-size:9.0pt;line-height:115%'>True</span></span>
and the <span class=Literal><span style='font-size:9.0pt;line-height:115%'>sys.exit()</span></span>
function is executed. This will cause the program to terminate.</p>

<p class=Body>Otherwise, execution jumps back to the beginning of the <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>while</span></span>
loop on line 171 and a new game begins.</p>

<p class=Non-TOCHeading3>Summary</p>

<p class=Body>Remember how our Tic Tac Toe game numbered the spaces on the Tic
Tac Toe board 1 through 9? This sort of coordinate system might have been okay
for a board with less than ten spaces. But the Sonar board has 900 spaces! The
Cartesian coordinate system we learned in the last chapter really makes all
these spaces manageable, especially when our game needs to find the distance
between two points on the board.</p>

<p class=Body>Locations in games that use a Cartesian coordinate system can be
stored in a list of lists so that the first index is the X-coordinate and the
second index is the Y-coordinate. This make accessing a coordinates look like <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>board[x][y]</span></span>.</p>

<p class=Body>These data structures (such as the ones used for the ocean and
locations of the treasure chests) make it possible to have complicated concepts
represented as data, and your game programs become mostly about modifying these
data structures.</p>

<p class=MsoNormal>In the next chapter, we will be representing letters as
numbers using their ASCII numbers. (This is the same ASCII term we used in
“ASCII art” previously.) By representing text as numbers, we can perform math
operations on them which will encrypt or decrypt secret messages.</p>

</div>

</body>

</html>
