<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=utf-8">
<meta name=Generator content="Microsoft Word 14 (filtered)">
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
	{font-family:Tahoma;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:"Franklin Gothic Demi";
	panose-1:2 11 7 3 2 1 2 2 2 4;}
@font-face
	{font-family:"Lucida Sans Typewriter";
	panose-1:2 11 5 9 3 5 4 3 2 4;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:0in;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
h1
	{mso-style-link:"Heading 1 Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:24.0pt;
	margin-left:0in;
	line-height:115%;
	page-break-after:avoid;
	font-size:36.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";
	font-variant:small-caps;
	font-weight:bold;}
h2
	{mso-style-link:"Heading 2 Char";
	margin-top:10.0pt;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:0in;
	line-height:115%;
	page-break-after:avoid;
	font-size:16.0pt;
	font-family:"Calibri","sans-serif";
	color:#1F497D;
	font-weight:bold;}
h3
	{mso-style-link:"Heading 3 Char";
	margin-top:10.0pt;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:0in;
	line-height:115%;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"Calibri","sans-serif";
	color:#1F497D;
	font-weight:bold;
	font-style:italic;}
p.MsoToc1, li.MsoToc1, div.MsoToc1
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:0in;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.MsoToc2, li.MsoToc2, div.MsoToc2
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:11.0pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.MsoToc3, li.MsoToc3, div.MsoToc3
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:22.0pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.MsoToc4, li.MsoToc4, div.MsoToc4
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:33.0pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoToc5, li.MsoToc5, div.MsoToc5
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:44.0pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoToc6, li.MsoToc6, div.MsoToc6
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:55.0pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoToc7, li.MsoToc7, div.MsoToc7
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:66.0pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoToc8, li.MsoToc8, div.MsoToc8
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:77.0pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoToc9, li.MsoToc9, div.MsoToc9
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:88.0pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoHeader, li.MsoHeader, div.MsoHeader
	{mso-style-link:"Header Char";
	margin:0in;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.MsoFooter, li.MsoFooter, div.MsoFooter
	{mso-style-link:"Footer Char";
	margin:0in;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.MsoCaption, li.MsoCaption, div.MsoCaption
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:0in;
	text-align:center;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoTitle, li.MsoTitle, div.MsoTitle
	{mso-style-link:"Title Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:15.0pt;
	margin-left:0in;
	border:none;
	padding:0in;
	font-size:48.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";
	letter-spacing:.25pt;}
p.MsoTitleCxSpFirst, li.MsoTitleCxSpFirst, div.MsoTitleCxSpFirst
	{mso-style-link:"Title Char";
	margin:0in;
	margin-bottom:.0001pt;
	border:none;
	padding:0in;
	font-size:48.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";
	letter-spacing:.25pt;}
p.MsoTitleCxSpMiddle, li.MsoTitleCxSpMiddle, div.MsoTitleCxSpMiddle
	{mso-style-link:"Title Char";
	margin:0in;
	margin-bottom:.0001pt;
	border:none;
	padding:0in;
	font-size:48.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";
	letter-spacing:.25pt;}
p.MsoTitleCxSpLast, li.MsoTitleCxSpLast, div.MsoTitleCxSpLast
	{mso-style-link:"Title Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:15.0pt;
	margin-left:0in;
	border:none;
	padding:0in;
	font-size:48.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";
	letter-spacing:.25pt;}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;}
p
	{margin-right:0in;
	margin-left:0in;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";}
p.MsoAcetate, li.MsoAcetate, div.MsoAcetate
	{mso-style-link:"Balloon Text Char";
	margin:0in;
	margin-bottom:.0001pt;
	font-size:8.0pt;
	font-family:"Tahoma","sans-serif";}
p.MsoNoSpacing, li.MsoNoSpacing, div.MsoNoSpacing
	{mso-style-link:"No Spacing Char";
	margin:0in;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.MsoListParagraph, li.MsoListParagraph, div.MsoListParagraph
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:.5in;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.MsoListParagraphCxSpFirst, li.MsoListParagraphCxSpFirst, div.MsoListParagraphCxSpFirst
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.5in;
	margin-bottom:.0001pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.MsoListParagraphCxSpMiddle, li.MsoListParagraphCxSpMiddle, div.MsoListParagraphCxSpMiddle
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.5in;
	margin-bottom:.0001pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.MsoListParagraphCxSpLast, li.MsoListParagraphCxSpLast, div.MsoListParagraphCxSpLast
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:.5in;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.MsoTocHeading, li.MsoTocHeading, div.MsoTocHeading
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:24.0pt;
	margin-left:0in;
	line-height:115%;
	page-break-after:avoid;
	font-size:36.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";
	font-variant:small-caps;
	font-weight:bold;}
span.Heading1Char
	{mso-style-name:"Heading 1 Char";
	mso-style-link:"Heading 1";
	font-family:"Franklin Gothic Demi","sans-serif";
	font-variant:small-caps;
	font-weight:bold;}
span.Heading2Char
	{mso-style-name:"Heading 2 Char";
	mso-style-link:"Heading 2";
	font-family:"Times New Roman","serif";
	color:#1F497D;
	font-weight:bold;}
span.Definition
	{mso-style-name:Definition;
	font-family:"Calibri","sans-serif";
	font-weight:bold;}
span.URL
	{mso-style-name:URL;
	text-decoration:underline;}
span.Literal
	{mso-style-name:Literal;
	font-family:"Lucida Sans Typewriter";}
p.TopicsCoveredbox, li.TopicsCoveredbox, div.TopicsCoveredbox
	{mso-style-name:"Topics Covered box";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:0in;
	background:#DBE5F1;
	border:none;
	padding:0in;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.TopicsCoveredboxCxSpFirst, li.TopicsCoveredboxCxSpFirst, div.TopicsCoveredboxCxSpFirst
	{mso-style-name:"Topics Covered boxCxSpFirst";
	margin:0in;
	margin-bottom:.0001pt;
	background:#DBE5F1;
	border:none;
	padding:0in;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.TopicsCoveredboxCxSpMiddle, li.TopicsCoveredboxCxSpMiddle, div.TopicsCoveredboxCxSpMiddle
	{mso-style-name:"Topics Covered boxCxSpMiddle";
	margin:0in;
	margin-bottom:.0001pt;
	background:#DBE5F1;
	border:none;
	padding:0in;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.TopicsCoveredboxCxSpLast, li.TopicsCoveredboxCxSpLast, div.TopicsCoveredboxCxSpLast
	{mso-style-name:"Topics Covered boxCxSpLast";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:0in;
	background:#DBE5F1;
	border:none;
	padding:0in;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.CodeExample, li.CodeExample, div.CodeExample
	{mso-style-name:"Code Example";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:12.0pt;
	margin-left:0in;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
p.CodeExampleCxSpFirst, li.CodeExampleCxSpFirst, div.CodeExampleCxSpFirst
	{mso-style-name:"Code ExampleCxSpFirst";
	margin:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
p.CodeExampleCxSpMiddle, li.CodeExampleCxSpMiddle, div.CodeExampleCxSpMiddle
	{mso-style-name:"Code ExampleCxSpMiddle";
	margin:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
p.CodeExampleCxSpLast, li.CodeExampleCxSpLast, div.CodeExampleCxSpLast
	{mso-style-name:"Code ExampleCxSpLast";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:12.0pt;
	margin-left:0in;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
p.SourceCode, li.SourceCode, div.SourceCode
	{mso-style-name:"Source Code";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:12.0pt;
	margin-left:0in;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
p.SourceCodeCxSpFirst, li.SourceCodeCxSpFirst, div.SourceCodeCxSpFirst
	{mso-style-name:"Source CodeCxSpFirst";
	margin:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
p.SourceCodeCxSpMiddle, li.SourceCodeCxSpMiddle, div.SourceCodeCxSpMiddle
	{mso-style-name:"Source CodeCxSpMiddle";
	margin:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
p.SourceCodeCxSpLast, li.SourceCodeCxSpLast, div.SourceCodeCxSpLast
	{mso-style-name:"Source CodeCxSpLast";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:12.0pt;
	margin-left:0in;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
span.SourceLineNumber
	{mso-style-name:"Source Line Number";
	color:#7F7F7F;}
p.ImportantNote, li.ImportantNote, div.ImportantNote
	{mso-style-name:"Important Note";
	margin-top:0in;
	margin-right:.5in;
	margin-bottom:8.0pt;
	margin-left:.5in;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.ChapterNumber, li.ChapterNumber, div.ChapterNumber
	{mso-style-name:"Chapter Number";
	margin:0in;
	margin-bottom:.0001pt;
	font-size:26.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";}
p.Body, li.Body, div.Body
	{mso-style-name:Body;
	margin-top:0in;
	margin-right:0in;
	margin-bottom:8.0pt;
	margin-left:0in;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
span.Keycap
	{mso-style-name:Keycap;
	font-variant:small-caps;
	color:blue;}
p.Non-TOCHeading3, li.Non-TOCHeading3, div.Non-TOCHeading3
	{mso-style-name:"Non-TOC Heading 3";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:0in;
	line-height:115%;
	font-size:14.0pt;
	font-family:"Calibri","sans-serif";
	color:#1F497D;
	font-weight:bold;
	font-style:italic;}
span.BalloonTextChar
	{mso-style-name:"Balloon Text Char";
	mso-style-link:"Balloon Text";
	font-family:"Tahoma","sans-serif";}
p.TableHeading, li.TableHeading, div.TableHeading
	{mso-style-name:"Table Heading";
	margin:0in;
	margin-bottom:.0001pt;
	text-align:center;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";
	font-weight:bold;}
p.TableListing, li.TableListing, div.TableListing
	{mso-style-name:"Table Listing";
	margin:0in;
	margin-bottom:.0001pt;
	text-align:center;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.SampleRun, li.SampleRun, div.SampleRun
	{mso-style-name:"Sample Run";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:12.0pt;
	margin-left:0in;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
p.SampleRunCxSpFirst, li.SampleRunCxSpFirst, div.SampleRunCxSpFirst
	{mso-style-name:"Sample RunCxSpFirst";
	margin:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
p.SampleRunCxSpMiddle, li.SampleRunCxSpMiddle, div.SampleRunCxSpMiddle
	{mso-style-name:"Sample RunCxSpMiddle";
	margin:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
p.SampleRunCxSpLast, li.SampleRunCxSpLast, div.SampleRunCxSpLast
	{mso-style-name:"Sample RunCxSpLast";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:12.0pt;
	margin-left:0in;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
span.SampleRunResponse
	{mso-style-name:"Sample Run Response";
	color:#1F497D;
	font-weight:bold;}
span.SourceCodeComment
	{mso-style-name:"Source Code Comment";
	color:#7F7F7F;}
span.FigureImageBorder
	{mso-style-name:"Figure Image Border";
	border:solid windowtext 1.0pt;
	padding:0in;}
p.SourceCodeFilename, li.SourceCodeFilename, div.SourceCodeFilename
	{mso-style-name:"Source Code Filename";
	margin:0in;
	margin-bottom:.0001pt;
	text-align:right;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:"Lucida Sans Typewriter";}
p.SourceCodeFilenameCxSpFirst, li.SourceCodeFilenameCxSpFirst, div.SourceCodeFilenameCxSpFirst
	{mso-style-name:"Source Code FilenameCxSpFirst";
	margin:0in;
	margin-bottom:.0001pt;
	text-align:right;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:"Lucida Sans Typewriter";}
p.SourceCodeFilenameCxSpMiddle, li.SourceCodeFilenameCxSpMiddle, div.SourceCodeFilenameCxSpMiddle
	{mso-style-name:"Source Code FilenameCxSpMiddle";
	margin:0in;
	margin-bottom:.0001pt;
	text-align:right;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:"Lucida Sans Typewriter";}
p.SourceCodeFilenameCxSpLast, li.SourceCodeFilenameCxSpLast, div.SourceCodeFilenameCxSpLast
	{mso-style-name:"Source Code FilenameCxSpLast";
	margin:0in;
	margin-bottom:.0001pt;
	text-align:right;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:"Lucida Sans Typewriter";}
span.Heading3Char
	{mso-style-name:"Heading 3 Char";
	mso-style-link:"Heading 3";
	font-family:"Times New Roman","serif";
	color:#1F497D;
	font-weight:bold;
	font-style:italic;}
span.NoSpacingChar
	{mso-style-name:"No Spacing Char";
	mso-style-link:"No Spacing";
	font-family:"Times New Roman","serif";}
span.HeaderChar
	{mso-style-name:"Header Char";
	mso-style-link:Header;
	font-family:"Times New Roman","serif";}
span.FooterChar
	{mso-style-name:"Footer Char";
	mso-style-link:Footer;
	font-family:"Times New Roman","serif";}
span.StrongBoxed
	{mso-style-name:"Strong & Boxed";
	border:solid windowtext 1.0pt;
	padding:0in;
	font-weight:bold;}
span.TitleChar
	{mso-style-name:"Title Char";
	mso-style-link:Title;
	font-family:"Franklin Gothic Demi","sans-serif";
	letter-spacing:.25pt;}
p.BodyFirst, li.BodyFirst, div.BodyFirst
	{mso-style-name:"Body First";
	margin:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
.MsoChpDefault
	{font-family:"Calibri","sans-serif";}
.MsoPapDefault
	{margin-bottom:10.0pt;
	line-height:115%;}
@page WordSection1
	{size:8.0in 10.0in;
	margin:1.0in 1.0in 1.0in 1.0in;}
div.WordSection1
	{page:WordSection1;}
 /* List Definitions */
 ol
	{margin-bottom:0in;}
ul
	{margin-bottom:0in;}
-->
</style>

</head>

<body lang=EN-US link=blue vlink=purple>


<div style='float: right; height: 310px; font-family: sans-serif;'>Ad: Programming books by Al Sweigart<br />
    <a href='http://www.nostarch.com/automatestuff' onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_automate.link');"><img src='/images/cover_automate_thumb.webp' style="height: 200px; border: solid black 1px;" /></a>
    <a href='http://www.amazon.com/gp/product/1503212300?ie=UTF8&tag=playwithpyth-20&linkCode=as2&camp=1789&creative=9325&creativeASIN=1503212300' onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_invent.link');"><img src='/images/cover_inventwithpython_thumb.webp' style="height: 200px; border: solid black 1px;" /></a>
    <a href='http://www.amazon.com/Making-Games-Python-Pygame-Sweigart/dp/1469901730?ie=UTF8&tag=playwithpyth-20&linkCode=as2&camp=1789&creative=9325&creativeASIN=1469901730' onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_pygame.link');"><img src='/images/cover_makinggames_thumb.webp' style="height: 200px; border: solid black 1px;" /></a>
    <a href='http://www.amazon.com/gp/product/1482614375/ref=as_li_qf_sp_asin_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1482614375&linkCode=as2&tag=playwithpyth-20' onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_hacking.link');"><img src='/images/cover_hackingciphers_thumb.webp' style="height: 200px; border: solid black 1px;" /></a>
</div>


<div class=WordSection1>

<table class=MsoTableGrid border=0 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=101 rowspan=2 valign=top style='width:60.85pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=ChapterNumber><img width=84 height=96 id="Picture 159"
  src="chapter18_files/image001.webp"></p>
  </td>
  <td width=637 valign=top style='width:381.95pt;border:none;border-bottom:
  solid windowtext 1.0pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=ChapterNumber>Chapter 18</p>
  </td>
 </tr>
 <tr>
  <td width=637 valign=top style='width:381.95pt;border:none;padding:0in 5.4pt 0in 5.4pt'>
  <h1 style='line-height:normal'><a name="_Toc405145182"><span
  style='font-variant:normal !important;text-transform:uppercase'>Collision
  Detection and Keyboard/Mouse Input</span></a></h1>
  </td>
 </tr>
</table>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt;
background:#DBE5F1'>

<p class=TopicsCoveredboxCxSpFirst style='background:#DBE5F1;border:none;
padding:0in'>Topics Covered In This Chapter:</p>

<p class=TopicsCoveredboxCxSpMiddle style='margin-left:.25in;text-indent:-.25in;
background:#DBE5F1;border:none;padding:0in'><span style='font-family:Symbol'>·<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Collision Detection</p>

<p class=TopicsCoveredboxCxSpMiddle style='margin-left:.25in;text-indent:-.25in;
background:#DBE5F1;border:none;padding:0in'><span style='font-family:Symbol'>·<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Don’t Modify a List While Iterating Over It</p>

<p class=TopicsCoveredboxCxSpMiddle style='margin-left:.25in;text-indent:-.25in;
background:#DBE5F1;border:none;padding:0in'><span style='font-family:Symbol'>·<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Keyboard Input in Pygame</p>

<p class=TopicsCoveredboxCxSpLast style='margin-left:.25in;text-indent:-.25in;
background:#DBE5F1;border:none;padding:0in'><span style='font-family:Symbol'>·<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>Mouse Input in Pygame</p>

</div>

<p class=Body>Collision detection is figuring when two things on the screen
have touched (that is, collided with) each other. For example, if the player
touches an enemy they may lose health. Or the program needs to know when the
player touches a coin so that they automatically pick it up. Collision
detection can help determine if the game character is standing on solid ground
or if there’s nothing but empty air underneath them.</p>

<p class=Body>In our games, collision detection will determine if two
rectangles are overlapping each other or not. Our next example program will
cover this basic technique.</p>

<p class=Body>Later in this chapter, we’ll look at how our Pygame programs can
accept input from the user through the keyboard and the mouse. It’s a bit more
complicated than calling the <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>input()</span></span> function like we did for our text
programs. But using the keyboard is much more interactive in GUI programs. And
using the mouse isn’t even possible in our text games. These two concepts will
make your games more exciting!</p>

<h2><a name="_Toc405145183">Source Code of the Collision Detection Program</a></h2>

<p class=Body>Much of this code is similar to the animation program, so the
explanation of the moving and bouncing code is skipped. (See the animation
program in Chapter 17 for that.) A bouncer will bounce around the window. A
list of Rect objects will represent food squares.</p>

<p class=Body>On each iteration through the game loop, the program will read
each Rect object in the list and draw a green square on the window. Every forty
iterations through the game loop we will add a new Rect object to the list so
that the screen constantly has new food squares in it.</p>

<p class=Body>The bouncer is represented by a dictionary. The dictionary has a
key named <span class=Literal><span style='font-size:9.0pt;line-height:115%'>'rect'</span></span>
(whose value is a <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>pygame.Rect</span></span> object) and a key named <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>'dir'</span></span> (whose value is
one of the constant direction variables like we had in last chapter’s Animation
program).</p>

<p class=Body>As the bouncer bounces around the window, we check if it collides
with any of the food squares. If it does, we delete that food square so that it
will no longer be drawn on the screen. This will make it look like the bouncer
“eats” the food squares in the window.</p>

<p class=Body>Type the following into a new file and save it as <em>collisionDetection.py</em>.
If you get errors after typing this code in, compare the code you typed to the
book’s code with the online diff tool at <span class=URL><u>http://invpy.com/diff/collisionDetection</u></span>.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeFilename>collisionDetection.py</p>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>  1.</span> import
pygame, sys, random</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  2.</span> from
pygame.locals import *</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  3. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  4.</span> def
doRectsOverlap(rect1, rect2):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  5.</span>     for
a, b in [(rect1, rect2), (rect2, rect1)]:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  6.</span>         <span
class=SourceCodeComment># Check if a's corners are inside b</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  7.</span>        
if ((isPointInsideRect(a.left, a.top, b)) or</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  8.</span>            
(isPointInsideRect(a.left, a.bottom, b)) or</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  9.</span>            
(isPointInsideRect(a.right, a.top, b)) or</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 10.</span>            
(isPointInsideRect(a.right, a.bottom, b))):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 11.</span>            
return True</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 12. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 13.</span>    
return False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 14. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 15.</span> def
isPointInsideRect(x, y, rect):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 16.</span>     if
(x &gt; rect.left) and (x &lt; rect.right) and (y &gt; rect.top) and (y &lt;
rect.bottom):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 17.</span>        
return True</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 18.</span>    
else:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 19.</span>        
return False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 20. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 21. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 22.</span> <span
class=SourceCodeComment># set up pygame</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 23.</span>
pygame.init()</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 24.</span> mainClock
= pygame.time.Clock()</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 25. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 26.</span> <span
class=SourceCodeComment># set up the window</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 27.</span>
WINDOWWIDTH = 400</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 28.</span>
WINDOWHEIGHT = 400</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 29.</span>
windowSurface = pygame.display.set_mode((WINDOWWIDTH, WINDOWHEIGHT), 0, 32)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 30.</span>
pygame.display.set_caption('Collision Detection')</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 31. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 32.</span> <span
class=SourceCodeComment># set up direction variables</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 33.</span> DOWNLEFT
= 1</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 34.</span>
DOWNRIGHT = 3</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 35.</span> UPLEFT =
7</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 36.</span> UPRIGHT
= 9</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 37. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 38.</span>
MOVESPEED = 4</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 39. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 40.</span> <span
class=SourceCodeComment># set up the colors</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 41.</span> BLACK =
(0, 0, 0)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 42.</span> GREEN =
(0, 255, 0)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 43.</span> WHITE =
(255, 255, 255)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 44. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 45.</span> <span
class=SourceCodeComment># set up the bouncer and food data structures</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 46.</span>
foodCounter = 0</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 47.</span> NEWFOOD
= 40</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 48.</span> FOODSIZE
= 20</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 49.</span> bouncer
= {'rect':pygame.Rect(300, 100, 50, 50), 'dir':UPLEFT}</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 50.</span> foods =
[]</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 51.</span> for i in
range(20):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 52.</span>    
foods.append(pygame.Rect(random.randint(0, WINDOWWIDTH - FOODSIZE),
random.randint(0, WINDOWHEIGHT - FOODSIZE), FOODSIZE, FOODSIZE))</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 53. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 54.</span> <span
class=SourceCodeComment># run the game loop</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 55.</span> while
True:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 56.</span>     <span
class=SourceCodeComment># check for the QUIT event</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 57.</span>     for
event in pygame.event.get():</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 58.</span>        
if event.type == QUIT:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 59.</span>             pygame.quit()</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 60.</span>            
sys.exit()</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 61. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 62.</span>    
foodCounter += 1</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 63.</span>     if
foodCounter &gt;= NEWFOOD:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 64.</span>         <span
class=SourceCodeComment># add new food</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 65.</span>        
foodCounter = 0</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 66.</span>        
foods.append(pygame.Rect(random.randint(0, WINDOWWIDTH - FOODSIZE),
random.randint(0, WINDOWHEIGHT - FOODSIZE), FOODSIZE, FOODSIZE))</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 67. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 68.</span>     <span
class=SourceCodeComment># draw the black background onto the surface</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 69.</span>    
windowSurface.fill(BLACK)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 70. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 71.</span>     <span
class=SourceCodeComment># move the bouncer data structure</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 72.</span>     if
bouncer['dir'] == DOWNLEFT:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 73.</span>        
bouncer['rect'].left -= MOVESPEED</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 74.</span>        
bouncer['rect'].top += MOVESPEED</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 75.</span>     if
bouncer['dir'] == DOWNRIGHT:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 76.</span>        
bouncer['rect'].left += MOVESPEED</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 77.</span>        
bouncer['rect'].top += MOVESPEED</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 78.</span>     if
bouncer['dir'] == UPLEFT:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 79.</span>        
bouncer['rect'].left -= MOVESPEED</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 80.</span>        
bouncer['rect'].top -= MOVESPEED</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 81.</span>     if
bouncer['dir'] == UPRIGHT:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 82.</span>        
bouncer['rect'].left += MOVESPEED</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 83.</span>        
bouncer['rect'].top -= MOVESPEED</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 84. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 85.</span>     <span
class=SourceCodeComment># check if the bouncer has move out of the window</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 86.</span>     if
bouncer['rect'].top &lt; 0:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 87.</span>         <span
class=SourceCodeComment># bouncer has moved past the top</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 88.</span>        
if bouncer['dir'] == UPLEFT:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 89.</span>            
bouncer['dir'] = DOWNLEFT</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 90.</span>        
if bouncer['dir'] == UPRIGHT:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 91.</span>            
bouncer['dir'] = DOWNRIGHT</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 92.</span>     if
bouncer['rect'].bottom &gt; WINDOWHEIGHT:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 93.</span>         <span
class=SourceCodeComment># bouncer has moved past the bottom</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 94.</span>        
if bouncer['dir'] == DOWNLEFT:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 95.</span>            
bouncer['dir'] = UPLEFT</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 96.</span>        
if bouncer['dir'] == DOWNRIGHT:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 97.</span>            
bouncer['dir'] = UPRIGHT</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 98.</span>     if
bouncer['rect'].left &lt; 0:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 99.</span>         <span
class=SourceCodeComment># bouncer has moved past the left side</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>100.</span>        
if bouncer['dir'] == DOWNLEFT:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>101.</span>            
bouncer['dir'] = DOWNRIGHT</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>102.</span>        
if bouncer['dir'] == UPLEFT:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>103.</span>            
bouncer['dir'] = UPRIGHT</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>104.</span>     if
bouncer['rect'].right &gt; WINDOWWIDTH:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>105.</span>         <span
class=SourceCodeComment># bouncer has moved past the right side</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>106.</span>        
if bouncer['dir'] == DOWNRIGHT:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>107.</span>            
bouncer['dir'] = DOWNLEFT</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>108.</span>        
if bouncer['dir'] == UPRIGHT:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>109.</span>            
bouncer['dir'] = UPLEFT</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>110. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>111.</span>     <span
class=SourceCodeComment># draw the bouncer onto the surface</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>112.</span>    
pygame.draw.rect(windowSurface, WHITE, bouncer['rect'])</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>113. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>114.</span>     <span
class=SourceCodeComment># check if the bouncer has intersected with any food
squares.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>115.</span>     for
food in foods[:]:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>116.</span>        
if doRectsOverlap(bouncer['rect'], food):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>117.</span>            
foods.remove(food)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>118. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>119.</span>     <span
class=SourceCodeComment># draw the food</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>120.</span>     for
i in range(len(foods)):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>121.</span>        
pygame.draw.rect(windowSurface, GREEN, foods[i])</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>122. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>123.</span>     <span
class=SourceCodeComment># draw the window onto the screen</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>124.</span>    
pygame.display.update()</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>125.</span>    
mainClock.tick(40)</p>

</div>

<p class=Body>The program will look like Figure 18-1. The the bouncer square
will bounce around the window. When it collides with the green food squares
they will disappear from the screen.</p>

<p class=MsoNormal align=center style='text-align:center'><img width=179
height=190 id="Picture 105" src="chapter18_files/image002.webp"></p>

<p class=MsoCaption>Figure 18-1: An altered screenshot of the Collision
Detection program.</p>

<p class=Non-TOCHeading3>Importing the Modules</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>  1.</span> import
pygame, sys, random</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>  2.</span> from
pygame.locals import *</p>

</div>

<p class=Body>The collision detection program imports the same things as the
Animation program in the last chapter, along with the <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>random</span></span> module.</p>

<h2><a name="_Toc405145184">The Collision Detection Algorithm</a></h2>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCode><span class=SourceLineNumber>  4.</span> def
doRectsOverlap(rect1, rect2):</p>

</div>

<p class=Body>To do collision detection, you need a function that can determine
if two rectangles collide with each other or not. Figure 18-2 shows colliding
and non-colliding rectangles.</p>

<p class=MsoNormal align=center style='text-align:center'><img width=265
height=114 id="Picture 81" src="chapter18_files/image003.webp"></p>

<p class=MsoCaption>Figure 18-2: Examples of colliding rectangles (left) and
rectangles that don’t collide (right).</p>

<p class=Body><span class=Literal><span style='font-size:9.0pt;line-height:
115%'>doRectsOverlap()</span></span> is passed two <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>pygame.Rect</span></span> objects. The
function will return <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>True</span></span> if they do and <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>False</span></span> if they don’t.
There is a simple rule to follow to determine if rectangles collide. Look at
each of the four corners on both rectangles. If at least one of these eight
corners is inside the other rectangle, then you know that the two rectangles
have collided. You can use this fact to determine if <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>doRectsOverlap()</span></span> returns
<span class=Literal><span style='font-size:9.0pt;line-height:115%'>True</span></span>
or <span class=Literal><span style='font-size:9.0pt;line-height:115%'>False</span></span>.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>  5.</span>     for
a, b in [(rect1, rect2), (rect2, rect1)]:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  6.</span>         <span
class=SourceCodeComment># Check if a's corners are inside b</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  7.</span>        
if ((isPointInsideRect(a.left, a.top, b)) or</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  8.</span>             (isPointInsideRect(a.left,
a.bottom, b)) or</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  9.</span>            
(isPointInsideRect(a.right, a.top, b)) or</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 10.</span>            
(isPointInsideRect(a.right, a.bottom, b))):</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber> 11.</span>            
return True</p>

</div>

<p class=Body>Lines 5 to 11 check if one rectangle’s corners are inside
another. Later you will create a function called <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>isPointInsideRect()</span></span> that
returns <span class=Literal><span style='font-size:9.0pt;line-height:115%'>True</span></span>
if the XY coordinates of the point are inside the rectangle. Call this function
for each of the eight corners, and if any of these calls return <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>True</span></span>,
the <span class=Literal><span style='font-size:9.0pt;line-height:115%'>or</span></span>
operators will make the entire condition <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>True</span></span>.</p>

<p class=Body>The parameters for <span class=Literal><span style='font-size:
9.0pt;line-height:115%'>doRectsOverlap()</span></span> are <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>rect1</span></span> and <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>rect2</span></span>.
First check if <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>rect1</span></span>’s corners are inside <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>rect2</span></span>, then check if <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>rect2</span></span>’s
corners are in <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>rect1</span></span>.</p>

<p class=Body>You don’t need to repeat the code that checks all four corners
for both <span class=Literal><span style='font-size:9.0pt;line-height:115%'>rect1</span></span>
and <span class=Literal><span style='font-size:9.0pt;line-height:115%'>rect2</span></span>.
Instead, use <span class=Literal><span style='font-size:9.0pt;line-height:115%'>a</span></span>
and <span class=Literal><span style='font-size:9.0pt;line-height:115%'>b</span></span>
on lines 7 to 10. The <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>for</span></span> loop on line 5 uses multiple assignment. On
the first iteration, <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>a</span></span> is set to <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>rect1</span></span> and <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>b</span></span> is
set to <span class=Literal><span style='font-size:9.0pt;line-height:115%'>rect2</span></span>.
On the second iteration through the loop, it is the opposite: <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>a</span></span> is
set to <span class=Literal><span style='font-size:9.0pt;line-height:115%'>rect2</span></span>
and <span class=Literal><span style='font-size:9.0pt;line-height:115%'>b</span></span>
is set to <span class=Literal><span style='font-size:9.0pt;line-height:115%'>rect1</span></span>.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCode><span class=SourceLineNumber>13.</span>     return False</p>

</div>

<p class=Body>If line 11 never returns <span class=Literal><span style='font-size:
9.0pt;line-height:115%'>True</span></span>, then none of the eight corners
checked are in the other rectangle. In that case, the rectangles didn’t collide
and line 13 returns <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>False</span></span>.</p>

<p class=Non-TOCHeading3>Determining if a Point is Inside a Rectangle</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber> 15.</span> def
isPointInsideRect(x, y, rect):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 16.</span>     if
(x &gt; rect.left) and (x &lt; rect.right) and (y &gt; rect.top) and (y &lt;
rect.bottom):</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber> 17.</span>        
return True</p>

</div>

<p class=Body>The <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>isPointInsideRect()</span></span> function is called from <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>doRectsOverlap()</span></span>.
The <span class=Literal><span style='font-size:9.0pt;line-height:115%'>isPointInsideRect()</span></span>
function will return <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>True</span></span> if the XY coordinates passed are located
inside the <span class=Literal><span style='font-size:9.0pt;line-height:115%'>pygame.Rect</span></span>
object passed as the third parameter. Otherwise, this function returns <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>False</span></span>.</p>

<p class=Body>Figure 18-3 is an example picture of a rectangle and several
points. The points and the corners of the rectangle are labeled with
coordinates.</p>

<p class=Body>A point is inside the rectangle if the following four things are
true:</p>

<p class=Body style='margin-left:.5in;text-indent:-.25in'><span
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>The point’s X-coordinate is greater than the X-coordinate of the
rectangle’s left side.</p>

<p class=Body style='margin-left:.5in;text-indent:-.25in'><span
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>The point’s X-coordinate is less than the X-coordinate of the
rectangle’s right side.</p>

<p class=Body style='margin-left:.5in;text-indent:-.25in'><span
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>The point’s Y-coordinate is greater than the Y-coordinate of the
rectangle’s top side.</p>

<p class=Body style='margin-left:.5in;text-indent:-.25in'><span
style='font-family:Symbol'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>The point’s Y-coordinate is less than the Y-coordinate of the
rectangle’s bottom side.</p>

<p class=Body>If any of those parts are <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>False</span></span>, then the point is
outside the rectangle. Line 16 combines all four of these conditions into the <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>if</span></span> statement’s
condition with <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>and</span></span> operators.</p>

<p class=MsoNormal align=center style='text-align:center'><img width=232
height=152 id="Picture 59" src="chapter18_files/image004.webp"></p>

<p class=MsoCaption>Figure 18-3: Example of coordinates inside and outside of a
rectangle. The (50, 30), (85, 30) and (50, 50) points are inside the rectangle,
and all the others are outside.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber> 18.</span>     else:</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber> 19.</span>        
return False</p>

</div>

<p class=Body>This function is called from the <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>doRectsOverlap()</span></span>
function to see if any of the corners in the two <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>pygame.Rect</span></span> objects are
inside each other. These two functions give you the power to do collision
detection between two rectangles.</p>

<p class=Non-TOCHeading3>The <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>pygame.time.Clock</span></span> Object and <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>tick()</span></span>
Method</p>

<p class=Body>Much of lines 22 to 43 do the same things that the Animation
program in the last chapter did: initialize Pygame, set <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>WINDOWHEIGHT</span></span> and <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>WINDOWWIDTH</span></span>,
and assign the color and direction constants.</p>

<p class=Body>However, line 24 is new:</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCode><span class=SourceLineNumber> 24.</span> mainClock =
pygame.time.Clock()</p>

</div>

<p class=Body>In the previous Animation program, a call to <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>time.sleep(0.02)</span></span> would
slow down the program so that the program doesn’t run too fast. The problem
with <span class=Literal><span style='font-size:9.0pt;line-height:115%'>time.sleep()</span></span>is
that might be too much of a pause on slow computers and not enough of a pause
on fast computers.</p>

<p class=Body>A <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>pygame.time.Clock</span></span> object can pause an appropriate amount of
time on any computer. Line 125 calls <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>mainClock.tick(40)</span></span>
inside the game loop. This call to the Clock object’s <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>tick()</span></span> method waits
enough time so that it runs at about 40 iterations a second, no matter what the
computer’s speed is. This ensures that the game never runs faster than you
expect. A call to <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>tick()</span></span> should only appear once in the game loop.</p>

<p class=Non-TOCHeading3>Setting Up the Window and Data Structures</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber> 45.</span> <span
class=SourceCodeComment># set up the bouncer and food data structures</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 46.</span>
foodCounter = 0</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 47.</span> NEWFOOD
= 40</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber> 48.</span> FOODSIZE =
20</p>

</div>

<p class=Body>Lines 46 to 48 set up a few variables for the food blocks that
appear on the screen. <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>foodCounter</span></span> will start at the value <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>0</span></span>, <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>NEWFOOD</span></span>
at <span class=Literal><span style='font-size:9.0pt;line-height:115%'>40</span></span>,
and <span class=Literal><span style='font-size:9.0pt;line-height:115%'>FOODSIZE</span></span>
at <span class=Literal><span style='font-size:9.0pt;line-height:115%'>20</span></span>.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCode><span class=SourceLineNumber> 49.</span> bouncer =
{'rect':pygame.Rect(300, 100, 50, 50), 'dir':UPLEFT}</p>

</div>

<p class=Body>Line 49 sets up a new data structure called <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>bouncer</span></span>. <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>bouncer</span></span>
is a dictionary with two keys. The <span class=Literal><span style='font-size:
9.0pt;line-height:115%'>'rect'</span></span> key has a <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>pygame.Rect</span></span> object that
represents the bouncer’s size and position.</p>

<p class=Body>The <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>'dir'</span></span> key has a direction that the bouncer is currently
moving. The bouncer will move the same way the blocks did in Chapter 17’s
animation program.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber> 50.</span> foods =
[]</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 51.</span> for i in
range(20):</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber> 52.</span>    
foods.append(pygame.Rect(random.randint(0, WINDOWWIDTH - FOODSIZE),
random.randint(0, WINDOWHEIGHT - FOODSIZE), FOODSIZE, FOODSIZE))</p>

</div>

<p class=Body>The program will keep track of every food square with a list of
Rect objects in <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>foods</span></span>. Lines 51 and 52 create twenty food squares randomly
placed around the screen. You can use the <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>random.randint()</span></span>
function to come up with random XY coordinates.</p>

<p class=Body>On line 52, we will call the <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>pygame.Rect()</span></span>
constructor function to return a new <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>pygame.Rect</span></span> object. It
will represent the position and size of the food square. The first two
parameters for <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>pygame.Rect()</span></span> are the XY coordinates of the top left
corner. You want the random coordinate to be between 0 and the size of the
window minus the size of the food square. If you had the random coordinate
between 0 and the size of the window, then the food square might be pushed
outside of the window altogether, like in Figure 18-4.</p>

<p class=MsoNormal align=center style='text-align:center'><img width=261
height=219 id="Picture 85" src="chapter18_files/image005.webp"></p>

<p class=MsoCaption>Figure 18-4: For a 20 by 20 rectangle, having the top left
corner at (400, 200) in a 400 by 400 window would place the rectangle outside
of the window. To be inside, the top left corner should be at (380, 200)
instead.</p>

<p class=Body>The third parameter for <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>pygame.Rect()</span></span> is a tuple
that contains the width and height of the food square. Both the width and
height is the value in the <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>FOODSIZE</span></span> constant.</p>

<p class=Non-TOCHeading3>Drawing the Bouncer on the Screen</p>

<p class=Body>Lines 71 to 109 cause the bouncer to move around the window and
bounce off of the edges of the window. This code is similar to lines 44 to 83
of the Animation program in the last chapter, so the explanation will be
skipped.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>111.</span>     <span
class=SourceCodeComment># draw the bouncer onto the surface</span></p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>112.</span>    
pygame.draw.rect(windowSurface, WHITE, bouncer['rect'])</p>

</div>

<p class=Body>After moving the bouncer, line 112 draws it in its new position.
The <span class=Literal><span style='font-size:9.0pt;line-height:115%'>windowSurface</span></span>
passed for the first parameter tells Python which Surface object to draw the
rectangle on. The <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>WHITE</span></span> variable, which has <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>(255, 255, 255)</span></span> stored
in it, will tell Python to draw a white rectangle. The Rect object stored in
the <span class=Literal><span style='font-size:9.0pt;line-height:115%'>bouncer</span></span>
dictionary at the <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>'rect'</span></span> key tells the position and size of the rectangle to
draw.</p>

<p class=Non-TOCHeading3>Colliding with the Food Squares</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>114.</span>     <span
class=SourceCodeComment># check if the bouncer has intersected with any food
squares.</span></p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>115.</span>     for
food in foods[:]:</p>

</div>

<p class=Body>Before drawing the food squares, check if the bouncer has
overlapped any of the food squares. If it has, remove that food square from the
<span class=Literal><span style='font-size:9.0pt;line-height:115%'>foods</span></span>
list. This way, Python won’t draw any food squares that the bouncer has
“eaten”.</p>

<p class=Body>On each iteration through the <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>for</span></span> loop, the current
food square from the <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>foods</span></span> (plural) list is in the variable <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>food</span></span>
(singular).</p>

<h2><a name="_Toc405145185">Don’t Add to or Delete from a List while Iterating
Over It</a></h2>

<p class=Body>Notice that there’s a slight difference with this <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>for</span></span>
loop. If you look carefully at line 116, it isn’t iterating over <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>foods</span></span>
but actually over <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>foods[:]</span></span>.</p>

<p class=Body>Remember how slices work. <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>foods[:2]</span></span> evaluates to a
copy of the list with the items from the start and up to (but not including)
the item at index 2. <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>foods[3:]</span></span> evaluates to a copy of the list with
the items from index 3 to the end of the list.</p>

<p class=Body><span class=Literal><span style='font-size:9.0pt;line-height:
115%'>foods[:]</span></span> will give you a copy of the list with the items
from the start to the end. Basically, <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>foods[:]</span></span> creates a new
list with a copy of all the items in <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>foods</span></span>. This is a shorter
way to copy a list than, say, what the <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>getBoardCopy()</span></span> function
does in the previous Tic Tac Toe game.</p>

<p class=Body>You cannot add or remove items from a list while you are
iterating over it. Python can lose track of what the next value of <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>food</span></span>
variable should be if the size of the <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>foods</span></span> list is always
changing. Think of how difficult it would be to count the number of jelly beans
in a jar while someone was adding or removing jelly beans.</p>

<p class=Body>But if you iterate over a copy of the list (and the copy never
changes), adding or removing items from the original list won’t be a problem.</p>

<p class=Non-TOCHeading3>Removing the Food Squares</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>116.</span>        
if doRectsOverlap(bouncer['rect'], food):</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>117.</span>            
foods.remove(food)</p>

</div>

<p class=Body>Line 116 is where <span class=Literal><span style='font-size:
9.0pt;line-height:115%'>doRectsOverlap()</span></span> comes in handy. If the
bouncer and the current food square two rectangles overlap, then <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>doRectsOverlap()</span></span>
will return <span class=Literal><span style='font-size:9.0pt;line-height:115%'>True</span></span>
and line 117 removes the overlapping food square from the <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>foods</span></span> list.</p>

<p class=Non-TOCHeading3>Drawing the Food Squares on the Screen</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>119.</span>     <span
class=SourceCodeComment># draw the food</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>120.</span>     for
i in range(len(foods)):</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>121.</span>        
pygame.draw.rect(windowSurface, GREEN, foods[i])</p>

</div>

<p class=Body>The code on lines 120 and 121 are similar to how we drew the
white square for the player. Line 120 loops through each food square in the <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>foods</span></span>
list. Line 121 draws the food square onto the <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>windowSurface</span></span> surface.
This program was similar to the bouncing program in the previous chapter,
except now the bouncing square will “eat” other squares it passes over them.</p>

<p class=Body>These past few programs are interesting to watch, but the user
doesn’t get to control anything. In the next program, we will learn how to get
input from the keyboard.</p>

<h2><a name="_Toc405145186">Source Code of the Keyboard Input Program</a></h2>

<p class=Body>Start a new file and type in the following code, then save it as <em>pygameInput.py</em>.
If you get errors after typing this code in, compare the code you typed to the
book’s code with the online diff tool at <span class=URL><u>http://invpy.com/diff/pygameInput</u></span>.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeFilename>pygameInput.py</p>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>  1.</span> import
pygame, sys, random</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  2.</span> from
pygame.locals import *</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  3. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  4.</span> <span
class=SourceCodeComment># set up pygame</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  5.</span>
pygame.init()</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  6.</span>
mainClock = pygame.time.Clock()</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  7. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  8.</span> <span
class=SourceCodeComment># set up the window</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  9.</span>
WINDOWWIDTH = 400</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 10.</span>
WINDOWHEIGHT = 400</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 11.</span>
windowSurface = pygame.display.set_mode((WINDOWWIDTH, WINDOWHEIGHT), 0, 32)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 12.</span>
pygame.display.set_caption('Input')</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 13. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 14.</span> <span
class=SourceCodeComment># set up the colors</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 15.</span> BLACK =
(0, 0, 0)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 16.</span> GREEN =
(0, 255, 0)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 17.</span> WHITE =
(255, 255, 255)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 18. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 19.</span> <span
class=SourceCodeComment># set up the player and food data structure</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 20.</span>
foodCounter = 0</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 21.</span> NEWFOOD
= 40</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 22.</span> FOODSIZE
= 20</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 23.</span> player =
pygame.Rect(300, 100, 50, 50)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 24.</span> foods =
[]</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 25.</span> for i in
range(20):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 26.</span>    
foods.append(pygame.Rect(random.randint(0, WINDOWWIDTH - FOODSIZE),
random.randint(0, WINDOWHEIGHT - FOODSIZE), FOODSIZE, FOODSIZE))</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 27. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 28.</span> <span
class=SourceCodeComment># set up movement variables</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 29.</span> moveLeft
= False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 30.</span>
moveRight = False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 31.</span> moveUp =
False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 32.</span> moveDown
= False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 33. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 34.</span>
MOVESPEED = 6</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 35. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 36. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 37.</span> <span
class=SourceCodeComment># run the game loop</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 38.</span> while
True:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 39.</span>     <span
class=SourceCodeComment># check for events</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 40.</span>     for
event in pygame.event.get():</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 41.</span>        
if event.type == QUIT:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 42.</span>            
pygame.quit()</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 43.</span>            
sys.exit()</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 44.</span>        
if event.type == KEYDOWN:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 45.</span>            
<span class=SourceCodeComment># change the keyboard variables</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 46.</span>            
if event.key == K_LEFT or event.key == ord('a'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 47.</span>                
moveRight = False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 48.</span>                
moveLeft = True</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 49.</span>            
if event.key == K_RIGHT or event.key == ord('d'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 50.</span>                
moveLeft = False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 51.</span>                
moveRight = True</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 52.</span>            
if event.key == K_UP or event.key == ord('w'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 53.</span>                
moveDown = False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 54.</span>                 moveUp
= True</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 55.</span>            
if event.key == K_DOWN or event.key == ord('s'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 56.</span>                
moveUp = False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 57.</span>                
moveDown = True</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 58.</span>        
if event.type == KEYUP:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 59.</span>            
if event.key == K_ESCAPE:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 60.</span>                 pygame.quit()</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 61.</span>                
sys.exit()</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 62.</span>            
if event.key == K_LEFT or event.key == ord('a'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 63.</span>                
moveLeft = False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 64.</span>            
if event.key == K_RIGHT or event.key == ord('d'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 65.</span>                
moveRight = False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 66.</span>            
if event.key == K_UP or event.key == ord('w'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 67.</span>                
moveUp = False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 68.</span>            
if event.key == K_DOWN or event.key == ord('s'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 69.</span>                
moveDown = False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 70.</span>            
if event.key == ord('x'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 71.</span>                
player.top = random.randint(0, WINDOWHEIGHT - player.height)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 72.</span>                
player.left = random.randint(0, WINDOWWIDTH - player.width)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 73. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 74.</span>        
if event.type == MOUSEBUTTONUP:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 75.</span>            
foods.append(pygame.Rect(event.pos[0], event.pos[1], FOODSIZE, FOODSIZE))</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 76. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 77.</span>    
foodCounter += 1</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 78.</span>     if
foodCounter &gt;= NEWFOOD:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 79.</span>         <span
class=SourceCodeComment># add new food</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 80.</span>        
foodCounter = 0</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 81.</span>        
foods.append(pygame.Rect(random.randint(0, WINDOWWIDTH - FOODSIZE),
random.randint(0, WINDOWHEIGHT - FOODSIZE), FOODSIZE, FOODSIZE))</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 82. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 83.</span>     <span
class=SourceCodeComment># draw the black background onto the surface</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 84.</span>    
windowSurface.fill(BLACK)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 85. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 86.</span>     <span
class=SourceCodeComment># move the player</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 87.</span>     if
moveDown and player.bottom &lt; WINDOWHEIGHT:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 88.</span>        
player.top += MOVESPEED</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 89.</span>     if
moveUp and player.top &gt; 0:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 90.</span>        
player.top -= MOVESPEED</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 91.</span>     if
moveLeft and player.left &gt; 0:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 92.</span>        
player.left -= MOVESPEED</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 93.</span>     if
moveRight and player.right &lt; WINDOWWIDTH:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 94.</span>        
player.right += MOVESPEED</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 95. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 96.</span>     <span
class=SourceCodeComment># draw the player onto the surface</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 97.</span>    
pygame.draw.rect(windowSurface, WHITE, player)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 98.</span> </p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 99.</span>     <span
class=SourceCodeComment># check if the player has intersected with any food
squares.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>100.</span>     for
food in foods[:]:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>101.</span>        
if player.colliderect(food):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>102.</span>            
foods.remove(food)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>103. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>104.</span>     <span
class=SourceCodeComment># draw the food</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>105.</span>     for
i in range(len(foods)):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>106.</span>        
pygame.draw.rect(windowSurface, GREEN, foods[i])</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>107. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>108.</span>     <span
class=SourceCodeComment># draw the window onto the screen</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>109.</span>    
pygame.display.update()</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>110.</span>    
mainClock.tick(40)</p>

</div>

<p class=Body>This program is almost identical to the collision detection
program. But in this program, the bouncer only moves around when the user holds
down the arrow keys on the keyboard.</p>

<p class=Body>You can also click anywhere in the window and create new food
objects. In addition, the <span class=Keycap><span style='font-variant:normal !important;
text-transform:uppercase'>esc</span></span> key will quit the program and the
“X” key will teleport the player to a random place on the screen.</p>

<p class=Non-TOCHeading3>Setting Up the Window and Data Structures</p>

<p class=Body>Starting at line 29, the code sets up some variables that track
the movement of the bouncer.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber> 28.</span> <span
class=SourceCodeComment># set up movement variables</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 29.</span> moveLeft
= False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 30.</span>
moveRight = False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 31.</span> moveUp =
False</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber> 32.</span> moveDown =
False</p>

</div>

<p class=Body>The four variables have Boolean values to keep track of which of
the arrow keys are being held down. For example, when the user pushes the left
arrow key on their keyboard, <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>moveLeft</span></span> is set to <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>True</span></span>. When they let go
of the key, <span class=Literal><span style='font-size:9.0pt;line-height:115%'>moveLeft</span></span>
is set back to <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>False</span></span>.</p>

<p class=Body>Lines 34 to 43 are identical to code in the previous Pygame
programs. These lines handle the start of the game loop and what to do when the
user quits the program. We’ll skip the explanation for this code here since we
have already covered it in the last chapter.</p>

<p class=Non-TOCHeading3>Events and Handling the <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>KEYDOWN</span></span> Event</p>

<p class=Body>The code to handle the key press and key release events start on
line 44. At the start of the program, they are all set to <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>False</span></span>.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCode><span class=SourceLineNumber> 44.</span>         if
event.type == KEYDOWN:</p>

</div>

<p class=Body>Pygame has an event type called <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>KEYDOWN</span></span>. This is one of
the other events that Pygame can generate. A brief list of the events that
could be returned by <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>pygame.event.get()</span></span> is in Table 18-1.</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='font-family:"Calibri","sans-serif"'>&nbsp;</span></p>

<p class=TableListing>Table 18-1: Events and when they are generated.</p>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=227 valign=top style='width:135.9pt;border-top:double windowtext 1.5pt;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:none;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=TableHeading style='page-break-after:avoid'>Event Type</p>
  </td>
  <td width=572 valign=top style='width:342.9pt;border-top:double windowtext 1.5pt;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:none;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=TableHeading style='page-break-after:avoid'>Description</p>
  </td>
 </tr>
 <tr>
  <td width=227 valign=top style='width:135.9pt;border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='page-break-after:avoid'><span class=Literal><span
  style='font-size:9.0pt;line-height:115%'>QUIT</span></span></p>
  </td>
  <td width=572 valign=top style='width:342.9pt;border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='page-break-after:avoid'>Generated when the user
  closes the window.</p>
  </td>
 </tr>
 <tr>
  <td width=227 valign=top style='width:135.9pt;border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='page-break-after:avoid'><span class=Literal><span
  style='font-size:9.0pt;line-height:115%'>KEYDOWN</span></span></p>
  </td>
  <td width=572 valign=top style='width:342.9pt;border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='page-break-after:avoid'>Generated when the user
  presses down a key. Has a <span class=Literal><span style='font-size:9.0pt;
  line-height:115%'>key</span></span> attribute that tells which key was
  pressed. Also has a <span class=Literal><span style='font-size:9.0pt;
  line-height:115%'>mod</span></span> attribute that tells if the Shift, Ctrl,
  Alt, or other keys were held down when this key was pressed.</p>
  </td>
 </tr>
 <tr>
  <td width=227 valign=top style='width:135.9pt;border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='page-break-after:avoid'><span class=Literal><span
  style='font-size:9.0pt;line-height:115%'>KEYUP</span></span></p>
  </td>
  <td width=572 valign=top style='width:342.9pt;border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='page-break-after:avoid'>Generated when the user
  releases a key. Has a <span class=Literal><span style='font-size:9.0pt;
  line-height:115%'>key</span></span> and <span class=Literal><span
  style='font-size:9.0pt;line-height:115%'>mod</span></span> attribute that are
  similar to those for <span class=Literal><span style='font-size:9.0pt;
  line-height:115%'>KEYDOWN</span></span>.</p>
  </td>
 </tr>
 <tr>
  <td width=227 valign=top style='width:135.9pt;border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='page-break-after:avoid'><span class=Literal><span
  style='font-size:9.0pt;line-height:115%'>MOUSEMOTION</span></span></p>
  </td>
  <td width=572 valign=top style='width:342.9pt;border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='page-break-after:avoid'>Generated whenever the
  mouse moves over the window. Has a <span class=Literal><span
  style='font-size:9.0pt;line-height:115%'>pos</span></span> attribute that
  returns tuple (x, y) for the coordinates of where the mouse is in the window.
  The <span class=Literal><span style='font-size:9.0pt;line-height:115%'>rel</span></span>
  attribute also returns a (x, y) tuple, but it gives coordinates relative
  since the last <span class=Literal><span style='font-size:9.0pt;line-height:
  115%'>MOUSEMOTION</span></span> event. For example, if the mouse moves left
  by four pixels from (200, 200) to (196, 200), then <span class=Literal><span
  style='font-size:9.0pt;line-height:115%'>rel</span></span> will be the tuple
  value <span class=Literal><span style='font-size:9.0pt;line-height:115%'>(-4,
  0)</span></span>.</p>
  <p class=MsoNormal style='page-break-after:avoid'>The <span class=Literal><span
  style='font-size:9.0pt;line-height:115%'>buttons</span></span> attribute
  returns a tuple of three integers. The first integer in the tuple is for the
  left mouse button, the second integer for the middle mouse button (if there’s
  a middle mouse button), and the third integer is for the right mouse button.
  These integers will be <span class=Literal><span style='font-size:9.0pt;
  line-height:115%'>0</span></span> if they are not being pressed down when the
  mouse moved and <span class=Literal><span style='font-size:9.0pt;line-height:
  115%'>1</span></span> if they are pressed down.</p>
  </td>
 </tr>
 <tr>
  <td width=227 valign=top style='width:135.9pt;border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='page-break-after:avoid'><span class=Literal><span
  style='font-size:9.0pt;line-height:115%'>MOUSEBUTTONDOWN</span></span></p>
  </td>
  <td width=572 valign=top style='width:342.9pt;border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal style='page-break-after:avoid'>Generated when a mouse
  button is pressed down in the window. This event has a <span class=Literal><span
  style='font-size:9.0pt;line-height:115%'>pos</span></span> attribute which is
  an (x, y) tuple for the coordinates of where the mouse was when the button
  was pressed. There is also a <span class=Literal><span style='font-size:9.0pt;
  line-height:115%'>button</span></span> attribute which is an integer from <span
  class=Literal><span style='font-size:9.0pt;line-height:115%'>1</span></span>
  to <span class=Literal><span style='font-size:9.0pt;line-height:115%'>5</span></span>
  that tells which mouse button was pressed, explained in Table 18-2.</p>
  </td>
 </tr>
 <tr>
  <td width=227 valign=top style='width:135.9pt;border:none;border-bottom:double windowtext 1.5pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><span class=Literal><span style='font-size:9.0pt;
  line-height:115%'>MOUSEBUTTONUP</span></span></p>
  </td>
  <td width=572 valign=top style='width:342.9pt;border:none;border-bottom:double windowtext 1.5pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal>Generated when the mouse button is released. This has the
  same attributes as <span class=Literal><span style='font-size:9.0pt;
  line-height:115%'>MOUSEBUTTONDOWN</span></span>.</p>
  </td>
 </tr>
</table>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal><span style='font-family:"Calibri","sans-serif"'>&nbsp;</span></p>

<p class=TableListing>Table 18-2: The <span class=Literal><span
style='font-size:9.0pt'>button</span></span> attribute values and mouse button.</p>

<div align=center>

<table class=MsoNormalTable border=1 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=276 valign=top style='width:165.65pt;border-top:double windowtext 1.5pt;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:none;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=TableHeading style='page-break-after:avoid'>Value of <span
  class=Literal><span style='font-size:9.0pt'>button</span></span></p>
  </td>
  <td width=276 valign=top style='width:165.7pt;border-top:double windowtext 1.5pt;
  border-left:none;border-bottom:solid windowtext 1.0pt;border-right:none;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=TableHeading style='page-break-after:avoid'>Mouse Button</p>
  </td>
 </tr>
 <tr>
  <td width=276 valign=top style='width:165.65pt;border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center;page-break-after:
  avoid'>1</p>
  </td>
  <td width=276 valign=top style='width:165.7pt;border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center;page-break-after:
  avoid'>Left button</p>
  </td>
 </tr>
 <tr>
  <td width=276 valign=top style='width:165.65pt;border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center;page-break-after:
  avoid'>2</p>
  </td>
  <td width=276 valign=top style='width:165.7pt;border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center;page-break-after:
  avoid'>Middle button</p>
  </td>
 </tr>
 <tr>
  <td width=276 valign=top style='width:165.65pt;border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center;page-break-after:
  avoid'>3</p>
  </td>
  <td width=276 valign=top style='width:165.7pt;border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center;page-break-after:
  avoid'>Right button</p>
  </td>
 </tr>
 <tr>
  <td width=276 valign=top style='width:165.65pt;border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center;page-break-after:
  avoid'>4</p>
  </td>
  <td width=276 valign=top style='width:165.7pt;border:none;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center;page-break-after:
  avoid'>Scroll wheel moved up</p>
  </td>
 </tr>
 <tr>
  <td width=276 valign=top style='width:165.65pt;border:none;border-bottom:
  double windowtext 1.5pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center;page-break-after:
  avoid'>5</p>
  </td>
  <td width=276 valign=top style='width:165.7pt;border:none;border-bottom:double windowtext 1.5pt;
  padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center;page-break-after:
  avoid'>Scroll wheel moved down</p>
  </td>
 </tr>
</table>

</div>

<p class=Body>&nbsp;</p>

<p class=Non-TOCHeading3>Setting the Four Keyboard Variables</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber> 45.</span>            
<span class=SourceCodeComment># change the keyboard variables</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 46.</span>            
if event.key == K_LEFT or event.key == ord('a'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 47.</span>                
moveRight = False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 48.</span>                
moveLeft = True</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 49.</span>            
if event.key == K_RIGHT or event.key == ord('d'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 50.</span>                
moveLeft = False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 51.</span>                
moveRight = True</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 52.</span>            
if event.key == K_UP or event.key == ord('w'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 53.</span>                
moveDown = False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 54.</span>                
moveUp = True</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 55.</span>            
if event.key == K_DOWN or event.key == ord('s'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 56.</span>                
moveUp = False</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber> 57.</span>                
moveDown = True</p>

</div>

<p class=Body>If the event type is <span class=Literal><span style='font-size:
9.0pt;line-height:115%'>KEYDOWN</span></span>, then the event object will have
a <span class=Literal><span style='font-size:9.0pt;line-height:115%'>key</span></span>
attribute that tells which key was pressed down. Line 46 compares this
attribute to <span class=Literal><span style='font-size:9.0pt;line-height:115%'>K_LEFT</span></span>,
which is the <span class=Literal><span style='font-size:9.0pt;line-height:115%'>pygame.locals</span></span>
constant that represents the left arrow key on the keyboard. Lines 46 to 57 do
similar checks for each of the other arrow keys: <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>K_LEFT</span></span>, <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>K_RIGHT</span></span>,
<span class=Literal><span style='font-size:9.0pt;line-height:115%'>K_UP</span></span>,
<span class=Literal><span style='font-size:9.0pt;line-height:115%'>K_DOWN</span></span>.</p>

<p class=Body>When one of these keys is pressed down, set the corresponding
movement variable to <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>True</span></span>. Also, set the movement variable of the
opposite direction to <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>False</span></span>.</p>

<p class=Body>For example, the program executes lines 47 and 48 when the left
arrow key has been pressed. In this case, set <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>moveLeft</span></span> to <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>True</span></span>
and <span class=Literal><span style='font-size:9.0pt;line-height:115%'>moveRight</span></span>
to <span class=Literal><span style='font-size:9.0pt;line-height:115%'>False</span></span>
(even though <span class=Literal><span style='font-size:9.0pt;line-height:115%'>moveRight</span></span>
might already be <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>False</span></span>, set it to <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>False</span></span> just to be sure).</p>

<p class=Body>On line 46, in <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>event.key</span></span> can either be equal to <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>K_LEFT</span></span>
or <span class=Literal><span style='font-size:9.0pt;line-height:115%'>ord('a')</span></span>.
The value in <span class=Literal><span style='font-size:9.0pt;line-height:115%'>event.key</span></span>
is set to the integer ordinal value of the key that was pressed on the
keyboard. (There is no ordinal value for the arrow keys, which is why we use
the constant variable <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>K_LEFT</span></span>.) You can use the <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>ord()</span></span> function to get
the ordinal value of any single character to compare it with <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>event.key</span></span>.</p>

<p class=Body>By executing the code on lines 47 and 48 if the keystroke was
either <span class=Literal><span style='font-size:9.0pt;line-height:115%'>K_LEFT</span></span>
or <span class=Literal><span style='font-size:9.0pt;line-height:115%'>ord('a')</span></span>,
you make the left arrow key and the A key do the same thing. The W, A, S, and D
keys are all used as alternates for changing the movement variables. The WASD
(pronounced “wazz-dee”) keys let you use your left hand. The arrow keys can be
pressed with your right hand.</p>

<p class=MsoNormal align=center style='text-align:center'><img width=331
height=113 id="Picture 77" src="chapter18_files/image006.webp"></p>

<p class=MsoCaption>Figure 18-5: The WASD keys can be programmed to do the same
thing as the arrow keys.</p>

<p class=Non-TOCHeading3>Handling the <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>KEYUP</span></span> Event</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCode><span class=SourceLineNumber> 58.</span>         if
event.type == KEYUP:</p>

</div>

<p class=Body>When the user releases the key that they are holding down, a <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>KEYUP</span></span>
event is generated.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber> 59.</span>            
if event.key == K_ESCAPE:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 60.</span>                
pygame.quit()</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber> 61.</span>                
sys.exit()</p>

</div>

<p class=Body>If the key that the user released was the <span class=Keycap><span
style='font-variant:normal !important;text-transform:uppercase'>esc</span></span>
key, then terminate the program. Remember, in Pygame you must call the <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>pygame.quit()</span></span>
function before calling the <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>sys.exit()</span></span> function.</p>

<p class=Body>Lines 62 to 69 will set a movement variable to <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>False</span></span>
if that direction’s key was let go.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber> 62.</span>            
if event.key == K_LEFT or event.key == ord('a'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 63.</span>                
moveLeft = False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 64.</span>            
if event.key == K_RIGHT or event.key == ord('d'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 65.</span>                
moveRight = False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 66.</span>            
if event.key == K_UP or event.key == ord('w'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 67.</span>                
moveUp = False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 68.</span>            
if event.key == K_DOWN or event.key == ord('s'):</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber> 69.</span>                
moveDown = False</p>

</div>

<p class=Non-TOCHeading3>Teleporting the Player</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber> 70.</span>            
if event.key == ord('x'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 71.</span>                
player.top = random.randint(0, WINDOWHEIGHT - player.height)</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber> 72.</span>                
player.left = random.randint(0, WINDOWWIDTH - player.width)</p>

</div>

<p class=Body>You can also add teleportation to the game. If the user presses
the “X” key, then lines 71 and 72 will set the position of the user’s square to
a random place on the window. This will give the user the ability to teleport
around the window by pushing the “X” key. Although they can’t control where
they will teleport; it’s completely random.</p>

<p class=Non-TOCHeading3>Handling the MOUSEBUTTONUP Event</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber> 74.</span>        
if event.type == MOUSEBUTTONUP:</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber> 75.</span>            
foods.append(pygame.Rect(event.pos[0], event.pos[1], FOODSIZE, FOODSIZE))</p>

</div>

<p class=Body>Mouse input is handled by events just like keyboard input is. The
<span class=Literal><span style='font-size:9.0pt;line-height:115%'>MOUSEBUTTONUP</span></span>
event occurs when the user releases the mouse button after clicking it. The <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>pos</span></span>
attribute in the Event object is set to a tuple of two integers for the XY
coordinates for where the mouse cursor was at the time of the click.</p>

<p class=Body>On line 75, the X-coordinate is stored in <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>event.pos[0]</span></span> and the
Y-coordinate is stored in <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>event.pos[1]</span></span>. Line 75 creates a new Rect object
to represent a new food and place it where the <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>MOUSEBUTTONUP</span></span> event
occurred. By adding a new Rect object to the <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>foods</span></span> list, the code
will display a new food square is displayed on the screen.</p>

<p class=Non-TOCHeading3>Moving the Player Around the Screen</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber> 86.</span>     <span
class=SourceCodeComment># move the player</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 87.</span>     if
moveDown and player.bottom &lt; WINDOWHEIGHT:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 88.</span>        
player.top += MOVESPEED</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 89.</span>     if
moveUp and player.top &gt; 0:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 90.</span>        
player.top -= MOVESPEED</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 91.</span>     if
moveLeft and player.left &gt; 0:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 92.</span>        
player.left -= MOVESPEED</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 93.</span>     if
moveRight and player.right &lt; WINDOWWIDTH:</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber> 94.</span>        
player.right += MOVESPEED</p>

</div>

<p class=Body>You’ve set the movement variables (<span class=Literal><span
style='font-size:9.0pt;line-height:115%'>moveDown</span></span>, <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>moveUp</span></span>,
<span class=Literal><span style='font-size:9.0pt;line-height:115%'>moveLeft</span></span>,
and <span class=Literal><span style='font-size:9.0pt;line-height:115%'>moveRight</span></span>)
to <span class=Literal><span style='font-size:9.0pt;line-height:115%'>True</span></span>
or <span class=Literal><span style='font-size:9.0pt;line-height:115%'>False</span></span>
depending on what keys the user has pressed. Now move the player’s square
(which is represented by the <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>pygame.Rect</span></span> object stored in <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>player</span></span>)
by adjusting XY coordinates of <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>player</span></span>.</p>

<p class=Body>If <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>moveDown</span></span> is set to <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>True</span></span> (and the bottom of
the player’s square isn’t below the bottom edge of the window), then line 88
moves the player’s square down by adding <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>MOVESPEED</span></span> to the
player’s current <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>top</span></span> attribute. Lines 89 to 94 do the same thing for the
other three directions.</p>

<h2><a name="_Toc405145187">The </a><span class=Literal><span style='font-size:
9.0pt;line-height:115%'>colliderect()</span></span> Method</h2>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber> 99.</span>     <span
class=SourceCodeComment># check if the player has intersected with any food
squares.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>100.</span>     for
food in foods[:]:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>101.</span>        
if player.colliderect(food):</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>102.</span>            
foods.remove(food)</p>

</div>

<p class=Body>In the previous Collision Detection program, the <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>doRectsOverlap()</span></span>
function to check if one rectangle had collided with another. That function was
included in this book so you could understand how the code behind collision
detection works.</p>

<p class=Body>In this program, you can use the collision detection function
that comes with Pygame. The <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>colliderect()</span></span> method for <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>pygame.Rect</span></span> objects is
passed another <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>pygame.Rect</span></span> object as an argument and returns <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>True</span></span>
if the two rectangles collide and <span class=Literal><span style='font-size:
9.0pt;line-height:115%'>False</span></span> if they do not.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCode><span class=SourceLineNumber>110.</span>    
mainClock.tick(40)</p>

</div>

<p class=Body>The rest of the code is similar to the code in the Input and
Collision Detection programs.</p>

<p class=Non-TOCHeading3>Summary</p>

<p class=Body>This chapter introduced the concept of collision detection, which
is in many graphical games. Detecting collisions between two rectangles is
easy: check if the four corners of either rectangle are within the other
rectangle. This is such a common thing to check for that Pygame provides its
own collision detection method named <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>colliderect()</span></span> for <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>pygame.Rect</span></span>
objects.</p>

<p class=Body>The first several games in this book were text-based. The program
output was text printed to the screen and the input was text typed by the user
on the keyboard. But graphical programs can accept keyboard and mouse inputs.</p>

<p class=MsoNormal>Furthermore, these programs can respond to single keystrokes
when the user pushes down or lets up a single key. The user doesn’t have to
type in an entire response and press <span class=Keycap><span style='font-variant:
normal !important;text-transform:uppercase'>enter</span></span>. This allows
for immediate feedback and much more interactive games.</p>

</div>

</body>

</html>
