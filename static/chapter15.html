<html>

<head>
<meta http-equiv=Content-Type content="text/html; charset=utf-8">
<meta name=Generator content="Microsoft Word 14 (filtered)">
<style>
<!--
 /* Font Definitions */
 @font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Wingdings;
	panose-1:5 0 0 0 0 0 0 0 0 0;}
@font-face
	{font-family:Calibri;
	panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
	{font-family:Tahoma;
	panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
	{font-family:"Franklin Gothic Demi";
	panose-1:2 11 7 3 2 1 2 2 2 4;}
@font-face
	{font-family:"Lucida Sans Typewriter";
	panose-1:2 11 5 9 3 5 4 3 2 4;}
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:0in;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
h1
	{mso-style-link:"Heading 1 Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:24.0pt;
	margin-left:0in;
	line-height:115%;
	page-break-after:avoid;
	font-size:36.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";
	font-variant:small-caps;
	font-weight:bold;}
h2
	{mso-style-link:"Heading 2 Char";
	margin-top:10.0pt;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:0in;
	line-height:115%;
	page-break-after:avoid;
	font-size:16.0pt;
	font-family:"Calibri","sans-serif";
	color:#1F497D;
	font-weight:bold;}
h3
	{mso-style-link:"Heading 3 Char";
	margin-top:10.0pt;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:0in;
	line-height:115%;
	page-break-after:avoid;
	font-size:14.0pt;
	font-family:"Calibri","sans-serif";
	color:#1F497D;
	font-weight:bold;
	font-style:italic;}
p.MsoToc1, li.MsoToc1, div.MsoToc1
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:0in;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.MsoToc2, li.MsoToc2, div.MsoToc2
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:11.0pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.MsoToc3, li.MsoToc3, div.MsoToc3
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:22.0pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.MsoToc4, li.MsoToc4, div.MsoToc4
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:33.0pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoToc5, li.MsoToc5, div.MsoToc5
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:44.0pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoToc6, li.MsoToc6, div.MsoToc6
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:55.0pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoToc7, li.MsoToc7, div.MsoToc7
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:66.0pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoToc8, li.MsoToc8, div.MsoToc8
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:77.0pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoToc9, li.MsoToc9, div.MsoToc9
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:5.0pt;
	margin-left:88.0pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoHeader, li.MsoHeader, div.MsoHeader
	{mso-style-link:"Header Char";
	margin:0in;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.MsoFooter, li.MsoFooter, div.MsoFooter
	{mso-style-link:"Footer Char";
	margin:0in;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.MsoCaption, li.MsoCaption, div.MsoCaption
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:0in;
	text-align:center;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.MsoTitle, li.MsoTitle, div.MsoTitle
	{mso-style-link:"Title Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:15.0pt;
	margin-left:0in;
	border:none;
	padding:0in;
	font-size:48.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";
	letter-spacing:.25pt;}
p.MsoTitleCxSpFirst, li.MsoTitleCxSpFirst, div.MsoTitleCxSpFirst
	{mso-style-link:"Title Char";
	margin:0in;
	margin-bottom:.0001pt;
	border:none;
	padding:0in;
	font-size:48.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";
	letter-spacing:.25pt;}
p.MsoTitleCxSpMiddle, li.MsoTitleCxSpMiddle, div.MsoTitleCxSpMiddle
	{mso-style-link:"Title Char";
	margin:0in;
	margin-bottom:.0001pt;
	border:none;
	padding:0in;
	font-size:48.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";
	letter-spacing:.25pt;}
p.MsoTitleCxSpLast, li.MsoTitleCxSpLast, div.MsoTitleCxSpLast
	{mso-style-link:"Title Char";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:15.0pt;
	margin-left:0in;
	border:none;
	padding:0in;
	font-size:48.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";
	letter-spacing:.25pt;}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;}
p
	{margin-right:0in;
	margin-left:0in;
	font-size:12.0pt;
	font-family:"Times New Roman","serif";}
p.MsoAcetate, li.MsoAcetate, div.MsoAcetate
	{mso-style-link:"Balloon Text Char";
	margin:0in;
	margin-bottom:.0001pt;
	font-size:8.0pt;
	font-family:"Tahoma","sans-serif";}
p.MsoNoSpacing, li.MsoNoSpacing, div.MsoNoSpacing
	{mso-style-link:"No Spacing Char";
	margin:0in;
	margin-bottom:.0001pt;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.MsoListParagraph, li.MsoListParagraph, div.MsoListParagraph
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:.5in;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.MsoListParagraphCxSpFirst, li.MsoListParagraphCxSpFirst, div.MsoListParagraphCxSpFirst
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.5in;
	margin-bottom:.0001pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.MsoListParagraphCxSpMiddle, li.MsoListParagraphCxSpMiddle, div.MsoListParagraphCxSpMiddle
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:0in;
	margin-left:.5in;
	margin-bottom:.0001pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.MsoListParagraphCxSpLast, li.MsoListParagraphCxSpLast, div.MsoListParagraphCxSpLast
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:.5in;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.MsoTocHeading, li.MsoTocHeading, div.MsoTocHeading
	{margin-top:0in;
	margin-right:0in;
	margin-bottom:24.0pt;
	margin-left:0in;
	line-height:115%;
	page-break-after:avoid;
	font-size:36.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";
	font-variant:small-caps;
	font-weight:bold;}
span.Heading1Char
	{mso-style-name:"Heading 1 Char";
	mso-style-link:"Heading 1";
	font-family:"Franklin Gothic Demi","sans-serif";
	font-variant:small-caps;
	font-weight:bold;}
span.Heading2Char
	{mso-style-name:"Heading 2 Char";
	mso-style-link:"Heading 2";
	font-family:"Times New Roman","serif";
	color:#1F497D;
	font-weight:bold;}
span.Definition
	{mso-style-name:Definition;
	font-family:"Calibri","sans-serif";
	font-weight:bold;}
span.URL
	{mso-style-name:URL;
	text-decoration:underline;}
span.Literal
	{mso-style-name:Literal;
	font-family:"Lucida Sans Typewriter";}
p.TopicsCoveredbox, li.TopicsCoveredbox, div.TopicsCoveredbox
	{mso-style-name:"Topics Covered box";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:0in;
	background:#DBE5F1;
	border:none;
	padding:0in;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.TopicsCoveredboxCxSpFirst, li.TopicsCoveredboxCxSpFirst, div.TopicsCoveredboxCxSpFirst
	{mso-style-name:"Topics Covered boxCxSpFirst";
	margin:0in;
	margin-bottom:.0001pt;
	background:#DBE5F1;
	border:none;
	padding:0in;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.TopicsCoveredboxCxSpMiddle, li.TopicsCoveredboxCxSpMiddle, div.TopicsCoveredboxCxSpMiddle
	{mso-style-name:"Topics Covered boxCxSpMiddle";
	margin:0in;
	margin-bottom:.0001pt;
	background:#DBE5F1;
	border:none;
	padding:0in;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.TopicsCoveredboxCxSpLast, li.TopicsCoveredboxCxSpLast, div.TopicsCoveredboxCxSpLast
	{mso-style-name:"Topics Covered boxCxSpLast";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:0in;
	background:#DBE5F1;
	border:none;
	padding:0in;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.CodeExample, li.CodeExample, div.CodeExample
	{mso-style-name:"Code Example";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:12.0pt;
	margin-left:0in;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
p.CodeExampleCxSpFirst, li.CodeExampleCxSpFirst, div.CodeExampleCxSpFirst
	{mso-style-name:"Code ExampleCxSpFirst";
	margin:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
p.CodeExampleCxSpMiddle, li.CodeExampleCxSpMiddle, div.CodeExampleCxSpMiddle
	{mso-style-name:"Code ExampleCxSpMiddle";
	margin:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
p.CodeExampleCxSpLast, li.CodeExampleCxSpLast, div.CodeExampleCxSpLast
	{mso-style-name:"Code ExampleCxSpLast";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:12.0pt;
	margin-left:0in;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
p.SourceCode, li.SourceCode, div.SourceCode
	{mso-style-name:"Source Code";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:12.0pt;
	margin-left:0in;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
p.SourceCodeCxSpFirst, li.SourceCodeCxSpFirst, div.SourceCodeCxSpFirst
	{mso-style-name:"Source CodeCxSpFirst";
	margin:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
p.SourceCodeCxSpMiddle, li.SourceCodeCxSpMiddle, div.SourceCodeCxSpMiddle
	{mso-style-name:"Source CodeCxSpMiddle";
	margin:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
p.SourceCodeCxSpLast, li.SourceCodeCxSpLast, div.SourceCodeCxSpLast
	{mso-style-name:"Source CodeCxSpLast";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:12.0pt;
	margin-left:0in;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
span.SourceLineNumber
	{mso-style-name:"Source Line Number";
	color:#7F7F7F;}
p.ImportantNote, li.ImportantNote, div.ImportantNote
	{mso-style-name:"Important Note";
	margin-top:0in;
	margin-right:.5in;
	margin-bottom:8.0pt;
	margin-left:.5in;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
p.ChapterNumber, li.ChapterNumber, div.ChapterNumber
	{mso-style-name:"Chapter Number";
	margin:0in;
	margin-bottom:.0001pt;
	font-size:26.0pt;
	font-family:"Franklin Gothic Demi","sans-serif";}
p.Body, li.Body, div.Body
	{mso-style-name:Body;
	margin-top:0in;
	margin-right:0in;
	margin-bottom:8.0pt;
	margin-left:0in;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
span.Keycap
	{mso-style-name:Keycap;
	font-variant:small-caps;
	color:blue;}
p.Non-TOCHeading3, li.Non-TOCHeading3, div.Non-TOCHeading3
	{mso-style-name:"Non-TOC Heading 3";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:10.0pt;
	margin-left:0in;
	line-height:115%;
	font-size:14.0pt;
	font-family:"Calibri","sans-serif";
	color:#1F497D;
	font-weight:bold;
	font-style:italic;}
span.BalloonTextChar
	{mso-style-name:"Balloon Text Char";
	mso-style-link:"Balloon Text";
	font-family:"Tahoma","sans-serif";}
p.TableHeading, li.TableHeading, div.TableHeading
	{mso-style-name:"Table Heading";
	margin:0in;
	margin-bottom:.0001pt;
	text-align:center;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";
	font-weight:bold;}
p.TableListing, li.TableListing, div.TableListing
	{mso-style-name:"Table Listing";
	margin:0in;
	margin-bottom:.0001pt;
	text-align:center;
	font-size:11.0pt;
	font-family:"Calibri","sans-serif";}
p.SampleRun, li.SampleRun, div.SampleRun
	{mso-style-name:"Sample Run";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:12.0pt;
	margin-left:0in;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
p.SampleRunCxSpFirst, li.SampleRunCxSpFirst, div.SampleRunCxSpFirst
	{mso-style-name:"Sample RunCxSpFirst";
	margin:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
p.SampleRunCxSpMiddle, li.SampleRunCxSpMiddle, div.SampleRunCxSpMiddle
	{mso-style-name:"Sample RunCxSpMiddle";
	margin:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
p.SampleRunCxSpLast, li.SampleRunCxSpLast, div.SampleRunCxSpLast
	{mso-style-name:"Sample RunCxSpLast";
	margin-top:0in;
	margin-right:0in;
	margin-bottom:12.0pt;
	margin-left:0in;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:9.0pt;
	font-family:"Lucida Sans Typewriter";}
span.SampleRunResponse
	{mso-style-name:"Sample Run Response";
	color:#1F497D;
	font-weight:bold;}
span.SourceCodeComment
	{mso-style-name:"Source Code Comment";
	color:#7F7F7F;}
span.FigureImageBorder
	{mso-style-name:"Figure Image Border";
	border:solid windowtext 1.0pt;
	padding:0in;}
p.SourceCodeFilename, li.SourceCodeFilename, div.SourceCodeFilename
	{mso-style-name:"Source Code Filename";
	margin:0in;
	margin-bottom:.0001pt;
	text-align:right;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:"Lucida Sans Typewriter";}
p.SourceCodeFilenameCxSpFirst, li.SourceCodeFilenameCxSpFirst, div.SourceCodeFilenameCxSpFirst
	{mso-style-name:"Source Code FilenameCxSpFirst";
	margin:0in;
	margin-bottom:.0001pt;
	text-align:right;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:"Lucida Sans Typewriter";}
p.SourceCodeFilenameCxSpMiddle, li.SourceCodeFilenameCxSpMiddle, div.SourceCodeFilenameCxSpMiddle
	{mso-style-name:"Source Code FilenameCxSpMiddle";
	margin:0in;
	margin-bottom:.0001pt;
	text-align:right;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:"Lucida Sans Typewriter";}
p.SourceCodeFilenameCxSpLast, li.SourceCodeFilenameCxSpLast, div.SourceCodeFilenameCxSpLast
	{mso-style-name:"Source Code FilenameCxSpLast";
	margin:0in;
	margin-bottom:.0001pt;
	text-align:right;
	line-height:115%;
	border:none;
	padding:0in;
	font-size:12.0pt;
	font-family:"Lucida Sans Typewriter";}
span.Heading3Char
	{mso-style-name:"Heading 3 Char";
	mso-style-link:"Heading 3";
	font-family:"Times New Roman","serif";
	color:#1F497D;
	font-weight:bold;
	font-style:italic;}
span.NoSpacingChar
	{mso-style-name:"No Spacing Char";
	mso-style-link:"No Spacing";
	font-family:"Times New Roman","serif";}
span.HeaderChar
	{mso-style-name:"Header Char";
	mso-style-link:Header;
	font-family:"Times New Roman","serif";}
span.FooterChar
	{mso-style-name:"Footer Char";
	mso-style-link:Footer;
	font-family:"Times New Roman","serif";}
span.StrongBoxed
	{mso-style-name:"Strong & Boxed";
	border:solid windowtext 1.0pt;
	padding:0in;
	font-weight:bold;}
span.TitleChar
	{mso-style-name:"Title Char";
	mso-style-link:Title;
	font-family:"Franklin Gothic Demi","sans-serif";
	letter-spacing:.25pt;}
p.BodyFirst, li.BodyFirst, div.BodyFirst
	{mso-style-name:"Body First";
	margin:0in;
	margin-bottom:.0001pt;
	line-height:115%;
	font-size:11.0pt;
	font-family:"Times New Roman","serif";}
.MsoChpDefault
	{font-family:"Calibri","sans-serif";}
.MsoPapDefault
	{margin-bottom:10.0pt;
	line-height:115%;}
@page WordSection1
	{size:8.0in 10.0in;
	margin:1.0in 1.0in 1.0in 1.0in;}
div.WordSection1
	{page:WordSection1;}
 /* List Definitions */
 ol
	{margin-bottom:0in;}
ul
	{margin-bottom:0in;}
-->
</style>

</head>

<body lang=EN-US link=blue vlink=purple>


<div style='float: right; height: 310px; font-family: sans-serif;'>Ad: Programming books by Al Sweigart<br />
    <a href='http://www.nostarch.com/automatestuff' onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_automate.link');"><img src='/images/cover_automate_thumb.webp' style="height: 200px; border: solid black 1px;" /></a>
    <a href='http://www.amazon.com/gp/product/1503212300?ie=UTF8&tag=playwithpyth-20&linkCode=as2&camp=1789&creative=9325&creativeASIN=1503212300' onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_invent.link');"><img src='/images/cover_inventwithpython_thumb.webp' style="height: 200px; border: solid black 1px;" /></a>
    <a href='http://www.amazon.com/Making-Games-Python-Pygame-Sweigart/dp/1469901730?ie=UTF8&tag=playwithpyth-20&linkCode=as2&camp=1789&creative=9325&creativeASIN=1469901730' onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_pygame.link');"><img src='/images/cover_makinggames_thumb.webp' style="height: 200px; border: solid black 1px;" /></a>
    <a href='http://www.amazon.com/gp/product/1482614375/ref=as_li_qf_sp_asin_tl?ie=UTF8&camp=1789&creative=9325&creativeASIN=1482614375&linkCode=as2&tag=playwithpyth-20' onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_hacking.link');"><img src='/images/cover_hackingciphers_thumb.webp' style="height: 200px; border: solid black 1px;" /></a>
</div>


<div class=WordSection1>

<table class=MsoTableGrid border=0 cellspacing=0 cellpadding=0
 style='border-collapse:collapse;border:none'>
 <tr>
  <td width=101 rowspan=2 valign=top style='width:60.85pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=ChapterNumber><img width=84 height=96 id="Picture 156"
  src="chapter15_files/image001.webp"></p>
  </td>
  <td width=637 valign=top style='width:381.95pt;border:none;border-bottom:
  solid windowtext 1.0pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=ChapterNumber>Chapter 15</p>
  </td>
 </tr>
 <tr>
  <td width=637 valign=top style='width:381.95pt;border:none;padding:0in 5.4pt 0in 5.4pt'>
  <h1 style='line-height:normal'><a name="_Toc405145155"><span
  style='font-variant:normal !important;text-transform:uppercase'>Reversi</span></a></h1>
  </td>
 </tr>
</table>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt;
background:#DBE5F1'>

<p class=TopicsCoveredboxCxSpFirst style='background:#DBE5F1;border:none;
padding:0in'>Topics Covered In This Chapter:</p>

<p class=TopicsCoveredboxCxSpMiddle style='margin-left:.25in;text-indent:-.25in;
background:#DBE5F1;border:none;padding:0in'><span style='font-family:Symbol'>·<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>The <span class=Literal><span style='font-size:9.0pt'>bool()</span></span>
Function</p>

<p class=TopicsCoveredboxCxSpLast style='margin-left:.25in;text-indent:-.25in;
background:#DBE5F1;border:none;padding:0in'><span style='font-family:Symbol'>·<span
style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span>How to Play Reversi</p>

</div>

<p class=Body>In this chapter, we’ll make a game called Reversi (also called
Othello). Reversi is a board game that is played on a grid, so we’ll use a
Cartesian coordinate system with XY coordinates. It is a game played with two
players. Our version of the game will have a computer AI that is more advanced
than the AI we made for Tic Tac Toe. In fact, this AI is so good that it will
probably beat you almost every time you play. (I know I lose whenever I play
against it!)</p>

<p class=Body>Reversi has an 8 × 8 board and tiles that are black on one side
and white on the other (our game will use O’s and X’s instead). The starting
board looks like Figure 15-1. The black player and white player take turns
placing down a new tile of their color. Any of the opponent’s tiles that are
between the new tile and the other tiles of that color are flipped. The goal of
the game is to have as many of the tiles with your color as possible. For
example, Figure 15-2 is what it looks like if the white player places a new
white tile on space 5, 6.</p>

<div align=center>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0
 style='border-collapse:collapse'>
 <tr>
  <td width=399 valign=top style='width:239.4pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><img width=325 height=322 id="Picture 45"
  src="chapter15_files/image002.webp"
  alt="Description: C:\book1svn\4thed\images\15-1.webp"></p>
  </td>
  <td width=399 valign=top style='width:239.4pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal><img width=325 height=322 id="Picture 46"
  src="chapter15_files/image003.webp"
  alt="Description: C:\book1svn\4thed\images\15-2.webp"></p>
  </td>
 </tr>
 <tr>
  <td width=399 valign=top style='width:239.4pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoCaption>Figure 15-1: The starting Reversi board has two white
  tiles and two black tiles.</p>
  </td>
  <td width=399 valign=top style='width:239.4pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoCaption>Figure 15-2: White places a new tile.</p>
  </td>
 </tr>
</table>

</div>

<p class=Body>The black tile at 5, 5 is between the new white tile and the
existing white tile at 5, 4. That black tile is flipped over and becomes a new
white tile, making the board look like Figure 15-3. Black makes a similar move
next, placing a black tile on 4, 6 which flips the white tile at 4, 5. This
results in a board that looks like Figure 15-4.</p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0
 style='border-collapse:collapse'>
 <tr>
  <td width=399 valign=top style='width:239.4pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><img width=299
  height=297 id="Picture 47" src="chapter15_files/image004.webp"
  alt="Description: C:\book1svn\4thed\images\15-3.webp"></p>
  </td>
  <td width=399 valign=top style='width:239.4pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><img width=299
  height=297 id="Picture 48" src="chapter15_files/image005.webp"
  alt="Description: C:\book1svn\4thed\images\15-4.webp"></p>
  </td>
 </tr>
 <tr>
  <td width=399 valign=top style='width:239.4pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoCaption>Figure 15-3: White’s move will flip over one of black’s
  tiles.</p>
  </td>
  <td width=399 valign=top style='width:239.4pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoCaption>Figure 15-4: Black places a new tile, which flips over
  one of white’s tiles.</p>
  </td>
 </tr>
</table>

<p class=Body>Tiles in all directions are flipped as long as they are between
the player’s new tile and existing tile. In Figure 15-5, the white player
places a tile at 3, 6 and flips black tiles in both directions (marked by the
lines.) The result is in Figure 15-6.</p>

<table class=MsoNormalTable border=0 cellspacing=0 cellpadding=0
 style='border-collapse:collapse'>
 <tr>
  <td width=399 valign=top style='width:239.4pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><img width=305
  height=303 id="Picture 49" src="chapter15_files/image006.webp"
  alt="Description: C:\book1svn\4thed\images\15-5.webp"></p>
  </td>
  <td width=399 valign=top style='width:239.4pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoNormal align=center style='text-align:center'><img width=305
  height=303 id="Picture 50" src="chapter15_files/image007.webp"
  alt="Description: C:\book1svn\4thed\images\15-6.webp"></p>
  </td>
 </tr>
 <tr>
  <td width=399 valign=top style='width:239.4pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoCaption>Figure 15-5: White’s second move at 3, 6 will flip two of
  black’s tiles.</p>
  </td>
  <td width=399 valign=top style='width:239.4pt;padding:0in 5.4pt 0in 5.4pt'>
  <p class=MsoCaption>Figure 15-6: The board after white’s second move.</p>
  </td>
 </tr>
</table>

<p class=Body>Each player can quickly flip many tiles on the board in one or
two moves. Players must always make a move that captures at least one tile. The
game ends when a player either cannot make a move, or the board is completely
full. The player with the most tiles of their color wins.</p>

<p class=Body>The AI we make for this game will simply look for any corner
moves they can take. If there are no corner moves available, then the computer
will select the move that claims the most tiles.</p>

<h2><a name="_Toc405145156">Sample Run of Reversi</a></h2>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt'>

<p class=SampleRunCxSpFirst>Welcome to Reversi!</p>

<p class=SampleRunCxSpMiddle>Do you want to be X or O?</p>

<p class=SampleRunCxSpMiddle><span class=SampleRunResponse>x</span></p>

<p class=SampleRunCxSpMiddle>The player will go first.</p>

<p class=SampleRunCxSpMiddle>    1   2   3   4   5   6   7   8</p>

<p class=SampleRunCxSpMiddle>  +---+---+---+---+---+---+---+---+</p>

<p class=SampleRunCxSpMiddle>  |   |   |   |   |   |   |   |   |</p>

<p class=SampleRunCxSpMiddle>1 |   |   |   |   |   |   |   |   |</p>

<p class=SampleRunCxSpMiddle>  |   |   |   |   |   |   |   |   |</p>

<p class=SampleRunCxSpMiddle>  +---+---+---+---+---+---+---+---+</p>

<p class=SampleRunCxSpMiddle>  |   |   |   |   |   |   |   |   |</p>

<p class=SampleRunCxSpMiddle>2 |   |   |   |   |   |   |   |   |</p>

<p class=SampleRunCxSpMiddle>  |   |   |   |   |   |   |   |   |</p>

<p class=SampleRunCxSpMiddle>  +---+---+---+---+---+---+---+---+</p>

<p class=SampleRunCxSpMiddle>  |   |   |   |   |   |   |   |   |</p>

<p class=SampleRunCxSpMiddle>3 |   |   |   |   |   |   |   |   |</p>

<p class=SampleRunCxSpMiddle>  |   |   |   |   |   |   |   |   |</p>

<p class=SampleRunCxSpMiddle>  +---+---+---+---+---+---+---+---+</p>

<p class=SampleRunCxSpMiddle>  |   |   |   |   |   |   |   |   |</p>

<p class=SampleRunCxSpMiddle>4 |   |   |   | X | O |   |   |   |</p>

<p class=SampleRunCxSpMiddle>  |   |   |   |   |   |   |   |   |</p>

<p class=SampleRunCxSpMiddle>  +---+---+---+---+---+---+---+---+</p>

<p class=SampleRunCxSpMiddle>  |   |   |   |   |   |   |   |   |</p>

<p class=SampleRunCxSpMiddle>5 |   |   |   | O | X |   |   |   |</p>

<p class=SampleRunCxSpMiddle>  |   |   |   |   |   |   |   |   |</p>

<p class=SampleRunCxSpMiddle>  +---+---+---+---+---+---+---+---+</p>

<p class=SampleRunCxSpMiddle>  |   |   |   |   |   |   |   |   |</p>

<p class=SampleRunCxSpMiddle>6 |   |   |   |   |   |   |   |   |</p>

<p class=SampleRunCxSpMiddle>  |   |   |   |   |   |   |   |   |</p>

<p class=SampleRunCxSpMiddle>  +---+---+---+---+---+---+---+---+</p>

<p class=SampleRunCxSpMiddle>  |   |   |   |   |   |   |   |   |</p>

<p class=SampleRunCxSpMiddle>7 |   |   |   |   |   |   |   |   |</p>

<p class=SampleRunCxSpMiddle>  |   |   |   |   |   |   |   |   |</p>

<p class=SampleRunCxSpMiddle>  +---+---+---+---+---+---+---+---+</p>

<p class=SampleRunCxSpMiddle>  |   |   |   |   |   |   |   |   |</p>

<p class=SampleRunCxSpMiddle>8 |   |   |   |   |   |   |   |   |</p>

<p class=SampleRunCxSpMiddle>  |   |   |   |   |   |   |   |   |</p>

<p class=SampleRunCxSpMiddle>  +---+---+---+---+---+---+---+---+</p>

<p class=SampleRunCxSpMiddle>You have 2 points. The computer has 2 points.</p>

<p class=SampleRunCxSpMiddle>Enter your move, or type quit to end the game, or
hints to turn off/on hints.</p>

<p class=SampleRunCxSpMiddle><span class=SampleRunResponse>53</span></p>

<p class=SampleRunCxSpMiddle>    1   2   3   4   5   6   7   8</p>

<p class=SampleRunCxSpMiddle>  +---+---+---+---+---+---+---+---+</p>

<p class=SampleRunCxSpMiddle>  |   |   |   |   |   |   |   |   |</p>

<p class=SampleRunCxSpMiddle>1 |   |   |   |   |   |   |   |   |</p>

<p class=SampleRunCxSpMiddle>  |   |   |   |   |   |   |   |   |</p>

<p class=SampleRunCxSpMiddle>  +---+---+---+---+---+---+---+---+</p>

<p class=SampleRunCxSpMiddle>  |   |   |   |   |   |   |   |   |</p>

<p class=SampleRunCxSpMiddle>2 |   |   |   |   |   |   |   |   |</p>

<p class=SampleRunCxSpMiddle>  |   |   |   |   |   |   |   |   |</p>

<p class=SampleRunCxSpMiddle>  +---+---+---+---+---+---+---+---+</p>

<p class=SampleRunCxSpMiddle>  |   |   |   |   |   |   |   |   |</p>

<p class=SampleRunCxSpMiddle>3 |   |   |   |   | X |   |   |   |</p>

<p class=SampleRunCxSpMiddle>  |   |   |   |   |   |   |   |   |</p>

<p class=SampleRunCxSpMiddle>  +---+---+---+---+---+---+---+---+</p>

<p class=SampleRunCxSpMiddle>  |   |   |   |   |   |   |   |   |</p>

<p class=SampleRunCxSpMiddle>4 |   |   |   | X | X |   |   |   |</p>

<p class=SampleRunCxSpMiddle>  |   |   |   |   |   |   |   |   |</p>

<p class=SampleRunCxSpMiddle>  +---+---+---+---+---+---+---+---+</p>

<p class=SampleRunCxSpMiddle>  |   |   |   |   |   |   |   |   |</p>

<p class=SampleRunCxSpMiddle>5 |   |   |   | O | X |   |   |   |</p>

<p class=SampleRunCxSpMiddle>  |   |   |   |   |   |   |   |   |</p>

<p class=SampleRunCxSpMiddle>  +---+---+---+---+---+---+---+---+</p>

<p class=SampleRunCxSpMiddle>  |   |   |   |   |   |   |   |   |</p>

<p class=SampleRunCxSpMiddle>6 |   |   |   |   |   |   |   |   |</p>

<p class=SampleRunCxSpMiddle>  |   |   |   |   |   |   |   |   |</p>

<p class=SampleRunCxSpMiddle>  +---+---+---+---+---+---+---+---+</p>

<p class=SampleRunCxSpMiddle>  |   |   |   |   |   |   |   |   |</p>

<p class=SampleRunCxSpMiddle>7 |   |   |   |   |   |   |   |   |</p>

<p class=SampleRunCxSpMiddle>  |   |   |   |   |   |   |   |   |</p>

<p class=SampleRunCxSpMiddle>  +---+---+---+---+---+---+---+---+</p>

<p class=SampleRunCxSpMiddle>  |   |   |   |   |   |   |   |   |</p>

<p class=SampleRunCxSpMiddle>8 |   |   |   |   |   |   |   |   |</p>

<p class=SampleRunCxSpMiddle>  |   |   |   |   |   |   |   |   |</p>

<p class=SampleRunCxSpMiddle>  +---+---+---+---+---+---+---+---+</p>

<p class=SampleRunCxSpMiddle>You have 4 points. The computer has 1 points.</p>

<p class=SampleRunCxSpMiddle>Press Enter to see the computer's move.</p>

<p class=SampleRunCxSpMiddle>&nbsp;</p>

<p class=SampleRunCxSpMiddle>...skipped for brevity...</p>

<p class=SampleRunCxSpMiddle>&nbsp;</p>

<p class=SampleRunCxSpMiddle>    1   2   3   4   5   6   7   8</p>

<p class=SampleRunCxSpMiddle>  +---+---+---+---+---+---+---+---+</p>

<p class=SampleRunCxSpMiddle>  |   |   |   |   |   |   |   |   |</p>

<p class=SampleRunCxSpMiddle>1 | O | O | O | O | O | O | O | O |</p>

<p class=SampleRunCxSpMiddle>  |   |   |   |   |   |   |   |   |</p>

<p class=SampleRunCxSpMiddle>  +---+---+---+---+---+---+---+---+</p>

<p class=SampleRunCxSpMiddle>  |   |   |   |   |   |   |   |   |</p>

<p class=SampleRunCxSpMiddle>2 | O | O | O | O | O | O | O | O |</p>

<p class=SampleRunCxSpMiddle>  |   |   |   |   |   |   |   |   |</p>

<p class=SampleRunCxSpMiddle>  +---+---+---+---+---+---+---+---+</p>

<p class=SampleRunCxSpMiddle>  |   |   |   |   |   |   |   |   |</p>

<p class=SampleRunCxSpMiddle>3 | O | O | O | O | O | O | O | O |</p>

<p class=SampleRunCxSpMiddle>  |   |   |   |   |   |   |   |   |</p>

<p class=SampleRunCxSpMiddle>  +---+---+---+---+---+---+---+---+</p>

<p class=SampleRunCxSpMiddle>  |   |   |   |   |   |   |   |   |</p>

<p class=SampleRunCxSpMiddle>4 | O | O | X | O | O | O | O | O |</p>

<p class=SampleRunCxSpMiddle>  |   |   |   |   |   |   |   |   |</p>

<p class=SampleRunCxSpMiddle>  +---+---+---+---+---+---+---+---+</p>

<p class=SampleRunCxSpMiddle>  |   |   |   |   |   |   |   |   |</p>

<p class=SampleRunCxSpMiddle>5 | O | O | O | X | O | X | O | X |</p>

<p class=SampleRunCxSpMiddle>  |   |   |   |   |   |   |   |   |</p>

<p class=SampleRunCxSpMiddle>  +---+---+---+---+---+---+---+---+</p>

<p class=SampleRunCxSpMiddle>  |   |   |   |   |   |   |   |   |</p>

<p class=SampleRunCxSpMiddle>6 | O | X | O | X | X | O | O |   |</p>

<p class=SampleRunCxSpMiddle>  |   |   |   |   |   |   |   |   |</p>

<p class=SampleRunCxSpMiddle>  +---+---+---+---+---+---+---+---+</p>

<p class=SampleRunCxSpMiddle>  |   |   |   |   |   |   |   |   |</p>

<p class=SampleRunCxSpMiddle>7 | O | X | X | O | O | O | O | O |</p>

<p class=SampleRunCxSpMiddle>  |   |   |   |   |   |   |   |   |</p>

<p class=SampleRunCxSpMiddle>  +---+---+---+---+---+---+---+---+</p>

<p class=SampleRunCxSpMiddle>  |   |   |   |   |   |   |   |   |</p>

<p class=SampleRunCxSpMiddle>8 | O | X | X | O |   |   | X |   |</p>

<p class=SampleRunCxSpMiddle>  |   |   |   |   |   |   |   |   |</p>

<p class=SampleRunCxSpMiddle>  +---+---+---+---+---+---+---+---+</p>

<p class=SampleRunCxSpMiddle>You have 12 points. The computer has 48 points.</p>

<p class=SampleRunCxSpMiddle>Enter your move, or type quit to end the game, or
hints to turn off/on hints.</p>

<p class=SampleRunCxSpMiddle><span class=SampleRunResponse>86</span></p>

<p class=SampleRunCxSpMiddle>X scored 15 points. O scored 46 points.</p>

<p class=SampleRunCxSpMiddle>You lost. The computer beat you by 31 points.</p>

<p class=SampleRunCxSpMiddle>Do you want to play again? (yes or no)</p>

<p class=SampleRunCxSpLast><span class=SampleRunResponse>no</span></p>

</div>

<p class=MsoNormal>As you can see, the AI was pretty good at beating me 46 to
15. To help the player out, we’ll program the game to provide hints. If the
player types <span class=Literal><span style='font-size:9.0pt;line-height:115%'>'hints'</span></span>
as their move, they can toggle the hints mode on and off. When hints mode is
on, all the possible moves the player can make will show up on the board as <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>'.'</span></span>
characters, like this:</p>

<p class=MsoNormal>&nbsp;</p>

<p class=MsoNormal>&nbsp;</p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt'>

<p class=CodeExampleCxSpFirst style='border:none;padding:0in'>    1   2   3  
4   5   6   7   8</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'> 
+---+---+---+---+---+---+---+---+</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>  |   |   |  
|   |   |   |   |   |</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>1 |   |   |  
|   |   |   |   |   |</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>  |   |   |  
|   |   |   |   |   |</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'> 
+---+---+---+---+---+---+---+---+</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>  |   |   |  
|   |   |   |   |   |</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>2 |   |   |   |
. |   | . |   |   |</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>  |   |   |  
|   |   |   |   |   |</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'> 
+---+---+---+---+---+---+---+---+</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>  |   |   |  
|   |   |   |   |   |</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>3 |   |   |   |
O | O | O |   |   |</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>  |   |   |  
|   |   |   |   |   |</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>  +---+---+---+---+---+---+---+---+</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>  |   |   |  
|   |   |   |   |   |</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>4 |   |   | . |
O | O | X |   |   |</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>  |   |   |  
|   |   |   |   |   |</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'> 
+---+---+---+---+---+---+---+---+</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>  |   |   |  
|   |   |   |   |   |</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>5 |   |   | . |
O | O | O | X |   |</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>  |   |   |  
|   |   |   |   |   |</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'> 
+---+---+---+---+---+---+---+---+</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>  |   |   |  
|   |   |   |   |   |</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>6 |   |   |   |
. |   | . |   |   |</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>  |   |   |  
|   |   |   |   |   |</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'> 
+---+---+---+---+---+---+---+---+</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>  |   |   |  
|   |   |   |   |   |</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>7 |   |   |   |  
|   |   |   |   |</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>  |   |   |  
|   |   |   |   |   |</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'> 
+---+---+---+---+---+---+---+---+</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>  |   |   |  
|   |   |   |   |   |</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>8 |   |   |  
|   |   |   |   |   |</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>  |   |   |  
|   |   |   |   |   |</p>

<p class=CodeExampleCxSpLast style='border:none;padding:0in'> 
+---+---+---+---+---+---+---+---+</p>

</div>

<h2><a name="_Toc405145157">Source Code of Reversi</a></h2>

<p class=Body>Reversi is a mammoth program compared to our previous games. It’s
over 300 lines long! But don’t worry, many of these lines are comments or blank
lines to space out the code and make it more readable.</p>

<p class=Body>As with our other programs, we’ll first create several functions
to carry out Reversi-related tasks that the main section will call. Roughly the
first 250 lines of code are for these helper functions, and the last 50 lines
of code implement the Reversi game itself.</p>

<p class=Body>If you get errors after typing this code in, compare the code you
typed to the book’s code with the online diff tool at <span class=URL><u>http://invpy.com/diff/reversi</u></span>.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeFilename>reversi.py</p>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>  1.</span> <span
class=SourceCodeComment># Reversi</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  2. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  3.</span> import
random</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  4.</span> import
sys</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  5.</span> </p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  6.</span> def
drawBoard(board):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  7.</span>     <span
class=SourceCodeComment># This function prints out the board that it was
passed. Returns None.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  8.</span>    
HLINE = '  +---+---+---+---+---+---+---+---+'</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  9.</span>    
VLINE = '  |   |   |   |   |   |   |   |   |'</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 10. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 11.</span>    
print('    1   2   3   4   5   6   7   8')</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 12.</span>    
print(HLINE)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 13.</span>     for
y in range(8):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 14.</span>        
print(VLINE)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 15.</span>        
print(y+1, end=' ')</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 16.</span>        
for x in range(8):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 17.</span>            
print('| %s' % (board[x][y]), end=' ')</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 18.</span>        
print('|')</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 19.</span>        
print(VLINE)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 20.</span>        
print(HLINE)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 21. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 22. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 23.</span> def
resetBoard(board):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 24.</span>     <span
class=SourceCodeComment># Blanks out the board it is passed, except for the
original starting position.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 25.</span>     for
x in range(8):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 26.</span>        
for y in range(8):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 27.</span>            
board[x][y] = ' '</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 28. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 29.</span>     <span
class=SourceCodeComment># Starting pieces:</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 30.</span>    
board[3][3] = 'X'</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 31.</span>    
board[3][4] = 'O'</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 32.</span>    
board[4][3] = 'O'</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 33.</span>    
board[4][4] = 'X'</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 34. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 35. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 36.</span> def
getNewBoard():</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 37.</span>     <span
class=SourceCodeComment># Creates a brand new, blank board data structure.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 38.</span>    
board = []</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 39.</span>     for
i in range(8):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 40.</span>        
board.append([' '] * 8)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 41. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 42.</span>    
return board</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 43. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 44. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 45.</span> def
isValidMove(board, tile, xstart, ystart):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 46.</span>     <span
class=SourceCodeComment># Returns False if the player's move on space xstart,
ystart is invalid.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 47.</span>     <span
class=SourceCodeComment># If it is a valid move, returns a list of spaces that
would become the player's if they made a move here.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 48.</span>     if
board[xstart][ystart] != ' ' or not isOnBoard(xstart, ystart):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 49.</span>        
return False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 50. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 51.</span>    
board[xstart][ystart] = tile <span class=SourceCodeComment># temporarily set
the tile on the board.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 52. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 53.</span>     if
tile == 'X':</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 54.</span>        
otherTile = 'O'</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 55.</span>    
else:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 56.</span>        
otherTile = 'X'</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 57. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 58.</span>    
tilesToFlip = []</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 59.</span>     for
xdirection, ydirection in [[0, 1], [1, 1], [1, 0], [1, -1], [0, -1], [-1, -1],
[-1, 0], [-1, 1]]:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 60.</span>        
x, y = xstart, ystart</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 61.</span>        
x += xdirection <span class=SourceCodeComment># first step in the direction</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 62.</span>        
y += ydirection <span class=SourceCodeComment># first step in the direction</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 63.</span>        
if isOnBoard(x, y) and board[x][y] == otherTile:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 64.</span>             <span
class=SourceCodeComment># There is a piece belonging to the other player next
to our piece.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 65.</span>            
x += xdirection</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 66.</span>            
y += ydirection</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 67.</span>            
if not isOnBoard(x, y):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 68.</span>                
continue</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 69.</span>            
while board[x][y] == otherTile:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 70.</span>                
x += xdirection</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 71.</span>                
y += ydirection</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 72.</span>                
if not isOnBoard(x, y): <span class=SourceCodeComment># break out of while
loop, then continue in for loop</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 73.</span>                    
break</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 74.</span>            
if not isOnBoard(x, y):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 75.</span>                
continue</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 76.</span>            
if board[x][y] == tile:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 77.</span>                
<span class=SourceCodeComment># There are pieces to flip over. Go in the
reverse direction until we reach the original space, noting all the tiles along
the way.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 78.</span>                
while True:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 79.</span>                    
x -= xdirection</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 80.</span>                    
y -= ydirection</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 81.</span>                    
if x == xstart and y == ystart:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 82.</span>                        
break</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 83.</span>                    
tilesToFlip.append([x, y])</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 84. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 85.</span>    
board[xstart][ystart] = ' ' <span class=SourceCodeComment># restore the empty
space</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 86.</span>     if
len(tilesToFlip) == 0: <span class=SourceCodeComment># If no tiles were
flipped, this is not a valid move.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 87.</span>        
return False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 88.</span>    
return tilesToFlip</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 89. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 90. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 91.</span> def
isOnBoard(x, y):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 92.</span>     <span
class=SourceCodeComment># Returns True if the coordinates are located on the
board.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 93.</span>    
return x &gt;= 0 and x &lt;= 7 and y &gt;= 0 and y &lt;=7</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 94. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 95. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 96.</span> def
getBoardWithValidMoves(board, tile):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 97.</span>     <span
class=SourceCodeComment># Returns a new board with . marking the valid moves
the given player can make.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 98.</span>    
dupeBoard = getBoardCopy(board)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 99. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>100.</span>     for
x, y in getValidMoves(dupeBoard, tile):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>101.</span>        
dupeBoard[x][y] = '.'</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>102.</span>    
return dupeBoard</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>103. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>104. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>105.</span> def
getValidMoves(board, tile):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>106.</span>     <span
class=SourceCodeComment># Returns a list of [x,y] lists of valid moves for the
given player on the given board.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>107.</span>    
validMoves = []</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>108. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>109.</span>     for
x in range(8):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>110.</span>        
for y in range(8):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>111.</span>            
if isValidMove(board, tile, x, y) != False:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>112.</span>                
validMoves.append([x, y])</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>113.</span>    
return validMoves</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>114. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>115. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>116.</span> def
getScoreOfBoard(board):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>117.</span>     <span
class=SourceCodeComment># Determine the score by counting the tiles. Returns a
dictionary with keys 'X' and 'O'.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>118.</span>    
xscore = 0</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>119.</span>    
oscore = 0</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>120.</span>     for
x in range(8):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>121.</span>        
for y in range(8):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>122.</span>             if
board[x][y] == 'X':</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>123.</span>                
xscore += 1</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>124.</span>            
if board[x][y] == 'O':</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>125.</span>                
oscore += 1</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>126.</span>    
return {'X':xscore, 'O':oscore}</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>127. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>128.</span> </p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>129.</span> def
enterPlayerTile():</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>130.</span>     <span
class=SourceCodeComment># Lets the player type which tile they want to be.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>131.</span>     <span
class=SourceCodeComment># Returns a list with the player's tile as the first
item, and the computer's tile as the second.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>132.</span>     tile
= ''</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>133.</span>    
while not (tile == 'X' or tile == 'O'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>134.</span>        
print('Do you want to be X or O?')</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>135.</span>        
tile = input().upper()</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>136. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>137.</span>     <span
class=SourceCodeComment># the first element in the list is the player's tile,
the second is the computer's tile.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>138.</span>     if
tile == 'X':</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>139.</span>        
return ['X', 'O']</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>140.</span>    
else:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>141.</span>        
return ['O', 'X']</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>142. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>143. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>144.</span> def
whoGoesFirst():</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>145.</span>     <span
class=SourceCodeComment># Randomly choose the player who goes first.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>146.</span>     if
random.randint(0, 1) == 0:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>147.</span>        
return 'computer'</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>148.</span>    
else:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>149.</span>        
return 'player'</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>150. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>151. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>152.</span> def playAgain():</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>153.</span>     <span
class=SourceCodeComment># This function returns True if the player wants to
play again, otherwise it returns False.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>154.</span>    
print('Do you want to play again? (yes or no)')</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>155.</span>    
return input().lower().startswith('y')</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>156. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>157. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>158.</span> def
makeMove(board, tile, xstart, ystart):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>159.</span>     <span
class=SourceCodeComment># Place the tile on the board at xstart, ystart, and
flip any of the opponent's pieces.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>160.</span>     <span
class=SourceCodeComment># Returns False if this is an invalid move, True if it
is valid.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>161.</span>    
tilesToFlip = isValidMove(board, tile, xstart, ystart)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>162. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>163.</span>     if
tilesToFlip == False:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>164.</span>        
return False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>165. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>166.</span>    
board[xstart][ystart] = tile</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>167.</span>     for
x, y in tilesToFlip:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>168.</span>        
board[x][y] = tile</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>169.</span>    
return True</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>170. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>171. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>172.</span> def
getBoardCopy(board):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>173.</span>     <span
class=SourceCodeComment># Make a duplicate of the board list and return the
duplicate.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>174.</span>    
dupeBoard = getNewBoard()</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>175. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>176.</span>     for
x in range(8):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>177.</span>        
for y in range(8):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>178.</span>            
dupeBoard[x][y] = board[x][y]</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>179. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>180.</span>    
return dupeBoard</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>181. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>182. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>183.</span> def
isOnCorner(x, y):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>184.</span>     <span
class=SourceCodeComment># Returns True if the position is in one of the four
corners.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>185.</span>    
return (x == 0 and y == 0) or (x == 7 and y == 0) or (x == 0 and y == 7) or (x
== 7 and y == 7)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>186. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>187. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>188.</span> def
getPlayerMove(board, playerTile):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>189.</span>     <span
class=SourceCodeComment># Let the player type in their move.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>190.</span>     <span
class=SourceCodeComment># Returns the move as [x, y] (or returns the strings
'hints' or 'quit')</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>191.</span>    
DIGITS1TO8 = '1 2 3 4 5 6 7 8'.split()</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>192.</span>    
while True:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>193.</span>        
print('Enter your move, or type quit to end the game, or hints to turn off/on
hints.')</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>194.</span>        
move = input().lower()</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>195.</span>        
if move == 'quit':</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>196.</span>            
return 'quit'</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>197.</span>        
if move == 'hints':</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>198.</span>            
return 'hints'</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>199. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>200.</span>        
if len(move) == 2 and move[0] in DIGITS1TO8 and move[1] in DIGITS1TO8:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>201.</span>            
x = int(move[0]) - 1</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>202.</span>            
y = int(move[1]) - 1</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>203.</span>            
if isValidMove(board, playerTile, x, y) == False:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>204.</span>              
  continue</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>205.</span>            
else:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>206.</span>                
break</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>207.</span>        
else:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>208.</span>            
print('That is not a valid move. Type the x digit (1-8), then the y digit
(1-8).')</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>209.</span>            
print('For example, 81 will be the top-right corner.')</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>210. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>211.</span>    
return [x, y]</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>212. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>213. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>214.</span> def
getComputerMove(board, computerTile):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>215.</span>     <span
class=SourceCodeComment># Given a board and the computer's tile, determine
where to</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>216.</span>     <span
class=SourceCodeComment># move and return that move as a [x, y] list.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>217.</span>    
possibleMoves = getValidMoves(board, computerTile)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>218. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>219.</span>     <span
class=SourceCodeComment># randomize the order of the possible moves</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>220.</span>    
random.shuffle(possibleMoves)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>221. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>222.</span>     <span
class=SourceCodeComment># always go for a corner if available.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>223.</span>     for
x, y in possibleMoves:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>224.</span>        
if isOnCorner(x, y):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>225.</span>            
return [x, y]</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>226. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>227.</span>     <span
class=SourceCodeComment># Go through all the possible moves and remember the
best scoring move</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>228.</span>    
bestScore = -1</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>229.</span>     for
x, y in possibleMoves:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>230.</span>        
dupeBoard = getBoardCopy(board)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>231.</span>        
makeMove(dupeBoard, computerTile, x, y)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>232.</span>        
score = getScoreOfBoard(dupeBoard)[computerTile]</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>233.</span>        
if score &gt; bestScore:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>234.</span>            
bestMove = [x, y]</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>235.</span>            
bestScore = score</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>236.</span>    
return bestMove</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>237. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>238. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>239.</span> def
showPoints(playerTile, computerTile):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>240.</span>     <span
class=SourceCodeComment># Prints out the current score.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>241.</span>    
scores = getScoreOfBoard(mainBoard)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>242.</span>    
print('You have %s points. The computer has %s points.' % (scores[playerTile],
scores[computerTile]))</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>243. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>244. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>245. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>246.</span>
print('Welcome to Reversi!')</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>247. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>248.</span> while
True:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>249.</span>     <span
class=SourceCodeComment># Reset the board and game.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>250.</span>    
mainBoard = getNewBoard()</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>251.</span>    
resetBoard(mainBoard)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>252.</span>    
playerTile, computerTile = enterPlayerTile()</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>253.</span>    
showHints = False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>254.</span>     turn
= whoGoesFirst()</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>255.</span>    
print('The ' + turn + ' will go first.')</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>256. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>257.</span>    
while True:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>258.</span>        
if turn == 'player':</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>259.</span>            
<span class=SourceCodeComment># Player's turn.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>260.</span>            
if showHints:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>261.</span>                
validMovesBoard = getBoardWithValidMoves(mainBoard, playerTile)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>262.</span>                
drawBoard(validMovesBoard)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>263.</span>            
else:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>264.</span>                
drawBoard(mainBoard)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>265.</span>            
showPoints(playerTile, computerTile)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>266.</span>            
move = getPlayerMove(mainBoard, playerTile)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>267.</span>            
if move == 'quit':</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>268.</span>                
print('Thanks for playing!')</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>269.</span>                
sys.exit() <span class=SourceCodeComment># terminate the program</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>270.</span>            
elif move == 'hints':</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>271.</span>                
showHints = not showHints</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>272.</span>                
continue</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>273.</span>            
else:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>274.</span>                
makeMove(mainBoard, playerTile, move[0], move[1])</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>275. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>276.</span>            
if getValidMoves(mainBoard, computerTile) == []:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>277.</span>                
break</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>278.</span>            
else:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>279.</span>                
turn = 'computer'</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>280. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>281.</span>        
else:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>282.</span>            
<span class=SourceCodeComment># Computer's turn.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>283.</span>            
drawBoard(mainBoard)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>284.</span>            
showPoints(playerTile, computerTile)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>285.</span>            
input('Press Enter to see the computer\'s move.')</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>286.</span>            
x, y = getComputerMove(mainBoard, computerTile)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>287.</span>            
makeMove(mainBoard, computerTile, x, y)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>288. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>289.</span>            
if getValidMoves(mainBoard, playerTile) == []:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>290.</span>                
break</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>291.</span>            
else:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>292.</span>                
turn = 'player'</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>293. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>294.</span>     <span
class=SourceCodeComment># Display the final score.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>295.</span>    
drawBoard(mainBoard)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>296.</span>    
scores = getScoreOfBoard(mainBoard)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>297.</span>    
print('X scored %s points. O scored %s points.' % (scores['X'], scores['O']))</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>298.</span>     if
scores[playerTile] &gt; scores[computerTile]:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>299.</span>        
print('You beat the computer by %s points! Congratulations!' %
(scores[playerTile] - scores[computerTile]))</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>300.</span>     elif
scores[playerTile] &lt; scores[computerTile]:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>301.</span>        
print('You lost. The computer beat you by %s points.' % (scores[computerTile] -
scores[playerTile]))</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>302.</span>    
else:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>303.</span>        
print('The game was a tie!')</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>304. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>305.</span>     if
not playAgain():</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>306.</span>        
break</p>

</div>

<h2><a name="_Toc405145158">How the Code Works</a></h2>

<p class=Non-TOCHeading3>The Game Board Data Structure</p>

<p class=Body>Before getting into the code, let’s figure out the board’s data
structure. This data structure is a list of lists, just like the one in the
previous Sonar game. The list of lists is created so that <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>board[x][y]</span></span> will
represent the character on space located at position <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>x</span></span> on the X-axis (going
left/right) and position <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>y</span></span> on the Y-axis (going up/down).</p>

<p class=Body>This character can either be a <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>' '</span></span> space character (to
represent a blank space), a <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>'.'</span></span> period character (to represent a possible
move in hint mode), or an <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>'X'</span></span> or <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>'O'</span></span> (to represent a
player’s tile). Whenever you see a parameter named <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>board</span></span>, it is meant to be
this kind of list of lists data structure.</p>

<p class=Non-TOCHeading3>Importing Other Modules</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>  1.</span> <span
class=SourceCodeComment># Reversi</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  2.</span> import
random</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>  3.</span> import sys</p>

</div>

<p class=Body>Line 2 imports the <span class=Literal><span style='font-size:
9.0pt;line-height:115%'>random</span></span> module for its <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>randint()</span></span>
and <span class=Literal><span style='font-size:9.0pt;line-height:115%'>choice()</span></span>
functions. Line 3 imports the <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>sys</span></span> module for its <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>exit()</span></span> function.</p>

<p class=Non-TOCHeading3>Drawing the Board Data Structure on the Screen</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>  6.</span> def
drawBoard(board):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  7.</span>     <span
class=SourceCodeComment># This function prints out the board that it was
passed. Returns None.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  8.</span>    
HLINE = '  +---+---+---+---+---+---+---+---+'</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  9.</span>    
VLINE = '  |   |   |   |   |   |   |   |   |'</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 10.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 11.</span>    
print('    1   2   3   4   5   6   7   8')</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber> 12.</span>    
print(HLINE)</p>

</div>

<p class=Body>The <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>drawBoard()</span></span> function will print the current game board
based on the data structure in <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>board</span></span>. Notice that each square of the board
looks like this (there could also be a <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>'O'</span></span>, <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>'.'</span></span>,
or <span class=Literal><span style='font-size:9.0pt;line-height:115%'>' '</span></span>
string instead of the <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>'X'</span></span>):</p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt'>

<p class=CodeExampleCxSpFirst style='border:none;padding:0in'>+---+</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>|   |</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>| X |</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>|   |</p>

<p class=CodeExampleCxSpLast style='border:none;padding:0in'>+---+</p>

</div>

<p class=Body>Since the horizontal line is printed over and over again, line 8
stores it in a constant variable named <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>HLINE</span></span>. This will save
you from typing out the string repeatedly.</p>

<p class=Body>There are also lines above and below the center of tile that are
nothing but <span class=Literal><span style='font-size:9.0pt;line-height:115%'>'|'</span></span>
characters (called “pipe” characters) with three spaces between. This is stored
in a constant named <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>VLINE</span></span>.</p>

<p class=Body>Line 11 is the first <span class=Literal><span style='font-size:
9.0pt;line-height:115%'>print()</span></span> function call executed, and it
prints the labels for the X-axis along the top of the board. Line 12 prints the
top horizontal line of the board.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber> 13.</span>     for y
in range(8):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 14.</span>        
print(VLINE)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 15.</span>        
print(y+1, end=' ')</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 16.</span>        
for x in range(8):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 17.</span>            
print('| %s' % (board[x][y]), end=' ')</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 18.</span>        
print('|')</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 19.</span>        
print(VLINE)</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber> 20.</span>         print(HLINE)</p>

</div>

<p class=Body>The <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>for</span></span> loop will loop eight times, once for each row. Line 15
prints the label for the Y-axis on the left side of the board, and has an <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>end=' '</span></span>
keyword argument to print a single space instead of a new line. This is so that
another loop (which again loops eight times, once for each space) prints each
space (along with the <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>'X'</span></span>, <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>'O'</span></span>, or <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>' '</span></span>
character depending on what is stored in <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>board[x][y]</span></span>.)</p>

<p class=Body>The <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>print()</span></span> function call inside the inner loop also has an <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>end=' '</span></span>
keyword argument at the end of it, meaning a space character is printed instead
of a newline character. That will produce a single line on the screen that
looks like <span class=Literal><span style='font-size:9.0pt;line-height:115%'>'|
X | X | X | X | X | X | X | X '</span></span> (if each of the <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>board[x][y]</span></span>
values were <span class=Literal><span style='font-size:9.0pt;line-height:115%'>'X'</span></span>).</p>

<p class=Body>After the inner loop is done, the <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>print()</span></span> function call on
line 18 prints the final <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>'|'</span></span> character along with a newline.</p>

<p class=Body>The code inside the outer <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>for</span></span> loop from line 14 to
line 20 prints an entire row of the board like this:</p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt'>

<p class=CodeExampleCxSpFirst style='border:none;padding:0in'>|   |   |   |  
|   |   |   |   |</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>| X | X | X | X
| X | X | X | X |</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>|   |   |   |  
|   |   |   |   |</p>

<p class=CodeExampleCxSpLast style='border:none;padding:0in'>+---+---+---+---+---+---+---+---+</p>

</div>

<p class=Body>When the <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>for</span></span> loop on line 13 prints the row eight times,
it forms the entire board (of course, some of the spaces on the board will have
<span class=Literal><span style='font-size:9.0pt;line-height:115%'>'O'</span></span>
or <span class=Literal><span style='font-size:9.0pt;line-height:115%'>' '</span></span>
instead of <span class=Literal><span style='font-size:9.0pt;line-height:115%'>'X'</span></span>):</p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt'>

<p class=CodeExampleCxSpFirst style='border:none;padding:0in'>|   |   |   |  
|   |   |   |   |</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>| X | X | X | X
| X | X | X | X |</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>|   |   |   |  
|   |   |   |   |</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>+---+---+---+---+---+---+---+---+</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>|   |   |   |  
|   |   |   |   |</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>| X | X | X | X
| X | X | X | X |</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>|   |   |   |  
|   |   |   |   |</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>+---+---+---+---+---+---+---+---+</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>|   |   |   |  
|   |   |   |   |</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>| X | X | X | X
| X | X | X | X |</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>|   |   |   |  
|   |   |   |   |</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>+---+---+---+---+---+---+---+---+</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>|   |   |   |  
|   |   |   |   |</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>| X | X | X | X
| X | X | X | X |</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>|   |   |   |  
|   |   |   |   |</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>+---+---+---+---+---+---+---+---+</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>|   |   |   |  
|   |   |   |   |</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>| X | X | X | X
| X | X | X | X |</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>|   |   |   |  
|   |   |   |   |</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>+---+---+---+---+---+---+---+---+</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>|   |   |   |  
|   |   |   |   |</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>| X | X | X | X
| X | X | X | X |</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>|   |   |   |  
|   |   |   |   |</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>+---+---+---+---+---+---+---+---+</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>|   |   |   |  
|   |   |   |   |</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>| X | X | X | X
| X | X | X | X |</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>|   |   |   |  
|   |   |   |   |</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>+---+---+---+---+---+---+---+---+</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>|   |   |   |  
|   |   |   |   |</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>| X | X | X | X
| X | X | X | X |</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>|   |   |   |  
|   |   |   |   |</p>

<p class=CodeExampleCxSpLast style='border:none;padding:0in'>+---+---+---+---+---+---+---+---+</p>

</div>

<p class=Non-TOCHeading3>Resetting the Game Board</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber> 23.</span> def
resetBoard(board):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 24.</span>     <span
class=SourceCodeComment># Blanks out the board it is passed, except for the
original starting position.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 25.</span>     for
x in range(8):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 26.</span>        
for y in range(8):</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber> 27.</span>            
board[x][y] = ' '</p>

</div>

<p class=Body>Line 25 and 26 have nested loops to set the <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>board</span></span> data structure to
be all single-space strings. This makes a blank Reversi board. The <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>resetBoard()</span></span>
function is called as part of starting a new game.</p>

<p class=Non-TOCHeading3>Setting Up the Starting Pieces</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber> 29.</span>     <span
class=SourceCodeComment># Starting pieces:</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 30.</span>    
board[3][3] = 'X'</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 31.</span>    
board[3][4] = 'O'</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 32.</span>    
board[4][3] = 'O'</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber> 33.</span>    
board[4][4] = 'X'</p>

</div>

<p class=Body>At the beginning of a game, each player has two tiles already
laid down in the center. Lines 30 to 33 set those tiles on the blank board.</p>

<p class=Body>The <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>resetBoard()</span></span> function does not have to return the <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>board</span></span>
variable, because <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>board</span></span> is a reference to a list. Making changes inside the
function’s local scope will modify the original list that was passed as the
argument. (See the References section in Chapter 10.)</p>

<p class=Non-TOCHeading3>Creating a New Game Board Data Structure</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber> 36.</span> def
getNewBoard():</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 37.</span>     <span
class=SourceCodeComment># Creates a brand new, blank board data structure.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 38.</span>    
board = []</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 39.</span>     for
i in range(8):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 40.</span>        
board.append([' '] * 8)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 41.</span></p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber> 42.</span>     return
board</p>

</div>

<p class=Body>The <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>getNewBoard()</span></span> function creates a new board data structure
and returns it. Line 38 creates the outer list and stores a reference to this
list in board. Line 40 creates the inner lists using list replication. (<span
class=Literal><span style='font-size:9.0pt;line-height:115%'>[' '] * 8</span></span>
evaluates to be the same as <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>[' ', ' ', ' ', ' ', ' ', ' ', ' ', ' ']</span></span> but
with less typing.) </p>

<p class=Body>Line 39’s <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>for</span></span> loop here creates the eight inner lists.
The spaces represent a completely empty game board.</p>

<p class=Body>What <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>board</span></span> ends up being is a list of eight lists, and each of
those eight lists themselves has eight strings. The result is 64 <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>' '</span></span>
strings.</p>

<p class=Non-TOCHeading3>Checking if a Move is Valid</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber> 45.</span> def
isValidMove(board, tile, xstart, ystart):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 46.</span>     <span
class=SourceCodeComment># Returns False if the player's move on space xstart,
ystart is invalid.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 47.</span>     <span
class=SourceCodeComment># If it is a valid move, returns a list of spaces that
would become the player's if they made a move here.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 48.</span>     if
board[xstart][ystart] != ' ' or not isOnBoard(xstart, ystart):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 49.</span>        
return False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 50.</span>    
board[xstart][ystart] = tile <span class=SourceCodeComment># temporarily set
the tile on the board.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 51.</span>     if
tile == 'X':</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 52.</span>        
otherTile = 'O'</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 53.</span>    
else:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 54.</span>        
otherTile = 'X'</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber> 55.</span>    
tilesToFlip = []</p>

</div>

<p class=Body>Given a board data structure, the player’s tile, and the XY
coordinates for player’s move, <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>isValidMove()</span></span> should return <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>True</span></span>
if the Reversi game rules allow a move to those coordinates and <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>False</span></span>
if they don’t.</p>

<p class=Body>Line 48 checks if the XY coordinates are not on the game board,
or if the space isn’t empty. <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>isOnBoard()</span></span> is a function defined later in the
program that makes sure both the X and Y coordinates are between <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>0</span></span>
and <span class=Literal><span style='font-size:9.0pt;line-height:115%'>7</span></span>.</p>

<p class=Body>The next step is to temporarily place the player’s tile on the
board. This tile will be removed (by setting the board space back to <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>' '</span></span>
before returning).</p>

<p class=MsoNormal>The player’s tile (either the human player or the computer
player) is in <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>tile</span></span>, but this function will need to know the other
player’s tile. If the player’s tile is <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>'X'</span></span> then obviously the
other player’s tile is <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>'O'</span></span>, and vice versa.</p>

<p class=Body>Finally, if the given XY coordinate ends up as a valid position, <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>isValidMove()</span></span>
returns a list of all the opponent's tiles that would be flipped by this move.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCode><span class=SourceLineNumber> 59.</span>     for
xdirection, ydirection in [[0, 1], [1, 1], [1, 0], [1, -1], [0, -1], [-1, -1],
[-1, 0], [-1, 1]]:</p>

</div>

<p class=Body>The <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>for</span></span> loop iterates through a list of lists which represent
directions you can move on the game board. The game board is a Cartesian
coordinate system with an X and Y direction. There are eight directions you can
move: up, down, left, right, and the four diagonal directions. Each of the eight
2-item lists in the list on line 59 is used for moving in one of these
directions. The program moves in a direction by adding the first value in the
two-item list to the X coordinate, and the second value to the Y coordinate.</p>

<p class=Body>Because the X coordinates increase as you go to the right, you
can “move” to the right by adding <span class=Literal><span style='font-size:
9.0pt;line-height:115%'>1</span></span> to the X coordinate. So the <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>[1, 0]</span></span>
list adds <span class=Literal><span style='font-size:9.0pt;line-height:115%'>1</span></span>
to the X coordinate and <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>0</span></span> to the Y coordinate, resulting in “movement”
to the right. Moving to the left is the opposite: you would subtract <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>1</span></span>
(that is, add <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>-1</span></span>) from the X coordinate.</p>

<p class=Body>But to move diagonally, you need to add or subtract to both
coordinates. For example, adding <span class=Literal><span style='font-size:
9.0pt;line-height:115%'>1</span></span> to the X coordinate to move right and
adding <span class=Literal><span style='font-size:9.0pt;line-height:115%'>-1</span></span>
to the Y coordinate to move up would result in moving to the up-right diagonal
direction.</p>

<p class=Non-TOCHeading3>Checking Each of the Eight Directions</p>

<p class=Body>Here is a diagram to make it easier to remember which two-item
list represents which direction:</p>

<p class=MsoNormal align=center style='text-align:center'><img width=371
height=378 id="Picture 51" src="chapter15_files/image008.webp"
alt="Description: C:\book1svn\4thed\images\15-7.webp"></p>

<p class=MsoCaption>Figure 15-7: Each two-item list represents one of the eight
directions.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber> 59.</span>     for
xdirection, ydirection in [[0, 1], [1, 1], [1, 0], [1, -1], [0, -1], [-1, -1],
[-1, 0], [-1, 1]]:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 60.</span>        
x, y = xstart, ystart</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 61.</span>        
x += xdirection <span class=SourceCodeComment># first step in the direction</span></p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber> 62.</span>         y
+= ydirection <span class=SourceCodeComment># first step in the direction</span></p>

</div>

<p class=Body>Line 60 sets an <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>x</span></span> and <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>y</span></span> variable to be the
same value as <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>xstart</span></span> and <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>ystart</span></span>, respectively, using multiple
assignment. Change <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>x</span></span> and <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>y</span></span> to “move” in the direction that <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>xdirection</span></span>
and <span class=Literal><span style='font-size:9.0pt;line-height:115%'>ydirection</span></span>
dictate. The <span class=Literal><span style='font-size:9.0pt;line-height:115%'>xstart</span></span>
and <span class=Literal><span style='font-size:9.0pt;line-height:115%'>ystart</span></span>
variables will stay the same so that the program can remember which space it
originally started from.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber> 63.</span>        
if isOnBoard(x, y) and board[x][y] == otherTile:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 64.</span>            
<span class=SourceCodeComment># There is a piece belonging to the other player
next to our piece.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 65.</span>            
x += xdirection</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 66.</span>            
y += ydirection</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 67.</span>            
if not isOnBoard(x, y):</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber> 68.</span>                
continue</p>

</div>

<p class=Body>Remember, in order for this to be a valid move, the first step in
this direction must be 1) on the board and 2) must be occupied by the other
player’s tile. Otherwise there aren’t any of the opponent’s tiles to flip, and
a valid move must flip over at least one tile. If these two things aren’t true,
line 63’s condition isn’t <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>True</span></span> and the execution goes back to the <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>for</span></span>
statement for the next direction.</p>

<p class=Body>But if the first space does have the other player’s tile, then
the program should keep checking in that direction until it reaches one of the
player’s tiles. If it reaches past the end of the board though, then line 68
should continue back to the <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>for</span></span> statement to try the next direction.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber> 69.</span>            
while board[x][y] == otherTile:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 70.</span>                
x += xdirection</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 71.</span>                
y += ydirection</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 72.</span>                
if not isOnBoard(x, y): <span class=SourceCodeComment># break out of while
loop, then continue in for loop</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 73.</span>                     break</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 74.</span>            
if not isOnBoard(x, y):</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber> 75.</span>                
continue</p>

</div>

<p class=Body>The <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>while</span></span> loop on line 69 keeps looping so that <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>x</span></span>
and <span class=Literal><span style='font-size:9.0pt;line-height:115%'>y</span></span>
keep going in the current direction as long as it keeps seeing a trail of the
other player’s tiles. If line 72 detects that <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>x</span></span> and <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>y</span></span>
moved off of the board, line 73 breaks out of the <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>for</span></span> loop and the flow of
execution moves to line 74.</p>

<p class=Body>What you really want to do is break out of the <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>while</span></span>
loop but continue in the <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>for</span></span> loop. This is why line 74 rechecks <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>not isOnBoard(x,
y)</span></span> and runs <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>continue</span></span>, which moves execution to the next
direction in line 59’s <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>for</span></span> statement. Remember, <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>break</span></span> and <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>continue</span></span>
statements will only break or continue from the innermost loop they are in.</p>

<p class=Non-TOCHeading3>Finding Out if There are Pieces to Flip Over</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber> 76.</span>            
if board[x][y] == tile:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 77.</span>                
<span class=SourceCodeComment># There are pieces to flip over. Go in the
reverse direction until we reach the original space, noting all the tiles along
the way.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 78.</span>                
while True:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 79.</span>                    
x -= xdirection</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 80.</span>                    
y -= ydirection</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 81.</span>                    
if x == xstart and y == ystart:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 82.</span>                        
break</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber> 83.</span>                     tilesToFlip.append([x,
y])</p>

</div>

<p class=Body>Line 69’s <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>while</span></span> loop stops looping when the code has
reached the end of the <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>otherTile</span></span> tiles. Line 76 checks if this space
on the board holds one of our tiles. If it does, then the move originally
passed to <span class=Literal><span style='font-size:9.0pt;line-height:115%'>isValidMove()</span></span>
is valid.</p>

<p class=Body>Line 78 loops by moving <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>x</span></span> and <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>y</span></span> in
reverse back to the original <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>xstart</span></span> and <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>ystart</span></span> position by
subtracting <span class=Literal><span style='font-size:9.0pt;line-height:115%'>x</span></span>
and <span class=Literal><span style='font-size:9.0pt;line-height:115%'>y</span></span>.
Each space is appended to the <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>tilesToFlip</span></span> list.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber> 85.</span>    
board[xstart][ystart] = ' ' <span class=SourceCodeComment># restore the empty
space</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 86.</span>     if
len(tilesToFlip) == 0: <span class=SourceCodeComment># If no tiles were
flipped, this is not a valid move.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 87.</span>        
return False</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber> 88.</span>     return
tilesToFlip</p>

</div>

<p class=Body>The <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>for</span></span> loop that started on line 59 does this in all eight
directions. After that loop is done, the <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>tilesToFlip</span></span> list will
contain the XY coordinates all of our opponent’s tiles that would be flipped if
the player moved on <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>xstart</span></span>, <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>ystart</span></span>. Remember, the <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>isValidMove()</span></span>
function is only checking to see if the original move was valid. It doesn’t
actually permanently change the data structure of the game board.</p>

<p class=Body>If none of the eight directions ended up flipping at least one of
the opponent’s tiles, then <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>tilesToFlip</span></span> will be an empty list. This is a
sign that this move is not valid and <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>isValidMove()</span></span> should
return <span class=Literal><span style='font-size:9.0pt;line-height:115%'>False</span></span>.
</p>

<p class=Body>Otherwise, <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>isValidMove()</span></span> returns <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>tilesToFlip</span></span>.</p>

<p class=Body>&nbsp;</p>

<p class=Body>&nbsp;</p>

<p class=Non-TOCHeading3>Checking for Valid Coordinates</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber> 91.</span> def
isOnBoard(x, y):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 92.</span>     <span
class=SourceCodeComment># Returns True if the coordinates are located on the
board.</span></p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber> 93.</span>     return
x &gt;= 0 and x &lt;= 7 and y &gt;= 0 and y &lt;=7</p>

</div>

<p class=Body><span class=Literal><span style='font-size:9.0pt;line-height:
115%'>isOnBoard()</span></span> is a function called from <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>isValidMove()</span></span>. Calling
the function is shorthand for the Boolean expression on line 93 that is <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>True</span></span>
if both <span class=Literal><span style='font-size:9.0pt;line-height:115%'>x</span></span>
and <span class=Literal><span style='font-size:9.0pt;line-height:115%'>y</span></span>
are between <span class=Literal><span style='font-size:9.0pt;line-height:115%'>0</span></span>
and <span class=Literal><span style='font-size:9.0pt;line-height:115%'>7</span></span>.
This function checks if an X and Y coordinate is actually on the game board.
For example, an X coordinate of <span class=Literal><span style='font-size:
9.0pt;line-height:115%'>4</span></span> and a Y coordinate of <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>9999</span></span>
would not be on the board since Y coordinates only go up to <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>7</span></span>.</p>

<p class=Non-TOCHeading3>Getting a List with All Valid Moves</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber> 96.</span> def
getBoardWithValidMoves(board, tile):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 97.</span>     <span
class=SourceCodeComment># Returns a new board with . marking the valid moves
the given player can make.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 98.</span>    
dupeBoard = getBoardCopy(board)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 99.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>100.</span>     for
x, y in getValidMoves(dupeBoard, tile):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>101.</span>        
dupeBoard[x][y] = '.'</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>102.</span>     return
dupeBoard</p>

</div>

<p class=Body><span class=Literal><span style='font-size:9.0pt;line-height:
115%'>getBoardWithValidMoves()</span></span> returns a game board data
structure that has <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>'.'</span></span> characters for all spaces that are valid moves. The
periods are for the hints mode that displays a board with all possible moves
marked on it.</p>

<p class=Body>This function creates a duplicate game <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>board</span></span> data structure
(returned by <span class=Literal><span style='font-size:9.0pt;line-height:115%'>getBoardCopy()</span></span>
on line 98) instead of modifying the one passed to it in the <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>board</span></span>
parameter. Line 100 calls <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>getValidMoves()</span></span> to get a list of XY coordinates
with all the legal moves the player could make. The board copy is marked with
periods in those spaces and returned.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>105.</span> def
getValidMoves(board, tile):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>106.</span>     <span
class=SourceCodeComment># Returns a list of [x,y] lists of valid moves for the
given player on the given board.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>107.</span>    
validMoves = []</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>108.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>109.</span>     for
x in range(8):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>110.</span>        
for y in range(8):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>111.</span>            
if isValidMove(board, tile, x, y) != False:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>112.</span>                
validMoves.append([x, y])</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>113.</span>     return
validMoves</p>

</div>

<p class=Body>The <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>getValidMoves()</span></span> function returns a list of two-item lists.
These lists hold the XY coordinates for all valid moves for <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>tile</span></span>’s
player for the board data structure in the <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>board</span></span> parameter.</p>

<p class=Body>This function uses nested loops (on lines 109 and 110) to check
every XY coordinate (all sixty four of them) by calling <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>isValidMove()</span></span> on that
space and checking if it returns <span class=Literal><span style='font-size:
9.0pt;line-height:115%'>False</span></span> or a list of possible moves (in
which case it is a valid move). Each valid XY coordinate is appended to the
list in <span class=Literal><span style='font-size:9.0pt;line-height:115%'>validMoves</span></span>.</p>

<h2><a name="_Toc405145159">The </a><span class=Literal><span style='font-size:
9.0pt;line-height:115%'>bool()</span></span> Function</h2>

<p class=Body>The <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>bool()</span></span> is similar to the <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>int()</span></span> and <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>str()</span></span>
functions. It returns the Boolean value form of the value passed to it.</p>

<p class=Body>Most data types have one value that is considered the <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>False</span></span>
value for that data type. Every other value is consider <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>True</span></span>. For example, the
integer <span class=Literal><span style='font-size:9.0pt;line-height:115%'>0</span></span>,
the floating point number <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>0.0</span></span>, the empty string, the empty list, and the
empty dictionary are all considered to be <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>False</span></span> when used as the
condition for an <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>if</span></span> or loop statement. All other values are <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>True</span></span>.
Try entering the following into the interactive shell:</p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt'>

<p class=CodeExampleCxSpFirst style='border:none;padding:0in'>&gt;&gt;&gt;
bool(0)</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>False</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>&gt;&gt;&gt;
bool(0.0)</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>False</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>&gt;&gt;&gt;
bool('')</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>False</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>&gt;&gt;&gt;
bool([])</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>False</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>&gt;&gt;&gt;
bool({})</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>False</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>&gt;&gt;&gt;
bool(1)</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>True</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>&gt;&gt;&gt;
bool('Hello')</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>True</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>&gt;&gt;&gt;
bool([1, 2, 3, 4, 5])</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>True</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>&gt;&gt;&gt;
bool({'spam':'cheese', 'fizz':'buzz'})</p>

<p class=CodeExampleCxSpLast style='border:none;padding:0in'>True</p>

</div>

<p class=Body>Imagine that any statement’s condition is placed inside a call to
<span class=Literal><span style='font-size:9.0pt;line-height:115%'>bool()</span></span>.
That is, conditions are automatically interpreted as Boolean values. This is
why the condition on line 111 works correctly. The call to the <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>isValidMove()</span></span>
function either returns the Boolean value <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>False</span></span> or a non-empty
list.<br>
If you imagine that the entire condition is placed inside a call to <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>bool()</span></span>,
then line 111’s condition <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>False</span></span> becomes <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>bool(False)</span></span> (which, of
course, evaluates to <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>False</span></span>). And a condition of a non-empty list
placed as the parameter to <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>bool()</span></span> will return <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>True</span></span>.</p>

<p class=Non-TOCHeading3>Getting the Score of the Game Board</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>116.</span> def
getScoreOfBoard(board):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>117.</span>     <span
class=SourceCodeComment># Determine the score by counting the tiles. Returns a
dictionary with keys 'X' and 'O'.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>118.</span>    
xscore = 0</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>119.</span>    
oscore = 0</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>120.</span>     for
x in range(8):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>121.</span>        
for y in range(8):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>122.</span>            
if board[x][y] == 'X':</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>123.</span>                
xscore += 1</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>124.</span>             if
board[x][y] == 'O':</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>125.</span>                
oscore += 1</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>126.</span>     return
{'X':xscore, 'O':oscore}</p>

</div>

<p class=Body>The <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>getScoreOfBoard()</span></span> function uses nested <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>for</span></span> loops to check all
64 spaces on the board (8 rows times 8 columns per row is 64 spaces) and see
which tile (if any) is on them. For each <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>'X'</span></span> tile, the code
increments <span class=Literal><span style='font-size:9.0pt;line-height:115%'>xscore</span></span>
on line 123. For each <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>'O'</span></span> tile, the code increments <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>oscore</span></span>
on line 125</p>

<p class=Non-TOCHeading3>Getting the Player’s Tile Choice</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>129.</span> def
enterPlayerTile():</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>130.</span>     <span
class=SourceCodeComment># Lets the player type which tile they want to be.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>131.</span>     <span
class=SourceCodeComment># Returns a list with the player's tile as the first
item, and the computer's tile as the second.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>132.</span>     tile
= ''</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>133.</span>    
while not (tile == 'X' or tile == 'O'):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>134.</span>        
print('Do you want to be X or O?')</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>135.</span>        
tile = input().upper()</p>

</div>

<p class=Body>This function asks the player which tile they want to be, either <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>'X'</span></span>
or <span class=Literal><span style='font-size:9.0pt;line-height:115%'>'O'</span></span>.
The <span class=Literal><span style='font-size:9.0pt;line-height:115%'>for</span></span>
loop will keep looping until the player types in <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>'X'</span></span> or <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>'O'</span></span>.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>137.</span>     <span
class=SourceCodeComment># the first element in the list is the player's tile,
the second is the computer's tile.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>138.</span>     if
tile == 'X':</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>139.</span>        
return ['X', 'O']</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>140.</span>    
else:</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>141.</span>        
return ['O', 'X']</p>

</div>

<p class=Body>The <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>enterPlayerTile()</span></span> function then returns a two-item list,
where the player’s tile choice is the first item and the computer’s tile is the
second. Line 252, which calls <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>enterPlayerTile()</span></span>, uses multiple assignment to
put these two returned items in two variables.</p>

<p class=Non-TOCHeading3>Determining Who Goes First</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>144.</span> def
whoGoesFirst():</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>145.</span>     <span
class=SourceCodeComment># Randomly choose the player who goes first.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>146.</span>     if
random.randint(0, 1) == 0:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>147.</span>        
return 'computer'</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>148.</span>    
else:</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>149.</span>        
return 'player'</p>

</div>

<p class=Body>The <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>whoGoesFirst()</span></span> function randomly selects who goes first,
and returns either the string <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>'computer'</span></span> or the string <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>'player'</span></span>.</p>

<p class=Non-TOCHeading3>Asking the Player to Play Again</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>152.</span> def
playAgain():</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>153.</span>     <span
class=SourceCodeComment># This function returns True if the player wants to
play again, otherwise it returns False.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>154.</span>    
print('Do you want to play again? (yes or no)')</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>155.</span>     return
input().lower().startswith('y')</p>

</div>

<p class=Body>The <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>playAgain()</span></span> function was also in previous games. If the
player types in a string that begins with <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>'y'</span></span>, then the function
returns <span class=Literal><span style='font-size:9.0pt;line-height:115%'>True</span></span>.
Otherwise the function returns <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>False</span></span>.</p>

<p class=Non-TOCHeading3>Placing Down a Tile on the Game Board</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>158.</span> def
makeMove(board, tile, xstart, ystart):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>159.</span>     <span
class=SourceCodeComment># Place the tile on the board at xstart, ystart, and
flip any of the opponent's pieces.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>160.</span>     <span
class=SourceCodeComment># Returns False if this is an invalid move, True if it
is valid.</span></p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>161.</span>    
tilesToFlip = isValidMove(board, tile, xstart, ystart)</p>

</div>

<p class=Body><span class=Literal><span style='font-size:9.0pt;line-height:
115%'>makeMove()</span></span> is called when you want to place a tile on the
board and flip the other tiles according to the rules of Reversi. This function
modifies the <span class=Literal><span style='font-size:9.0pt;line-height:115%'>board</span></span>
data structure that is passed in-place. Changes made to the <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>board</span></span>
variable (because it is a list reference) will be made to the global scope.</p>

<p class=Body>Most of the work is done by <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>isValidMove()</span></span>, which
returns a list of XY coordinates (in a two-item list) of tiles that need to be
flipped. (Remember, if the <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>xstart</span></span> and <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>ystart</span></span> arguments point
to an invalid move, then <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>isValidMove()</span></span> will return the Boolean value <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>False</span></span>.)</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>163.</span>     if
tilesToFlip == False:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>164.</span>        
return False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>165. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>166.</span>    
board[xstart][ystart] = tile</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>167.</span>     for
x, y in tilesToFlip:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>168.</span>        
board[x][y] = tile</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>169.</span>     return
True</p>

</div>

<p class=Body>On lines 163 and 164, if the return value of <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>isValidMove()</span></span> (now
stored in <span class=Literal><span style='font-size:9.0pt;line-height:115%'>tilesToFlip</span></span>)
was <span class=Literal><span style='font-size:9.0pt;line-height:115%'>False</span></span>,
then <span class=Literal><span style='font-size:9.0pt;line-height:115%'>makeMove()</span></span>
will also return <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>False</span></span>.</p>

<p class=Body>Otherwise, <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>isValidMove()</span></span> returns a list of spaces on the
board to put down the tiles (the <span class=Literal><span style='font-size:
9.0pt;line-height:115%'>'X'</span></span> or <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>'O'</span></span> string in <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>tile</span></span>).
Line 166 sets the space that the player has moved on. Line 167’s <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>for</span></span>
loop sets all the tiles that are in <span class=Literal><span style='font-size:
9.0pt;line-height:115%'>tilesToFlip</span></span>.</p>

<p class=Non-TOCHeading3>Copying the Board Data Structure</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>172.</span> def getBoardCopy(board):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>173.</span>     <span
class=SourceCodeComment># Make a duplicate of the board list and return the
duplicate.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>174.</span>    
dupeBoard = getNewBoard()</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>175.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>176.</span>     for
x in range(8):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>177.</span>        
for y in range(8):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>178.</span>            
dupeBoard[x][y] = board[x][y]</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>179.</span></p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>180.</span>     return
dupeBoard</p>

</div>

<p class=Body><span class=Literal><span style='font-size:9.0pt;line-height:
115%'>getBoardCopy()</span></span> is different from <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>getNewBoard()</span></span>. <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>getNewBoad()</span></span>
will create a blank game board data structure which has only empty spaces and
the four starting tiles. <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>getBoardCopy()</span></span> will create a blank game board
data structure, but then copy all of the spaces from the <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>board</span></span> parameter. This
function is used by the AI to have a game board that it can change around
without changing the real game board. This technique was also used by the
previous Tic Tac Toe program.</p>

<p class=Body>A call to <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>getNewBoard()</span></span> handles getting a fresh game
board data structure. Then the two nested <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>for</span></span> loops copy each of
the 64 tiles from board to the duplicate board data structure in <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>dupeBoard</span></span>.</p>

<p class=Body>&nbsp;</p>

<p class=Non-TOCHeading3>Determining if a Space is on a Corner</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>183.</span> def
isOnCorner(x, y):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>184.</span>     <span
class=SourceCodeComment># Returns True if the position is in one of the four
corners.</span></p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>185.</span>     return
(x == 0 and y == 0) or (x == 7 and y == 0) or (x == 0 and y == 7) or (x == 7
and y == 7)</p>

</div>

<p class=Body>The <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>isOnCorner()</span></span> function returns <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>True</span></span> if the coordinates
are on a corner space at coordinates (0,0), (7,0), (0,7) or (7,7). Otherwise <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>isOnCorner()</span></span>
returns <span class=Literal><span style='font-size:9.0pt;line-height:115%'>False</span></span>.</p>

<p class=Non-TOCHeading3>Getting the Player’s Move</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>188.</span> def
getPlayerMove(board, playerTile):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>189.</span>     <span
class=SourceCodeComment># Let the player type in their move.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>190.</span>     <span
class=SourceCodeComment># Returns the move as [x, y] (or returns the strings
'hints' or 'quit')</span></p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>191.</span>    
DIGITS1TO8 = '1 2 3 4 5 6 7 8'.split()</p>

</div>

<p class=Body>The <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>getPlayerMove()</span></span> function is called to let the player type
in the coordinates of their next move (and check if the move is valid). The
player can also type in <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>'hints'</span></span> to turn hints mode on (if it is off) or
off (if it is on). The player can also type in <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>'quit'</span></span> to quit the game.</p>

<p class=Body>The <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>DIGITS1TO8</span></span> constant variable is the list <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>['1', '2', '3',
'4', '5', '6', '7', '8']</span></span>. The <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>DIGITS1TO8</span></span> constant is
used because it is easier to type than the entire list. You can’t use the <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>isdigit()</span></span>
method because that would allow 0 and 9 to be entered, which are not valid
coordinates on the 8 × 8 board.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>192.</span>     while
True:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>193.</span>        
print('Enter your move, or type quit to end the game, or hints to turn off/on
hints.')</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>194.</span>        
move = input().lower()</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>195.</span>        
if move == 'quit':</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>196.</span>            
return 'quit'</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>197.</span>        
if move == 'hints':</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>198.</span>            
return 'hints'</p>

</div>

<p class=Body>The <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>while</span></span> loop will keep looping until the player has typed in
a valid move. Lines 195 to 198 check if the player wants to quit or toggle
hints mode, and return the string <span class=Literal><span style='font-size:
9.0pt;line-height:115%'>'quit'</span></span> or <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>'hints'</span></span>, respectively.
The <span class=Literal><span style='font-size:9.0pt;line-height:115%'>lower()</span></span>
method is called on the string returned by <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>input()</span></span> so the player
can type <span class=Literal><span style='font-size:9.0pt;line-height:115%'>'HINTS'</span></span>
or <span class=Literal><span style='font-size:9.0pt;line-height:115%'>'Quit'</span></span>
but still have the command understood.</p>

<p class=Body>The code that called <span class=Literal><span style='font-size:
9.0pt;line-height:115%'>getPlayerMove()</span></span> will handle what to do if
the player wants to quit or toggle hints mode.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>200.</span>        
if len(move) == 2 and move[0] in DIGITS1TO8 and move[1] in DIGITS1TO8:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>201.</span>            
x = int(move[0]) - 1</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>202.</span>            
y = int(move[1]) - 1</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>203.</span>            
if isValidMove(board, playerTile, x, y) == False:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>204.</span>                
continue</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>205.</span>            
else:</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>206.</span>                
break</p>

</div>

<p class=Body>The game is expecting that the player would have typed in the XY
coordinates of their move as two numbers without anything between them. Line
200 first checks that the size of the string the player typed in is <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>2</span></span>.
After that, it also checks that both <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>move[0]</span></span> (the first
character in the string) and <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>move[1]</span></span> (the second character in the string)
are strings that exist in <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>DIGITS1TO8</span></span>.</p>

<p class=Body>Remember that the game board data structures have indexes from 0
to 7, not 1 to 8. The code prints 1 to 8 when the board is displayed in <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>drawBoard()</span></span>
because non-programmers are used to numbers beginning at 1 instead of 0. So to
convert the strings in <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>move[0]</span></span> and <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>move[1]</span></span> to integers,
lines 201 and 202 subtract 1.</p>

<p class=Body>Even if the player typed in a correct move, the code still needs
to check that the move is allowed by the rules of Reversi. This is done by <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>isValidMove()</span></span>
which is passed the game board data structure, the player’s tile, and the XY
coordinates of the move.</p>

<p class=Body>If <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>isValidMove()</span></span> returns <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>False</span></span>, then line 204’s <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>continue</span></span>
statement executes. The execution will then go back to the beginning of the <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>while</span></span>
loop and asks the player for a valid move again.</p>

<p class=Body>Otherwise, the player did type in a valid move and the execution
needs to break out of the <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>while</span></span> loop.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>207.</span>        
else:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>208.</span>            
print('That is not a valid move. Type the x digit (1-8), then the y digit
(1-8).')</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>209.</span>            
print('For example, 81 will be the top-right corner.')</p>

</div>

<p class=Body>If the <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>if</span></span> statement’s condition on line 200 was <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>False</span></span>,
then the player didn’t type in a valid move. Lines 208 and 209 instructs them
on how to correctly type in moves. Afterwards, the execution moves back to the <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>while</span></span>
statement on line 192 because line 209 isn’t only the last line in the
else-block, but also the last line in the while-block.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCode><span class=SourceLineNumber>211.</span>     return [x, y]</p>

</div>

<p class=Body>Finally, <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>getPlayerMove()</span></span> returns a two-item list with
the XY coordinates of the player’s valid move.</p>

<p class=Non-TOCHeading3>Getting the Computer’s Move</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>214.</span> def
getComputerMove(board, computerTile):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>215.</span>     #
Given a board and the computer's tile, determine where to</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>216.</span>     #
move and return that move as a [x, y] list.</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>217.</span>    
possibleMoves = getValidMoves(board, computerTile)</p>

</div>

<p class=Body><span class=Literal><span style='font-size:9.0pt;line-height:
115%'>getComputerMove()</span></span> and is where the AI algorithm is
implemented. Normally you use the results from <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>getValidMoves()</span></span> for
hints mode. Hints mode will print <span class=Literal><span style='font-size:
9.0pt;line-height:115%'>'.'</span></span> period characters on the board to
show the player all the potential moves they can make. </p>

<p class=Body>But if <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>getValidMoves()</span></span> is called with the computer
AI’s tile (in <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>computerTile</span></span>), it will also find all the possible moves
that the computer can make. The AI will select the best move from this list.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>219.</span>     <span
class=SourceCodeComment># randomize the order of the possible moves</span></p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>220.</span>    
random.shuffle(possibleMoves)</p>

</div>

<p class=Body>First, <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>random.shuffle()</span></span> will randomize the order of
moves in the <span class=Literal><span style='font-size:9.0pt;line-height:115%'>possibleMoves</span></span>
list. Why we want to shuffle the <span class=Literal><span style='font-size:
9.0pt;line-height:115%'>possibleMoves</span></span> list will be explained
later, but first let’s look at the algorithm.</p>

<p class=Non-TOCHeading3>Corner Moves are the Best Moves</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>222.</span>     <span
class=SourceCodeComment># always go for a corner if available.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>223.</span>     for
x, y in possibleMoves:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>224.</span>        
if isOnCorner(x, y):</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>225.</span>            
return [x, y]</p>

</div>

<p class=Body>First, line 223 loops through every move in <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>possibleMoves</span></span>. If any of
them are on the corner, return that space is returned as the move. Corner moves
are a good idea in Reversi because once a tile has been placed on the corner,
it can never be flipped over. Since <span class=Literal><span style='font-size:
9.0pt;line-height:115%'>possibleMoves</span></span> is a list of two-item lists,
use multiple assignment in the <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>for</span></span> loop to set <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>x</span></span> and <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>y</span></span>.</p>

<p class=Body>If <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>possibleMoves</span></span> contains multiple corner moves, the first one
is always used. But since <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>possibleMoves</span></span> was shuffled on line 220, it is
random which corner move is first in the list.</p>

<p class=Non-TOCHeading3>Get a List of the Best Scoring Moves</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>227.</span>     <span
class=SourceCodeComment># Go through all the possible moves and remember the
best scoring move</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>228.</span>    
bestScore = -1</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>229.</span>     for
x, y in possibleMoves:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>230.</span>        
dupeBoard = getBoardCopy(board)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>231.</span>        
makeMove(dupeBoard, computerTile, x, y)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>232.</span>        
score = getScoreOfBoard(dupeBoard)[computerTile]</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>233.</span>        
if score &gt; bestScore:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>234.</span>            
bestMove = [x, y]</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>235.</span>            
bestScore = score</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>236.</span>     return
bestMove</p>

</div>

<p class=Body>If there are no corner moves, loop through the entire list and
find out which move results in the highest score. Line 229’s <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>for</span></span>
loop will set <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>x</span></span> and <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>y</span></span> to every move in <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>possibleMoves</span></span>. <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>bestMove</span></span>
is set to the highest scoring move the code has found so far, and <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>bestScore</span></span>
is set to the best move’s score.</p>

<p class=Body>When the code in the loop finds a move that scores higher than <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>bestScore</span></span>,
line 233 to 235 will store that move and score as the new values in <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>bestMove</span></span>
and <span class=Literal><span style='font-size:9.0pt;line-height:115%'>bestScore</span></span>.</p>

<p class=Non-TOCHeading3>Simulate All Possible Moves on Duplicate Board Data
Structures</p>

<p class=Body>Before simulating a move, line 230 makes a duplicate game board
data structure by calling <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>getBoardCopy()</span></span>. You’ll want a copy so you can
modify without changing the real game board data structure stored in the <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>board</span></span>
variable.</p>

<p class=Body>Then line 231 calls <span class=Literal><span style='font-size:
9.0pt;line-height:115%'>makeMove()</span></span>, passing the duplicate board
(stored in <span class=Literal><span style='font-size:9.0pt;line-height:115%'>dupeBoard</span></span>)
instead of the real board. This will simulate what would happen on the real
board if this move was made. <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>makeMove()</span></span> will handle placing the computer’s
tile and the flipping the player’s tiles on the duplicate board.</p>

<p class=Body>Line 232 calls <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>getScoreOfBoard()</span></span>with the duplicate board,
which returns a dictionary where the keys are <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>'X'</span></span> and <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>'O'</span></span>,
and the values are the scores.</p>

<p class=Body>For example, pretend that <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>getScoreOfBoard()</span></span>
returns the dictionary <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>{'X':22, 'O':8}</span></span> and <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>computerTile</span></span> is <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>'X'</span></span>.
Then <span class=Literal><span style='font-size:9.0pt;line-height:115%'>getScoreOfBoard(dupeBoard)[computerTile]</span></span>
would evaluate to <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>{'X':22, 'O':8}['X']</span></span>, which would then evaluate to <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>22</span></span>.
If <span class=Literal><span style='font-size:9.0pt;line-height:115%'>22</span></span>
is larger than <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>bestScore</span></span>, <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>bestScore</span></span> is set to <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>22</span></span> and <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>bestMove</span></span>
is set to the current <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>x</span></span> and <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>y</span></span> values.</p>

<p class=Body>By the time this <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>for</span></span> loop is finished, you can be sure that <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>bestScore</span></span>
is the highest possible score a move can make, and that move is stored in <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>bestMove</span></span>.</p>

<p class=Body>Line 228 first sets <span class=Literal><span style='font-size:
9.0pt;line-height:115%'>bestScore</span></span> to <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>-1</span></span> so that the first
move the code checks will be set to the first <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>bestMove</span></span>. This will guarantee
that <span class=Literal><span style='font-size:9.0pt;line-height:115%'>bestMove</span></span>
is set to one of the moves from <span class=Literal><span style='font-size:
9.0pt;line-height:115%'>possibleMoves</span></span> when it returns.</p>

<p class=Body>Even though the code always chooses the first in the list of
these tied moves, it’s random because the list order was shuffled on line 220.
This ensures that the AI won’t be predictable when there’s more than one best
move.</p>

<p class=Non-TOCHeading3>Printing the Scores to the Screen</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>239.</span> def
showPoints(playerTile, computerTile):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>240.</span>     <span
class=SourceCodeComment># Prints out the current score.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>241.</span>    
scores = getScoreOfBoard(mainBoard)</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>242.</span>    
print('You have %s points. The computer has %s points.' % (scores[playerTile],
scores[computerTile]))</p>

</div>

<p class=Body><span class=Literal><span style='font-size:9.0pt;line-height:
115%'>showPoints()</span></span> calls the <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>getScoreOfBoard()</span></span>
function and then prints the player’s and computer’s scores. Remember that <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>getScoreOfBoard()</span></span>
returns a dictionary with the keys <span class=Literal><span style='font-size:
9.0pt;line-height:115%'>'X'</span></span> and <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>'O'</span></span> and values of the
scores for the X and O players.</p>

<p class=Body>That’s all the functions for the Reversi game. The code starting
on line 246 will implement the actual game and calls these functions as needed.</p>

<p class=Non-TOCHeading3>The Start of the Game</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>246.</span>
print('Welcome to Reversi!')</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>247. </span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>248.</span> while
True:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>249.</span>     <span
class=SourceCodeComment># Reset the board and game.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>250.</span>    
mainBoard = getNewBoard()</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>251.</span>    
resetBoard(mainBoard)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>252.</span>    
playerTile, computerTile = enterPlayerTile()</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>253.</span>    
showHints = False</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>254.</span>     turn
= whoGoesFirst()</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>255.</span>    
print('The ' + turn + ' will go first.')</p>

</div>

<p class=Body>The <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>while</span></span> loop on line 248 is the main game loop. The program
will loop back to line 248 when a new game starts. First get a new game board
data structure by calling <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>getNewBoard()</span></span> and set the starting tiles by
calling <span class=Literal><span style='font-size:9.0pt;line-height:115%'>resetBoard()</span></span>.
<span class=Literal><span style='font-size:9.0pt;line-height:115%'>mainBoard</span></span>
is the main game board data structure for the program. The call to <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>enterPlayerTile()</span></span>
will let the player type in whether they want to be <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>'X'</span></span> or <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>'O'</span></span>.
The return value is then stored in <span class=Literal><span style='font-size:
9.0pt;line-height:115%'>playerTile</span></span> and <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>computerTile</span></span> using
multiple assignment.</p>

<p class=Body><span class=Literal><span style='font-size:9.0pt;line-height:
115%'>showHints</span></span> is a Boolean value that determines if hints mode
is on or off. It starts as off as <span class=Literal><span style='font-size:
9.0pt;line-height:115%'>False</span></span> on line 253.</p>

<p class=Body>The <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>turn</span></span> variable is a string that either has the string value <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>'player'</span></span>
or <span class=Literal><span style='font-size:9.0pt;line-height:115%'>'computer'</span></span>.
It will keep track of whose turn it is. It is set to the return value of <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>whoGoesFirst()</span></span>,
which randomly chooses who will go first.</p>

<p class=Non-TOCHeading3>Running the Player’s Turn</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>257.</span>     while
True:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>258.</span>        
if turn == 'player':</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>259.</span>            
<span class=SourceCodeComment># Player's turn.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>260.</span>             if
showHints:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>261.</span>                
validMovesBoard = getBoardWithValidMoves(mainBoard, playerTile)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>262.</span>                
drawBoard(validMovesBoard)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>263.</span>            
else:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>264.</span>                
drawBoard(mainBoard)</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>265.</span>            
showPoints(playerTile, computerTile)</p>

</div>

<p class=Body>The <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>while</span></span> loop that starts on line 257 will keep looping each
time the player or computer takes a turn. The execution will break out of this
loop when the current game is over.</p>

<p class=Body>Line 258 has an <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>if</span></span> statement whose body has the code that runs
if it is the player’s turn. (The else-block that starts on line 282 has the
code for the computer’s turn.) </p>

<p class=Body>First the board is displayed on the screen. If hints mode is on
(that is, <span class=Literal><span style='font-size:9.0pt;line-height:115%'>showHints</span></span>
is <span class=Literal><span style='font-size:9.0pt;line-height:115%'>True</span></span>),
then the board data structure needs to have <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>'.'</span></span> period characters on
every valid space the player could move.</p>

<p class=Body>The <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>getBoardWithValidMoves()</span></span> function does that. It is passed a
game board data structure and returns a copy that also contains <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>'.'</span></span>
period characters. Line 262 passes this board to the <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>drawBoard()</span></span> function.</p>

<p class=Body>If hints mode is off, then line 264 passes <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>mainBoard</span></span> to <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>drawBoard()</span></span>.</p>

<p class=Body>After printing out the game board to the player, you also want to
print the current score by calling <span class=Literal><span style='font-size:
9.0pt;line-height:115%'>showPoints()</span></span> on line 265.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCode><span class=SourceLineNumber>266.</span>             move =
getPlayerMove(mainBoard, playerTile)</p>

</div>

<p class=Body>Next, let the player type in their move. <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>getPlayerMove()</span></span> handles
this, and its return value is a two-item list of the XY coordinate of the
player’s move. <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>getPlayerMove()</span></span> has already made sure that the move the
player typed in is a valid move.</p>

<p class=Body>&nbsp;</p>

<p class=Non-TOCHeading3>Handling the Quit or Hints Commands</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>267.</span>            
if move == 'quit':</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>268.</span>                
print('Thanks for playing!')</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>269.</span>                
sys.exit() <span class=SourceCodeComment># terminate the program</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>270.</span>            
elif move == 'hints':</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>271.</span>                
showHints = not showHints</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>272.</span>                
continue</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>273.</span>            
else:</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>274.</span>                
makeMove(mainBoard, playerTile, move[0], move[1])</p>

</div>

<p class=Body>If the player typed in the string <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>'quit'</span></span> for their move,
then <span class=Literal><span style='font-size:9.0pt;line-height:115%'>getPlayerMove()</span></span>
would have returned the string <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>'quit'</span></span>. In that case, line 269 calls the <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>sys.exit()</span></span>
to terminate the program.</p>

<p class=Body>If the player typed in the string <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>'hints'</span></span> for their move,
then <span class=Literal><span style='font-size:9.0pt;line-height:115%'>getPlayerMove()</span></span>
would have returned the string <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>'hints'</span></span>. In that case, you want to turn hints
mode on (if it was off) or off (if it was on).</p>

<p class=Body>The <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>showHints = not showHints</span></span> assignment statement on line 271
handles both of these cases, because <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>not False</span></span> evaluates to <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>True</span></span>
and <span class=Literal><span style='font-size:9.0pt;line-height:115%'>not True</span></span>
evaluates to <span class=Literal><span style='font-size:9.0pt;line-height:115%'>False</span></span>.
Then the <span class=Literal><span style='font-size:9.0pt;line-height:115%'>continue</span></span>
statement moves the execution to the start of the loop (<span class=Literal><span
style='font-size:9.0pt;line-height:115%'>turn</span></span> has not changed, so
it will still be the player’s turn).</p>

<p class=MsoNormal>Otherwise, if the player didn’t quit or toggle hints mode,
line 274 calls <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>makeMove()</span></span> to make the player’s move on the board.</p>

<p class=Non-TOCHeading3>Make the Player’s Move</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>276.</span>             if
getValidMoves(mainBoard, computerTile) == []:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>277.</span>                
break</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>278.</span>            
else:</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>279.</span>                
turn = 'computer'</p>

</div>

<p class=Body>After making the player’s move, line 276 calls <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>getValidMoves()</span></span>
to see if the computer could make any moves. If <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>getValidMoves()</span></span> returns
a blank list, then there are no more valid moves that the computer could make.
In that case, line 277 breaks out of the <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>while</span></span> loop and ends the
game.</p>

<p class=Body>Otherwise, line 279 sets <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>turn</span></span> to <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>'computer'</span></span>.
The flow of execution skips the else-block and reaches the end of the
while-block, so execution jumps back to the <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>while</span></span> statement on line
257. This time, however, it will be the computer’s turn.</p>

<p class=Non-TOCHeading3>Running the Computer’s Turn</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>281.</span>        
else:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>282.</span>             <span
class=SourceCodeComment># Computer’s turn.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>283.</span>            
drawBoard(mainBoard)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>284.</span>            
showPoints(playerTile, computerTile)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>285.</span>            
input('Press Enter to see the computer\'s move.')</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>286.</span>            
x, y = getComputerMove(mainBoard, computerTile)</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>287.</span>             makeMove(mainBoard,
computerTile, x, y)</p>

</div>

<p class=Body>After printing out the board with <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>drawBoard()</span></span>, also print
the current score with a call to <span class=Literal><span style='font-size:
9.0pt;line-height:115%'>showPoints()</span></span> on line 284.</p>

<p class=Body>Line 285 calls <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>input()</span></span> to pause the script while the player
can look at the board. This is much like how <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>input()</span></span> was used to
pause the program in the Jokes chapter. Instead of using a <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>print()</span></span> call to print a
string before a call to <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>input()</span></span>, you can do the same thing by passing
the string to print to <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>input()</span></span>.</p>

<p class=Body>After the player has looked at the board and pressed <span
class=Keycap><span style='font-variant:normal !important;text-transform:uppercase'>enter</span></span>,
line 286 calls <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>getComputerMove()</span></span> to get the XY coordinates of the
computer’s next move. These coordinates are stored in variables <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>x</span></span>
and <span class=Literal><span style='font-size:9.0pt;line-height:115%'>y</span></span>
using multiple assignment.</p>

<p class=Body>Finally, pass <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>x</span></span> and <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>y</span></span>, along with the game
board data structure and the computer’s tile, to the <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>makeMove()</span></span> function.
This places the computer’s tile on the game board in <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>mainBoard</span></span> to reflect the
computer’s move. Line 286’s call to <span class=Literal><span style='font-size:
9.0pt;line-height:115%'>getComputerMove()</span></span> got the computer’s move
(and stored it in variables <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>x</span></span> and <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>y</span></span>). The call to <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>makeMove()</span></span>
on line 287 makes the move on the board.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>289.</span>            
if getValidMoves(mainBoard, playerTile) == []:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>290.</span>                
break</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>291.</span>            
else:</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>292.</span>                
turn = 'player'</p>

</div>

<p class=Body>Lines 289 to 292 are similar to lines 276 to 279. After the
computer has made its move, line 289 checks if there exist any valid moves the
human player can make. If <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>getValidMoves()</span></span> returns an empty list, then
there are no valid moves. That means the game is over, and line 290 breaks out
of the <span class=Literal><span style='font-size:9.0pt;line-height:115%'>while</span></span>
loop.</p>

<p class=Body>Otherwise, there’s at least one possible move the player should
make. The <span class=Literal><span style='font-size:9.0pt;line-height:115%'>turn</span></span>
variable is to <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>'player'</span></span>. There is no more code in the while-block after
line 292, so execution loops back to the <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>while</span></span> statement on line
257.</p>

<p class=Body>&nbsp;</p>

<p class=Non-TOCHeading3>Drawing Everything on the Screen</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>294.</span>     <span
class=SourceCodeComment># Display the final score.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>295.</span>    
drawBoard(mainBoard)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>296.</span>    
scores = getScoreOfBoard(mainBoard)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>297.</span>    
print('X scored %s points. O scored %s points.' % (scores['X'], scores['O']))</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>298.</span>     if
scores[playerTile] &gt; scores[computerTile]:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>299.</span>        
print('You beat the computer by %s points! Congratulations!' %
(scores[playerTile] - scores[computerTile]))</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>300.</span>     elif
scores[playerTile] &lt; scores[computerTile]:</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>301.</span>        
print('You lost. The computer beat you by %s points.' % (scores[computerTile] -
scores[playerTile]))</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>302.</span>    
else:</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>303.</span>        
print('The game was a tie!')</p>

</div>

<p class=Body>Line 294 is the first line beyond the while-block that started on
line 257. This code is executed when the execution breaks out of that <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>while</span></span>
loop from line 290 or 277. At this point, the game is over. Now the program
should print the board and scores and determine who won the game.</p>

<p class=Body><span class=Literal><span style='font-size:9.0pt;line-height:
115%'>getScoreOfBoard()</span></span> will return a dictionary with keys <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>'X'</span></span>
and <span class=Literal><span style='font-size:9.0pt;line-height:115%'>'O'</span></span>
and values of both players’ scores. By checking if the player’s score is
greater than, less than, or equal to the computer’s score, you can know if the
player won, lost, or tied, respectively.</p>

<p class=Non-TOCHeading3>Ask the Player to Play Again</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>305.</span>     if
not playAgain():</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber>306.</span>        
break</p>

</div>

<p class=Body>Call the <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>playAgain()</span></span> function, which returns <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>True</span></span>
if the player typed in that they want to play another game. If <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>playAgain()</span></span>
returns <span class=Literal><span style='font-size:9.0pt;line-height:115%'>False</span></span>,
the <span class=Literal><span style='font-size:9.0pt;line-height:115%'>not</span></span>
operator makes the <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>if</span></span> statement’s condition <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>True</span></span>, the execution
breaks out of the <span class=Literal><span style='font-size:9.0pt;line-height:
115%'>while</span></span> loop that started on line 248. Since there are no
more lines of code after this while-block, the program terminates.</p>

<p class=Body>Otherwise, <span class=Literal><span style='font-size:9.0pt;
line-height:115%'>playAgain()</span></span> has returned <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>True</span></span> (making the <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>if</span></span> statement’s
condition <span class=Literal><span style='font-size:9.0pt;line-height:115%'>False</span></span>),
and so execution loops back to the <span class=Literal><span style='font-size:
9.0pt;line-height:115%'>while</span></span> statement on line 248 and a new
game board is created.</p>

<p class=Non-TOCHeading3>Changing the <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>drawBoard()</span></span> Function</p>

<p class=Body>The board you draw for the Reversi game is large. But you could
change the <span class=Literal><span style='font-size:9.0pt;line-height:115%'>drawBoard()</span></span>
function’s code to draw out a much smaller board, while keeping the rest of the
game code the same. The new, smaller board would look like this:</p>

<div style='border:solid windowtext 1.0pt;padding:1.0pt 4.0pt 1.0pt 4.0pt'>

<p class=CodeExampleCxSpFirst style='border:none;padding:0in'>  12345678</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'> +--------+</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>1|    O   |</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>2|   XOX  |</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>3|    O   |</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>4| XXXXX  |</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>5|  .OX   |</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>6|  OOO   |</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>7| ..O..  |</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>8|   O    |</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'> +--------+</p>

<p class=CodeExampleCxSpMiddle style='border:none;padding:0in'>You have 8
points. The computer has 9 points.</p>

<p class=CodeExampleCxSpLast style='border:none;padding:0in'>Enter your move,
or type quit to end the game, or hints to turn off/on hints.</p>

</div>

<p class=Body>Here is the code for this new <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>drawBoard()</span></span> function,
starting at line 6. You can also download this code from <span class=URL><u>http://invpy.com/reversi_mini.py</u></span>.</p>

<div style='border:double windowtext 1.5pt;padding:3.0pt 4.0pt 3.0pt 4.0pt'>

<p class=SourceCodeCxSpFirst><span class=SourceLineNumber>  6.</span> def
drawBoard(board):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  7.</span>     <span
class=SourceCodeComment># This function prints out the board that it was
passed. Returns None.</span></p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  8.</span>    
HLINE = ' +--------+'</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber>  9.</span>    
print(' 12345678')</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 10.</span>    
print(HLINE)</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 11.</span>     for
y in range(8):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 12.</span>        
print('%s|' % (y+1), end='')</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 13.</span>        
for x in range(8):</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 14.</span>            
print(board[x][y], end='')</p>

<p class=SourceCodeCxSpMiddle><span class=SourceLineNumber> 15.</span>        
print('|')</p>

<p class=SourceCodeCxSpLast><span class=SourceLineNumber> 16.</span>    
print(HLINE)</p>

</div>

<p class=Non-TOCHeading3>Summary</p>

<p class=Body>The AI may seem almost unbeatable, but this isn’t because the
computer is smart. The strategy it follows is simple: move on the corner if you
can, otherwise make the move that will flip over the most tiles. We could do
that, but it would be slow to figure out how many tiles would be flipped for
every possible valid move we could make. But calculating this for the computer
is simple. The computer isn’t smarter than us, it’s just much faster!</p>

<p class=Body>This game is similar to Sonar because it makes use of a grid for
a board. It is also like the Tic Tac Toe game because there’s an AI that plans
out the best move for it to take. This chapter only introduced one new concept:
that empty lists, blank strings, and the integer <span class=Literal><span
style='font-size:9.0pt;line-height:115%'>0</span></span> all evaluate to <span
class=Literal><span style='font-size:9.0pt;line-height:115%'>False</span></span>
in the context of a condition.</p>

<p class=Body>Other than that, this game used programming concepts you already
knew! You don’t have to know much about programming to create interesting
games. However, this game is stretching how far you can get with ASCII art. The
board took up almost the entire screen to draw, and the game didn't have any
color.</p>

<p class=MsoNormal>Later in this book, we will learn how to create games with
graphics and animation, not just text. We will do this using a module called
Pygame, which adds new functions and features to Python so that we can break
away from using only text and keyboard input.</p>

</div>

</body>

</html>
