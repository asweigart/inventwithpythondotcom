<html><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><link href="invent4thedstyleb.css" rel="stylesheet" type="text/css" /><title>Chapter 20 - Using Sounds And Images</title></head><body style="background-color: #fffeee;">

<!--<script type="text/javascript">
//<![CDATA[

var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-5459430-3']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();

//]]>
</script>-->


<div style="background-color: #eeeddd; float: right; height: 310px; font-family: sans-serif;" id="otherbooks">
  <a href="#" onclick="document.getElementById('otherbooks').outerHTML='';" style="vertical-align: top;">(close)</a><br />

  <a target="_blank" href="https://nostarch.com/automatestuff2" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_automate.link');"><img src="/images/cover_automate2_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://nostarch.com/big-book-small-python-projects" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_bigbookpython.link');"><img src="/images/cover_bigbookpython_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://nostarch.com/beyond-basic-stuff-python" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_beyond.link');"><img src="/images/cover_beyond_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://nostarch.com/inventwithpython" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_invent.link');"><img src="/images/cover_invent4th_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://www.amazon.com/Making-Games-Python-Pygame-Sweigart/dp/1469901730?ie=UTF8&amp;tag=playwithpyth-20&amp;linkCode=as2&amp;camp=1789&amp;creative=9325&amp;creativeASIN=1469901730" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_pygame.link');"><img src="/images/cover_makinggames_thumb.webp" style="height: 200px; border: solid black 1px; /"></a>
  <a target="_blank" href="https://nostarch.com/crackingcodes" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_hacking.link');"><img src="/images/cover_crackingcodes_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://nostarch.com/scratchplayground"><img src="/images/cover_scratchprogrammingplayground_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://nostarch.com/codingwithminecraft"><img src="/images/cover_codingwithminecraft_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <br />
  <a href="https://inventwithpython.com/automateudemy">Use this link to get 70% off the Automate the Boring Stuff online video course.</a><br />
  <a href="https://www.patreon.com/AlSweigart">Support me on Patreon</a>
</div>

<a href="chapter19.html">Prev: Chapter 19 - Collision Detection</a> | <a href="chapter21.html">Next: Chapter 21 - A Dodger Game with Sounds and Images</a>



<div id="calibre_link-134" class="calibre">
<h2 class="h1" id="calibre_link-98"><span {http://www.idpf.org/2007/ops}type="pagebreak" id="calibre_link-933" class="calibre1"></span><span class="big"><strong class="calibre2">20</strong></span><br class="calibre9" /><strong class="calibre2">USING SOUNDS AND IMAGES</strong></h2>
<div class="imagec"><img src="images/00016.jpeg" alt="image" class="calibre3" /></div>
<p class="noindent">In <a href="#calibre_link-96" class="calibre4">Chapters 18</a> and <a href="#calibre_link-97" class="calibre4">19</a>, you learned how to make GUI programs that have graphics and can accept input from the keyboard and mouse. You also learned how to draw different shapes. In this chapter, you’ll learn how to add sounds, music, and images to your games.</p>
<div class="sidebar">
<p class="sidebart"><strong class="calibre2">TOPICS COVERED IN THIS CHAPTER</strong></p>
<p class="bull">• Sound and image files</p>
<p class="bull">• Drawing and rescaling sprites</p>
<p class="bull">• Adding music and sounds</p>
<p class="bull">• Toggling sound on and off</p>
</div>
<h3 class="h2" id="calibre_link-751"><span {http://www.idpf.org/2007/ops}type="pagebreak" id="calibre_link-3" class="calibre1"></span><strong class="calibre2">Adding Images with Sprites</strong></h3>
<p class="noindent">A <em class="calibre6">sprite</em> is a single two-dimensional image that is used as part of the graphics on a screen. <a href="#calibre_link-2" class="calibre4">Figure 20-1</a> shows some example sprites.</p>
<div class="image"><img src="images/00003.jpeg" alt="image" class="calibre3" /></div>
<p class="figcap"><a id="calibre_link-2" class="calibre4"></a><em class="calibre6">Figure 20-1: Some examples of sprites</em></p>
<p class="indent">The sprite images are drawn on top of a background. You can flip the sprite image horizontally so that it is facing the other way. You can also draw the same sprite image multiple times on the same window, and you can resize sprites to be larger or smaller than the original sprite image. The background image can be considered one large sprite, too. <a href="#calibre_link-4" class="calibre4">Figure 20-2</a> shows sprites being used together.</p>
<div class="image"><img src="images/00011.jpeg" alt="image" class="calibre3" /></div>
<p class="figcap"><a id="calibre_link-4" class="calibre4"></a><em class="calibre6">Figure 20-2: A complete scene, with sprites drawn on top of a background</em></p>
<p class="indent">The next program will demonstrate how to play sounds and draw sprites using <span class="literal1">pygame</span>.</p>
<h3 class="h2" id="calibre_link-752"><strong class="calibre2">Sound and Image Files</strong></h3>
<p class="noindent">Sprites are stored in image files on your computer. There are several image formats that <span class="literal1">pygame</span> can use. To tell what format an image file uses, look at the end of the filename (after the last period). This is called the <em class="calibre6">file extension</em>. For example, the file <em class="calibre6">player.png</em> is in the PNG format. The image formats <span class="literal1">pygame</span> supports include BMP, PNG, JPG, and GIF.</p>
<p class="indent"><span {http://www.idpf.org/2007/ops}type="pagebreak" id="calibre_link-314"></span>You can download images from your web browser. On most web browsers, you do so by right-clicking the image in the web page and selecting Save from the menu that appears. Remember where on the hard drive you saved the image file, because you’ll need to copy the downloaded image file into the same folder as your Python program’s <em class="calibre6">.py</em> file. You can also create your own images with a drawing program like Microsoft Paint or Tux Paint.</p>
<p class="indent">The sound file formats that <span class="literal1">pygame</span> supports are MIDI, WAV, and MP3. You can download sound effects from the internet just as you can image files, but the sound files must be in one of these three formats. If your computer has a microphone, you can also record sounds and make your own WAV files to use in your games.</p>
<h3 class="h2" id="calibre_link-753"><strong class="calibre2">Sample Run of the Sprites and Sounds Program</strong></h3>
<p class="noindent">This chapter’s program is the same as the Collision Detection program from <a href="#calibre_link-97" class="calibre4">Chapter 19</a>. However, in this program we’ll use sprites instead of plain-looking squares. We’ll use a sprite of a person to represent the player instead of the black box and a sprite of cherries instead of the green food squares. We’ll also play background music, and we’ll add a sound effect when the player sprite eats one of the cherries.</p>
<p class="indent">In this game, the player sprite will eat cherry sprites and, as it eats the cherries, it will grow. When you run the program, the game will look like <a href="#calibre_link-135" class="calibre4">Figure 20-3</a>.</p>
<div class="image"><img src="images/00059.jpeg" alt="image" class="calibre3" /></div>
<p class="figcap"><a id="calibre_link-135" class="calibre4"></a><em class="calibre6">Figure 20-3: A screenshot of the Sprites and Sounds game</em></p>
<h3 class="h2" id="calibre_link-754"><span {http://www.idpf.org/2007/ops}type="pagebreak" id="calibre_link-376" class="calibre1"></span><strong class="calibre2">Source Code for the Sprites and Sounds Program</strong></h3>
<p class="noindent">Start a new file, enter the following code, and then save it as <em class="calibre6">spritesAndSounds.py</em>. You can download the image and sound files we’ll use in this program from this book’s website at <em class="calibre6"><a href="https://www.nostarch.com/inventwithpython/" class="calibre4">https://www.nostarch.com/inventwithpython/</a></em>. Place these files in the same folder as the <em class="calibre6">spritesAndSounds.py</em> program.</p>
<div class="image"><img src="images/00020.jpeg" alt="image" class="calibre3" /></div>
<p class="indent">If you get errors after entering this code, compare the code you typed to the book’s code with the online diff tool at <em class="calibre6"><a href="https://www.nostarch.com/inventwithpython#diff" class="calibre4">https://www.nostarch.com/inventwithpython#diff</a></em>.</p>
<p class="sidenote"><em class="calibre6">spritesAnd Sounds.py</em></p>
<p class="programs">&nbsp;&nbsp;1. import pygame, sys, time, random<br class="calibre7" />&nbsp;&nbsp;2. from pygame.locals import *<br class="calibre7" />&nbsp;&nbsp;3.<br class="calibre7" />&nbsp;&nbsp;4. # Set up pygame.<br class="calibre7" />&nbsp;&nbsp;5. pygame.init()<br class="calibre7" />&nbsp;&nbsp;6. mainClock = pygame.time.Clock()<br class="calibre7" />&nbsp;&nbsp;7.<br class="calibre7" />&nbsp;&nbsp;8. # Set up the window.<br class="calibre7" />&nbsp;&nbsp;9. WINDOWWIDTH = 400<br class="calibre7" />&nbsp;10. WINDOWHEIGHT = 400<br class="calibre7" />&nbsp;11. windowSurface = pygame.display.set_mode((WINDOWWIDTH, WINDOWHEIGHT),<br class="calibre7" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;0, 32)<br class="calibre7" />&nbsp;12. pygame.display.set_caption('Sprites and Sounds')<br class="calibre7" />&nbsp;13.<br class="calibre7" />&nbsp;14. # Set up the colors.<br class="calibre7" />&nbsp;15. WHITE = (255, 255, 255)<br class="calibre7" />&nbsp;16.<br class="calibre7" />&nbsp;17. # Set up the block data structure.<br class="calibre7" />&nbsp;18. player = pygame.Rect(300, 100, 40, 40)<br class="calibre7" />&nbsp;19. playerImage = pygame.image.load('player.png')<br class="calibre7" />&nbsp;20. playerStretchedImage = pygame.transform.scale(playerImage, (40, 40))<br class="calibre7" />&nbsp;21. foodImage = pygame.image.load('cherry.png')<br class="calibre7" />&nbsp;22. foods = []<br class="calibre7" />&nbsp;23. for i in range(20):<br class="calibre7" />&nbsp;24.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foods.append(pygame.Rect(random.randint(0, WINDOWWIDTH - 20),<br class="calibre7" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;random.randint(0, WINDOWHEIGHT - 20), 20, 20))<br class="calibre7" />&nbsp;25.<br class="calibre7" />&nbsp;26. foodCounter = 0<br class="calibre7" />&nbsp;27. NEWFOOD = 40<br class="calibre7" />&nbsp;28.<br class="calibre7" />&nbsp;29. # Set up keyboard variables.<br class="calibre7" />&nbsp;30. moveLeft = False<br class="calibre7" />&nbsp;31. moveRight = False<br class="calibre7" />&nbsp;32. moveUp = False<br class="calibre7" />&nbsp;33. moveDown = False<br class="calibre7" />&nbsp;34.<br class="calibre7" />&nbsp;35. MOVESPEED = 6<br class="calibre7" />&nbsp;36.<br class="calibre7" /><span {http://www.idpf.org/2007/ops}type="pagebreak" id="calibre_link-934"></span> 37. # Set up the music.<br class="calibre7" />&nbsp;38. pickUpSound = pygame.mixer.Sound('pickup.wav')<br class="calibre7" />&nbsp;39. pygame.mixer.music.load('background.mid')<br class="calibre7" />&nbsp;40. pygame.mixer.music.play(-1, 0.0)<br class="calibre7" />&nbsp;41. musicPlaying = True<br class="calibre7" />&nbsp;42.<br class="calibre7" />&nbsp;43. # Run the game loop.<br class="calibre7" />&nbsp;44. while True:<br class="calibre7" />&nbsp;45.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Check for the QUIT event.<br class="calibre7" />&nbsp;46.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for event in pygame.event.get():<br class="calibre7" />&nbsp;47.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if event.type == QUIT:<br class="calibre7" />&nbsp;48.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pygame.quit()<br class="calibre7" />&nbsp;49.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sys.exit()<br class="calibre7" />&nbsp;50.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if event.type == KEYDOWN:<br class="calibre7" />&nbsp;51.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Change the keyboard variables.<br class="calibre7" />&nbsp;52.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if event.key == K_LEFT or event.key == K_a:<br class="calibre7" />&nbsp;53.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;moveRight = False<br class="calibre7" />&nbsp;54.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;moveLeft = True<br class="calibre7" />&nbsp;55.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if event.key == K_RIGHT or event.key == K_d:<br class="calibre7" />&nbsp;56.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;moveLeft = False<br class="calibre7" />&nbsp;57.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;moveRight = True<br class="calibre7" />&nbsp;58.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if event.key == K_UP or event.key == K_w:<br class="calibre7" />&nbsp;59.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;moveDown = False<br class="calibre7" />&nbsp;60.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;moveUp = True<br class="calibre7" />&nbsp;61.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if event.key == K_DOWN or event.key == K_s:<br class="calibre7" />&nbsp;62.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;moveUp = False<br class="calibre7" />&nbsp;63.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;moveDown = True<br class="calibre7" />&nbsp;64.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if event.type == KEYUP:<br class="calibre7" />&nbsp;65.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if event.key == K_ESCAPE:<br class="calibre7" />&nbsp;66.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pygame.quit()<br class="calibre7" />&nbsp;67.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;sys.exit()<br class="calibre7" />&nbsp;68.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if event.key == K_LEFT or event.key == K_a:<br class="calibre7" />&nbsp;69.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;moveLeft = False<br class="calibre7" />&nbsp;70.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if event.key == K_RIGHT or event.key == K_d:<br class="calibre7" />&nbsp;71.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;moveRight = False<br class="calibre7" />&nbsp;72.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if event.key == K_UP or event.key == K_w:<br class="calibre7" />&nbsp;73.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;moveUp = False<br class="calibre7" />&nbsp;74.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if event.key == K_DOWN or event.key == K_s:<br class="calibre7" />&nbsp;75.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;moveDown = False<br class="calibre7" />&nbsp;76.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if event.key == K_x:<br class="calibre7" />&nbsp;77.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;player.top = random.randint(0, WINDOWHEIGHT -<br class="calibre7" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;player.height)<br class="calibre7" />&nbsp;78.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;player.left = random.randint(0, WINDOWWIDTH -<br class="calibre7" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;player.width)<br class="calibre7" />&nbsp;79.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if event.key == K_m:<br class="calibre7" />&nbsp;80.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if musicPlaying:<br class="calibre7" />&nbsp;81.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pygame.mixer.music.stop()<br class="calibre7" />&nbsp;82.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:<br class="calibre7" />&nbsp;83.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pygame.mixer.music.play(-1, 0.0)<br class="calibre7" />&nbsp;84.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;musicPlaying = not musicPlaying<br class="calibre7" />&nbsp;85.<br class="calibre7" />&nbsp;86.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if event.type == MOUSEBUTTONUP:<br class="calibre7" />&nbsp;87.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foods.append(pygame.Rect(event.pos[0] - 10,<br class="calibre7" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;event.pos[1] - 10, 20, 20))<br class="calibre7" />&nbsp;88.<br class="calibre7" /><span {http://www.idpf.org/2007/ops}type="pagebreak" id="calibre_link-264"></span> 89.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foodCounter += 1<br class="calibre7" />&nbsp;90.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if foodCounter &gt;= NEWFOOD:<br class="calibre7" />&nbsp;91.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Add new food.<br class="calibre7" />&nbsp;92.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foodCounter = 0<br class="calibre7" />&nbsp;93.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foods.append(pygame.Rect(random.randint(0, WINDOWWIDTH - 20),<br class="calibre7" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;random.randint(0, WINDOWHEIGHT - 20), 20, 20))<br class="calibre7" />&nbsp;94.<br class="calibre7" />&nbsp;95.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Draw the white background onto the surface.<br class="calibre7" />&nbsp;96.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;windowSurface.fill(WHITE)<br class="calibre7" />&nbsp;97.<br class="calibre7" />&nbsp;98.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Move the player.<br class="calibre7" />&nbsp;99.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if moveDown and player.bottom &lt; WINDOWHEIGHT:<br class="calibre7" />100.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;player.top += MOVESPEED<br class="calibre7" />101.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if moveUp and player.top &gt; 0:<br class="calibre7" />102.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;player.top -= MOVESPEED<br class="calibre7" />103.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if moveLeft and player.left &gt; 0:<br class="calibre7" />104.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;player.left -= MOVESPEED<br class="calibre7" />105.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if moveRight and player.right &lt; WINDOWWIDTH:<br class="calibre7" />106.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;player.right += MOVESPEED<br class="calibre7" />107.<br class="calibre7" />108.<br class="calibre7" />109.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Draw the block onto the surface.<br class="calibre7" />110.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;windowSurface.blit(playerStretchedImage, player)<br class="calibre7" />111.<br class="calibre7" />112.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Check whether the block has intersected with any food squares.<br class="calibre7" />113.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for food in foods[:]:<br class="calibre7" />114.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if player.colliderect(food):<br class="calibre7" />115.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foods.remove(food)<br class="calibre7" />116.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;player = pygame.Rect(player.left, player.top,<br class="calibre7" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;player.width + 2, player.height + 2)<br class="calibre7" />117.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;playerStretchedImage = pygame.transform.scale(playerImage,<br class="calibre7" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(player.width, player.height))<br class="calibre7" />118.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if musicPlaying:<br class="calibre7" />119.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pickUpSound.play()<br class="calibre7" />120.<br class="calibre7" />121.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Draw the food.<br class="calibre7" />122.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for food in foods:<br class="calibre7" />123.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;windowSurface.blit(foodImage, food)<br class="calibre7" />124.<br class="calibre7" />125.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Draw the window onto the screen.<br class="calibre7" />126.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pygame.display.update()<br class="calibre7" />127.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;mainClock.tick(40)</p>
<h3 class="h2" id="calibre_link-755"><strong class="calibre2">Setting Up the Window and the Data Structure</strong></h3>
<p class="noindent">Most of the code in this program is the same as the Collision Detection program in <a href="#calibre_link-97" class="calibre4">Chapter 19</a>. We’ll focus only on the parts that add sprites and sounds. First, on line 12 let’s set the caption of the title bar to a string that describes this program:</p>
<p class="programs">12. pygame.display.set_caption('Sprites and Sounds')</p>
<p class="indent"><span {http://www.idpf.org/2007/ops}type="pagebreak" id="calibre_link-335"></span>In order to set the caption, you need to pass the string <span class="literal1">'Sprites and Sounds'</span> to the <span class="literal1">pygame.display.set_caption()</span> function.</p>
<h4 class="h3" id="calibre_link-756"><em class="calibre10"><strong class="calibre2">Adding a Sprite</strong></em></h4>
<p class="noindenta">Now that we have the caption set up, we need the actual sprites. We’ll use three variables to represent the player, unlike the previous programs that used just one.</p>
<p class="programs">17. # Set up the block data structure.<br class="calibre7" />18. player = pygame.Rect(300, 100, 40, 40)<br class="calibre7" />19. playerImage = pygame.image.load('player.png')<br class="calibre7" />20. playerStretchedImage = pygame.transform.scale(playerImage, (40, 40))<br class="calibre7" />21. foodImage = pygame.image.load('cherry.png')</p>
<p class="indent">The <span class="literal1">player</span> variable on line 18 will store a <span class="literal1">Rect</span> object that keeps track of the location and size of the player. The <span class="literal1">player</span> variable doesn’t contain the player’s image. At the beginning of the program, the top-left corner of the player is located at (300, 100), and the player has an initial height and width of 40 pixels.</p>
<p class="indent">The second variable that represents the player is <span class="literal1">playerImage</span> on line 19. The <span class="literal1">pygame.image.load()</span> function is passed a string of the filename of the image to load. The return value is a <span class="literal1">Surface</span> object that has the graphics in the image file drawn on its surface. We store this <span class="literal1">Surface</span> object inside <span class="literal1">playerImage</span>.</p>
<h4 class="h3" id="calibre_link-757"><em class="calibre10"><strong class="calibre2">Changing the Size of a Sprite</strong></em></h4>
<p class="noindenta">On line 20, we’ll use a new function in the <span class="literal1">pygame.transform</span> module. The <span class="literal1">pygame.transform.scale()</span> function can shrink or enlarge a sprite. The first argument is a <span class="literal1">Surface</span> object with the image drawn on it. The second argument is a tuple for the new width and height of the image in the first argument. The <span class="literal1">scale()</span> function returns a <span class="literal1">Surface</span> object with the image drawn at a new size. In this chapter’s program, we’ll make the player sprite stretch larger as it eats more cherries. We’ll store the original image in the <span class="literal1">playerImage</span> variable but the stretched image in the <span class="literal1">playerStretchedImage</span> variable.</p>
<p class="indent">On line 21, we call <span class="literal1">load()</span> again to create a <span class="literal1">Surface</span> object with the cherry image drawn on it. Be sure you have the <em class="calibre6">player.png</em> and <em class="calibre6">cherry.png</em> files in the same folder as the <em class="calibre6">spritesAndSounds.py</em> file; otherwise, <span class="literal1">pygame</span> won’t be able to find them and will give an error.</p>
<h3 class="h2" id="calibre_link-758"><strong class="calibre2">Setting Up the Music and Sounds</strong></h3>
<p class="noindent">Next you need to load the sound files. There are two modules for sound in <span class="literal1">pygame</span>. The <span class="literal1">pygame.mixer</span> module can play short sound effects during the game. The <span class="literal1">pygame.mixer.music</span> module can play background music.</p>
<h4 class="h3" id="calibre_link-759"><span {http://www.idpf.org/2007/ops}type="pagebreak" id="calibre_link-200" class="calibre1"></span><em class="calibre10"><strong class="calibre2">Adding Sound Files</strong></em></h4>
<p class="noindenta">Call the <span class="literal1">pygame.mixer.Sound()</span> constructor function to create a <span class="literal1">pygame.mixer.Sound</span> object (called a <span class="literal1">Sound</span> object for short). This object has a <span class="literal1">play()</span> method that will play the sound effect when called.</p>
<p class="programs">37. # Set up the music.<br class="calibre7" />38. pickUpSound = pygame.mixer.Sound('pickup.wav')<br class="calibre7" />39. pygame.mixer.music.load('background.mid')<br class="calibre7" />40. pygame.mixer.music.play(-1, 0.0)<br class="calibre7" />41. musicPlaying = True</p>
<p class="indent">Line 39 calls <span class="literal1">pygame.mixer.music.load()</span> to load the background music, and line 40 calls <span class="literal1">pygame.mixer.music.play()</span> to start playing it. The first parameter tells <span class="literal1">pygame</span> how many times to play the background music after the first time we play it. So passing <span class="literal1">5</span> would cause <span class="literal1">pygame</span> to play the background music six times. Here we pass the parameter <span class="literal1">-1</span>, which is a special value that makes the background music repeat forever.</p>
<p class="indent">The second parameter to <span class="literal1">play()</span> is the point in the sound file to start playing. Passing <span class="literal1">0.0</span> will play the background music starting from the beginning. Passing <span class="literal1">2.5</span> would start the background music 2.5 seconds from the beginning.</p>
<p class="indent">Finally, the <span class="literal1">musicPlaying</span> variable has a Boolean value that tells the program whether it should play the background music and sound effects or not. It’s nice to give the player the option to run the program without the sound playing.</p>
<h4 class="h3" id="calibre_link-760"><em class="calibre10"><strong class="calibre2">Toggling the Sound On and Off</strong></em></h4>
<p class="noindenta">The M key will turn the background music on or off. If <span class="literal1">musicPlaying</span> is set to <span class="literal1">True</span>, then the background music is currently playing, and we should stop it by calling <span class="literal1">pygame.mixer.music.stop()</span>. If <span class="literal1">musicPlaying</span> is set to <span class="literal1">False</span>, then the background music isn’t currently playing, and we should start it by calling <span class="literal1">play()</span>. Lines 79 to 84 use <span class="literal1">if</span> statements to do this:</p>
<p class="programs">79.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if event.key == K_m:<br class="calibre7" />80.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if musicPlaying:<br class="calibre7" />81.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pygame.mixer.music.stop()<br class="calibre7" />82.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;else:<br class="calibre7" />83.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pygame.mixer.music.play(-1, 0.0)<br class="calibre7" />84.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;musicPlaying = not musicPlaying</p>
<p class="indent">Whether the music is playing or not, we want to toggle the value in <span class="literal1">musicPlaying</span>. <em class="calibre6">Toggling</em> a Boolean value means to set a value to the opposite of its current value. The line <span class="literal1">musicPlaying = not musicPlaying</span> sets the variable to <span class="literal1">False</span> if it is currently <span class="literal1">True</span> or sets it to <span class="literal1">True</span> if it is currently <span class="literal1">False</span>. Think of toggling as what happens when you flip a light switch on or off: toggling the light switch sets it to the opposite setting.</p>
<h3 class="h2" id="calibre_link-761"><span {http://www.idpf.org/2007/ops}type="pagebreak" id="calibre_link-341" class="calibre1"></span><strong class="calibre2">Drawing the Player on the Window</strong></h3>
<p class="noindent">Remember that the value stored in <span class="literal1">playerStretchedImage</span> is a <span class="literal1">Surface</span> object. Line 110 draws the sprite of the player onto the window’s <span class="literal1">Surface</span> object (which is stored in <span class="literal1">windowSurface</span>) using <span class="literal1">blit()</span>:</p>
<p class="programs">109.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Draw the block onto the surface.<br class="calibre7" />110.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;windowSurface.blit(playerStretchedImage, player)</p>
<p class="indent">The second parameter to the <span class="literal1">blit()</span> method is a <span class="literal1">Rect</span> object that specifies where on the <span class="literal1">Surface</span> object the sprite should be drawn. The program uses the <span class="literal1">Rect</span> object stored in <span class="literal1">player</span>, which keeps track of the player’s position in the window.</p>
<h3 class="h2" id="calibre_link-762"><strong class="calibre2">Checking for Collisions</strong></h3>
<p class="noindent">This code is similar to the code in the previous programs, but there are a couple of new lines:</p>
<p class="programs">114.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if player.colliderect(food):<br class="calibre7" />115.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;foods.remove(food)<br class="calibre7" />116.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;player = pygame.Rect(player.left, player.top,<br class="calibre7" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;player.width + 2, player.height + 2)<br class="calibre7" />117.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;playerStretchedImage = pygame.transform.scale(playerImage,<br class="calibre7" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(player.width, player.height))<br class="calibre7" />118.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if musicPlaying:<br class="calibre7" />119.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pickUpSound.play()</p>
<p class="indent">When the player sprite eats one of the cherries, its size increases by two pixels in height and width. On line 116, a new <span class="literal1">Rect</span> object that is two pixels larger than the old <span class="literal1">Rect</span> object will be assigned as the new value of <span class="literal1">player</span>.</p>
<p class="indent">While the <span class="literal1">Rect</span> object represents the position and size of the player, the image of the player is stored in a <span class="literal1">playerStretchedImage</span> as a <span class="literal1">Surface</span> object. On line 117, the program creates a new stretched image by calling <span class="literal1">scale()</span>.</p>
<p class="indent">Stretching an image often distorts it a little. If you keep restretching an already stretched image, the distortions add up quickly. But by stretching the original image to a new size each time&mdash;by passing <span class="literal1">playerImage</span>, not <span class="literal1">playerStretchedImage</span>, as the first argument for <span class="literal1">scale()</span>&mdash;you distort the image only once.</p>
<p class="indent">Finally, line 119 calls the <span class="literal1">play()</span> method on the <span class="literal1">Sound</span> object stored in the <span class="literal1">pickUpSound</span> variable. But it does this only if <span class="literal1">musicPlaying</span> is set to <span class="literal1">True</span> (which means that the sound is turned on).</p>
<h3 class="h2" id="calibre_link-763"><span {http://www.idpf.org/2007/ops}type="pagebreak" id="calibre_link-935" class="calibre1"></span><strong class="calibre2">Drawing the Cherries on the Window</strong></h3>
<p class="noindent">In the previous programs, you called the <span class="literal1">pygame.draw.rect()</span> function to draw a green square for each <span class="literal1">Rect</span> object stored in the <span class="literal1">foods</span> list. In this program, however, you want to draw the cherry sprites instead. Call the <span class="literal1">blit()</span> method and pass the <span class="literal1">Surface</span> object stored in <span class="literal1">foodImage</span>, which has the cherries image drawn on it:</p>
<p class="programs">121.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;# Draw the food.<br class="calibre7" />122.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;for food in foods:<br class="calibre7" />123.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;windowSurface.blit(foodImage, food)</p>
<p class="indent">The <span class="literal1">food</span> variable, which contains each of the <span class="literal1">Rect</span> objects in <span class="literal1">foods</span> on each iteration through the <span class="literal1">for</span> loop, tells the <span class="literal1">blit()</span> method where to draw the <span class="literal1">foodImage</span>.</p>
<h3 class="h2" id="calibre_link-764"><strong class="calibre2">Summary</strong></h3>
<p class="noindent">You’ve added images and sound to your game. The images, called sprites, look much better than the simple drawn shapes used in the previous programs. Sprites can be scaled (that is, stretched) to a larger or smaller size, so we can display sprites at any size we want. The game presented in this chapter also has a background and plays sound effects.</p>
<p class="indent">Now that we know how to create a window, display sprites, draw primitives, collect keyboard and mouse input, play sounds, and implement collision detection, we’re ready to create a graphical game in <span class="literal1">pygame</span>. <a href="#calibre_link-99" class="calibre4">Chapter 21</a> brings all of these elements together for our most advanced game yet.</p>
</div>



<a href="chapter19.html">Prev: Chapter 19 - Collision Detection</a> | <a href="chapter21.html">Next: Chapter 21 - A Dodger Game with Sounds and Images</a>
</body></html>