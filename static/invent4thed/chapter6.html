<html><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><link href="invent4thedstyleb.css" rel="stylesheet" type="text/css" /><title>Chapter 6 - Using the Debugger</title></head><body style="background-color: #fffeee;">

<!--<script type="text/javascript">
//<![CDATA[

var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-5459430-3']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();

//]]>
</script>-->


<div style="background-color: #eeeddd; float: right; height: 310px; font-family: sans-serif;" id="otherbooks">
  <a href="#" onclick="document.getElementById('otherbooks').outerHTML='';" style="vertical-align: top;">(close)</a><br />

  <a target="_blank" href="https://nostarch.com/automatestuff2" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_automate.link');"><img src="/images/cover_automate2_thumb.jpg" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://nostarch.com/big-book-small-python-projects" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_bigbookpython.link');"><img src="/images/cover_bigbookpython_thumb.jpg" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://nostarch.com/beyond-basic-stuff-python" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_beyond.link');"><img src="/images/cover_beyond_thumb.jpg" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://nostarch.com/inventwithpython" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_invent.link');"><img src="/images/cover_invent4th_thumb.png" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://www.amazon.com/Making-Games-Python-Pygame-Sweigart/dp/1469901730?ie=UTF8&amp;tag=playwithpyth-20&amp;linkCode=as2&amp;camp=1789&amp;creative=9325&amp;creativeASIN=1469901730" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_pygame.link');"><img src="/images/cover_makinggames_thumb.png" style="height: 200px; border: solid black 1px; /"></a>
  <a target="_blank" href="https://nostarch.com/crackingcodes" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_hacking.link');"><img src="/images/cover_crackingcodes_thumb.png" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://nostarch.com/scratchplayground"><img src="/images/cover_scratchprogrammingplayground_thumb.png" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://nostarch.com/codingwithminecraft"><img src="/images/cover_codingwithminecraft_thumb.jpg" style="height: 200px; border: solid black 1px;" /></a>
  <br />
  <a href="https://inventwithpython.com/automateudemy">Use this link to get 70% off the Automate the Boring Stuff online video course.</a><br />
  <a href="https://www.patreon.com/AlSweigart">Support me on Patreon</a>
</div>

<a href="chapter5.html">Prev: Chapter 5 - Dragon Realm</a> | <a href="chapter7.html">Next: Chapter 7 - Designing Hangman with Flowcharts</a>




<div id="calibre_link-85" class="calibre">
<h2 class="h1" id="calibre_link-143"><span {http://www.idpf.org/2007/ops}type="pagebreak" id="calibre_link-221" class="calibre1"></span><span class="big"><strong class="calibre2">6</strong></span><br class="calibre9" /><strong class="calibre2">USING THE DEBUGGER</strong></h2>
<div class="imagec"><img src="images/00016.jpeg" alt="image" class="calibre3" /></div>
<p class="noindent">If you enter the wrong code, the computer won’t give you the right program. A computer program will always do what you tell it to, but what you tell it to do might not be what you actually <em class="calibre6">want</em> it to do. These errors are <em class="calibre6">bugs</em> in a computer program. Bugs happen when the programmer has not carefully thought about exactly what the program is doing.</p>
<div class="sidebar">
<p class="sidebart"><span {http://www.idpf.org/2007/ops}type="pagebreak" id="calibre_link-223" class="calibre1"></span><strong class="calibre2">TOPICS COVERED IN THIS CHAPTER</strong></p>
<p class="bull">• Three types of errors</p>
<p class="bull">• IDLE’s debugger</p>
<p class="bull">• The Go and Quit buttons</p>
<p class="bull">• Stepping into, over, and out</p>
<p class="bull">• Breakpoints</p>
</div>
<h3 class="h2" id="calibre_link-487"><strong class="calibre2">Types of Bugs</strong></h3>
<p class="noindentb">There are three types of bugs that can happen in your program:</p>
<p class="hang"><strong class="calibre5">Syntax errors</strong> This type of bug comes from typos. When the Python interpreter sees a syntax error, it’s because your code isn’t written in proper Python language. A Python program with even a single syntax error won’t run.</p>
<p class="hang"><strong class="calibre5">Runtime errors</strong> These are bugs that happen while the program is running. The program will work up until it reaches the line of code with the error, and then the program will terminate with an error message (this is called <em class="calibre6">crashing</em>). The Python interpreter will display a <em class="calibre6">traceback</em>: an error message showing the line containing the problem.</p>
<p class="hang"><strong class="calibre5">Semantic errors</strong> These bugs&mdash;which are the trickiest to fix&mdash;don’t crash the program, but they prevent the program from doing what the programmer intended it to do. For example, if the programmer wants the variable <span class="literal1">total</span> to be the <em class="calibre6">sum</em> of the values in variables <span class="literal1">a</span>, <span class="literal1">b</span>, and <span class="literal1">c</span> but writes <span class="literal1">total = a * b * c</span>, then the value in <span class="literal1">total</span> will be wrong. This could crash the program later on, but it won’t be immediately obvious where the semantic bug happened.</p>
<p class="indentt">Finding bugs in a program can be hard, if you even notice them at all! When running your program, you might discover that sometimes functions are not called when they are supposed to be, or maybe they are called too many times. You might code the condition for a <span class="literal1">while</span> loop incorrectly, so that it loops the wrong number of times. You might write a loop that never exits, a semantic error known as an <em class="calibre6">infinite loop</em>. To stop a program stuck in an infinite loop, you can press <small class="calibre11">CTRL</small>-C in the interactive shell.</p>
<p class="indent">In fact, create an infinite loop by entering this code in the interactive shell (remember to press <small class="calibre11">ENTER</small> twice to let the interactive shell know you are done typing in the <span class="literal1">while</span> block):</p>
<p class="programs">&gt;&gt;&gt; <span class="codestrong">while True:<br class="calibre7" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print('Press Ctrl-C to stop this infinite loop!!!')</span></p>
<p class="indent"><span {http://www.idpf.org/2007/ops}type="pagebreak" id="calibre_link-267"></span>Now press and hold down <small class="calibre11">CTRL</small>-C to stop the program. The interactive shell will look like this:</p>
<p class="programs">Press Ctrl-C to stop this infinite loop!!!<br class="calibre7" />Press Ctrl-C to stop this infinite loop!!!<br class="calibre7" />Press Ctrl-C to stop this infinite loop!!!<br class="calibre7" />Press Ctrl-C to stop this infinite loop!!!<br class="calibre7" />Press Ctrl-C to stop this infinite loop!!!<br class="calibre7" />Traceback (most recent call last):<br class="calibre7" />&nbsp;&nbsp;File "&lt;pyshell#1&gt;", line 2, in &lt;module&gt;<br class="calibre7" />&nbsp;&nbsp;&nbsp;&nbsp;print('Press Ctrl-C to stop this infinite loop!!!')<br class="calibre7" />&nbsp;&nbsp;File "C:\Program Files\Python 3.5\lib\idlelib\PyShell.py", line 1347, in<br class="calibre7" />write<br class="calibre7" />&nbsp;&nbsp;&nbsp;&nbsp;return self.shell.write(s, self.tags)<br class="calibre7" />KeyboardInterrupt</p>
<p class="indent">The <span class="literal1">while</span> loop is always <span class="literal1">True</span>, so the program will continue printing the same line forever until it is stopped by the user. In this example, we pressed <small class="calibre11">CTRL</small>-C to stop the infinite loop after the <span class="literal1">while</span> loop had executed five times.</p>
<h3 class="h2" id="calibre_link-488"><strong class="calibre2">The Debugger</strong></h3>
<p class="noindent">It can be hard to figure out the source of a bug because the lines of code are executed quickly and the values in variables change so often. A <em class="calibre6">debugger</em> is a program that lets you step through your code one line at a time in the same order that Python executes each instruction. The debugger also shows you what values are stored in variables at each step.</p>
<h4 class="h3" id="calibre_link-489"><em class="calibre10"><strong class="calibre2">Starting the Debugger</strong></em></h4>
<p class="noindenta">In IDLE, open the Dragon Realm game you made in <a href="#calibre_link-52" class="calibre4">Chapter 5</a>. After opening the <em class="calibre6">dragon.py</em> file, click the interactive shell and then click <strong class="calibre5">Debug</strong> <img src="images/00042.jpeg" alt="image" class="calibre3" /> <strong class="calibre5">Debugger</strong> to display the Debug Control window (<a href="#calibre_link-86" class="calibre4">Figure 6-1</a>).</p>
<p class="indent">When the debugger is run, the Debug Control window will look like <a href="#calibre_link-87" class="calibre4">Figure 6-2</a>. Make sure to select the <strong class="calibre5">Stack</strong>, <strong class="calibre5">Locals</strong>, <strong class="calibre5">Source</strong>, and <strong class="calibre5">Globals</strong> checkboxes.</p>
<p class="indent">Now when you run the Dragon Realm game by pressing F5, IDLE’s debugger will activate. This is called running a program <em class="calibre6">under a debugger</em>. When you run a Python program under the debugger, the program will stop before it executes the first instruction. If you click the file editor’s title bar (and you’ve selected the <strong class="calibre5">Source</strong> checkbox in the Debug Control window), the first instruction is highlighted in gray. The Debug Control window shows the execution is on line 1, which is the <span class="literal1">import random</span> line.</p>
<div class="image"><span {http://www.idpf.org/2007/ops}type="pagebreak" id="calibre_link-266"></span><img src="images/00069.jpeg" alt="image" class="calibre3" /></div>
<p class="figcap"><a id="calibre_link-86" class="calibre4"></a><em class="calibre6">Figure 6-1: The Debug Control window</em></p>
<div class="image"><img src="images/00070.jpeg" alt="image" class="calibre3" /></div>
<p class="figcap"><a id="calibre_link-87" class="calibre4"></a><em class="calibre6">Figure 6-2: Running the Dragon Realm game under the debugger</em></p>
<h4 class="h3" id="calibre_link-490"><span {http://www.idpf.org/2007/ops}type="pagebreak" id="calibre_link-268" class="calibre1"></span><em class="calibre10"><strong class="calibre2">Stepping Through the Program with the Debugger</strong></em></h4>
<p class="noindenta">The debugger lets you execute one instruction at a time; this process is called <em class="calibre6">stepping</em>. Execute a single instruction now by clicking the <strong class="calibre5">Step</strong> button in the Debug Control window. Python will execute the <span class="literal1">import random</span> instruction, and then stop before it executes the next instruction. The Debug Control window shows you what line is <em class="calibre6">about</em> to be executed when you click the Step button, so the execution should now be on line 2, the <span class="literal1">import time</span> line. Click the <strong class="calibre5">Quit</strong> button to terminate the program for now.</p>
<p class="indent">Here’s a summary of what happens when you click the Step button as you run Dragon Realm under a debugger. Press F5 to start running Dragon Realm again and then follow these instructions:</p>
<ol class="calibre12">
<li value="1" class="calibre13"><p class="noindenta">Click the <strong class="calibre5">Step</strong> button twice to run the two <span class="literal1">import</span> lines.</p></li>
<li value="2" class="calibre13"><p class="noindenta">Click the <strong class="calibre5">Step</strong> button three more times to execute the three <span class="literal1">def</span> statements.</p></li>
<li value="3" class="calibre13"><p class="noindenta">Click the <strong class="calibre5">Step</strong> button again to define the <span class="literal1">playAgain</span> variable.</p></li>
<li value="4" class="calibre13"><p class="noindenta">Click <strong class="calibre5">Go</strong> to run the rest of the program or click <strong class="calibre5">Quit</strong> to terminate the program.</p></li>
</ol>
<p class="indent">The debugger skipped line 3 because it’s a blank line. Notice you can only step forward with the debugger; you can’t go backward.</p>
<h5 class="h4" id="calibre_link-862"><strong class="calibre2">Globals Area</strong></h5>
<p class="noindent">The <em class="calibre6">Globals area</em> in the Debug Control window is where all the global variables are displayed. Remember, global variables are variables created outside of any functions (that is, in the global scope).</p>
<p class="indent">The text next to the function names in the Globals area looks like <span class="literal1">"&lt;function checkCave at 0x012859B0&gt;"</span>. The module names also have confusing-looking text next to them, like <span class="literal1">"&lt;module 'random' from 'C:\\Python31\\lib\\random.pyc'&gt;"</span>. You don’t need to know what this text means to debug your programs. Just seeing whether the functions and modules are in the Globals area will tell you whether a function has been defined or a module has been imported.</p>
<p class="indent">You can also ignore the <span class="literal1">__builtins__</span>, <span class="literal1">__doc__</span>, <span class="literal1">__name__</span>, and other similar lines in the Globals area. (Those are variables that appear in every Python program.)</p>
<p class="indent">In the Dragon Realm program, the three <span class="literal1">def</span> statements, which execute and define functions, will appear in the Globals area of the Debug Control window. When the <span class="literal1">playAgain</span> variable is created, it will also show up in the Globals area. Next to the variable name will be the string <span class="literal1">'yes'</span>. The debugger lets you see the values of all the variables in the program as the program runs. This is useful for fixing bugs.</p>
<h5 class="h4" id="calibre_link-863"><span {http://www.idpf.org/2007/ops}type="pagebreak" id="calibre_link-379" class="calibre1"></span><strong class="calibre2">Locals Area</strong></h5>
<p class="noindent">In addition to the Globals area, there is a <em class="calibre6">Locals area</em>, which shows you the local scope variables and their values. The Locals area will contain variables only when the program execution is inside of a function. When the execution is in the global scope, this area is blank.</p>
<h5 class="h4" id="calibre_link-864"><strong class="calibre2">The Go and Quit Buttons</strong></h5>
<p class="noindent">If you get tired of clicking the Step button repeatedly and just want the program to run normally, click the Go button at the top of the Debug Control window. This will tell the program to run normally instead of stepping.</p>
<p class="indent">To terminate the program entirely, click the Quit button at the top of the Debug Control window. The program will exit immediately. This is helpful if you must start debugging again from the beginning of the program.</p>
<h5 class="h4" id="calibre_link-865"><strong class="calibre2">Stepping Into, Over, and Out</strong></h5>
<p class="noindent">Start the Dragon Realm program with the debugger. Keep stepping until the debugger is at line 37. As shown in <a href="#calibre_link-88" class="calibre4">Figure 6-3</a>, this is the line with <span class="literal1">displayIntro()</span>. When you click Step again, the debugger will jump into this function call and appear on line 5, the first line in the <span class="literal1">displayIntro()</span> function. This kind of stepping, which is what you’ve been doing so far, is called <em class="calibre6">stepping into</em>.</p>
<p class="indent">When the execution is paused at line 5, you’ll want to stop stepping. If you clicked Step once more, the debugger would step into the <span class="literal1">print()</span> function. The <span class="literal1">print()</span> function is one of Python’s built-in functions, so it isn’t useful to step through with the debugger. Python’s own functions&mdash;such as <span class="literal1">print()</span>, <span class="literal1">input()</span>, <span class="literal1">str()</span>, and <span class="literal1">randint()</span>&mdash;have been carefully checked for errors. You can assume they’re not the parts causing bugs in your program.</p>
<p class="indent">You don’t want to waste time stepping through the internals of the <span class="literal1">print()</span> function. So, instead of clicking Step to step into the <span class="literal1">print()</span> function’s code, click <strong class="calibre5">Over</strong>. This will <em class="calibre6">step over</em> the code inside the <span class="literal1">print()</span> function. The code inside <span class="literal1">print()</span> will be executed at normal speed, and then the debugger will pause once the execution returns from <span class="literal1">print()</span>.</p>
<p class="indent">Stepping over is a convenient way to skip stepping through code inside a function. The debugger will now be paused at line 38, <span class="literal1">caveNumber = chooseCave()</span>.</p>
<p class="indent">Click <strong class="calibre5">Step</strong> again to step into the <span class="literal1">chooseCave()</span> function. Keep stepping through the code until line 15, the <span class="literal1">input()</span> call. The program will wait until you type a response into the interactive shell, just like when you run the program normally. If you try clicking the Step button now, nothing will happen because the program is waiting for a keyboard response.</p>
<div class="image"><span {http://www.idpf.org/2007/ops}type="pagebreak" id="calibre_link-380"></span><img src="images/00071.jpeg" alt="image" class="calibre3" /></div>
<p class="figcap"><a id="calibre_link-88" class="calibre4"></a><em class="calibre6">Figure 6-3: Keep stepping until you reach line 37.</em></p>
<p class="indent">Click back to the interactive shell and type which cave you want to enter. The blinking cursor must be on the bottom line in the interactive shell before you can type. Otherwise, the text you type will not appear.</p>
<p class="indent">Once you press <small class="calibre11">ENTER</small>, the debugger will continue to step through lines of code again.</p>
<p class="indent">Next, click the <strong class="calibre5">Out</strong> button on the Debug Control window. This is called <em class="calibre6">stepping out</em> because it will cause the debugger to step over as many lines as it needs to until the execution has returned from the function it is in. After it jumps out, the execution will be on the line after the one that called the function.</p>
<p class="indent">If you are not inside a function, clicking Out will cause the debugger to execute all the remaining lines in the program. This is the same behavior that happens when you click the Go button.</p>
<p class="indentb">Here’s a recap of what each button does:</p>
<p class="hang"><strong class="calibre5">Go</strong> Executes the rest of the code as normal, or until it reaches a breakpoint (see “<a href="#calibre_link-89" class="calibre4">Setting Breakpoints</a>” on <a href="#calibre_link-90" class="calibre4">page 73</a>).</p>
<p class="hang"><span {http://www.idpf.org/2007/ops}type="pagebreak" id="calibre_link-222"></span><strong class="calibre5">Step</strong> Executes one instruction or one step. If the line is a function call, the debugger will step into the function.</p>
<p class="hang"><strong class="calibre5">Over</strong> Executes one instruction or one step. If the line is a function call, the debugger won’t <em class="calibre6">step into</em> the function but instead will <em class="calibre6">step over</em> the call.</p>
<p class="hang"><strong class="calibre5">Out</strong> Keeps stepping over lines of code until the debugger leaves the function it was in when Out was clicked. This <em class="calibre6">steps out</em> of the function.</p>
<p class="hang"><strong class="calibre5">Quit</strong> Immediately terminates the program.</p>
<p class="indentt">Now that we know how to use the debugger, let’s try finding bugs in some programs.</p>
<h3 class="h2" id="calibre_link-491"><strong class="calibre2">Finding the Bug</strong></h3>
<p class="noindent">The debugger can help you find the cause of bugs in your program. As an example, here is a small program with a bug. The program comes up with a random addition problem for the user to solve. In the interactive shell, click <strong class="calibre5">File</strong> <img src="images/00042.jpeg" alt="image" class="calibre3" /> <strong class="calibre5">New Window</strong> to open a new file editor window. Enter this program into that window and save it as <em class="calibre6">buggy.py</em>.</p>
<p class="sidenote"><em class="calibre6">buggy.py</em></p>
<p class="programs">1. import random<br class="calibre7" />2. number1 = random.randint(1, 10)<br class="calibre7" />3. number2 = random.randint(1, 10)<br class="calibre7" />4. print('What is ' + str(number1) + ' + ' + str(number2) + '?')<br class="calibre7" />5. answer = input()<br class="calibre7" />6. if answer == number1 + number2:<br class="calibre7" />7.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print('Correct!')<br class="calibre7" />8. else:<br class="calibre7" />9.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print('Nope! The answer is ' + str(number1 + number2))</p>
<p class="indent">Type the program exactly as it is shown, even if you can already tell what the bug is. Then run the program by pressing F5. Here’s what it might look like when you run the program:</p>
<p class="programs">What is 5 + 1?<br class="calibre7" /><span class="codestrong">6</span><br class="calibre7" />Nope! The answer is 6</p>
<p class="indent">That’s a bug! The program doesn’t crash, but it’s not working correctly. The program says the user is wrong even if they enter the correct answer.</p>
<p class="indent">Running the program under a debugger will help find the bug’s cause. At the top of the interactive shell, click <strong class="calibre5">Debug</strong> <img src="images/00042.jpeg" alt="image" class="calibre3" /> <strong class="calibre5">Debugger</strong> to display the Debug Control window. (Make sure you’ve checked the <strong class="calibre5">Stack</strong>, <strong class="calibre5">Source</strong>, <strong class="calibre5">Locals</strong>, and <strong class="calibre5">Globals</strong> checkboxes.) Then press F5 in the file editor to run the program. This time it will run under the debugger.</p>
<p class="indent">The debugger starts at the <span class="literal1">import random</span> line:</p>
<p class="programs">1. import random</p>
<p class="indent"><span {http://www.idpf.org/2007/ops}type="pagebreak" id="calibre_link-866"></span>Nothing special happens here, so just click <strong class="calibre5">Step</strong> to execute it. You will see the <span class="literal1">random</span> module added to the Globals area.</p>
<p class="indent">Click <strong class="calibre5">Step</strong> again to run line 2:</p>
<p class="programs">2. number1 = random.randint(1, 10)</p>
<p class="indent">A new file editor window will appear with the <em class="calibre6">random.py</em> file. You have stepped inside the <span class="literal1">randint()</span> function inside the <span class="literal1">random</span> module. You know Python’s built-in functions won’t be the source of your bugs, so click <strong class="calibre5">Out</strong> to step out of the <span class="literal1">randint()</span> function and back to your program. Then close the <em class="calibre6">random.py</em> file’s window. Next time, you can click Over to step over the <span class="literal1">randint()</span> function instead of stepping into it.</p>
<p class="indent">Line 3 is also a <span class="literal1">randint()</span> function call:</p>
<p class="programs">3. number2 = random.randint(1, 10)</p>
<p class="indent">Skip stepping into this code by clicking <strong class="calibre5">Over</strong>.</p>
<p class="indent">Line 4 is a <span class="literal1">print()</span> call to show the player the random numbers:</p>
<p class="programs">4. print('What is ' + str(number1) + ' + ' + str(number2) + '?')</p>
<p class="indent">You know what numbers the program will print even before it prints them! Just look at the Globals area of the Debug Control window. You can see the <span class="literal1">number1</span> and <span class="literal1">number2</span> variables, and next to them are the integer values stored in those variables.</p>
<p class="indent">The <span class="literal1">number1</span> variable has the value <span class="literal1">4</span> and the <span class="literal1">number2</span> variable has the value <span class="literal1">8</span>. (Your random numbers will probably be different.) When you click Step, the <span class="literal1">str()</span> function will concatenate the string version of these integers, and the program will display the string in the <span class="literal1">print()</span> call with these values. When I ran the debugger, it looked like <a href="#calibre_link-91" class="calibre4">Figure 6-4</a>.</p>
<p class="indent">Click <strong class="calibre5">Step</strong> from line 5 to execute <span class="literal1">input()</span>.</p>
<p class="programs">5. answer = input()</p>
<p class="indent">The debugger waits until the player enters a response into the program. Enter the correct answer (in my case, 12) in the interactive shell. The debugger will resume and move down to line 6:</p>
<p class="programs">6. if answer == number1 + number2:<br class="calibre7" />7.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print('Correct!')</p>
<p class="indent">Line 6 is an <span class="literal1">if</span> statement. The condition is that the value in <span class="literal1">answer</span> must match the sum of <span class="literal1">number1</span> and <span class="literal1">number2</span>. If the condition is <span class="literal1">True</span>, the debugger will move to line 7. If the condition is <span class="literal1">False</span>, the debugger will move to line 9. Click <strong class="calibre5">Step</strong> one more time to find out where it goes.</p>
<p class="programs">8. else:<br class="calibre7" />9.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print('Nope! The answer is ' + str(number1 + number2))</p>
<div class="image"><span {http://www.idpf.org/2007/ops}type="pagebreak" id="calibre_link-867"></span><img src="images/00073.jpeg" alt="image" class="calibre3" /></div>
<p class="figcap"><a id="calibre_link-91" class="calibre4"></a><em class="calibre6">Figure 6-4:</em> <span class="literal"><span class="codeitalic">number1</span></span> <em class="calibre6">is set to</em> <span class="literal"><span class="codeitalic">4</span></span><em class="calibre6">, and</em> <span class="literal"><span class="codeitalic">number2</span></span> <em class="calibre6">is set to</em> <span class="literal"><span class="codeitalic">8</span></span>.</p>
<p class="indent">The debugger is now on line 9! What happened? The condition in the <span class="literal1">if</span> statement must have been <span class="literal1">False</span>. Look at the values for <span class="literal1">number1</span>, <span class="literal1">number2</span>, and <span class="literal1">answer</span>. Notice that <span class="literal1">number1</span> and <span class="literal1">number2</span> are integers, so their sum would have also been an integer. But <span class="literal1">answer</span> is a string.</p>
<p class="indent">That means that <span class="literal1">answer == number1 + number2</span> would have evaluated to <span class="literal1">'12' == 12</span>. A string value and an integer value will never be equal to each other, so the condition evaluated to <span class="literal1">False</span>.</p>
<p class="indent">That is the bug in the program: the code uses <span class="literal1">answer</span> when it should have used <span class="literal1">int(answer)</span>. Change line 6 to <span class="literal1">int(answer) == number1 + number2</span> and run the program again.</p>
<p class="programs">What is 2 + 3?<br class="calibre7" /><span class="codestrong">5</span><br class="calibre7" />Correct!</p>
<p class="indent">Now the program works correctly. Run it one more time and enter a wrong answer on purpose. You’ve now debugged this program! Remember, the computer will run your programs exactly as you type them, even if what you type isn’t what you intend.</p>
<h3 class="h2" id="calibre_link-89"><span {http://www.idpf.org/2007/ops}type="pagebreak" id="calibre_link-90" class="calibre1"></span><strong class="calibre2">Setting Breakpoints</strong></h3>
<p class="noindent">Stepping through the code one line at a time might still be too slow. Often you’ll want the program to run at normal speed until it reaches a certain line. You can set a <em class="calibre6">breakpoint</em> on a line when you want the debugger to take control once the execution reaches that line. If you think there’s a problem with your code on, say, line 17, just set a breakpoint on that line (or maybe a few lines before that).</p>
<p class="indent">When the execution reaches that line, the program will break into the debugger. Then you can step through lines to see what is happening. Clicking Go will execute the program normally until it reaches another breakpoint or the end of the program.</p>
<p class="indent">To set a breakpoint on Windows, right-click the line in the file editor and select <strong class="calibre5">Set Breakpoint</strong> from the menu that appears. On OS X, <small class="calibre11">CTRL</small>-click to get to a menu and select <strong class="calibre5">Set Breakpoint</strong>. You can set breakpoints on as many lines as you want. The file editor highlights each breakpoint line in yellow. <a href="#calibre_link-92" class="calibre4">Figure 6-5</a> shows an example of what a breakpoint looks like.</p>
<div class="image"><img src="images/00075.jpeg" alt="image" class="calibre3" /></div>
<p class="figcap"><a id="calibre_link-92" class="calibre4"></a><em class="calibre6">Figure 6-5: The file editor with two breakpoints set</em></p>
<p class="indent">To remove the breakpoint, click the line and select <strong class="calibre5">Clear Breakpoint</strong> from the menu that appears.</p>
<h3 class="h2" id="calibre_link-492"><strong class="calibre2">Using Breakpoints</strong></h3>
<p class="noindent">Next we’ll look at a program that calls <span class="literal1">random.randint(0, 1)</span> to simulate coin flips. If the function returns the integer <span class="literal1">1</span>, that will be heads, and if it returns the integer <span class="literal1">0</span>, that will be tails. The <span class="literal1">flips</span> variable will track how many coin flips have been done. The <span class="literal1">heads</span> variable will track how many came up heads.</p>
<p class="indent"><span {http://www.idpf.org/2007/ops}type="pagebreak" id="calibre_link-868"></span>The program will do coin flips 1,000 times. This would take a person over an hour to do, but the computer can do it in one second! There’s no bug in this program, but the debugger will let us look at the state of the program while it’s running. Enter the following code into the file editor and save it as <em class="calibre6">coinFlips.py</em>. If you get errors after entering this code, compare the code you typed to the book’s code with the online diff tool at <em class="calibre6"><a href="https://www.nostarch.com/inventwithpython#diff" class="calibre4">https://www.nostarch.com/inventwithpython#diff</a></em>.</p>
<p class="sidenote"><em class="calibre6">coinFlips.py</em></p>
<p class="programs">&nbsp;1. import random<br class="calibre7" />&nbsp;2. print('I will flip a coin 1000 times. Guess how many times it will come up<br class="calibre7" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;heads. (Press enter to begin)')<br class="calibre7" />&nbsp;3. input()<br class="calibre7" />&nbsp;4. flips = 0<br class="calibre7" />&nbsp;5. heads = 0<br class="calibre7" />&nbsp;6. while flips &lt; 1000:<br class="calibre7" />&nbsp;7.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if random.randint(0, 1) == 1:<br class="calibre7" />&nbsp;8.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;heads = heads + 1<br class="calibre7" />&nbsp;9.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;flips = flips + 1<br class="calibre7" />10.<br class="calibre7" />11.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if flips == 900:<br class="calibre7" />12.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print('900 flips and there have been ' + str(heads) + ' heads.')<br class="calibre7" />13.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if flips == 100:<br class="calibre7" />14.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print('At 100 tosses, heads has come up ' + str(heads) + ' times<br class="calibre7" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;so far.')<br class="calibre7" />15.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;if flips == 500:<br class="calibre7" />16.&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;print('Halfway done, and heads has come up ' + str(heads) +<br class="calibre7" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;' times.')<br class="calibre7" />17.<br class="calibre7" />18. print()<br class="calibre7" />19. print('Out of 1000 coin tosses, heads came up ' + str(heads) + ' times!')<br class="calibre7" />20. print('Were you close?')</p>
<p class="indent">The program runs pretty fast. It spends more time waiting for the user to press <small class="calibre11">ENTER</small> than doing the coin flips. Let’s say you wanted to see it do coin flips one by one. On the interactive shell’s window, click <strong class="calibre5">Debug</strong> <img src="images/00042.jpeg" alt="image" class="calibre3" /> <strong class="calibre5">Debugger</strong> to bring up the Debug Control window. Then press F5 to run the program.</p>
<p class="indent">The program starts in the debugger on line 1. Press <strong class="calibre5">Step</strong> three times in the Debug Control window to execute the first three lines (that is, lines 1, 2, and 3). You’ll notice the buttons become disabled because <span class="literal1">input()</span> was called and the interactive shell is waiting for the user to type something. Click the interactive shell and press <small class="calibre11">ENTER</small>. (Be sure to click beneath the text in the interactive shell; otherwise, IDLE might not receive your keystrokes.)</p>
<p class="indent">You can click Step a few more times, but you’ll find that it would take quite a while to get through the entire program. Instead, set a breakpoint on lines 12, 14, and 16 so that the debugger breaks in when <span class="literal1">flips</span> is equal to <span class="literal1">900</span>, <span class="literal1">100</span>, and <span class="literal1">500</span>, respectively. The file editor will highlight these lines as shown in <a href="#calibre_link-93" class="calibre4">Figure 6-6</a>.</p>
<div class="image"><span {http://www.idpf.org/2007/ops}type="pagebreak" id="calibre_link-869"></span><img src="images/00078.jpeg" alt="image" class="calibre3" /></div>
<p class="figcap"><a id="calibre_link-93" class="calibre4"></a><em class="calibre6">Figure 6-6: Three breakpoints set in</em> coinflips.py</p>
<p class="indent">After setting the breakpoints, click <strong class="calibre5">Go</strong> in the Debug Control window. The program will run at normal speed until it reaches the next breakpoint. When <span class="literal1">flip</span> is set to <span class="literal1">100</span>, the condition for the <span class="literal1">if</span> statement on line 13 is <span class="literal1">True</span>. This causes line 14 (where there’s a breakpoint set) to execute, which tells the debugger to stop the program and take over. Look at the Globals area of the Debug Control window to see what the values of <span class="literal1">flips</span> and <span class="literal1">heads</span> are.</p>
<p class="indent">Click <strong class="calibre5">Go</strong> again and the program will continue until it reaches the next breakpoint on line 16. Again, see how the values in <span class="literal1">flips</span> and <span class="literal1">heads</span> have changed.</p>
<p class="indent">Click <strong class="calibre5">Go</strong> again to continue the execution until the next breakpoint is reached, which is on line 12.</p>
<h3 class="h2" id="calibre_link-493"><strong class="calibre2">Summary</strong></h3>
<p class="noindent">Writing programs is only the first part of programming. The next part is making sure the code you wrote actually works. Debuggers let you step through the code one line at a time. You can examine which lines execute in what order and what values the variables contain. When stepping through line by line is too slow, you can set breakpoints to stop the debugger only at the lines you want.</p>
<p class="indent">Using the debugger is a great way to understand what a program is doing. While this book provides explanations of all the game code we use, the debugger can help you find out more on your own.<span {http://www.idpf.org/2007/ops}type="pagebreak" id="calibre_link-870"></span></p>
</div>



<a href="chapter5.html">Prev: Chapter 5 - Dragon Realm</a> | <a href="chapter7.html">Next: Chapter 7 - Designing Hangman with Flowcharts</a>
</body></html>