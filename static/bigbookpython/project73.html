<html><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><link href="style.css" rel="stylesheet" type="text/css" /><link rel="stylesheet" type="text/css" href="pygments.css"><title>Sudoku Puzzle</title></head><body style="background-color: #fffeee;">

<script type="text/javascript">
//<![CDATA[

var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-5459430-3']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();

//]]>
</script>


<div style="background-color: #eeeddd; float: right; height: 310px; font-family: sans-serif;" id="otherbooks">
  <a href="#" onclick="document.getElementById('otherbooks').outerHTML='';" style="vertical-align: top;">(close)</a><br />

  <a target="_blank" href="https://nostarch.com/automatestuff2" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_automate.link');"><img src="/images/cover_automate2_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://nostarch.com/big-book-small-python-projects" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_bigbookpython.link');"><img src="/images/cover_bigbookpython_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://nostarch.com/beyond-basic-stuff-python" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_beyond.link');"><img src="/images/cover_beyond_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://nostarch.com/inventwithpython" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_invent.link');"><img src="/images/cover_invent4th_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://www.amazon.com/Making-Games-Python-Pygame-Sweigart/dp/1469901730?ie=UTF8&amp;tag=playwithpyth-20&amp;linkCode=as2&amp;camp=1789&amp;creative=9325&amp;creativeASIN=1469901730" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_pygame.link');"><img src="/images/cover_makinggames_thumb.webp" style="height: 200px; border: solid black 1px; /"></a>
  <a target="_blank" href="https://nostarch.com/crackingcodes" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_hacking.link');"><img src="/images/cover_crackingcodes_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://nostarch.com/scratchplayground"><img src="/images/cover_scratchprogrammingplayground_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://nostarch.com/codingwithminecraft"><img src="/images/cover_codingwithminecraft_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <br />
  <a href="https://inventwithpython.com/automateudemy">Use this link to get 70% off the Automate the Boring Stuff online video course.</a><br />
  <a href="https://www.patreon.com/AlSweigart">Support me on Patreon</a>
</div>

<a href="project72.html">Prev: sPoNgEcAsE</a> | <a href="project74.html">Next: Text To Speech Talker</a>





<div type="bodymatter chapter" class="calibre1" id="calibre_link-302">
<section class="toclist">
<header class="calibre10">
<h1 class="chapter">
<span class="chapternumber">#73</span><br class="calibre14" />
<span class="chaptertitle">Sudoku Puzzle</span></h1>
</header>
<figure class="opener">
<img src="images/000002.webp" alt="" class="calibre12" />
</figure>
<p class="chapterintro">Sudoku is a popular puzzle game in newspapers and mobile apps. The Sudoku board is a 9 × 9 grid in which the player must place the digits 1 to 9 once, and only once, in each row, column, and 3 × 3 subgrid. The game begins with a few spaces already filled in with digits, called <em class="calibre9">givens</em>. A well-formed Sudoku puzzle will have only one possible valid solution.</p>
<h2 id="calibre_link-303" class="calibre5">The Program in Action</h2>
<p class="bodyfirst">When you run <em class="calibre9">sudoku.py</em>, the output will look like this:</p>
<pre class="calibre24"><code class="calibre22">Sudoku Puzzle, by Al Sweigart al@inventwithpython.com
<var class="calibre27">--snip--</var>
   A B C   D E F   G H I
1  . . . | . . . | . . .
2  . 7 9 | . 5 . | 1 8 .
3  8 . . | . . . | . . 7
   ------+-------+------
4  . . 7 | 3 . 6 | 8 . .
5  4 5 . | 7 . 8 | . 9 6
6  . . 3 | 5 . 2 | 7 . .
   ------+-------+------
7  7 . . | . . . | . . 5
8  . 1 6 | . 3 . | 4 2 .
9  . . . | . . . | . . .

Enter a move, or RESET, NEW, UNDO, ORIGINAL, or QUIT:
(For example, a move looks like "B4 9".)
<var class="calibre27">--snip--</var></code></pre>
<h2 id="calibre_link-304" class="calibre5">How It Works</h2>
<p class="bodyfirst">Objects of the <code class="calibre22">SudokuGrid</code> class are the data structures that represent the Sudoku grid. You can call their methods to make modifications to, or retrieve information about, the grid. For example, the <code class="calibre22">makeMove()</code> method places a number on the grid, the <code class="calibre22">resetGrid()</code> method restores the grid to its original state, and <code class="calibre22">isSolved()</code> returns <code class="calibre22">True</code> if all the solution’s numbers have been placed on the grid.</p>
<p class="calibre19">The main part of the program, starting on line 141, uses a <code class="calibre22">SudokuGrid</code> object and its methods for this game, but you could also copy and paste this class into other Sudoku programs you create to reuse its functionality.</p>
<div class="highlight"><pre><span></span>
<span class="c">  1. </span><span class="sd">&quot;&quot;&quot;Sudoku Puzzle, by Al Sweigart al@inventwithpython.com</span>
<span class="c">  2. </span><span class="sd">The classic 9x9 number placement puzzle.</span>
<span class="c">  3. </span><span class="sd">More info at https://en.wikipedia.org/wiki/Sudoku</span>
<span class="c">  4. </span><span class="sd">This code is available at https://nostarch.com/big-book-small-python-programming</span>
<span class="c">  5. </span><span class="sd">Tags: large, game, object-oriented, puzzle&quot;&quot;&quot;</span>
<span class="c">  6. </span>
<span class="c">  7. </span><span class="kn">import</span> <span class="nn">copy</span><span class="o">,</span> <span class="nn">random</span><span class="o">,</span> <span class="nn">sys</span>
<span class="c">  8. </span>
<span class="c">  9. </span><span class="c1"># This game requires a sudokupuzzle.txt file that contains the puzzles.</span>
<span class="c"> 10. </span><span class="c1"># Download it from https://inventwithpython.com/sudokupuzzles.txt</span>
<span class="c"> 11. </span><span class="c1"># Here&#39;s a sample of the content in this file:</span>
<span class="c"> 12. </span><span class="c1"># ..3.2.6..9..3.5..1..18.64....81.29..7.......8..67.82....26.95..8..2.3..9..5.1.3..</span>
<span class="c"> 13. </span><span class="c1"># 2...8.3...6..7..84.3.5..2.9...1.54.8.........4.27.6...3.1..7.4.72..4..6...4.1...3</span>
<span class="c"> 14. </span><span class="c1"># ......9.7...42.18....7.5.261..9.4....5.....4....5.7..992.1.8....34.59...5.7......</span>
<span class="c"> 15. </span><span class="c1"># .3..5..4...8.1.5..46.....12.7.5.2.8....6.3....4.1.9.3.25.....98..1.2.6...8..6..2.</span>
<span class="c"> 16. </span>
<span class="c"> 17. </span><span class="c1"># Set up the constants:</span>
<span class="c"> 18. </span><span class="n">EMPTY_SPACE</span> <span class="o">=</span> <span class="s1">&#39;.&#39;</span>
<span class="c"> 19. </span><span class="n">GRID_LENGTH</span> <span class="o">=</span> <span class="mi">9</span>
<span class="c"> 20. </span><span class="n">BOX_LENGTH</span> <span class="o">=</span> <span class="mi">3</span>
<span class="c"> 21. </span><span class="n">FULL_GRID_SIZE</span> <span class="o">=</span> <span class="n">GRID_LENGTH</span> <span class="o">*</span> <span class="n">GRID_LENGTH</span>
<span class="c"> 22. </span>
<span class="c"> 23. </span>
<span class="c"> 24. </span><span class="k">class</span> <span class="nc">SudokuGrid</span><span class="p">:</span>
<span class="c"> 25. </span>    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">originalSetup</span><span class="p">):</span>
<span class="c"> 26. </span>        <span class="c1"># originalSetup is a string of 81 characters for the puzzle</span>
<span class="c"> 27. </span>        <span class="c1"># setup, with numbers and periods (for the blank spaces).</span>
<span class="c"> 28. </span>        <span class="c1"># See https://inventwithpython.com/sudokupuzzles.txt</span>
<span class="c"> 29. </span>        <span class="bp">self</span><span class="o">.</span><span class="n">originalSetup</span> <span class="o">=</span> <span class="n">originalSetup</span>
<span class="c"> 30. </span>
<span class="c"> 31. </span>        <span class="c1"># The state of the sudoku grid is represented by a dictionary</span>
<span class="c"> 32. </span>        <span class="c1"># with (x, y) keys and values of the number (as a string) at</span>
<span class="c"> 33. </span>        <span class="c1"># that space.</span>
<span class="c"> 34. </span>        <span class="bp">self</span><span class="o">.</span><span class="n">grid</span> <span class="o">=</span> <span class="p">{}</span>
<span class="c"> 35. </span>        <span class="bp">self</span><span class="o">.</span><span class="n">resetGrid</span><span class="p">()</span>  <span class="c1"># Set the grid state to its original setup.</span>
<span class="c"> 36. </span>        <span class="bp">self</span><span class="o">.</span><span class="n">moves</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># Tracks each move for the undo feature.</span>
<span class="c"> 37. </span>
<span class="c"> 38. </span>    <span class="k">def</span> <span class="nf">resetGrid</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="c"> 39. </span>        <span class="sd">&quot;&quot;&quot;Reset the state of the grid, tracked by self.grid, to the</span>
<span class="c"> 40. </span><span class="sd">        state in self.originalSetup.&quot;&quot;&quot;</span>
<span class="c"> 41. </span>        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">GRID_LENGTH</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
<span class="c"> 42. </span>            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">GRID_LENGTH</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
<span class="c"> 43. </span>                <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="p">[(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)]</span> <span class="o">=</span> <span class="n">EMPTY_SPACE</span>
<span class="c"> 44. </span>
<span class="c"> 45. </span>        <span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">originalSetup</span><span class="p">)</span> <span class="o">==</span> <span class="n">FULL_GRID_SIZE</span>
<span class="c"> 46. </span>        <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># i goes from 0 to 80</span>
<span class="c"> 47. </span>        <span class="n">y</span> <span class="o">=</span> <span class="mi">0</span>  <span class="c1"># y goes from 0 to 8</span>
<span class="c"> 48. </span>        <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">FULL_GRID_SIZE</span><span class="p">:</span>
<span class="c"> 49. </span>            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">GRID_LENGTH</span><span class="p">):</span>
<span class="c"> 50. </span>                <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="p">[(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)]</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">originalSetup</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
<span class="c"> 51. </span>                <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="c"> 52. </span>            <span class="n">y</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="c"> 53. </span>
<span class="c"> 54. </span>    <span class="k">def</span> <span class="nf">makeMove</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">column</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">number</span><span class="p">):</span>
<span class="c"> 55. </span>        <span class="sd">&quot;&quot;&quot;Place the number at the column (a letter from A to I) and row</span>
<span class="c"> 56. </span><span class="sd">        (an integer from 1 to 9) on the grid.&quot;&quot;&quot;</span>
<span class="c"> 57. </span>        <span class="n">x</span> <span class="o">=</span> <span class="s1">&#39;ABCDEFGHI&#39;</span><span class="o">.</span><span class="n">find</span><span class="p">(</span><span class="n">column</span><span class="p">)</span>  <span class="c1"># Convert this to an integer.</span>
<span class="c"> 58. </span>        <span class="n">y</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">row</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>
<span class="c"> 59. </span>
<span class="c"> 60. </span>        <span class="c1"># Check if the move is being made on a &quot;given&quot; number:</span>
<span class="c"> 61. </span>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">originalSetup</span><span class="p">[</span><span class="n">y</span> <span class="o">*</span> <span class="n">GRID_LENGTH</span> <span class="o">+</span> <span class="n">x</span><span class="p">]</span> <span class="o">!=</span> <span class="n">EMPTY_SPACE</span><span class="p">:</span>
<span class="c"> 62. </span>            <span class="k">return</span> <span class="kc">False</span>
<span class="c"> 63. </span>
<span class="c"> 64. </span>        <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="p">[(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)]</span> <span class="o">=</span> <span class="n">number</span>  <span class="c1"># Place this number on the grid.</span>
<span class="c"> 65. </span>
<span class="c"> 66. </span>        <span class="c1"># We need to store a separate copy of the dictionary object:</span>
<span class="c"> 67. </span>        <span class="bp">self</span><span class="o">.</span><span class="n">moves</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="p">))</span>
<span class="c"> 68. </span>        <span class="k">return</span> <span class="kc">True</span>
<span class="c"> 69. </span>
<span class="c"> 70. </span>    <span class="k">def</span> <span class="nf">undo</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="c"> 71. </span>        <span class="sd">&quot;&quot;&quot;Set the current grid state to the previous state in the</span>
<span class="c"> 72. </span><span class="sd">        self.moves list.&quot;&quot;&quot;</span>
<span class="c"> 73. </span>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">moves</span> <span class="o">==</span> <span class="p">[]:</span>
<span class="c"> 74. </span>            <span class="k">return</span>  <span class="c1"># No states in self.moves, so do nothing.</span>
<span class="c"> 75. </span>
<span class="c"> 76. </span>        <span class="bp">self</span><span class="o">.</span><span class="n">moves</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>  <span class="c1"># Remove the current state.</span>
<span class="c"> 77. </span>
<span class="c"> 78. </span>        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">moves</span> <span class="o">==</span> <span class="p">[]:</span>
<span class="c"> 79. </span>            <span class="bp">self</span><span class="o">.</span><span class="n">resetGrid</span><span class="p">()</span>
<span class="c"> 80. </span>        <span class="k">else</span><span class="p">:</span>
<span class="c"> 81. </span>            <span class="c1"># set the grid to the last move.</span>
<span class="c"> 82. </span>            <span class="bp">self</span><span class="o">.</span><span class="n">grid</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">moves</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">])</span>
<span class="c"> 83. </span>
<span class="c"> 84. </span>    <span class="k">def</span> <span class="nf">display</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="c"> 85. </span>        <span class="sd">&quot;&quot;&quot;Display the current state of the grid on the screen.&quot;&quot;&quot;</span>
<span class="c"> 86. </span>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;   A B C   D E F   G H I&#39;</span><span class="p">)</span>  <span class="c1"># Display column labels.</span>
<span class="c"> 87. </span>        <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">GRID_LENGTH</span><span class="p">):</span>
<span class="c"> 88. </span>            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">GRID_LENGTH</span><span class="p">):</span>
<span class="c"> 89. </span>                <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<span class="c"> 90. </span>                    <span class="c1"># Display row label:</span>
<span class="c"> 91. </span>                    <span class="nb">print</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">y</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;  &#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="c"> 92. </span>
<span class="c"> 93. </span>                <span class="nb">print</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="p">[(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)]</span> <span class="o">+</span> <span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="c"> 94. </span>                <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">or</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
<span class="c"> 95. </span>                    <span class="c1"># Display a vertical line:</span>
<span class="c"> 96. </span>                    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;| &#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="c"> 97. </span>            <span class="nb">print</span><span class="p">()</span>  <span class="c1"># Print a newline.</span>
<span class="c"> 98. </span>
<span class="c"> 99. </span>            <span class="k">if</span> <span class="n">y</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">or</span> <span class="n">y</span> <span class="o">==</span> <span class="mi">5</span><span class="p">:</span>
<span class="c">100. </span>                <span class="c1"># Display a horizontal line:</span>
<span class="c">101. </span>                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;   ------+-------+------&#39;</span><span class="p">)</span>
<span class="c">102. </span>
<span class="c">103. </span>    <span class="k">def</span> <span class="nf">_isCompleteSetOfNumbers</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">numbers</span><span class="p">):</span>
<span class="c">104. </span>        <span class="sd">&quot;&quot;&quot;Return True if numbers contains the digits 1 through 9.&quot;&quot;&quot;</span>
<span class="c">105. </span>        <span class="k">return</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">numbers</span><span class="p">)</span> <span class="o">==</span> <span class="nb">list</span><span class="p">(</span><span class="s1">&#39;123456789&#39;</span><span class="p">)</span>
<span class="c">106. </span>
<span class="c">107. </span>    <span class="k">def</span> <span class="nf">isSolved</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="c">108. </span>        <span class="sd">&quot;&quot;&quot;Returns True if the current grid is in a solved state.&quot;&quot;&quot;</span>
<span class="c">109. </span>        <span class="c1"># Check each row:</span>
<span class="c">110. </span>        <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">GRID_LENGTH</span><span class="p">):</span>
<span class="c">111. </span>            <span class="n">rowNumbers</span> <span class="o">=</span> <span class="p">[]</span>
<span class="c">112. </span>            <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">GRID_LENGTH</span><span class="p">):</span>
<span class="c">113. </span>                <span class="n">number</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="p">[(</span><span class="n">x</span><span class="p">,</span> <span class="n">row</span><span class="p">)]</span>
<span class="c">114. </span>                <span class="n">rowNumbers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
<span class="c">115. </span>            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_isCompleteSetOfNumbers</span><span class="p">(</span><span class="n">rowNumbers</span><span class="p">):</span>
<span class="c">116. </span>                <span class="k">return</span> <span class="kc">False</span>
<span class="c">117. </span>
<span class="c">118. </span>        <span class="c1"># Check each column:</span>
<span class="c">119. </span>        <span class="k">for</span> <span class="n">column</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">GRID_LENGTH</span><span class="p">):</span>
<span class="c">120. </span>            <span class="n">columnNumbers</span> <span class="o">=</span> <span class="p">[]</span>
<span class="c">121. </span>            <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">GRID_LENGTH</span><span class="p">):</span>
<span class="c">122. </span>                <span class="n">number</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="p">[(</span><span class="n">column</span><span class="p">,</span> <span class="n">y</span><span class="p">)]</span>
<span class="c">123. </span>                <span class="n">columnNumbers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
<span class="c">124. </span>            <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_isCompleteSetOfNumbers</span><span class="p">(</span><span class="n">columnNumbers</span><span class="p">):</span>
<span class="c">125. </span>                <span class="k">return</span> <span class="kc">False</span>
<span class="c">126. </span>
<span class="c">127. </span>        <span class="c1"># Check each box:</span>
<span class="c">128. </span>        <span class="k">for</span> <span class="n">boxx</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">):</span>
<span class="c">129. </span>            <span class="k">for</span> <span class="n">boxy</span> <span class="ow">in</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">6</span><span class="p">):</span>
<span class="c">130. </span>                <span class="n">boxNumbers</span> <span class="o">=</span> <span class="p">[]</span>
<span class="c">131. </span>                <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">BOX_LENGTH</span><span class="p">):</span>
<span class="c">132. </span>                    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">BOX_LENGTH</span><span class="p">):</span>
<span class="c">133. </span>                        <span class="n">number</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">grid</span><span class="p">[(</span><span class="n">boxx</span> <span class="o">+</span> <span class="n">x</span><span class="p">,</span> <span class="n">boxy</span> <span class="o">+</span> <span class="n">y</span><span class="p">)]</span>
<span class="c">134. </span>                        <span class="n">boxNumbers</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">number</span><span class="p">)</span>
<span class="c">135. </span>                <span class="k">if</span> <span class="ow">not</span> <span class="bp">self</span><span class="o">.</span><span class="n">_isCompleteSetOfNumbers</span><span class="p">(</span><span class="n">boxNumbers</span><span class="p">):</span>
<span class="c">136. </span>                    <span class="k">return</span> <span class="kc">False</span>
<span class="c">137. </span>
<span class="c">138. </span>        <span class="k">return</span> <span class="kc">True</span>
<span class="c">139. </span>
<span class="c">140. </span>
<span class="c">141. </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;Sudoku Puzzle, by Al Sweigart al@inventwithpython.com</span>
<span class="c">142. </span>
<span class="c">143. </span><span class="s1">Sudoku is a number placement logic puzzle game. A Sudoku grid is a 9x9</span>
<span class="c">144. </span><span class="s1">grid of numbers. Try to place numbers in the grid such that every row,</span>
<span class="c">145. </span><span class="s1">column, and 3x3 box has the numbers 1 through 9 once and only once.</span>
<span class="c">146. </span>
<span class="c">147. </span><span class="s1">For example, here is a starting Sudoku grid and its solved form:</span>
<span class="c">148. </span>
<span class="c">149. </span><span class="s1">    5 3 . | . 7 . | . . .     5 3 4 | 6 7 8 | 9 1 2</span>
<span class="c">150. </span><span class="s1">    6 . . | 1 9 5 | . . .     6 7 2 | 1 9 5 | 3 4 8</span>
<span class="c">151. </span><span class="s1">    . 9 8 | . . . | . 6 .     1 9 8 | 3 4 2 | 5 6 7</span>
<span class="c">152. </span><span class="s1">    ------+-------+------     ------+-------+------</span>
<span class="c">153. </span><span class="s1">    8 . . | . 6 . | . . 3     8 5 9 | 7 6 1 | 4 2 3</span>
<span class="c">154. </span><span class="s1">    4 . . | 8 . 3 | . . 1 --&gt; 4 2 6 | 8 5 3 | 7 9 1</span>
<span class="c">155. </span><span class="s1">    7 . . | . 2 . | . . 6     7 1 3 | 9 2 4 | 8 5 6</span>
<span class="c">156. </span><span class="s1">    ------+-------+------     ------+-------+------</span>
<span class="c">157. </span><span class="s1">    . 6 . | . . . | 2 8 .     9 6 1 | 5 3 7 | 2 8 4</span>
<span class="c">158. </span><span class="s1">    . . . | 4 1 9 | . . 5     2 8 7 | 4 1 9 | 6 3 5</span>
<span class="c">159. </span><span class="s1">    . . . | . 8 . | . 7 9     3 4 5 | 2 8 6 | 1 7 9</span>
<span class="c">160. </span><span class="s1">&#39;&#39;&#39;</span><span class="p">)</span>
<span class="c">161. </span><span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Press Enter to begin...&#39;</span><span class="p">)</span>
<span class="c">162. </span>
<span class="c">163. </span>
<span class="c">164. </span><span class="c1"># Load the sudokupuzzles.txt file:</span>
<span class="c">165. </span><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;sudokupuzzles.txt&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">puzzleFile</span><span class="p">:</span>
<span class="c">166. </span>    <span class="n">puzzles</span> <span class="o">=</span> <span class="n">puzzleFile</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
<span class="c">167. </span>
<span class="c">168. </span><span class="c1"># Remove the newlines at the end of each puzzle:</span>
<span class="c">169. </span><span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">puzzle</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">puzzles</span><span class="p">):</span>
<span class="c">170. </span>    <span class="n">puzzles</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">puzzle</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
<span class="c">171. </span>
<span class="c">172. </span><span class="n">grid</span> <span class="o">=</span> <span class="n">SudokuGrid</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">puzzles</span><span class="p">))</span>
<span class="c">173. </span>
<span class="c">174. </span><span class="k">while</span> <span class="kc">True</span><span class="p">:</span>  <span class="c1"># Main game loop.</span>
<span class="c">175. </span>    <span class="n">grid</span><span class="o">.</span><span class="n">display</span><span class="p">()</span>
<span class="c">176. </span>
<span class="c">177. </span>    <span class="c1"># Check if the puzzle is solved.</span>
<span class="c">178. </span>    <span class="k">if</span> <span class="n">grid</span><span class="o">.</span><span class="n">isSolved</span><span class="p">():</span>
<span class="c">179. </span>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Congratulations! You solved the puzzle!&#39;</span><span class="p">)</span>
<span class="c">180. </span>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Thanks for playing!&#39;</span><span class="p">)</span>
<span class="c">181. </span>        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
<span class="c">182. </span>
<span class="c">183. </span>    <span class="c1"># Get the player&#39;s action:</span>
<span class="c">184. </span>    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>  <span class="c1"># Keep asking until the player enters a valid action.</span>
<span class="c">185. </span>        <span class="nb">print</span><span class="p">()</span>  <span class="c1"># Print a newline.</span>
<span class="c">186. </span>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Enter a move, or RESET, NEW, UNDO, ORIGINAL, or QUIT:&#39;</span><span class="p">)</span>
<span class="c">187. </span>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;(For example, a move looks like &quot;B4 9&quot;.)&#39;</span><span class="p">)</span>
<span class="c">188. </span>
<span class="c">189. </span>        <span class="n">action</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;&gt; &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
<span class="c">190. </span>
<span class="c">191. </span>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">action</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">action</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;R&#39;</span><span class="p">,</span> <span class="s1">&#39;N&#39;</span><span class="p">,</span> <span class="s1">&#39;U&#39;</span><span class="p">,</span> <span class="s1">&#39;O&#39;</span><span class="p">,</span> <span class="s1">&#39;Q&#39;</span><span class="p">):</span>
<span class="c">192. </span>            <span class="c1"># Player entered a valid action.</span>
<span class="c">193. </span>            <span class="k">break</span>
<span class="c">194. </span>
<span class="c">195. </span>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">action</span><span class="o">.</span><span class="n">split</span><span class="p">())</span> <span class="o">==</span> <span class="mi">2</span><span class="p">:</span>
<span class="c">196. </span>            <span class="n">space</span><span class="p">,</span> <span class="n">number</span> <span class="o">=</span> <span class="n">action</span><span class="o">.</span><span class="n">split</span><span class="p">()</span>
<span class="c">197. </span>            <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">space</span><span class="p">)</span> <span class="o">!=</span> <span class="mi">2</span><span class="p">:</span>
<span class="c">198. </span>                <span class="k">continue</span>
<span class="c">199. </span>
<span class="c">200. </span>            <span class="n">column</span><span class="p">,</span> <span class="n">row</span> <span class="o">=</span> <span class="n">space</span>
<span class="c">201. </span>            <span class="k">if</span> <span class="n">column</span> <span class="ow">not</span> <span class="ow">in</span> <span class="nb">list</span><span class="p">(</span><span class="s1">&#39;ABCDEFGHI&#39;</span><span class="p">):</span>
<span class="c">202. </span>                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;There is no column&#39;</span><span class="p">,</span> <span class="n">column</span><span class="p">)</span>
<span class="c">203. </span>                <span class="k">continue</span>
<span class="c">204. </span>            <span class="k">if</span> <span class="ow">not</span> <span class="n">row</span><span class="o">.</span><span class="n">isdecimal</span><span class="p">()</span> <span class="ow">or</span> <span class="ow">not</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;=</span> <span class="nb">int</span><span class="p">(</span><span class="n">row</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">9</span><span class="p">):</span>
<span class="c">205. </span>                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;There is no row&#39;</span><span class="p">,</span> <span class="n">row</span><span class="p">)</span>
<span class="c">206. </span>                <span class="k">continue</span>
<span class="c">207. </span>            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="mi">1</span> <span class="o">&lt;=</span> <span class="nb">int</span><span class="p">(</span><span class="n">number</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">9</span><span class="p">):</span>
<span class="c">208. </span>                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Select a number from 1 to 9, not &#39;</span><span class="p">,</span> <span class="n">number</span><span class="p">)</span>
<span class="c">209. </span>                <span class="k">continue</span>
<span class="c">210. </span>            <span class="k">break</span>  <span class="c1"># Player entered a valid move.</span>
<span class="c">211. </span>
<span class="c">212. </span>    <span class="nb">print</span><span class="p">()</span>  <span class="c1"># Print a newline.</span>
<span class="c">213. </span>
<span class="c">214. </span>    <span class="k">if</span> <span class="n">action</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;R&#39;</span><span class="p">):</span>
<span class="c">215. </span>        <span class="c1"># Reset the grid:</span>
<span class="c">216. </span>        <span class="n">grid</span><span class="o">.</span><span class="n">resetGrid</span><span class="p">()</span>
<span class="c">217. </span>        <span class="k">continue</span>
<span class="c">218. </span>
<span class="c">219. </span>    <span class="k">if</span> <span class="n">action</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;N&#39;</span><span class="p">):</span>
<span class="c">220. </span>        <span class="c1"># Get a new puzzle:</span>
<span class="c">221. </span>        <span class="n">grid</span> <span class="o">=</span> <span class="n">SudokuGrid</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">puzzles</span><span class="p">))</span>
<span class="c">222. </span>        <span class="k">continue</span>
<span class="c">223. </span>
<span class="c">224. </span>    <span class="k">if</span> <span class="n">action</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;U&#39;</span><span class="p">):</span>
<span class="c">225. </span>        <span class="c1"># Undo the last move:</span>
<span class="c">226. </span>        <span class="n">grid</span><span class="o">.</span><span class="n">undo</span><span class="p">()</span>
<span class="c">227. </span>        <span class="k">continue</span>
<span class="c">228. </span>
<span class="c">229. </span>    <span class="k">if</span> <span class="n">action</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;O&#39;</span><span class="p">):</span>
<span class="c">230. </span>        <span class="c1"># View the original numbers:</span>
<span class="c">231. </span>        <span class="n">originalGrid</span> <span class="o">=</span> <span class="n">SudokuGrid</span><span class="p">(</span><span class="n">grid</span><span class="o">.</span><span class="n">originalSetup</span><span class="p">)</span>
<span class="c">232. </span>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;The original grid looked like this:&#39;</span><span class="p">)</span>
<span class="c">233. </span>        <span class="n">originalGrid</span><span class="o">.</span><span class="n">display</span><span class="p">()</span>
<span class="c">234. </span>        <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Press Enter to continue...&#39;</span><span class="p">)</span>
<span class="c">235. </span>
<span class="c">236. </span>    <span class="k">if</span> <span class="n">action</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;Q&#39;</span><span class="p">):</span>
<span class="c">237. </span>        <span class="c1"># Quit the game.</span>
<span class="c">238. </span>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Thanks for playing!&#39;</span><span class="p">)</span>
<span class="c">239. </span>        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
<span class="c">240. </span>
<span class="c">241. </span>    <span class="c1"># Handle the move the player selected.</span>
<span class="c">242. </span>    <span class="k">if</span> <span class="n">grid</span><span class="o">.</span><span class="n">makeMove</span><span class="p">(</span><span class="n">column</span><span class="p">,</span> <span class="n">row</span><span class="p">,</span> <span class="n">number</span><span class="p">)</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>
<span class="c">243. </span>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;You cannot overwrite the original grid</span><span class="se">\&#39;</span><span class="s1">s numbers.&#39;</span><span class="p">)</span>
<span class="c">244. </span>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Enter ORIGINAL to view the original grid.&#39;</span><span class="p">)</span>
<span class="c">245. </span>        <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Press Enter to continue...&#39;</span><span class="p">)</span>
</pre></div>

<h2 id="calibre_link-305" class="calibre5">Exploring the Program</h2>
<p class="bodyfirst">Try to find the answers to the following questions. Experiment with some modifications to the code and rerun the program to see what effect the changes have.</p>
<ol class="decimal">
<li value="1" class="calibre8">What error happens if you delete or rename the <em class="calibre9">sudokupuzzles.txt</em> file and run the program?</li>
<li value="2" class="calibre8">What happens if you change <code class="calibre22">str(y + 1)</code> on line 91 to <code class="calibre22">str(y)</code>?</li>
<li value="3" class="calibre8">What happens if you change <code class="calibre22">if y == 2 or y == 5:</code> on line 99 to <code class="calibre22">if y == 1 or y == 6:</code>?</li>
</ol>
</section>
</div>








<a href="project72.html">Prev: sPoNgEcAsE</a> | <a href="project74.html">Next: Text To Speech Talker</a>
</body></html>