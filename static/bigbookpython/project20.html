<html><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><link href="style.css" rel="stylesheet" type="text/css" /><link rel="stylesheet" type="text/css" href="pygments.css"><title>Digital Stream</title></head><body style="background-color: #fffeee;">

<script type="text/javascript">
//<![CDATA[

var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-5459430-3']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();

//]]>
</script>


<div style="background-color: #eeeddd; float: right; height: 310px; font-family: sans-serif;" id="otherbooks">
  <a href="#" onclick="document.getElementById('otherbooks').outerHTML='';" style="vertical-align: top;">(close)</a><br />

  <a target="_blank" href="https://nostarch.com/automatestuff2" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_automate.link');"><img src="/images/cover_automate2_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://nostarch.com/big-book-small-python-projects" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_bigbookpython.link');"><img src="/images/cover_bigbookpython_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://nostarch.com/beyond-basic-stuff-python" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_beyond.link');"><img src="/images/cover_beyond_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://nostarch.com/inventwithpython" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_invent.link');"><img src="/images/cover_invent4th_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://www.amazon.com/Making-Games-Python-Pygame-Sweigart/dp/1469901730?ie=UTF8&amp;tag=playwithpyth-20&amp;linkCode=as2&amp;camp=1789&amp;creative=9325&amp;creativeASIN=1469901730" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_pygame.link');"><img src="/images/cover_makinggames_thumb.webp" style="height: 200px; border: solid black 1px; /"></a>
  <a target="_blank" href="https://nostarch.com/crackingcodes" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_hacking.link');"><img src="/images/cover_crackingcodes_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://nostarch.com/scratchplayground"><img src="/images/cover_scratchprogrammingplayground_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://nostarch.com/codingwithminecraft"><img src="/images/cover_codingwithminecraft_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <br />
  <a href="https://inventwithpython.com/automateudemy">Use this link to get 70% off the Automate the Boring Stuff online video course.</a><br />
  <a href="https://www.patreon.com/AlSweigart">Support me on Patreon</a>
</div>

<a href="project19.html">Prev: Digital Clock</a> | <a href="project21.html">Next: DNA Visualization</a>





<div type="bodymatter chapter" class="calibre1" id="calibre_link-105">
<section class="toclist">
<header class="calibre10">
<h1 class="chapter">
<span class="chapternumber">#20</span><br class="calibre14" />
<span class="chaptertitle">Digital Stream</span></h1>
</header>
<figure class="opener">
<img src="images/000002.webp" alt="" class="calibre12" />
</figure>
<p class="chapterintro">This program mimics the “digital stream” visualization from the science fiction movie <em class="calibre9">The Matrix</em>. Random beads of binary “rain” stream up from the bottom of the screen, creating a cool, hacker-like visualization. (Unfortunately, due to the way text moves as the screen scrolls down, it’s not possible to make the streams fall downward without using a module such as <code class="calibre17">bext</code>.)</p>
<h2 id="calibre_link-106" class="calibre5">The Program in Action</h2>
<p class="bodyfirst">When you run <em class="calibre9">digitalstream.py</em>, the output will look like this:</p>
<pre class="calibre24"><code class="calibre22">Digital Stream Screensaver, by Al Sweigart al@inventwithpython.com
Press Ctrl-C to quit.
                     0                      0
                     0                      0
   1            0    0    1               1 0                             1
   0            0    0    1         0     0 0        0                    0
   0            1    0    0         0     1 0 0      1               0    1
   0            1    0    0         1     011 1      1               0    1 0
   0            1    0    0         0     000 11     0               0  1 1 0
   1     1      0 1  0    1         1     110 10  1  0               1  0 1 0
         1    101 0       0         1     000 11  1  1               11 1 1 1
         0    100 1       0               11  00  0  1               01     0
      1  1    001 1       1               0   1  10  0               10     0
      0  0    010 0       1                   1  11  11              0      0
<var class="calibre27">--snip--</var></code></pre>
<h2 id="calibre_link-107" class="calibre5">How It Works</h2>
<p class="bodyfirst">Like Project 15, “Deep Cave,” this program uses the scrolling caused by <code class="calibre22">print()</code> calls to create an animation. Each column is represented by an integer in the columns list: <code class="calibre22">columns[0]</code> is an integer for the leftmost column, <code class="calibre22">columns[1]</code> is an integer for the column to the right of that one, and so on. The program initially sets these integers to <code class="calibre22">0</code>, meaning it prints <code class="calibre22">' '</code> (an empty space string) instead of a stream in that column. Randomly, it changes each integer to a value between <code class="calibre22">MIN_STREAM_LENGTH</code> and <code class="calibre22">MAX_STREAM_LENGTH</code>. That integer decreases by <code class="calibre22">1</code> each time a line is printed. As long as a column’s integer is greater than <code class="calibre22">0</code>, the program prints a random <code class="calibre22">1</code> or <code class="calibre22">0</code> in that column. This produces the “digital stream” effect you see on the screen.</p>
<div class="highlight"><pre><span></span>
<span class="c"> 1. </span><span class="sd">&quot;&quot;&quot;Digital Stream, by Al Sweigart al@inventwithpython.com</span>
<span class="c"> 2. </span><span class="sd">A screensaver in the style of The Matrix movie&#39;s visuals.</span>
<span class="c"> 3. </span><span class="sd">This code is available at https://nostarch.com/big-book-small-python-programming</span>
<span class="c"> 4. </span><span class="sd">Tags: tiny, artistic, beginner, scrolling&quot;&quot;&quot;</span>
<span class="c"> 5. </span>
<span class="c"> 6. </span><span class="kn">import</span> <span class="nn">random</span><span class="o">,</span> <span class="nn">shutil</span><span class="o">,</span> <span class="nn">sys</span><span class="o">,</span> <span class="nn">time</span>
<span class="c"> 7. </span>
<span class="c"> 8. </span><span class="c1"># Set up the constants:</span>
<span class="c"> 9. </span><span class="n">MIN_STREAM_LENGTH</span> <span class="o">=</span> <span class="mi">6</span>  <span class="c1"># (!) Try changing this to 1 or 50.</span>
<span class="c">10. </span><span class="n">MAX_STREAM_LENGTH</span> <span class="o">=</span> <span class="mi">14</span>  <span class="c1"># (!) Try changing this to 100.</span>
<span class="c">11. </span><span class="n">PAUSE</span> <span class="o">=</span> <span class="mf">0.1</span>  <span class="c1"># (!) Try changing this to 0.0 or 2.0.</span>
<span class="c">12. </span><span class="n">STREAM_CHARS</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;0&#39;</span><span class="p">,</span> <span class="s1">&#39;1&#39;</span><span class="p">]</span>  <span class="c1"># (!) Try changing this to other characters.</span>
<span class="c">13. </span>
<span class="c">14. </span><span class="c1"># Density can range from 0.0 to 1.0:</span>
<span class="c">15. </span><span class="n">DENSITY</span> <span class="o">=</span> <span class="mf">0.02</span>  <span class="c1"># (!) Try changing this to 0.10 or 0.30.</span>
<span class="c">16. </span>
<span class="c">17. </span><span class="c1"># Get the size of the terminal window:</span>
<span class="c">18. </span><span class="n">WIDTH</span> <span class="o">=</span> <span class="n">shutil</span><span class="o">.</span><span class="n">get_terminal_size</span><span class="p">()[</span><span class="mi">0</span><span class="p">]</span>
<span class="c">19. </span><span class="c1"># We can&#39;t print to the last column on Windows without it adding a</span>
<span class="c">20. </span><span class="c1"># newline automatically, so reduce the width by one:</span>
<span class="c">21. </span><span class="n">WIDTH</span> <span class="o">-=</span> <span class="mi">1</span>
<span class="c">22. </span>
<span class="c">23. </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Digital Stream, by Al Sweigart al@inventwithpython.com&#39;</span><span class="p">)</span>
<span class="c">24. </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Press Ctrl-C to quit.&#39;</span><span class="p">)</span>
<span class="c">25. </span><span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="c">26. </span>
<span class="c">27. </span><span class="k">try</span><span class="p">:</span>
<span class="c">28. </span>    <span class="c1"># For each column, when the counter is 0, no stream is shown.</span>
<span class="c">29. </span>    <span class="c1"># Otherwise, it acts as a counter for how many times a 1 or 0</span>
<span class="c">30. </span>    <span class="c1"># should be displayed in that column.</span>
<span class="c">31. </span>    <span class="n">columns</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">WIDTH</span>
<span class="c">32. </span>    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
<span class="c">33. </span>        <span class="c1"># Set up the counter for each column:</span>
<span class="c">34. </span>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">WIDTH</span><span class="p">):</span>
<span class="c">35. </span>            <span class="k">if</span> <span class="n">columns</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<span class="c">36. </span>                <span class="k">if</span> <span class="n">random</span><span class="o">.</span><span class="n">random</span><span class="p">()</span> <span class="o">&lt;=</span> <span class="n">DENSITY</span><span class="p">:</span>
<span class="c">37. </span>                    <span class="c1"># Restart a stream on this column.</span>
<span class="c">38. </span>                    <span class="n">columns</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">MIN_STREAM_LENGTH</span><span class="p">,</span>
<span class="c">39. </span>                                                <span class="n">MAX_STREAM_LENGTH</span><span class="p">)</span>
<span class="c">40. </span>
<span class="c">41. </span>            <span class="c1"># Display an empty space or a 1/0 character.</span>
<span class="c">42. </span>            <span class="k">if</span> <span class="n">columns</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
<span class="c">43. </span>                <span class="nb">print</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">STREAM_CHARS</span><span class="p">),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="c">44. </span>                <span class="n">columns</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">-=</span> <span class="mi">1</span>
<span class="c">45. </span>            <span class="k">else</span><span class="p">:</span>
<span class="c">46. </span>                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="c">47. </span>        <span class="nb">print</span><span class="p">()</span>  <span class="c1"># Print a newline at the end of the row of columns.</span>
<span class="c">48. </span>        <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>  <span class="c1"># Make sure text appears on the screen.</span>
<span class="c">49. </span>        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="n">PAUSE</span><span class="p">)</span>
<span class="c">50. </span><span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
<span class="c">51. </span>    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>  <span class="c1"># When Ctrl-C is pressed, end the program.</span>
</pre></div>

<p class="calibre19">After entering the source code and running it a few times, try making experimental changes to it. The comments marked with <code class="calibre22">(!)</code> have suggestions for small changes you can make. On your own, you can also try to figure out how to do the following:</p>
<ul class="calibre25">
<li class="calibre8">Include characters besides just 1s and 0s.</li>
<li class="calibre8">Include shapes besides lines, including rectangles, triangles, and diamonds.</li>
</ul>
<h2 id="calibre_link-108" class="calibre5">Exploring the Program</h2>
<p class="bodyfirst">Try to find the answers to the following questions. Experiment with some modifications to the code and rerun the program to see what effect the changes have.</p>
<ol class="decimal">
<li value="1" class="calibre8">What happens if you change <code class="calibre22">print(' ', end='')</code> on line 46 to <code class="calibre22">print('.', end='')</code>?</li>
<li value="2" class="calibre8">What error message do your get if you change <code class="calibre22">PAUSE = 0.1</code> on line 11 to <code class="calibre22">PAUSE = -0.1</code>?</li>
<li value="3" class="calibre8">What happens if you change <code class="calibre22">columns[i] &gt; 0</code> on line 42 to <code class="calibre22">columns[i] &lt; 0</code>?</li>
<li value="4" class="calibre8">What happens if you change <code class="calibre22">columns[i] &gt; 0</code> on line 42 to <code class="calibre22">columns[i] &lt;= 0</code>?</li>
<li value="5" class="calibre8">What happens if you change <code class="calibre22">columns[i] -= 1</code> on line 44 to <code class="calibre22">columns[i] += 1</code>?</li>
</ol>
</section>
</div>








<a href="project19.html">Prev: Digital Clock</a> | <a href="project21.html">Next: DNA Visualization</a>
</body></html>