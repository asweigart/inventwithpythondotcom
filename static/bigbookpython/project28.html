<html><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><link href="style.css" rel="stylesheet" type="text/css" /><link rel="stylesheet" type="text/css" href="pygments.css"><title>Flooder</title></head><body style="background-color: #fffeee;">

<script type="text/javascript">
//<![CDATA[

var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-5459430-3']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();

//]]>
</script>


<div style="background-color: #eeeddd; float: right; height: 310px; font-family: sans-serif;" id="otherbooks">
  <a href="#" onclick="document.getElementById('otherbooks').outerHTML='';" style="vertical-align: top;">(close)</a><br />

  <a target="_blank" href="https://nostarch.com/automatestuff2" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_automate.link');"><img src="/images/cover_automate2_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://nostarch.com/big-book-small-python-projects" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_bigbookpython.link');"><img src="/images/cover_bigbookpython_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://nostarch.com/beyond-basic-stuff-python" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_beyond.link');"><img src="/images/cover_beyond_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://nostarch.com/inventwithpython" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_invent.link');"><img src="/images/cover_invent4th_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://www.amazon.com/Making-Games-Python-Pygame-Sweigart/dp/1469901730?ie=UTF8&amp;tag=playwithpyth-20&amp;linkCode=as2&amp;camp=1789&amp;creative=9325&amp;creativeASIN=1469901730" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_pygame.link');"><img src="/images/cover_makinggames_thumb.webp" style="height: 200px; border: solid black 1px; /"></a>
  <a target="_blank" href="https://nostarch.com/crackingcodes" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_hacking.link');"><img src="/images/cover_crackingcodes_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://nostarch.com/scratchplayground"><img src="/images/cover_scratchprogrammingplayground_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://nostarch.com/codingwithminecraft"><img src="/images/cover_codingwithminecraft_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <br />
  <a href="https://inventwithpython.com/automateudemy">Use this link to get 70% off the Automate the Boring Stuff online video course.</a><br />
  <a href="https://www.patreon.com/AlSweigart">Support me on Patreon</a>
</div>

<a href="project27.html">Prev: Fish Tank</a> | <a href="project29.html">Next: Forest Fire Sim</a>





<div type="bodymatter chapter" class="calibre1" id="calibre_link-137">
<section class="toclist">
<header class="calibre10">
<h1 class="chapter">
<span class="chapternumber">#28</span><br class="calibre14" />
<span class="chaptertitle">Flooder</span></h1>
</header>
<figure class="opener">
<img src="images/000002.webp" alt="" class="calibre12" />
</figure>
<p class="chapterintro">Flooder is a colorful game where a player tries to fill the board with a single color by changing the color of the tile in the upper-left corner. This new color spreads to all neighboring tiles that matched the original color. It’s similar to the Flood It mobile game. This program also has a colorblind mode, which uses shapes instead of flat colored tiles. It relies on the recursive flood fill algorithm to paint the board and works similarly to the “paint bucket” or “fill” tool in many painting applications.</p>
<h2 id="calibre_link-138" class="calibre5">The Program in Action</h2>
<p class="bodyfirst"><a href="#calibre_link-340" id="calibre_link-800" class="linkurl">Figure 28-1</a> shows what the output will look like when you run <em class="calibre9">flooder.py</em>.</p>
<figure class="calibre28">
<img src="images/000022.webp" alt="f28001" class="calibre12" />
<figcaption class="calibre29"><p class="calibre30"><a id="calibre_link-340" class="linkurl">Figure 28-1</a>: The output of the Flooder game in colorblind mode, showing distinct shapes instead of rectangles</p></figcaption>
</figure>
<h2 id="calibre_link-139" class="calibre5">How It Works</h2>
<p class="bodyfirst">Accessibility is a large issue in video games, and addressing it can take many forms. For example, deuteranopia, or red-green colorblindness, causes shades of red and green to appear the same, making it hard to distinguish between red objects and green objects on the screen. We can make Flooder more accessible with a mode that uses distinct shapes instead of distinct colors. Note that even the colorblind mode still uses color. This means you can eliminate the “standard” mode, if you wish, and have even color-sighted users play in the colorblind mode. The best accessibility designs are those that incorporate accessibility considerations from the start rather than add them as a separate mode. This reduces the amount of code we have to write and makes any future bug fixes easier.</p>
<p class="calibre19">Other accessibility issues include making sure that text is large enough to be read without perfect vision, that sound effects have visual cues and spoken language has subtitles for those hard of hearing, and that controls can be remapped to other keyboard keys so people can play the game with one hand. The YouTube channel Game Maker’s Toolkit has a video series called “Designing for Disability” that covers many aspects of designing your games with accessibility in mind.</p>
<div class="highlight"><pre><span></span>
<span class="c">  1. </span><span class="sd">&quot;&quot;&quot;Flooder, by Al Sweigart al@inventwithpython.com</span>
<span class="c">  2. </span><span class="sd">A colorful game where you try to fill the board with a single color. Has</span>
<span class="c">  3. </span><span class="sd">a mode for colorblind players.</span>
<span class="c">  4. </span><span class="sd">Inspired by the &quot;Flood It!&quot; game.</span>
<span class="c">  5. </span><span class="sd">This code is available at https://nostarch.com/big-book-small-python-programming</span>
<span class="c">  6. </span><span class="sd">Tags: large, bext, game&quot;&quot;&quot;</span>
<span class="c">  7. </span>
<span class="c">  8. </span><span class="kn">import</span> <span class="nn">random</span><span class="o">,</span> <span class="nn">sys</span>
<span class="c">  9. </span>
<span class="c"> 10. </span><span class="k">try</span><span class="p">:</span>
<span class="c"> 11. </span>    <span class="kn">import</span> <span class="nn">bext</span>
<span class="c"> 12. </span><span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
<span class="c"> 13. </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;This program requires the bext module, which you&#39;</span><span class="p">)</span>
<span class="c"> 14. </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;can install by following the instructions at&#39;</span><span class="p">)</span>
<span class="c"> 15. </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;https://pypi.org/project/Bext/&#39;</span><span class="p">)</span>
<span class="c"> 16. </span>    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
<span class="c"> 17. </span>
<span class="c"> 18. </span><span class="c1"># Set up the constants:</span>
<span class="c"> 19. </span><span class="n">BOARD_WIDTH</span> <span class="o">=</span> <span class="mi">16</span>  <span class="c1"># (!) Try changing this to 4 or 40.</span>
<span class="c"> 20. </span><span class="n">BOARD_HEIGHT</span> <span class="o">=</span> <span class="mi">14</span>  <span class="c1"># (!) Try changing this to 4 or 20.</span>
<span class="c"> 21. </span><span class="n">MOVES_PER_GAME</span> <span class="o">=</span> <span class="mi">20</span>  <span class="c1"># (!) Try changing this to 3 or 300.</span>
<span class="c"> 22. </span>
<span class="c"> 23. </span><span class="c1"># Constants for the different shapes used in colorblind mode:</span>
<span class="c"> 24. </span><span class="n">HEART</span>     <span class="o">=</span> <span class="nb">chr</span><span class="p">(</span><span class="mi">9829</span><span class="p">)</span>  <span class="c1"># Character 9829 is &#39;♥&#39;.</span>
<span class="c"> 25. </span><span class="n">DIAMOND</span>   <span class="o">=</span> <span class="nb">chr</span><span class="p">(</span><span class="mi">9830</span><span class="p">)</span>  <span class="c1"># Character 9830 is &#39;♦&#39;.</span>
<span class="c"> 26. </span><span class="n">SPADE</span>     <span class="o">=</span> <span class="nb">chr</span><span class="p">(</span><span class="mi">9824</span><span class="p">)</span>  <span class="c1"># Character 9824 is &#39;♠&#39;.</span>
<span class="c"> 27. </span><span class="n">CLUB</span>      <span class="o">=</span> <span class="nb">chr</span><span class="p">(</span><span class="mi">9827</span><span class="p">)</span>  <span class="c1"># Character 9827 is &#39;♣&#39;.</span>
<span class="c"> 28. </span><span class="n">BALL</span>      <span class="o">=</span> <span class="nb">chr</span><span class="p">(</span><span class="mi">9679</span><span class="p">)</span>  <span class="c1"># Character 9679 is &#39;●&#39;.</span>
<span class="c"> 29. </span><span class="n">TRIANGLE</span>  <span class="o">=</span> <span class="nb">chr</span><span class="p">(</span><span class="mi">9650</span><span class="p">)</span>  <span class="c1"># Character 9650 is &#39;▲&#39;.</span>
<span class="c"> 30. </span>
<span class="c"> 31. </span><span class="n">BLOCK</span>     <span class="o">=</span> <span class="nb">chr</span><span class="p">(</span><span class="mi">9608</span><span class="p">)</span>  <span class="c1"># Character 9608 is &#39;█&#39;</span>
<span class="c"> 32. </span><span class="n">LEFTRIGHT</span> <span class="o">=</span> <span class="nb">chr</span><span class="p">(</span><span class="mi">9472</span><span class="p">)</span>  <span class="c1"># Character 9472 is &#39;─&#39;</span>
<span class="c"> 33. </span><span class="n">UPDOWN</span>    <span class="o">=</span> <span class="nb">chr</span><span class="p">(</span><span class="mi">9474</span><span class="p">)</span>  <span class="c1"># Character 9474 is &#39;│&#39;</span>
<span class="c"> 34. </span><span class="n">DOWNRIGHT</span> <span class="o">=</span> <span class="nb">chr</span><span class="p">(</span><span class="mi">9484</span><span class="p">)</span>  <span class="c1"># Character 9484 is &#39;┌&#39;</span>
<span class="c"> 35. </span><span class="n">DOWNLEFT</span>  <span class="o">=</span> <span class="nb">chr</span><span class="p">(</span><span class="mi">9488</span><span class="p">)</span>  <span class="c1"># Character 9488 is &#39;┐&#39;</span>
<span class="c"> 36. </span><span class="n">UPRIGHT</span>   <span class="o">=</span> <span class="nb">chr</span><span class="p">(</span><span class="mi">9492</span><span class="p">)</span>  <span class="c1"># Character 9492 is &#39;└&#39;</span>
<span class="c"> 37. </span><span class="n">UPLEFT</span>    <span class="o">=</span> <span class="nb">chr</span><span class="p">(</span><span class="mi">9496</span><span class="p">)</span>  <span class="c1"># Character 9496 is &#39;┘&#39;</span>
<span class="c"> 38. </span><span class="c1"># A list of chr() codes is at https://inventwithpython.com/chr</span>
<span class="c"> 39. </span>
<span class="c"> 40. </span><span class="c1"># All the color/shape tiles used on the board:</span>
<span class="c"> 41. </span><span class="n">TILE_TYPES</span> <span class="o">=</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">3</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span>
<span class="c"> 42. </span><span class="n">COLORS_MAP</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span> <span class="s1">&#39;green&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span><span class="s1">&#39;blue&#39;</span><span class="p">,</span>
<span class="c"> 43. </span>              <span class="mi">3</span><span class="p">:</span><span class="s1">&#39;yellow&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span><span class="s1">&#39;cyan&#39;</span><span class="p">,</span> <span class="mi">5</span><span class="p">:</span><span class="s1">&#39;purple&#39;</span><span class="p">}</span>
<span class="c"> 44. </span><span class="n">COLOR_MODE</span> <span class="o">=</span> <span class="s1">&#39;color mode&#39;</span>
<span class="c"> 45. </span><span class="n">SHAPES_MAP</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">:</span> <span class="n">HEART</span><span class="p">,</span> <span class="mi">1</span><span class="p">:</span> <span class="n">TRIANGLE</span><span class="p">,</span> <span class="mi">2</span><span class="p">:</span> <span class="n">DIAMOND</span><span class="p">,</span>
<span class="c"> 46. </span>              <span class="mi">3</span><span class="p">:</span> <span class="n">BALL</span><span class="p">,</span> <span class="mi">4</span><span class="p">:</span> <span class="n">CLUB</span><span class="p">,</span> <span class="mi">5</span><span class="p">:</span> <span class="n">SPADE</span><span class="p">}</span>
<span class="c"> 47. </span><span class="n">SHAPE_MODE</span> <span class="o">=</span> <span class="s1">&#39;shape mode&#39;</span>
<span class="c"> 48. </span>
<span class="c"> 49. </span>
<span class="c"> 50. </span><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
<span class="c"> 51. </span>    <span class="n">bext</span><span class="o">.</span><span class="n">bg</span><span class="p">(</span><span class="s1">&#39;black&#39;</span><span class="p">)</span>
<span class="c"> 52. </span>    <span class="n">bext</span><span class="o">.</span><span class="n">fg</span><span class="p">(</span><span class="s1">&#39;white&#39;</span><span class="p">)</span>
<span class="c"> 53. </span>    <span class="n">bext</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
<span class="c"> 54. </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;Flooder, by Al Sweigart al@inventwithpython.com</span>
<span class="c"> 55. </span>
<span class="c"> 56. </span><span class="s1">Set the upper left color/shape, which fills in all the</span>
<span class="c"> 57. </span><span class="s1">adjacent squares of that color/shape. Try to make the</span>
<span class="c"> 58. </span><span class="s1">entire board the same color/shape.&#39;&#39;&#39;</span><span class="p">)</span>
<span class="c"> 59. </span>
<span class="c"> 60. </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Do you want to play in colorblind mode? Y/N&#39;</span><span class="p">)</span>
<span class="c"> 61. </span>    <span class="n">response</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;&gt; &#39;</span><span class="p">)</span>
<span class="c"> 62. </span>    <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;Y&#39;</span><span class="p">):</span>
<span class="c"> 63. </span>        <span class="n">displayMode</span> <span class="o">=</span> <span class="n">SHAPE_MODE</span>
<span class="c"> 64. </span>    <span class="k">else</span><span class="p">:</span>
<span class="c"> 65. </span>        <span class="n">displayMode</span> <span class="o">=</span> <span class="n">COLOR_MODE</span>
<span class="c"> 66. </span>
<span class="c"> 67. </span>    <span class="n">gameBoard</span> <span class="o">=</span> <span class="n">getNewBoard</span><span class="p">()</span>
<span class="c"> 68. </span>    <span class="n">movesLeft</span> <span class="o">=</span> <span class="n">MOVES_PER_GAME</span>
<span class="c"> 69. </span>
<span class="c"> 70. </span>    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>  <span class="c1"># Main game loop.</span>
<span class="c"> 71. </span>        <span class="n">displayBoard</span><span class="p">(</span><span class="n">gameBoard</span><span class="p">,</span> <span class="n">displayMode</span><span class="p">)</span>
<span class="c"> 72. </span>
<span class="c"> 73. </span>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Moves left:&#39;</span><span class="p">,</span> <span class="n">movesLeft</span><span class="p">)</span>
<span class="c"> 74. </span>        <span class="n">playerMove</span> <span class="o">=</span> <span class="n">askForPlayerMove</span><span class="p">(</span><span class="n">displayMode</span><span class="p">)</span>
<span class="c"> 75. </span>        <span class="n">changeTile</span><span class="p">(</span><span class="n">playerMove</span><span class="p">,</span> <span class="n">gameBoard</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="c"> 76. </span>        <span class="n">movesLeft</span> <span class="o">-=</span> <span class="mi">1</span>
<span class="c"> 77. </span>
<span class="c"> 78. </span>        <span class="k">if</span> <span class="n">hasWon</span><span class="p">(</span><span class="n">gameBoard</span><span class="p">):</span>
<span class="c"> 79. </span>            <span class="n">displayBoard</span><span class="p">(</span><span class="n">gameBoard</span><span class="p">,</span> <span class="n">displayMode</span><span class="p">)</span>
<span class="c"> 80. </span>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;You have won!&#39;</span><span class="p">)</span>
<span class="c"> 81. </span>            <span class="k">break</span>
<span class="c"> 82. </span>        <span class="k">elif</span> <span class="n">movesLeft</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<span class="c"> 83. </span>            <span class="n">displayBoard</span><span class="p">(</span><span class="n">gameBoard</span><span class="p">,</span> <span class="n">displayMode</span><span class="p">)</span>
<span class="c"> 84. </span>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;You have run out of moves!&#39;</span><span class="p">)</span>
<span class="c"> 85. </span>            <span class="k">break</span>
<span class="c"> 86. </span>
<span class="c"> 87. </span>
<span class="c"> 88. </span><span class="k">def</span> <span class="nf">getNewBoard</span><span class="p">():</span>
<span class="c"> 89. </span>    <span class="sd">&quot;&quot;&quot;Return a dictionary of a new Flood It board.&quot;&quot;&quot;</span>
<span class="c"> 90. </span>
<span class="c"> 91. </span>    <span class="c1"># Keys are (x, y) tuples, values are the tile at that position.</span>
<span class="c"> 92. </span>    <span class="n">board</span> <span class="o">=</span> <span class="p">{}</span>
<span class="c"> 93. </span>
<span class="c"> 94. </span>    <span class="c1"># Create random colors for the board.</span>
<span class="c"> 95. </span>    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">BOARD_WIDTH</span><span class="p">):</span>
<span class="c"> 96. </span>        <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">BOARD_HEIGHT</span><span class="p">):</span>
<span class="c"> 97. </span>            <span class="n">board</span><span class="p">[(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)]</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">TILE_TYPES</span><span class="p">)</span>
<span class="c"> 98. </span>
<span class="c"> 99. </span>    <span class="c1"># Make several tiles the same as their neighbor. This creates groups</span>
<span class="c">100. </span>    <span class="c1"># of the same color/shape.</span>
<span class="c">101. </span>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">BOARD_WIDTH</span> <span class="o">*</span> <span class="n">BOARD_HEIGHT</span><span class="p">):</span>
<span class="c">102. </span>        <span class="n">x</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">BOARD_WIDTH</span> <span class="o">-</span> <span class="mi">2</span><span class="p">)</span>
<span class="c">103. </span>        <span class="n">y</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">BOARD_HEIGHT</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
<span class="c">104. </span>        <span class="n">board</span><span class="p">[(</span><span class="n">x</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">y</span><span class="p">)]</span> <span class="o">=</span> <span class="n">board</span><span class="p">[(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)]</span>
<span class="c">105. </span>    <span class="k">return</span> <span class="n">board</span>
<span class="c">106. </span>
<span class="c">107. </span>
<span class="c">108. </span><span class="k">def</span> <span class="nf">displayBoard</span><span class="p">(</span><span class="n">board</span><span class="p">,</span> <span class="n">displayMode</span><span class="p">):</span>
<span class="c">109. </span>    <span class="sd">&quot;&quot;&quot;Display the board on the screen.&quot;&quot;&quot;</span>
<span class="c">110. </span>    <span class="n">bext</span><span class="o">.</span><span class="n">fg</span><span class="p">(</span><span class="s1">&#39;white&#39;</span><span class="p">)</span>
<span class="c">111. </span>    <span class="c1"># Display the top edge of the board:</span>
<span class="c">112. </span>    <span class="nb">print</span><span class="p">(</span><span class="n">DOWNRIGHT</span> <span class="o">+</span> <span class="p">(</span><span class="n">LEFTRIGHT</span> <span class="o">*</span> <span class="n">BOARD_WIDTH</span><span class="p">)</span> <span class="o">+</span> <span class="n">DOWNLEFT</span><span class="p">)</span>
<span class="c">113. </span>
<span class="c">114. </span>    <span class="c1"># Display each row:</span>
<span class="c">115. </span>    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">BOARD_HEIGHT</span><span class="p">):</span>
<span class="c">116. </span>        <span class="n">bext</span><span class="o">.</span><span class="n">fg</span><span class="p">(</span><span class="s1">&#39;white&#39;</span><span class="p">)</span>
<span class="c">117. </span>        <span class="k">if</span> <span class="n">y</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># The first row begins with &#39;&gt;&#39;.</span>
<span class="c">118. </span>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;&gt;&#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="c">119. </span>        <span class="k">else</span><span class="p">:</span>  <span class="c1"># Later rows begin with a white vertical line.</span>
<span class="c">120. </span>            <span class="nb">print</span><span class="p">(</span><span class="n">UPDOWN</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="c">121. </span>
<span class="c">122. </span>        <span class="c1"># Display each tile in this row:</span>
<span class="c">123. </span>        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">BOARD_WIDTH</span><span class="p">):</span>
<span class="c">124. </span>            <span class="n">bext</span><span class="o">.</span><span class="n">fg</span><span class="p">(</span><span class="n">COLORS_MAP</span><span class="p">[</span><span class="n">board</span><span class="p">[(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)]])</span>
<span class="c">125. </span>            <span class="k">if</span> <span class="n">displayMode</span> <span class="o">==</span> <span class="n">COLOR_MODE</span><span class="p">:</span>
<span class="c">126. </span>                <span class="nb">print</span><span class="p">(</span><span class="n">BLOCK</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="c">127. </span>            <span class="k">elif</span> <span class="n">displayMode</span> <span class="o">==</span> <span class="n">SHAPE_MODE</span><span class="p">:</span>
<span class="c">128. </span>                <span class="nb">print</span><span class="p">(</span><span class="n">SHAPES_MAP</span><span class="p">[</span><span class="n">board</span><span class="p">[(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)]],</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="c">129. </span>
<span class="c">130. </span>        <span class="n">bext</span><span class="o">.</span><span class="n">fg</span><span class="p">(</span><span class="s1">&#39;white&#39;</span><span class="p">)</span>
<span class="c">131. </span>        <span class="nb">print</span><span class="p">(</span><span class="n">UPDOWN</span><span class="p">)</span>  <span class="c1"># Rows end with a white vertical line.</span>
<span class="c">132. </span>    <span class="c1"># Display the bottom edge of the board:</span>
<span class="c">133. </span>    <span class="nb">print</span><span class="p">(</span><span class="n">UPRIGHT</span> <span class="o">+</span> <span class="p">(</span><span class="n">LEFTRIGHT</span> <span class="o">*</span> <span class="n">BOARD_WIDTH</span><span class="p">)</span> <span class="o">+</span> <span class="n">UPLEFT</span><span class="p">)</span>
<span class="c">134. </span>
<span class="c">135. </span>
<span class="c">136. </span><span class="k">def</span> <span class="nf">askForPlayerMove</span><span class="p">(</span><span class="n">displayMode</span><span class="p">):</span>
<span class="c">137. </span>    <span class="sd">&quot;&quot;&quot;Let the player select a color to paint the upper left tile.&quot;&quot;&quot;</span>
<span class="c">138. </span>    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
<span class="c">139. </span>        <span class="n">bext</span><span class="o">.</span><span class="n">fg</span><span class="p">(</span><span class="s1">&#39;white&#39;</span><span class="p">)</span>
<span class="c">140. </span>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Choose one of &#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="c">141. </span>
<span class="c">142. </span>        <span class="k">if</span> <span class="n">displayMode</span> <span class="o">==</span> <span class="n">COLOR_MODE</span><span class="p">:</span>
<span class="c">143. </span>            <span class="n">bext</span><span class="o">.</span><span class="n">fg</span><span class="p">(</span><span class="s1">&#39;red&#39;</span><span class="p">)</span>
<span class="c">144. </span>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;(R)ed &#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="c">145. </span>            <span class="n">bext</span><span class="o">.</span><span class="n">fg</span><span class="p">(</span><span class="s1">&#39;green&#39;</span><span class="p">)</span>
<span class="c">146. </span>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;(G)reen &#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="c">147. </span>            <span class="n">bext</span><span class="o">.</span><span class="n">fg</span><span class="p">(</span><span class="s1">&#39;blue&#39;</span><span class="p">)</span>
<span class="c">148. </span>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;(B)lue &#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="c">149. </span>            <span class="n">bext</span><span class="o">.</span><span class="n">fg</span><span class="p">(</span><span class="s1">&#39;yellow&#39;</span><span class="p">)</span>
<span class="c">150. </span>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;(Y)ellow &#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="c">151. </span>            <span class="n">bext</span><span class="o">.</span><span class="n">fg</span><span class="p">(</span><span class="s1">&#39;cyan&#39;</span><span class="p">)</span>
<span class="c">152. </span>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;(C)yan &#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="c">153. </span>            <span class="n">bext</span><span class="o">.</span><span class="n">fg</span><span class="p">(</span><span class="s1">&#39;purple&#39;</span><span class="p">)</span>
<span class="c">154. </span>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;(P)urple &#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="c">155. </span>        <span class="k">elif</span> <span class="n">displayMode</span> <span class="o">==</span> <span class="n">SHAPE_MODE</span><span class="p">:</span>
<span class="c">156. </span>            <span class="n">bext</span><span class="o">.</span><span class="n">fg</span><span class="p">(</span><span class="s1">&#39;red&#39;</span><span class="p">)</span>
<span class="c">157. </span>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;(H)eart, &#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="c">158. </span>            <span class="n">bext</span><span class="o">.</span><span class="n">fg</span><span class="p">(</span><span class="s1">&#39;green&#39;</span><span class="p">)</span>
<span class="c">159. </span>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;(T)riangle, &#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="c">160. </span>            <span class="n">bext</span><span class="o">.</span><span class="n">fg</span><span class="p">(</span><span class="s1">&#39;blue&#39;</span><span class="p">)</span>
<span class="c">161. </span>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;(D)iamond, &#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="c">162. </span>            <span class="n">bext</span><span class="o">.</span><span class="n">fg</span><span class="p">(</span><span class="s1">&#39;yellow&#39;</span><span class="p">)</span>
<span class="c">163. </span>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;(B)all, &#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="c">164. </span>            <span class="n">bext</span><span class="o">.</span><span class="n">fg</span><span class="p">(</span><span class="s1">&#39;cyan&#39;</span><span class="p">)</span>
<span class="c">165. </span>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;(C)lub, &#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="c">166. </span>            <span class="n">bext</span><span class="o">.</span><span class="n">fg</span><span class="p">(</span><span class="s1">&#39;purple&#39;</span><span class="p">)</span>
<span class="c">167. </span>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;(S)pade, &#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="c">168. </span>        <span class="n">bext</span><span class="o">.</span><span class="n">fg</span><span class="p">(</span><span class="s1">&#39;white&#39;</span><span class="p">)</span>
<span class="c">169. </span>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;or QUIT:&#39;</span><span class="p">)</span>
<span class="c">170. </span>        <span class="n">response</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;&gt; &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
<span class="c">171. </span>        <span class="k">if</span> <span class="n">response</span> <span class="o">==</span> <span class="s1">&#39;QUIT&#39;</span><span class="p">:</span>
<span class="c">172. </span>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Thanks for playing!&#39;</span><span class="p">)</span>
<span class="c">173. </span>            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
<span class="c">174. </span>        <span class="k">if</span> <span class="n">displayMode</span> <span class="o">==</span> <span class="n">COLOR_MODE</span> <span class="ow">and</span> <span class="n">response</span> <span class="ow">in</span> <span class="nb">tuple</span><span class="p">(</span><span class="s1">&#39;RGBYCP&#39;</span><span class="p">):</span>
<span class="c">175. </span>            <span class="c1"># Return a tile type number based on the response:</span>
<span class="c">176. </span>            <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;R&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;G&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;B&#39;</span><span class="p">:</span> <span class="mi">2</span><span class="p">,</span>
<span class="c">177. </span>                <span class="s1">&#39;Y&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;P&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">}[</span><span class="n">response</span><span class="p">]</span>
<span class="c">178. </span>        <span class="k">if</span> <span class="n">displayMode</span> <span class="o">==</span> <span class="n">SHAPE_MODE</span> <span class="ow">and</span> <span class="n">response</span> <span class="ow">in</span> <span class="nb">tuple</span><span class="p">(</span><span class="s1">&#39;HTDBCS&#39;</span><span class="p">):</span>
<span class="c">179. </span>            <span class="c1"># Return a tile type number based on the response:</span>
<span class="c">180. </span>            <span class="k">return</span> <span class="p">{</span><span class="s1">&#39;H&#39;</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="s1">&#39;T&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;D&#39;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span>
<span class="c">181. </span>                <span class="s1">&#39;B&#39;</span><span class="p">:</span> <span class="mi">3</span><span class="p">,</span> <span class="s1">&#39;C&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span> <span class="s1">&#39;S&#39;</span><span class="p">:</span> <span class="mi">5</span><span class="p">}[</span><span class="n">response</span><span class="p">]</span>
<span class="c">182. </span>
<span class="c">183. </span>
<span class="c">184. </span><span class="k">def</span> <span class="nf">changeTile</span><span class="p">(</span><span class="n">tileType</span><span class="p">,</span> <span class="n">board</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">charToChange</span><span class="o">=</span><span class="kc">None</span><span class="p">):</span>
<span class="c">185. </span>    <span class="sd">&quot;&quot;&quot;Change the color/shape of a tile using the recursive flood fill</span>
<span class="c">186. </span><span class="sd">    algorithm.&quot;&quot;&quot;</span>
<span class="c">187. </span>    <span class="k">if</span> <span class="n">x</span> <span class="o">==</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">y</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<span class="c">188. </span>        <span class="n">charToChange</span> <span class="o">=</span> <span class="n">board</span><span class="p">[(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)]</span>
<span class="c">189. </span>        <span class="k">if</span> <span class="n">tileType</span> <span class="o">==</span> <span class="n">charToChange</span><span class="p">:</span>
<span class="c">190. </span>            <span class="k">return</span>  <span class="c1"># Base Case: Already is the same tile.</span>
<span class="c">191. </span>
<span class="c">192. </span>    <span class="n">board</span><span class="p">[(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)]</span> <span class="o">=</span> <span class="n">tileType</span>
<span class="c">193. </span>
<span class="c">194. </span>    <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">board</span><span class="p">[(</span><span class="n">x</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">y</span><span class="p">)]</span> <span class="o">==</span> <span class="n">charToChange</span><span class="p">:</span>
<span class="c">195. </span>        <span class="c1"># Recursive Case: Change the left neighbor&#39;s tile:</span>
<span class="c">196. </span>        <span class="n">changeTile</span><span class="p">(</span><span class="n">tileType</span><span class="p">,</span> <span class="n">board</span><span class="p">,</span> <span class="n">x</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">charToChange</span><span class="p">)</span>
<span class="c">197. </span>    <span class="k">if</span> <span class="n">y</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="ow">and</span> <span class="n">board</span><span class="p">[(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)]</span> <span class="o">==</span> <span class="n">charToChange</span><span class="p">:</span>
<span class="c">198. </span>        <span class="c1"># Recursive Case: Change the top neighbor&#39;s tile:</span>
<span class="c">199. </span>        <span class="n">changeTile</span><span class="p">(</span><span class="n">tileType</span><span class="p">,</span> <span class="n">board</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">charToChange</span><span class="p">)</span>
<span class="c">200. </span>    <span class="k">if</span> <span class="n">x</span> <span class="o">&lt;</span> <span class="n">BOARD_WIDTH</span> <span class="o">-</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">board</span><span class="p">[(</span><span class="n">x</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">y</span><span class="p">)]</span> <span class="o">==</span> <span class="n">charToChange</span><span class="p">:</span>
<span class="c">201. </span>        <span class="c1"># Recursive Case: Change the right neighbor&#39;s tile:</span>
<span class="c">202. </span>        <span class="n">changeTile</span><span class="p">(</span><span class="n">tileType</span><span class="p">,</span> <span class="n">board</span><span class="p">,</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">y</span><span class="p">,</span> <span class="n">charToChange</span><span class="p">)</span>
<span class="c">203. </span>    <span class="k">if</span> <span class="n">y</span> <span class="o">&lt;</span> <span class="n">BOARD_HEIGHT</span> <span class="o">-</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">board</span><span class="p">[(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)]</span> <span class="o">==</span> <span class="n">charToChange</span><span class="p">:</span>
<span class="c">204. </span>        <span class="c1"># Recursive Case: Change the bottom neighbor&#39;s tile:</span>
<span class="c">205. </span>        <span class="n">changeTile</span><span class="p">(</span><span class="n">tileType</span><span class="p">,</span> <span class="n">board</span><span class="p">,</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">charToChange</span><span class="p">)</span>
<span class="c">206. </span>
<span class="c">207. </span>
<span class="c">208. </span><span class="k">def</span> <span class="nf">hasWon</span><span class="p">(</span><span class="n">board</span><span class="p">):</span>
<span class="c">209. </span>    <span class="sd">&quot;&quot;&quot;Return True if the entire board is one color/shape.&quot;&quot;&quot;</span>
<span class="c">210. </span>    <span class="n">tile</span> <span class="o">=</span> <span class="n">board</span><span class="p">[(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)]</span>
<span class="c">211. </span>
<span class="c">212. </span>    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">BOARD_WIDTH</span><span class="p">):</span>
<span class="c">213. </span>        <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">BOARD_HEIGHT</span><span class="p">):</span>
<span class="c">214. </span>            <span class="k">if</span> <span class="n">board</span><span class="p">[(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)]</span> <span class="o">!=</span> <span class="n">tile</span><span class="p">:</span>
<span class="c">215. </span>                <span class="k">return</span> <span class="kc">False</span>
<span class="c">216. </span>    <span class="k">return</span> <span class="kc">True</span>
<span class="c">217. </span>
<span class="c">218. </span>
<span class="c">219. </span><span class="c1"># If this program was run (instead of imported), run the game:</span>
<span class="c">220. </span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
<span class="c">221. </span>    <span class="n">main</span><span class="p">()</span>
</pre></div>

<p class="calibre19">After entering the source code and running it a few times, try making experimental changes to it. The comments marked with <code class="calibre22">(!)</code> have suggestions for small changes you can make. On your own, you can also try to figure out how to do the following:</p>
<ul class="calibre25">
<li class="calibre8">Add additional shapes and colors.</li>
<li class="calibre8">Create other board shapes besides a rectangle.</li>
</ul>
<h2 id="calibre_link-140" class="calibre5">Exploring the Program</h2>
<p class="bodyfirst">Try to find the answers to the following questions. Experiment with some modifications to the code and rerun the program to see what effect the changes have.</p>
<ol class="decimal">
<li value="1" class="calibre8">What error message do you get if you change <code class="calibre22">board = {}</code> on line 92 to <code class="calibre22">board = []</code>?</li>
<li value="2" class="calibre8">What error message do you get if you change <code class="calibre22">return board</code> on line 105 to <code class="calibre22">return None</code>?</li>
<li value="3" class="calibre8">What happens if you change <code class="calibre22">movesLeft -= 1</code> on line 76 to <code class="calibre22">movesLeft -= 0</code>?</li>
</ol>
</section>
</div>








<a href="project27.html">Prev: Fish Tank</a> | <a href="project29.html">Next: Forest Fire Sim</a>
</body></html>