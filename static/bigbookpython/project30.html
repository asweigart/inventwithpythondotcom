<html><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><link href="style.css" rel="stylesheet" type="text/css" /><link rel="stylesheet" type="text/css" href="pygments.css"><title>Four in a Row</title></head><body style="background-color: #fffeee;">

<script type="text/javascript">
//<![CDATA[

var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-5459430-3']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();

//]]>
</script>


<div style="background-color: #eeeddd; float: right; height: 310px; font-family: sans-serif;" id="otherbooks">
  <a href="#" onclick="document.getElementById('otherbooks').outerHTML='';" style="vertical-align: top;">(close)</a><br />

  <a target="_blank" href="https://nostarch.com/automatestuff2" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_automate.link');"><img src="/images/cover_automate2_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://nostarch.com/big-book-small-python-projects" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_bigbookpython.link');"><img src="/images/cover_bigbookpython_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://nostarch.com/beyond-basic-stuff-python" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_beyond.link');"><img src="/images/cover_beyond_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://nostarch.com/inventwithpython" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_invent.link');"><img src="/images/cover_invent4th_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://www.amazon.com/Making-Games-Python-Pygame-Sweigart/dp/1469901730?ie=UTF8&amp;tag=playwithpyth-20&amp;linkCode=as2&amp;camp=1789&amp;creative=9325&amp;creativeASIN=1469901730" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_pygame.link');"><img src="/images/cover_makinggames_thumb.webp" style="height: 200px; border: solid black 1px; /"></a>
  <a target="_blank" href="https://nostarch.com/crackingcodes" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_hacking.link');"><img src="/images/cover_crackingcodes_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://nostarch.com/scratchplayground"><img src="/images/cover_scratchprogrammingplayground_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://nostarch.com/codingwithminecraft"><img src="/images/cover_codingwithminecraft_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <br />
  <a href="https://inventwithpython.com/automateudemy">Use this link to get 70% off the Automate the Boring Stuff online video course.</a><br />
  <a href="https://www.patreon.com/AlSweigart">Support me on Patreon</a>
</div>

<a href="project29.html">Prev: Forest Fire Sim</a> | <a href="project31.html">Next: Guess the Number</a>





<div type="bodymatter chapter" class="calibre1" id="calibre_link-145">
<section class="toclist">
<header class="calibre10">
<h1 class="chapter">
<span class="chapternumber">#30</span><br class="calibre14" />
<span class="chaptertitle">Four in a Row</span></h1>
</header>
<figure class="opener">
<img src="images/000002.webp" alt="" class="calibre12" />
</figure>
<p class="chapterintro">In this classic tile-dropping board game for two players, you must try to get four of your tiles in a row horizontally, vertically, or diagonally, while preventing your opponent from doing the same. This program is similar to Connect Four.</p>
<h2 id="calibre_link-146" class="calibre5">The Program in Action</h2>
<p class="bodyfirst">When you run <em class="calibre9">fourinarow.py</em>, the output will look like this:</p>
<pre class="calibre24"><code class="calibre22">Four in a Row, by Al Sweigart al@inventwithpython.com
<var class="calibre27">--snip--</var>
     1234567
    +-------+
    |.......|
    |.......|
    |.......|
    |.......|
    |.......|
    |.......|
    +-------+
Player X, enter a column or QUIT:
&gt; <b class="calibre6">3</b>

     1234567
    +-------+
    |.......|
    |.......|
    |.......|
    |.......|
    |.......|
    |..X....|
    +-------+
Player O, enter a column or QUIT:
&gt; <b class="calibre6">5</b>
<var class="calibre27">--snip--</var>
Player O, enter a column or QUIT:
&gt; <b class="calibre6">4</b>

     1234567
    +-------+
    |.......|
    |.......|
    |XXX.XO.|
    |OOOOXO.|
    |OOOXOX.|
    |OXXXOXX|
    +-------+
Player O has won!</code></pre>
<h2 id="calibre_link-147" class="calibre5">How It Works</h2>
<p class="bodyfirst">The board game projects in this book follow a similar program structure. There’s often a dictionary or list for representing the state of the board, a <code class="calibre22">getNewBoard()</code> function that returns a data structure for a board, a <code class="calibre22">displayBoard()</code> function for rendering a board data structure on the screen, and so on. You can check out the other projects in this book with the <em class="calibre9">board game</em> tag and compare them with each other, especially when you want to create your own original board game programs.</p>
<div class="highlight"><pre><span></span>
<span class="c">  1. </span><span class="sd">&quot;&quot;&quot;Four in a Row, by Al Sweigart al@inventwithpython.com</span>
<span class="c">  2. </span><span class="sd">A tile-dropping game to get four in a row, similar to Connect Four.</span>
<span class="c">  3. </span><span class="sd">This code is available at https://nostarch.com/big-book-small-python-programming</span>
<span class="c">  4. </span><span class="sd">Tags: large, game, board game, two-player&quot;&quot;&quot;</span>
<span class="c">  5. </span>
<span class="c">  6. </span><span class="kn">import</span> <span class="nn">sys</span>
<span class="c">  7. </span>
<span class="c">  8. </span><span class="c1"># Constants used for displaying the board:</span>
<span class="c">  9. </span><span class="n">EMPTY_SPACE</span> <span class="o">=</span> <span class="s1">&#39;.&#39;</span>  <span class="c1"># A period is easier to count than a space.</span>
<span class="c"> 10. </span><span class="n">PLAYER_X</span> <span class="o">=</span> <span class="s1">&#39;X&#39;</span>
<span class="c"> 11. </span><span class="n">PLAYER_O</span> <span class="o">=</span> <span class="s1">&#39;O&#39;</span>
<span class="c"> 12. </span>
<span class="c"> 13. </span><span class="c1"># Note: Update displayBoard() &amp; COLUMN_LABELS if BOARD_WIDTH is changed.</span>
<span class="c"> 14. </span><span class="n">BOARD_WIDTH</span> <span class="o">=</span> <span class="mi">7</span>
<span class="c"> 15. </span><span class="n">BOARD_HEIGHT</span> <span class="o">=</span> <span class="mi">6</span>
<span class="c"> 16. </span><span class="n">COLUMN_LABELS</span> <span class="o">=</span> <span class="p">(</span><span class="s1">&#39;1&#39;</span><span class="p">,</span> <span class="s1">&#39;2&#39;</span><span class="p">,</span> <span class="s1">&#39;3&#39;</span><span class="p">,</span> <span class="s1">&#39;4&#39;</span><span class="p">,</span> <span class="s1">&#39;5&#39;</span><span class="p">,</span> <span class="s1">&#39;6&#39;</span><span class="p">,</span> <span class="s1">&#39;7&#39;</span><span class="p">)</span>
<span class="c"> 17. </span><span class="k">assert</span> <span class="nb">len</span><span class="p">(</span><span class="n">COLUMN_LABELS</span><span class="p">)</span> <span class="o">==</span> <span class="n">BOARD_WIDTH</span>
<span class="c"> 18. </span>
<span class="c"> 19. </span>
<span class="c"> 20. </span><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
<span class="c"> 21. </span>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;Four in a Row, by Al Sweigart al@inventwithpython.com</span>
<span class="c"> 22. </span>
<span class="c"> 23. </span><span class="s2">Two players take turns dropping tiles into one of seven columns, trying</span>
<span class="c"> 24. </span><span class="s2">to make four in a row horizontally, vertically, or diagonally.</span>
<span class="c"> 25. </span><span class="s2">&quot;&quot;&quot;</span><span class="p">)</span>
<span class="c"> 26. </span>
<span class="c"> 27. </span>    <span class="c1"># Set up a new game:</span>
<span class="c"> 28. </span>    <span class="n">gameBoard</span> <span class="o">=</span> <span class="n">getNewBoard</span><span class="p">()</span>
<span class="c"> 29. </span>    <span class="n">playerTurn</span> <span class="o">=</span> <span class="n">PLAYER_X</span>
<span class="c"> 30. </span>
<span class="c"> 31. </span>    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>  <span class="c1"># Run a player&#39;s turn.</span>
<span class="c"> 32. </span>        <span class="c1"># Display the board and get player&#39;s move:</span>
<span class="c"> 33. </span>        <span class="n">displayBoard</span><span class="p">(</span><span class="n">gameBoard</span><span class="p">)</span>
<span class="c"> 34. </span>        <span class="n">playerMove</span> <span class="o">=</span> <span class="n">askForPlayerMove</span><span class="p">(</span><span class="n">playerTurn</span><span class="p">,</span> <span class="n">gameBoard</span><span class="p">)</span>
<span class="c"> 35. </span>        <span class="n">gameBoard</span><span class="p">[</span><span class="n">playerMove</span><span class="p">]</span> <span class="o">=</span> <span class="n">playerTurn</span>
<span class="c"> 36. </span>
<span class="c"> 37. </span>        <span class="c1"># Check for a win or tie:</span>
<span class="c"> 38. </span>        <span class="k">if</span> <span class="n">isWinner</span><span class="p">(</span><span class="n">playerTurn</span><span class="p">,</span> <span class="n">gameBoard</span><span class="p">):</span>
<span class="c"> 39. </span>            <span class="n">displayBoard</span><span class="p">(</span><span class="n">gameBoard</span><span class="p">)</span>  <span class="c1"># Display the board one last time.</span>
<span class="c"> 40. </span>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Player &#39;</span> <span class="o">+</span> <span class="n">playerTurn</span> <span class="o">+</span> <span class="s1">&#39; has won!&#39;</span><span class="p">)</span>
<span class="c"> 41. </span>            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
<span class="c"> 42. </span>        <span class="k">elif</span> <span class="n">isFull</span><span class="p">(</span><span class="n">gameBoard</span><span class="p">):</span>
<span class="c"> 43. </span>            <span class="n">displayBoard</span><span class="p">(</span><span class="n">gameBoard</span><span class="p">)</span>  <span class="c1"># Display the board one last time.</span>
<span class="c"> 44. </span>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;There is a tie!&#39;</span><span class="p">)</span>
<span class="c"> 45. </span>            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
<span class="c"> 46. </span>
<span class="c"> 47. </span>        <span class="c1"># Switch turns to other player:</span>
<span class="c"> 48. </span>        <span class="k">if</span> <span class="n">playerTurn</span> <span class="o">==</span> <span class="n">PLAYER_X</span><span class="p">:</span>
<span class="c"> 49. </span>            <span class="n">playerTurn</span> <span class="o">=</span> <span class="n">PLAYER_O</span>
<span class="c"> 50. </span>        <span class="k">elif</span> <span class="n">playerTurn</span> <span class="o">==</span> <span class="n">PLAYER_O</span><span class="p">:</span>
<span class="c"> 51. </span>            <span class="n">playerTurn</span> <span class="o">=</span> <span class="n">PLAYER_X</span>
<span class="c"> 52. </span>
<span class="c"> 53. </span>
<span class="c"> 54. </span><span class="k">def</span> <span class="nf">getNewBoard</span><span class="p">():</span>
<span class="c"> 55. </span>    <span class="sd">&quot;&quot;&quot;Returns a dictionary that represents a Four in a Row board.</span>
<span class="c"> 56. </span>
<span class="c"> 57. </span><span class="sd">    The keys are (columnIndex, rowIndex) tuples of two integers, and the</span>
<span class="c"> 58. </span><span class="sd">    values are one of the &#39;X&#39;, &#39;O&#39; or &#39;.&#39; (empty space) strings.&quot;&quot;&quot;</span>
<span class="c"> 59. </span>    <span class="n">board</span> <span class="o">=</span> <span class="p">{}</span>
<span class="c"> 60. </span>    <span class="k">for</span> <span class="n">columnIndex</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">BOARD_WIDTH</span><span class="p">):</span>
<span class="c"> 61. </span>        <span class="k">for</span> <span class="n">rowIndex</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">BOARD_HEIGHT</span><span class="p">):</span>
<span class="c"> 62. </span>            <span class="n">board</span><span class="p">[(</span><span class="n">columnIndex</span><span class="p">,</span> <span class="n">rowIndex</span><span class="p">)]</span> <span class="o">=</span> <span class="n">EMPTY_SPACE</span>
<span class="c"> 63. </span>    <span class="k">return</span> <span class="n">board</span>
<span class="c"> 64. </span>
<span class="c"> 65. </span>
<span class="c"> 66. </span><span class="k">def</span> <span class="nf">displayBoard</span><span class="p">(</span><span class="n">board</span><span class="p">):</span>
<span class="c"> 67. </span>    <span class="sd">&quot;&quot;&quot;Display the board and its tiles on the screen.&quot;&quot;&quot;</span>
<span class="c"> 68. </span>
<span class="c"> 69. </span>    <span class="sd">&#39;&#39;&#39;Prepare a list to pass to the format() string method for the</span>
<span class="c"> 70. </span><span class="sd">    board template. The list holds all of the board&#39;s tiles (and empty</span>
<span class="c"> 71. </span><span class="sd">    spaces) going left to right, top to bottom:&#39;&#39;&#39;</span>
<span class="c"> 72. </span>    <span class="n">tileChars</span> <span class="o">=</span> <span class="p">[]</span>
<span class="c"> 73. </span>    <span class="k">for</span> <span class="n">rowIndex</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">BOARD_HEIGHT</span><span class="p">):</span>
<span class="c"> 74. </span>        <span class="k">for</span> <span class="n">columnIndex</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">BOARD_WIDTH</span><span class="p">):</span>
<span class="c"> 75. </span>            <span class="n">tileChars</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">board</span><span class="p">[(</span><span class="n">columnIndex</span><span class="p">,</span> <span class="n">rowIndex</span><span class="p">)])</span>
<span class="c"> 76. </span>
<span class="c"> 77. </span>    <span class="c1"># Display the board:</span>
<span class="c"> 78. </span>    <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;&quot;&quot;</span>
<span class="c"> 79. </span><span class="s2">     1234567</span>
<span class="c"> 80. </span><span class="s2">    +-------+</span>
<span class="c"> 81. </span><span class="s2">    |</span><span class="si">{}{}{}{}{}{}{}</span><span class="s2">|</span>
<span class="c"> 82. </span><span class="s2">    |</span><span class="si">{}{}{}{}{}{}{}</span><span class="s2">|</span>
<span class="c"> 83. </span><span class="s2">    |</span><span class="si">{}{}{}{}{}{}{}</span><span class="s2">|</span>
<span class="c"> 84. </span><span class="s2">    |</span><span class="si">{}{}{}{}{}{}{}</span><span class="s2">|</span>
<span class="c"> 85. </span><span class="s2">    |</span><span class="si">{}{}{}{}{}{}{}</span><span class="s2">|</span>
<span class="c"> 86. </span><span class="s2">    |</span><span class="si">{}{}{}{}{}{}{}</span><span class="s2">|</span>
<span class="c"> 87. </span><span class="s2">    +-------+&quot;&quot;&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">*</span><span class="n">tileChars</span><span class="p">))</span>
<span class="c"> 88. </span>
<span class="c"> 89. </span>
<span class="c"> 90. </span><span class="k">def</span> <span class="nf">askForPlayerMove</span><span class="p">(</span><span class="n">playerTile</span><span class="p">,</span> <span class="n">board</span><span class="p">):</span>
<span class="c"> 91. </span>    <span class="sd">&quot;&quot;&quot;Let a player select a column on the board to drop a tile into.</span>
<span class="c"> 92. </span>
<span class="c"> 93. </span><span class="sd">    Returns a tuple of the (column, row) that the tile falls into.&quot;&quot;&quot;</span>
<span class="c"> 94. </span>    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>  <span class="c1"># Keep asking player until they enter a valid move.</span>
<span class="c"> 95. </span>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Player </span><span class="si">{}</span><span class="s1">, enter a column or QUIT:&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">playerTile</span><span class="p">))</span>
<span class="c"> 96. </span>        <span class="n">response</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;&gt; &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
<span class="c"> 97. </span>
<span class="c"> 98. </span>        <span class="k">if</span> <span class="n">response</span> <span class="o">==</span> <span class="s1">&#39;QUIT&#39;</span><span class="p">:</span>
<span class="c"> 99. </span>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Thanks for playing!&#39;</span><span class="p">)</span>
<span class="c">100. </span>            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
<span class="c">101. </span>
<span class="c">102. </span>        <span class="k">if</span> <span class="n">response</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">COLUMN_LABELS</span><span class="p">:</span>
<span class="c">103. </span>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Enter a number from 1 to </span><span class="si">{}</span><span class="s1">.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">BOARD_WIDTH</span><span class="p">))</span>
<span class="c">104. </span>            <span class="k">continue</span>  <span class="c1"># Ask player again for their move.</span>
<span class="c">105. </span>
<span class="c">106. </span>        <span class="n">columnIndex</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">response</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span>  <span class="c1"># -1 for 0-based the index.</span>
<span class="c">107. </span>
<span class="c">108. </span>        <span class="c1"># If the column is full, ask for a move again:</span>
<span class="c">109. </span>        <span class="k">if</span> <span class="n">board</span><span class="p">[(</span><span class="n">columnIndex</span><span class="p">,</span> <span class="mi">0</span><span class="p">)]</span> <span class="o">!=</span> <span class="n">EMPTY_SPACE</span><span class="p">:</span>
<span class="c">110. </span>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;That column is full, select another one.&#39;</span><span class="p">)</span>
<span class="c">111. </span>            <span class="k">continue</span>  <span class="c1"># Ask player again for their move.</span>
<span class="c">112. </span>
<span class="c">113. </span>        <span class="c1"># Starting from the bottom, find the first empty space.</span>
<span class="c">114. </span>        <span class="k">for</span> <span class="n">rowIndex</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">BOARD_HEIGHT</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
<span class="c">115. </span>            <span class="k">if</span> <span class="n">board</span><span class="p">[(</span><span class="n">columnIndex</span><span class="p">,</span> <span class="n">rowIndex</span><span class="p">)]</span> <span class="o">==</span> <span class="n">EMPTY_SPACE</span><span class="p">:</span>
<span class="c">116. </span>                <span class="k">return</span> <span class="p">(</span><span class="n">columnIndex</span><span class="p">,</span> <span class="n">rowIndex</span><span class="p">)</span>
<span class="c">117. </span>
<span class="c">118. </span>
<span class="c">119. </span><span class="k">def</span> <span class="nf">isFull</span><span class="p">(</span><span class="n">board</span><span class="p">):</span>
<span class="c">120. </span>    <span class="sd">&quot;&quot;&quot;Returns True if the `board` has no empty spaces, otherwise</span>
<span class="c">121. </span><span class="sd">    returns False.&quot;&quot;&quot;</span>
<span class="c">122. </span>    <span class="k">for</span> <span class="n">rowIndex</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">BOARD_HEIGHT</span><span class="p">):</span>
<span class="c">123. </span>        <span class="k">for</span> <span class="n">columnIndex</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">BOARD_WIDTH</span><span class="p">):</span>
<span class="c">124. </span>            <span class="k">if</span> <span class="n">board</span><span class="p">[(</span><span class="n">columnIndex</span><span class="p">,</span> <span class="n">rowIndex</span><span class="p">)]</span> <span class="o">==</span> <span class="n">EMPTY_SPACE</span><span class="p">:</span>
<span class="c">125. </span>                <span class="k">return</span> <span class="kc">False</span>  <span class="c1"># Found an empty space, so return False.</span>
<span class="c">126. </span>    <span class="k">return</span> <span class="kc">True</span>  <span class="c1"># All spaces are full.</span>
<span class="c">127. </span>
<span class="c">128. </span>
<span class="c">129. </span><span class="k">def</span> <span class="nf">isWinner</span><span class="p">(</span><span class="n">playerTile</span><span class="p">,</span> <span class="n">board</span><span class="p">):</span>
<span class="c">130. </span>    <span class="sd">&quot;&quot;&quot;Returns True if `playerTile` has four tiles in a row on `board`,</span>
<span class="c">131. </span><span class="sd">    otherwise returns False.&quot;&quot;&quot;</span>
<span class="c">132. </span>
<span class="c">133. </span>    <span class="c1"># Go through the entire board, checking for four-in-a-row:</span>
<span class="c">134. </span>    <span class="k">for</span> <span class="n">columnIndex</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">BOARD_WIDTH</span> <span class="o">-</span> <span class="mi">3</span><span class="p">):</span>
<span class="c">135. </span>        <span class="k">for</span> <span class="n">rowIndex</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">BOARD_HEIGHT</span><span class="p">):</span>
<span class="c">136. </span>            <span class="c1"># Check for horizontal four-in-a-row going right:</span>
<span class="c">137. </span>            <span class="n">tile1</span> <span class="o">=</span> <span class="n">board</span><span class="p">[(</span><span class="n">columnIndex</span><span class="p">,</span> <span class="n">rowIndex</span><span class="p">)]</span>
<span class="c">138. </span>            <span class="n">tile2</span> <span class="o">=</span> <span class="n">board</span><span class="p">[(</span><span class="n">columnIndex</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">rowIndex</span><span class="p">)]</span>
<span class="c">139. </span>            <span class="n">tile3</span> <span class="o">=</span> <span class="n">board</span><span class="p">[(</span><span class="n">columnIndex</span> <span class="o">+</span> <span class="mi">2</span><span class="p">,</span> <span class="n">rowIndex</span><span class="p">)]</span>
<span class="c">140. </span>            <span class="n">tile4</span> <span class="o">=</span> <span class="n">board</span><span class="p">[(</span><span class="n">columnIndex</span> <span class="o">+</span> <span class="mi">3</span><span class="p">,</span> <span class="n">rowIndex</span><span class="p">)]</span>
<span class="c">141. </span>            <span class="k">if</span> <span class="n">tile1</span> <span class="o">==</span> <span class="n">tile2</span> <span class="o">==</span> <span class="n">tile3</span> <span class="o">==</span> <span class="n">tile4</span> <span class="o">==</span> <span class="n">playerTile</span><span class="p">:</span>
<span class="c">142. </span>                <span class="k">return</span> <span class="kc">True</span>
<span class="c">143. </span>
<span class="c">144. </span>    <span class="k">for</span> <span class="n">columnIndex</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">BOARD_WIDTH</span><span class="p">):</span>
<span class="c">145. </span>        <span class="k">for</span> <span class="n">rowIndex</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">BOARD_HEIGHT</span> <span class="o">-</span> <span class="mi">3</span><span class="p">):</span>
<span class="c">146. </span>            <span class="c1"># Check for vertical four-in-a-row going down:</span>
<span class="c">147. </span>            <span class="n">tile1</span> <span class="o">=</span> <span class="n">board</span><span class="p">[(</span><span class="n">columnIndex</span><span class="p">,</span> <span class="n">rowIndex</span><span class="p">)]</span>
<span class="c">148. </span>            <span class="n">tile2</span> <span class="o">=</span> <span class="n">board</span><span class="p">[(</span><span class="n">columnIndex</span><span class="p">,</span> <span class="n">rowIndex</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)]</span>
<span class="c">149. </span>            <span class="n">tile3</span> <span class="o">=</span> <span class="n">board</span><span class="p">[(</span><span class="n">columnIndex</span><span class="p">,</span> <span class="n">rowIndex</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)]</span>
<span class="c">150. </span>            <span class="n">tile4</span> <span class="o">=</span> <span class="n">board</span><span class="p">[(</span><span class="n">columnIndex</span><span class="p">,</span> <span class="n">rowIndex</span> <span class="o">+</span> <span class="mi">3</span><span class="p">)]</span>
<span class="c">151. </span>            <span class="k">if</span> <span class="n">tile1</span> <span class="o">==</span> <span class="n">tile2</span> <span class="o">==</span> <span class="n">tile3</span> <span class="o">==</span> <span class="n">tile4</span> <span class="o">==</span> <span class="n">playerTile</span><span class="p">:</span>
<span class="c">152. </span>                <span class="k">return</span> <span class="kc">True</span>
<span class="c">153. </span>
<span class="c">154. </span>    <span class="k">for</span> <span class="n">columnIndex</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">BOARD_WIDTH</span> <span class="o">-</span> <span class="mi">3</span><span class="p">):</span>
<span class="c">155. </span>        <span class="k">for</span> <span class="n">rowIndex</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">BOARD_HEIGHT</span> <span class="o">-</span> <span class="mi">3</span><span class="p">):</span>
<span class="c">156. </span>            <span class="c1"># Check for four-in-a-row going right-down diagonal:</span>
<span class="c">157. </span>            <span class="n">tile1</span> <span class="o">=</span> <span class="n">board</span><span class="p">[(</span><span class="n">columnIndex</span><span class="p">,</span> <span class="n">rowIndex</span><span class="p">)]</span>
<span class="c">158. </span>            <span class="n">tile2</span> <span class="o">=</span> <span class="n">board</span><span class="p">[(</span><span class="n">columnIndex</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">rowIndex</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)]</span>
<span class="c">159. </span>            <span class="n">tile3</span> <span class="o">=</span> <span class="n">board</span><span class="p">[(</span><span class="n">columnIndex</span> <span class="o">+</span> <span class="mi">2</span><span class="p">,</span> <span class="n">rowIndex</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)]</span>
<span class="c">160. </span>            <span class="n">tile4</span> <span class="o">=</span> <span class="n">board</span><span class="p">[(</span><span class="n">columnIndex</span> <span class="o">+</span> <span class="mi">3</span><span class="p">,</span> <span class="n">rowIndex</span> <span class="o">+</span> <span class="mi">3</span><span class="p">)]</span>
<span class="c">161. </span>            <span class="k">if</span> <span class="n">tile1</span> <span class="o">==</span> <span class="n">tile2</span> <span class="o">==</span> <span class="n">tile3</span> <span class="o">==</span> <span class="n">tile4</span> <span class="o">==</span> <span class="n">playerTile</span><span class="p">:</span>
<span class="c">162. </span>                <span class="k">return</span> <span class="kc">True</span>
<span class="c">163. </span>
<span class="c">164. </span>            <span class="c1"># Check for four-in-a-row going left-down diagonal:</span>
<span class="c">165. </span>            <span class="n">tile1</span> <span class="o">=</span> <span class="n">board</span><span class="p">[(</span><span class="n">columnIndex</span> <span class="o">+</span> <span class="mi">3</span><span class="p">,</span> <span class="n">rowIndex</span><span class="p">)]</span>
<span class="c">166. </span>            <span class="n">tile2</span> <span class="o">=</span> <span class="n">board</span><span class="p">[(</span><span class="n">columnIndex</span> <span class="o">+</span> <span class="mi">2</span><span class="p">,</span> <span class="n">rowIndex</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)]</span>
<span class="c">167. </span>            <span class="n">tile3</span> <span class="o">=</span> <span class="n">board</span><span class="p">[(</span><span class="n">columnIndex</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">rowIndex</span> <span class="o">+</span> <span class="mi">2</span><span class="p">)]</span>
<span class="c">168. </span>            <span class="n">tile4</span> <span class="o">=</span> <span class="n">board</span><span class="p">[(</span><span class="n">columnIndex</span><span class="p">,</span> <span class="n">rowIndex</span> <span class="o">+</span> <span class="mi">3</span><span class="p">)]</span>
<span class="c">169. </span>            <span class="k">if</span> <span class="n">tile1</span> <span class="o">==</span> <span class="n">tile2</span> <span class="o">==</span> <span class="n">tile3</span> <span class="o">==</span> <span class="n">tile4</span> <span class="o">==</span> <span class="n">playerTile</span><span class="p">:</span>
<span class="c">170. </span>                <span class="k">return</span> <span class="kc">True</span>
<span class="c">171. </span>    <span class="k">return</span> <span class="kc">False</span>
<span class="c">172. </span>
<span class="c">173. </span>
<span class="c">174. </span><span class="c1"># If the program is run (instead of imported), run the game:</span>
<span class="c">175. </span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
<span class="c">176. </span>    <span class="n">main</span><span class="p">()</span>
</pre></div>

<p class="calibre19">After entering the source code and running it a few times, try making experimental changes to it. The comments marked with <code class="calibre22">(!)</code> have suggestions for small changes you can make. On your own, you can also try to figure out how to do the following:</p>
<ul class="calibre25">
<li class="calibre8">Create a three-in-a-row or five-in-a-row variant.</li>
<li class="calibre8">Make a three-player variant of this game.</li>
<li class="calibre8">Add a “wildcard” tile that randomly drops after the players’ turns and can be used by either player.</li>
<li class="calibre8">Add “block” tiles that cannot be used by either player.</li>
</ul>
<h2 id="calibre_link-148" class="calibre5">Exploring the Program</h2>
<p class="bodyfirst">Try to find the answers to the following questions. Experiment with some modifications to the code and rerun the program to see what effect the changes have.</p>
<ol class="decimal">
<li value="1" class="calibre8">What happens if you change <code class="calibre22">PLAYER_O = 'O'</code> on line 11 to <code class="calibre22">PLAYER_O = 'X'</code>?</li>
<li value="2" class="calibre8">What happens if you change <code class="calibre22">return (columnIndex, rowIndex)</code> on line 116 to <code class="calibre22">return (columnIndex, 0)</code>?</li>
<li value="3" class="calibre8">What happens if you change <code class="calibre22">response == 'QUIT'</code> on line 98 to <code class="calibre22">response != 'QUIT'</code>?</li>
<li value="4" class="calibre8">What error message do you get if you change <code class="calibre22">tileChars = []</code> on line 72 to <code class="calibre22">tileChars = {}</code>?</li>
</ol>
</section>
</div>








<a href="project29.html">Prev: Forest Fire Sim</a> | <a href="project31.html">Next: Guess the Number</a>
</body></html>