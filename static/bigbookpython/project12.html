<html><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><link href="style.css" rel="stylesheet" type="text/css" /><link rel="stylesheet" type="text/css" href="pygments.css"><title>Collatz Sequence</title></head><body style="background-color: #fffeee;">

<script type="text/javascript">
//<![CDATA[

var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-5459430-3']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();

//]]>
</script>


<div style="background-color: #eeeddd; float: right; height: 310px; font-family: sans-serif;" id="otherbooks">
  <a href="#" onclick="document.getElementById('otherbooks').outerHTML='';" style="vertical-align: top;">(close)</a><br />

  <a target="_blank" href="https://nostarch.com/automatestuff2" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_automate.link');"><img src="/images/cover_automate2_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://nostarch.com/big-book-small-python-projects" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_bigbookpython.link');"><img src="/images/cover_bigbookpython_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://nostarch.com/beyond-basic-stuff-python" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_beyond.link');"><img src="/images/cover_beyond_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://nostarch.com/inventwithpython" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_invent.link');"><img src="/images/cover_invent4th_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://www.amazon.com/Making-Games-Python-Pygame-Sweigart/dp/1469901730?ie=UTF8&amp;tag=playwithpyth-20&amp;linkCode=as2&amp;camp=1789&amp;creative=9325&amp;creativeASIN=1469901730" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_pygame.link');"><img src="/images/cover_makinggames_thumb.webp" style="height: 200px; border: solid black 1px; /"></a>
  <a target="_blank" href="https://nostarch.com/crackingcodes" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_hacking.link');"><img src="/images/cover_crackingcodes_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://nostarch.com/scratchplayground"><img src="/images/cover_scratchprogrammingplayground_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://nostarch.com/codingwithminecraft"><img src="/images/cover_codingwithminecraft_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <br />
  <a href="https://inventwithpython.com/automateudemy">Use this link to get 70% off the Automate the Boring Stuff online video course.</a><br />
  <a href="https://www.patreon.com/AlSweigart">Support me on Patreon</a>
</div>

<a href="project11.html">Prev: Clickbait Headline Generator</a> | <a href="project13.html">Next: Conway's Game of Life</a>





<div type="bodymatter chapter" class="calibre1" id="calibre_link-3">
<section class="toclist">
<header class="calibre10">
<h1 class="chapter">
<span class="chapternumber">#12</span><br class="calibre14" />
<span class="chaptertitle">Collatz Sequence</span></h1>
</header>
<figure class="opener">
<img src="images/000002.webp" alt="" class="calibre12" />
</figure>
<p class="chapterintro">The Collatz sequence, also called the 3n + 1 problem, is the simplest impossible math problem. (But don’t worry, the program itself is easy enough for beginners.) From a starting number, <em class="calibre9">n</em>, follow three rules to get the next number in the sequence:</p>
<ol class="decimal">
<li value="1" class="calibre8">If <em class="calibre9">n</em> is even, the next number <em class="calibre9">n</em> is <em class="calibre9">n</em> / 2.</li>
<li value="2" class="calibre8">If <em class="calibre9">n</em> is odd, the next number <em class="calibre9">n</em> is <em class="calibre9">n</em> * 3 + 1.</li>
<li value="3" class="calibre8">If <em class="calibre9">n</em> is 1, stop. Otherwise, repeat.</li>
</ol>
<p class="calibre19">It is generally thought, but so far not mathematically proven, that every starting number eventually terminates at 1. More information about the Collatz sequence can be found at <a href="https://en.wikipedia.org/wiki/Collatz_conjecture" class="linkurl">https://en.wikipedia.org/wiki/Collatz_conjecture</a>.</p>
<h2 id="calibre_link-79" class="calibre5">The Program in Action</h2>
<p class="bodyfirst">When you run <em class="calibre9">collatz.py</em>, the output will look like this:</p>
<pre class="calibre24"><code class="calibre22">Collatz Sequence, or, the 3n + 1 Problem
By Al Sweigart al@inventwithpython.com

The Collatz sequence is a sequence of numbers produced from a starting
number n, following three rules:
<var class="calibre27">--snip--</var>
Enter a starting number (greater than 0) or QUIT:
&gt; <b class="calibre6">26</b>
26, 13, 40, 20, 10, 5, 16, 8, 4, 2, 1

Collatz Sequence, or, the 3n + 1 Problem
By Al Sweigart al@inventwithpython.com
<var class="calibre27">--snip--</var>
Enter a starting number (greater than 0) or QUIT:
&gt; <b class="calibre6">27</b>
27, 82, 41, 124, 62, 31, 94, 47, 142, 71, 214, 107, 322, 161, 484, 242, 121, 364, 182, 91, 274, 137, 412, 206, 103, 310, 155, 466, 233, 700, 350, 175, 526, 263, 790, 395, 1186, 593, 1780, 890, 445, 1336, 668, 334, 167, 502, 251, 754, 377, 1132, 566, 283, 850, 425, 1276, 638, 319, 958, 479, 1438, 719, 2158, 1079, 3238, 1619, 4858, 2429, 7288, 3644, 1822, 911, 2734, 1367, 4102, 2051, 6154, 3077, 9232, 4616, 2308, 1154, 577, 1732, 866, 433, 1300, 650, 325, 976, 488, 244, 122, 61, 184, 92, 46, 23, 70, 35, 106, 53, 160, 80, 40, 20, 10, 5, 16, 8, 4, 2, 1</code></pre>
<h2 id="calibre_link-80" class="calibre5">How It Works</h2>
<p class="bodyfirst">The <code class="calibre22">%</code> mod operator can help you determine if a number is even or odd. Remember that this operator is a sort of “remainder” operator. While 23 divided by 7 is 3-remainder-2, 23 mod 7 is simply 2. Even numbers divided by 2 have no remainder, while odd numbers divided by 2 have a remainder of 1. When <code class="calibre22">n</code> is even, the condition in <code class="calibre22">if n % 2 == 0:</code> on line 33 evaluates to <code class="calibre22">True</code>. When <code class="calibre22">n</code> is odd, it evaluates to <code class="calibre22">False</code>.</p>
<div class="highlight"><pre><span></span>
<span class="c"> 1. </span><span class="sd">&quot;&quot;&quot;Collatz Sequence, by Al Sweigart al@inventwithpython.com</span>
<span class="c"> 2. </span><span class="sd">Generates numbers for the Collatz sequence, given a starting number.</span>
<span class="c"> 3. </span><span class="sd">More info at: https://en.wikipedia.org/wiki/Collatz_conjecture</span>
<span class="c"> 4. </span><span class="sd">This code is available at https://nostarch.com/big-book-small-python-programming</span>
<span class="c"> 5. </span><span class="sd">Tags: tiny, beginner, math&quot;&quot;&quot;</span>
<span class="c"> 6. </span>
<span class="c"> 7. </span><span class="kn">import</span> <span class="nn">sys</span><span class="o">,</span> <span class="nn">time</span>
<span class="c"> 8. </span>
<span class="c"> 9. </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;Collatz Sequence, or, the 3n + 1 Problem</span>
<span class="c">10. </span><span class="s1">By Al Sweigart al@inventwithpython.com</span>
<span class="c">11. </span>
<span class="c">12. </span><span class="s1">The Collatz sequence is a sequence of numbers produced from a starting</span>
<span class="c">13. </span><span class="s1">number n, following three rules:</span>
<span class="c">14. </span>
<span class="c">15. </span><span class="s1">1) If n is even, the next number n is n / 2.</span>
<span class="c">16. </span><span class="s1">2) If n is odd, the next number n is n * 3 + 1.</span>
<span class="c">17. </span><span class="s1">3) If n is 1, stop. Otherwise, repeat.</span>
<span class="c">18. </span>
<span class="c">19. </span><span class="s1">It is generally thought, but so far not mathematically proven, that</span>
<span class="c">20. </span><span class="s1">every starting number eventually terminates at 1.</span>
<span class="c">21. </span><span class="s1">&#39;&#39;&#39;</span><span class="p">)</span>
<span class="c">22. </span>
<span class="c">23. </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Enter a starting number (greater than 0) or QUIT:&#39;</span><span class="p">)</span>
<span class="c">24. </span><span class="n">response</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;&gt; &#39;</span><span class="p">)</span>
<span class="c">25. </span>
<span class="c">26. </span><span class="k">if</span> <span class="ow">not</span> <span class="n">response</span><span class="o">.</span><span class="n">isdecimal</span><span class="p">()</span> <span class="ow">or</span> <span class="n">response</span> <span class="o">==</span> <span class="s1">&#39;0&#39;</span><span class="p">:</span>
<span class="c">27. </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;You must enter an integer greater than 0.&#39;</span><span class="p">)</span>
<span class="c">28. </span>    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
<span class="c">29. </span>
<span class="c">30. </span><span class="n">n</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
<span class="c">31. </span><span class="nb">print</span><span class="p">(</span><span class="n">n</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">flush</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="c">32. </span><span class="k">while</span> <span class="n">n</span> <span class="o">!=</span> <span class="mi">1</span><span class="p">:</span>
<span class="c">33. </span>    <span class="k">if</span> <span class="n">n</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>  <span class="c1"># If n is even...</span>
<span class="c">34. </span>        <span class="n">n</span> <span class="o">=</span> <span class="n">n</span> <span class="o">//</span> <span class="mi">2</span>
<span class="c">35. </span>    <span class="k">else</span><span class="p">:</span>  <span class="c1"># Otherwise, n is odd...</span>
<span class="c">36. </span>        <span class="n">n</span> <span class="o">=</span> <span class="mi">3</span> <span class="o">*</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span>
<span class="c">37. </span>
<span class="c">38. </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;, &#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">n</span><span class="p">),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="n">flush</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="c">39. </span>    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.1</span><span class="p">)</span>
<span class="c">40. </span><span class="nb">print</span><span class="p">()</span>
</pre></div>

<h2 id="calibre_link-81" class="calibre5">Exploring the Program</h2>
<p class="bodyfirst">Try to find the answers to the following questions. Experiment with some modifications to the code and rerun the program to see what effect the changes have.</p>
<ol class="decimal">
<li value="1" class="calibre8">How many numbers are in a Collatz sequence that begins with 32?</li>
<li value="2" class="calibre8">How many numbers are in a Collatz sequence that begins with 33?</li>
<li value="3" class="calibre8">Are the Collatz sequences for starting numbers that are powers of two (2, 4, 8, 16, 32, 64, 128, on so on) always composed of only even numbers (aside from the final 1)?</li>
<li value="4" class="calibre8">What happens when you enter <code class="bold">0</code> for the starting integer?</li>
</ol>
</section>
</div>








<a href="project11.html">Prev: Clickbait Headline Generator</a> | <a href="project13.html">Next: Conway's Game of Life</a>
</body></html>