<html><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><link href="style.css" rel="stylesheet" type="text/css" /><link rel="stylesheet" type="text/css" href="pygments.css"><title>Blackjack</title></head><body style="background-color: #fffeee;">

<script type="text/javascript">
//<![CDATA[

var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-5459430-3']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();

//]]>
</script>


<div style="background-color: #eeeddd; float: right; height: 310px; font-family: sans-serif;" id="otherbooks">
  <a href="#" onclick="document.getElementById('otherbooks').outerHTML='';" style="vertical-align: top;">(close)</a><br />

  <a target="_blank" href="https://nostarch.com/automatestuff2" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_automate.link');"><img src="/images/cover_automate2_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://nostarch.com/big-book-small-python-projects" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_bigbookpython.link');"><img src="/images/cover_bigbookpython_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://nostarch.com/beyond-basic-stuff-python" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_beyond.link');"><img src="/images/cover_beyond_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://nostarch.com/inventwithpython" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_invent.link');"><img src="/images/cover_invent4th_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://www.amazon.com/Making-Games-Python-Pygame-Sweigart/dp/1469901730?ie=UTF8&amp;tag=playwithpyth-20&amp;linkCode=as2&amp;camp=1789&amp;creative=9325&amp;creativeASIN=1469901730" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_pygame.link');"><img src="/images/cover_makinggames_thumb.webp" style="height: 200px; border: solid black 1px; /"></a>
  <a target="_blank" href="https://nostarch.com/crackingcodes" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_hacking.link');"><img src="/images/cover_crackingcodes_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://nostarch.com/scratchplayground"><img src="/images/cover_scratchprogrammingplayground_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://nostarch.com/codingwithminecraft"><img src="/images/cover_codingwithminecraft_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <br />
  <a href="https://inventwithpython.com/automateudemy">Use this link to get 70% off the Automate the Boring Stuff online video course.</a><br />
  <a href="https://www.patreon.com/AlSweigart">Support me on Patreon</a>
</div>

<a href="project3.html">Prev: Bitmap Message</a> | <a href="project5.html">Next: Bouncing DVD Logo</a>





<div type="bodymatter chapter" class="calibre1" id="calibre_link-48">
<section class="toclist">
<header class="calibre10">
<h1 class="chapter">
<span class="chapternumber">#4</span><br class="calibre14" />
<span class="chaptertitle">Blackjack</span></h1>
</header>
<figure class="opener">
<img src="images/000002.webp" alt="" class="calibre12" />
</figure>
<p class="chapterintro">Blackjack, also known as 21, is a card game where players try to get as close to 21 points as possible without going over. This program uses images drawn with text characters, called <em class="calibre9">ASCII art</em>. American Standard Code for Information Interchange (ASCII) is a mapping of text characters to numeric codes that computers used before Unicode replaced it. The playing cards in this program are an example of ASCII art:</p>
<pre class="calibre24"><code class="calibre22"> ___   ___
|A  | |10 |
| ♣ | | ♦ |
|__A| |_10|</code></pre>
<p class="calibre19">You can find other rules and the history of this card game at <a href="https://en.wikipedia.org/wiki/Blackjack" class="linkurl">https://en.wikipedia.org/wiki/Blackjack</a>.</p>
<h2 id="calibre_link-49" class="calibre5">The Program in Action</h2>
<p class="bodyfirst">When you run <em class="calibre9">blackjack.py</em>, the output will look like this:</p>
<pre class="calibre24"><code class="calibre22">Blackjack, by Al Sweigart al@inventwithpython.com

    Rules:
      Try to get as close to 21 without going over.
      Kings, Queens, and Jacks are worth 10 points.
      Aces are worth 1 or 11 points.
      Cards 2 through 10 are worth their face value.
      (H)it to take another card.
      (S)tand to stop taking cards.
      On your first play, you can (D)ouble down to increase your bet
      but must hit exactly one more time before standing.
      In case of a tie, the bet is returned to the player.
      The dealer stops hitting at 17.
Money: 5000
How much do you bet? (1-5000, or QUIT)
&gt; <b class="calibre6">400</b>
Bet: 400

DEALER: ???
 ___   ___
|## | |2  |
|###| | ♥ |
|_##| |__2|

PLAYER: 17
 ___   ___
|K  | |7  |
| ♠ | | ♦ |
|__K| |__7|


(H)it, (S)tand, (D)ouble down
&gt; <b class="calibre6">h</b>
You drew a 4 of ♦.
<var class="calibre27">--snip--</var>
DEALER: 18
 ___   ___   ___
|K  | |2  | |6  |
| ♦ | | ♥ | | ♠ |
|__K| |__2| |__6|

PLAYER: 21
 ___   ___   ___
|K  | |7  | |4  |
| ♠ | | ♦ | | ♦ |
|__K| |__7| |__4|

You won $400!
<var class="calibre27">--snip&mdash;</var></code></pre>
<h2 id="calibre_link-50" class="calibre5">How It Works</h2>
<p class="bodyfirst">The card suit symbols don’t exist on your keyboard, which is why we call the <code class="calibre22">chr()</code> function to create them. The integer passed to <code class="calibre22">chr()</code> is called a Unicode <em class="calibre9">code point</em>, a unique number that identifies a character according to the Unicode standard. Unicode is often misunderstood. However, Ned Batchelder’s 2012 PyCon US talk “Pragmatic Unicode, or How Do I Stop the Pain?” is an excellent introduction to Unicode, and you can find it at <a href="https://youtu.be/sgHbC6udIqc/" class="linkurl">https://youtu.be/sgHbC6udIqc/</a>. Appendix B gives a full list of Unicode characters you can use in your Python programs.</p>
<div class="highlight"><pre><span></span>
<span class="c">  1. </span><span class="sd">&quot;&quot;&quot;Blackjack, by Al Sweigart al@inventwithpython.com</span>
<span class="c">  2. </span><span class="sd">The classic card game also known as 21. (This version doesn&#39;t have</span>
<span class="c">  3. </span><span class="sd">splitting or insurance.)</span>
<span class="c">  4. </span><span class="sd">More info at: https://en.wikipedia.org/wiki/Blackjack</span>
<span class="c">  5. </span><span class="sd">This code is available at https://nostarch.com/big-book-small-python-programming</span>
<span class="c">  6. </span><span class="sd">Tags: large, game, card game&quot;&quot;&quot;</span>
<span class="c">  7. </span>
<span class="c">  8. </span><span class="kn">import</span> <span class="nn">random</span><span class="o">,</span> <span class="nn">sys</span>
<span class="c">  9. </span>
<span class="c"> 10. </span><span class="c1"># Set up the constants:</span>
<span class="c"> 11. </span><span class="n">HEARTS</span>   <span class="o">=</span> <span class="nb">chr</span><span class="p">(</span><span class="mi">9829</span><span class="p">)</span> <span class="c1"># Character 9829 is &#39;♥&#39;.</span>
<span class="c"> 12. </span><span class="n">DIAMONDS</span> <span class="o">=</span> <span class="nb">chr</span><span class="p">(</span><span class="mi">9830</span><span class="p">)</span> <span class="c1"># Character 9830 is &#39;♦&#39;.</span>
<span class="c"> 13. </span><span class="n">SPADES</span>   <span class="o">=</span> <span class="nb">chr</span><span class="p">(</span><span class="mi">9824</span><span class="p">)</span> <span class="c1"># Character 9824 is &#39;♠&#39;.</span>
<span class="c"> 14. </span><span class="n">CLUBS</span>    <span class="o">=</span> <span class="nb">chr</span><span class="p">(</span><span class="mi">9827</span><span class="p">)</span> <span class="c1"># Character 9827 is &#39;♣&#39;.</span>
<span class="c"> 15. </span><span class="c1"># (A list of chr codes is at https://inventwithpython.com/charactermap)</span>
<span class="c"> 16. </span><span class="n">BACKSIDE</span> <span class="o">=</span> <span class="s1">&#39;backside&#39;</span>
<span class="c"> 17. </span>
<span class="c"> 18. </span>
<span class="c"> 19. </span><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
<span class="c"> 20. </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;Blackjack, by Al Sweigart al@inventwithpython.com</span>
<span class="c"> 21. </span>
<span class="c"> 22. </span><span class="s1">    Rules:</span>
<span class="c"> 23. </span><span class="s1">      Try to get as close to 21 without going over.</span>
<span class="c"> 24. </span><span class="s1">      Kings, Queens, and Jacks are worth 10 points.</span>
<span class="c"> 25. </span><span class="s1">      Aces are worth 1 or 11 points.</span>
<span class="c"> 26. </span><span class="s1">      Cards 2 through 10 are worth their face value.</span>
<span class="c"> 27. </span><span class="s1">      (H)it to take another card.</span>
<span class="c"> 28. </span><span class="s1">      (S)tand to stop taking cards.</span>
<span class="c"> 29. </span><span class="s1">      On your first play, you can (D)ouble down to increase your bet</span>
<span class="c"> 30. </span><span class="s1">      but must hit exactly one more time before standing.</span>
<span class="c"> 31. </span><span class="s1">      In case of a tie, the bet is returned to the player.</span>
<span class="c"> 32. </span><span class="s1">      The dealer stops hitting at 17.&#39;&#39;&#39;</span><span class="p">)</span>
<span class="c"> 33. </span>
<span class="c"> 34. </span>    <span class="n">money</span> <span class="o">=</span> <span class="mi">5000</span>
<span class="c"> 35. </span>    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>  <span class="c1"># Main game loop.</span>
<span class="c"> 36. </span>        <span class="c1"># Check if the player has run out of money:</span>
<span class="c"> 37. </span>        <span class="k">if</span> <span class="n">money</span> <span class="o">&lt;=</span> <span class="mi">0</span><span class="p">:</span>
<span class="c"> 38. </span>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;You&#39;re broke!&quot;</span><span class="p">)</span>
<span class="c"> 39. </span>            <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Good thing you weren&#39;t playing with real money.&quot;</span><span class="p">)</span>
<span class="c"> 40. </span>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Thanks for playing!&#39;</span><span class="p">)</span>
<span class="c"> 41. </span>            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
<span class="c"> 42. </span>
<span class="c"> 43. </span>        <span class="c1"># Let the player enter their bet for this round:</span>
<span class="c"> 44. </span>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Money:&#39;</span><span class="p">,</span> <span class="n">money</span><span class="p">)</span>
<span class="c"> 45. </span>        <span class="n">bet</span> <span class="o">=</span> <span class="n">getBet</span><span class="p">(</span><span class="n">money</span><span class="p">)</span>
<span class="c"> 46. </span>
<span class="c"> 47. </span>        <span class="c1"># Give the dealer and player two cards from the deck each:</span>
<span class="c"> 48. </span>        <span class="n">deck</span> <span class="o">=</span> <span class="n">getDeck</span><span class="p">()</span>
<span class="c"> 49. </span>        <span class="n">dealerHand</span> <span class="o">=</span> <span class="p">[</span><span class="n">deck</span><span class="o">.</span><span class="n">pop</span><span class="p">(),</span> <span class="n">deck</span><span class="o">.</span><span class="n">pop</span><span class="p">()]</span>
<span class="c"> 50. </span>        <span class="n">playerHand</span> <span class="o">=</span> <span class="p">[</span><span class="n">deck</span><span class="o">.</span><span class="n">pop</span><span class="p">(),</span> <span class="n">deck</span><span class="o">.</span><span class="n">pop</span><span class="p">()]</span>
<span class="c"> 51. </span>
<span class="c"> 52. </span>        <span class="c1"># Handle player actions:</span>
<span class="c"> 53. </span>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Bet:&#39;</span><span class="p">,</span> <span class="n">bet</span><span class="p">)</span>
<span class="c"> 54. </span>        <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>  <span class="c1"># Keep looping until player stands or busts.</span>
<span class="c"> 55. </span>            <span class="n">displayHands</span><span class="p">(</span><span class="n">playerHand</span><span class="p">,</span> <span class="n">dealerHand</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
<span class="c"> 56. </span>            <span class="nb">print</span><span class="p">()</span>
<span class="c"> 57. </span>
<span class="c"> 58. </span>            <span class="c1"># Check if the player has bust:</span>
<span class="c"> 59. </span>            <span class="k">if</span> <span class="n">getHandValue</span><span class="p">(</span><span class="n">playerHand</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">21</span><span class="p">:</span>
<span class="c"> 60. </span>                <span class="k">break</span>
<span class="c"> 61. </span>
<span class="c"> 62. </span>            <span class="c1"># Get the player&#39;s move, either H, S, or D:</span>
<span class="c"> 63. </span>            <span class="n">move</span> <span class="o">=</span> <span class="n">getMove</span><span class="p">(</span><span class="n">playerHand</span><span class="p">,</span> <span class="n">money</span> <span class="o">-</span> <span class="n">bet</span><span class="p">)</span>
<span class="c"> 64. </span>
<span class="c"> 65. </span>            <span class="c1"># Handle the player actions:</span>
<span class="c"> 66. </span>            <span class="k">if</span> <span class="n">move</span> <span class="o">==</span> <span class="s1">&#39;D&#39;</span><span class="p">:</span>
<span class="c"> 67. </span>                <span class="c1"># Player is doubling down, they can increase their bet:</span>
<span class="c"> 68. </span>                <span class="n">additionalBet</span> <span class="o">=</span> <span class="n">getBet</span><span class="p">(</span><span class="nb">min</span><span class="p">(</span><span class="n">bet</span><span class="p">,</span> <span class="p">(</span><span class="n">money</span> <span class="o">-</span> <span class="n">bet</span><span class="p">)))</span>
<span class="c"> 69. </span>                <span class="n">bet</span> <span class="o">+=</span> <span class="n">additionalBet</span>
<span class="c"> 70. </span>                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Bet increased to </span><span class="si">{}</span><span class="s1">.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">bet</span><span class="p">))</span>
<span class="c"> 71. </span>                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Bet:&#39;</span><span class="p">,</span> <span class="n">bet</span><span class="p">)</span>
<span class="c"> 72. </span>
<span class="c"> 73. </span>            <span class="k">if</span> <span class="n">move</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;H&#39;</span><span class="p">,</span> <span class="s1">&#39;D&#39;</span><span class="p">):</span>
<span class="c"> 74. </span>                <span class="c1"># Hit/doubling down takes another card.</span>
<span class="c"> 75. </span>                <span class="n">newCard</span> <span class="o">=</span> <span class="n">deck</span><span class="o">.</span><span class="n">pop</span><span class="p">()</span>
<span class="c"> 76. </span>                <span class="n">rank</span><span class="p">,</span> <span class="n">suit</span> <span class="o">=</span> <span class="n">newCard</span>
<span class="c"> 77. </span>                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;You drew a </span><span class="si">{}</span><span class="s1"> of </span><span class="si">{}</span><span class="s1">.&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">rank</span><span class="p">,</span> <span class="n">suit</span><span class="p">))</span>
<span class="c"> 78. </span>                <span class="n">playerHand</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">newCard</span><span class="p">)</span>
<span class="c"> 79. </span>
<span class="c"> 80. </span>                <span class="k">if</span> <span class="n">getHandValue</span><span class="p">(</span><span class="n">playerHand</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">21</span><span class="p">:</span>
<span class="c"> 81. </span>                    <span class="c1"># The player has busted:</span>
<span class="c"> 82. </span>                    <span class="k">continue</span>
<span class="c"> 83. </span>
<span class="c"> 84. </span>            <span class="k">if</span> <span class="n">move</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;S&#39;</span><span class="p">,</span> <span class="s1">&#39;D&#39;</span><span class="p">):</span>
<span class="c"> 85. </span>                <span class="c1"># Stand/doubling down stops the player&#39;s turn.</span>
<span class="c"> 86. </span>                <span class="k">break</span>
<span class="c"> 87. </span>
<span class="c"> 88. </span>        <span class="c1"># Handle the dealer&#39;s actions:</span>
<span class="c"> 89. </span>        <span class="k">if</span> <span class="n">getHandValue</span><span class="p">(</span><span class="n">playerHand</span><span class="p">)</span> <span class="o">&lt;=</span> <span class="mi">21</span><span class="p">:</span>
<span class="c"> 90. </span>            <span class="k">while</span> <span class="n">getHandValue</span><span class="p">(</span><span class="n">dealerHand</span><span class="p">)</span> <span class="o">&lt;</span> <span class="mi">17</span><span class="p">:</span>
<span class="c"> 91. </span>                <span class="c1"># The dealer hits:</span>
<span class="c"> 92. </span>                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Dealer hits...&#39;</span><span class="p">)</span>
<span class="c"> 93. </span>                <span class="n">dealerHand</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">deck</span><span class="o">.</span><span class="n">pop</span><span class="p">())</span>
<span class="c"> 94. </span>                <span class="n">displayHands</span><span class="p">(</span><span class="n">playerHand</span><span class="p">,</span> <span class="n">dealerHand</span><span class="p">,</span> <span class="kc">False</span><span class="p">)</span>
<span class="c"> 95. </span>
<span class="c"> 96. </span>                <span class="k">if</span> <span class="n">getHandValue</span><span class="p">(</span><span class="n">dealerHand</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">21</span><span class="p">:</span>
<span class="c"> 97. </span>                    <span class="k">break</span>  <span class="c1"># The dealer has busted.</span>
<span class="c"> 98. </span>                <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Press Enter to continue...&#39;</span><span class="p">)</span>
<span class="c"> 99. </span>                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="c">100. </span>
<span class="c">101. </span>        <span class="c1"># Show the final hands:</span>
<span class="c">102. </span>        <span class="n">displayHands</span><span class="p">(</span><span class="n">playerHand</span><span class="p">,</span> <span class="n">dealerHand</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
<span class="c">103. </span>
<span class="c">104. </span>        <span class="n">playerValue</span> <span class="o">=</span> <span class="n">getHandValue</span><span class="p">(</span><span class="n">playerHand</span><span class="p">)</span>
<span class="c">105. </span>        <span class="n">dealerValue</span> <span class="o">=</span> <span class="n">getHandValue</span><span class="p">(</span><span class="n">dealerHand</span><span class="p">)</span>
<span class="c">106. </span>        <span class="c1"># Handle whether the player won, lost, or tied:</span>
<span class="c">107. </span>        <span class="k">if</span> <span class="n">dealerValue</span> <span class="o">&gt;</span> <span class="mi">21</span><span class="p">:</span>
<span class="c">108. </span>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Dealer busts! You win $</span><span class="si">{}</span><span class="s1">!&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">bet</span><span class="p">))</span>
<span class="c">109. </span>            <span class="n">money</span> <span class="o">+=</span> <span class="n">bet</span>
<span class="c">110. </span>        <span class="k">elif</span> <span class="p">(</span><span class="n">playerValue</span> <span class="o">&gt;</span> <span class="mi">21</span><span class="p">)</span> <span class="ow">or</span> <span class="p">(</span><span class="n">playerValue</span> <span class="o">&lt;</span> <span class="n">dealerValue</span><span class="p">):</span>
<span class="c">111. </span>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;You lost!&#39;</span><span class="p">)</span>
<span class="c">112. </span>            <span class="n">money</span> <span class="o">-=</span> <span class="n">bet</span>
<span class="c">113. </span>        <span class="k">elif</span> <span class="n">playerValue</span> <span class="o">&gt;</span> <span class="n">dealerValue</span><span class="p">:</span>
<span class="c">114. </span>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;You won $</span><span class="si">{}</span><span class="s1">!&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">bet</span><span class="p">))</span>
<span class="c">115. </span>            <span class="n">money</span> <span class="o">+=</span> <span class="n">bet</span>
<span class="c">116. </span>        <span class="k">elif</span> <span class="n">playerValue</span> <span class="o">==</span> <span class="n">dealerValue</span><span class="p">:</span>
<span class="c">117. </span>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;It</span><span class="se">\&#39;</span><span class="s1">s a tie, the bet is returned to you.&#39;</span><span class="p">)</span>
<span class="c">118. </span>
<span class="c">119. </span>        <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;Press Enter to continue...&#39;</span><span class="p">)</span>
<span class="c">120. </span>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n\n</span><span class="s1">&#39;</span><span class="p">)</span>
<span class="c">121. </span>
<span class="c">122. </span>
<span class="c">123. </span><span class="k">def</span> <span class="nf">getBet</span><span class="p">(</span><span class="n">maxBet</span><span class="p">):</span>
<span class="c">124. </span>    <span class="sd">&quot;&quot;&quot;Ask the player how much they want to bet for this round.&quot;&quot;&quot;</span>
<span class="c">125. </span>    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>  <span class="c1"># Keep asking until they enter a valid amount.</span>
<span class="c">126. </span>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;How much do you bet? (1-</span><span class="si">{}</span><span class="s1">, or QUIT)&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">maxBet</span><span class="p">))</span>
<span class="c">127. </span>        <span class="n">bet</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;&gt; &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
<span class="c">128. </span>        <span class="k">if</span> <span class="n">bet</span> <span class="o">==</span> <span class="s1">&#39;QUIT&#39;</span><span class="p">:</span>
<span class="c">129. </span>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Thanks for playing!&#39;</span><span class="p">)</span>
<span class="c">130. </span>            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
<span class="c">131. </span>
<span class="c">132. </span>        <span class="k">if</span> <span class="ow">not</span> <span class="n">bet</span><span class="o">.</span><span class="n">isdecimal</span><span class="p">():</span>
<span class="c">133. </span>            <span class="k">continue</span>  <span class="c1"># If the player didn&#39;t enter a number, ask again.</span>
<span class="c">134. </span>
<span class="c">135. </span>        <span class="n">bet</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">bet</span><span class="p">)</span>
<span class="c">136. </span>        <span class="k">if</span> <span class="mi">1</span> <span class="o">&lt;=</span> <span class="n">bet</span> <span class="o">&lt;=</span> <span class="n">maxBet</span><span class="p">:</span>
<span class="c">137. </span>            <span class="k">return</span> <span class="n">bet</span>  <span class="c1"># Player entered a valid bet.</span>
<span class="c">138. </span>
<span class="c">139. </span>
<span class="c">140. </span><span class="k">def</span> <span class="nf">getDeck</span><span class="p">():</span>
<span class="c">141. </span>    <span class="sd">&quot;&quot;&quot;Return a list of (rank, suit) tuples for all 52 cards.&quot;&quot;&quot;</span>
<span class="c">142. </span>    <span class="n">deck</span> <span class="o">=</span> <span class="p">[]</span>
<span class="c">143. </span>    <span class="k">for</span> <span class="n">suit</span> <span class="ow">in</span> <span class="p">(</span><span class="n">HEARTS</span><span class="p">,</span> <span class="n">DIAMONDS</span><span class="p">,</span> <span class="n">SPADES</span><span class="p">,</span> <span class="n">CLUBS</span><span class="p">):</span>
<span class="c">144. </span>        <span class="k">for</span> <span class="n">rank</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">11</span><span class="p">):</span>
<span class="c">145. </span>            <span class="n">deck</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="nb">str</span><span class="p">(</span><span class="n">rank</span><span class="p">),</span> <span class="n">suit</span><span class="p">))</span>  <span class="c1"># Add the numbered cards.</span>
<span class="c">146. </span>        <span class="k">for</span> <span class="n">rank</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;J&#39;</span><span class="p">,</span> <span class="s1">&#39;Q&#39;</span><span class="p">,</span> <span class="s1">&#39;K&#39;</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">):</span>
<span class="c">147. </span>            <span class="n">deck</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">rank</span><span class="p">,</span> <span class="n">suit</span><span class="p">))</span>  <span class="c1"># Add the face and ace cards.</span>
<span class="c">148. </span>    <span class="n">random</span><span class="o">.</span><span class="n">shuffle</span><span class="p">(</span><span class="n">deck</span><span class="p">)</span>
<span class="c">149. </span>    <span class="k">return</span> <span class="n">deck</span>
<span class="c">150. </span>
<span class="c">151. </span>
<span class="c">152. </span><span class="k">def</span> <span class="nf">displayHands</span><span class="p">(</span><span class="n">playerHand</span><span class="p">,</span> <span class="n">dealerHand</span><span class="p">,</span> <span class="n">showDealerHand</span><span class="p">):</span>
<span class="c">153. </span>    <span class="sd">&quot;&quot;&quot;Show the player&#39;s and dealer&#39;s cards. Hide the dealer&#39;s first</span>
<span class="c">154. </span><span class="sd">    card if showDealerHand is False.&quot;&quot;&quot;</span>
<span class="c">155. </span>    <span class="nb">print</span><span class="p">()</span>
<span class="c">156. </span>    <span class="k">if</span> <span class="n">showDealerHand</span><span class="p">:</span>
<span class="c">157. </span>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEALER:&#39;</span><span class="p">,</span> <span class="n">getHandValue</span><span class="p">(</span><span class="n">dealerHand</span><span class="p">))</span>
<span class="c">158. </span>        <span class="n">displayCards</span><span class="p">(</span><span class="n">dealerHand</span><span class="p">)</span>
<span class="c">159. </span>    <span class="k">else</span><span class="p">:</span>
<span class="c">160. </span>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;DEALER: ???&#39;</span><span class="p">)</span>
<span class="c">161. </span>        <span class="c1"># Hide the dealer&#39;s first card:</span>
<span class="c">162. </span>        <span class="n">displayCards</span><span class="p">([</span><span class="n">BACKSIDE</span><span class="p">]</span> <span class="o">+</span> <span class="n">dealerHand</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
<span class="c">163. </span>
<span class="c">164. </span>    <span class="c1"># Show the player&#39;s cards:</span>
<span class="c">165. </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;PLAYER:&#39;</span><span class="p">,</span> <span class="n">getHandValue</span><span class="p">(</span><span class="n">playerHand</span><span class="p">))</span>
<span class="c">166. </span>    <span class="n">displayCards</span><span class="p">(</span><span class="n">playerHand</span><span class="p">)</span>
<span class="c">167. </span>
<span class="c">168. </span>
<span class="c">169. </span><span class="k">def</span> <span class="nf">getHandValue</span><span class="p">(</span><span class="n">cards</span><span class="p">):</span>
<span class="c">170. </span>    <span class="sd">&quot;&quot;&quot;Returns the value of the cards. Face cards are worth 10, aces are</span>
<span class="c">171. </span><span class="sd">    worth 11 or 1 (this function picks the most suitable ace value).&quot;&quot;&quot;</span>
<span class="c">172. </span>    <span class="n">value</span> <span class="o">=</span> <span class="mi">0</span>
<span class="c">173. </span>    <span class="n">numberOfAces</span> <span class="o">=</span> <span class="mi">0</span>
<span class="c">174. </span>
<span class="c">175. </span>    <span class="c1"># Add the value for the non-ace cards:</span>
<span class="c">176. </span>    <span class="k">for</span> <span class="n">card</span> <span class="ow">in</span> <span class="n">cards</span><span class="p">:</span>
<span class="c">177. </span>        <span class="n">rank</span> <span class="o">=</span> <span class="n">card</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>  <span class="c1"># card is a tuple like (rank, suit)</span>
<span class="c">178. </span>        <span class="k">if</span> <span class="n">rank</span> <span class="o">==</span> <span class="s1">&#39;A&#39;</span><span class="p">:</span>
<span class="c">179. </span>            <span class="n">numberOfAces</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="c">180. </span>        <span class="k">elif</span> <span class="n">rank</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;K&#39;</span><span class="p">,</span> <span class="s1">&#39;Q&#39;</span><span class="p">,</span> <span class="s1">&#39;J&#39;</span><span class="p">):</span>  <span class="c1"># Face cards are worth 10 points.</span>
<span class="c">181. </span>            <span class="n">value</span> <span class="o">+=</span> <span class="mi">10</span>
<span class="c">182. </span>        <span class="k">else</span><span class="p">:</span>
<span class="c">183. </span>            <span class="n">value</span> <span class="o">+=</span> <span class="nb">int</span><span class="p">(</span><span class="n">rank</span><span class="p">)</span>  <span class="c1"># Numbered cards are worth their number.</span>
<span class="c">184. </span>
<span class="c">185. </span>    <span class="c1"># Add the value for the aces:</span>
<span class="c">186. </span>    <span class="n">value</span> <span class="o">+=</span> <span class="n">numberOfAces</span>  <span class="c1"># Add 1 per ace.</span>
<span class="c">187. </span>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">numberOfAces</span><span class="p">):</span>
<span class="c">188. </span>        <span class="c1"># If another 10 can be added without busting, do so:</span>
<span class="c">189. </span>        <span class="k">if</span> <span class="n">value</span> <span class="o">+</span> <span class="mi">10</span> <span class="o">&lt;=</span> <span class="mi">21</span><span class="p">:</span>
<span class="c">190. </span>            <span class="n">value</span> <span class="o">+=</span> <span class="mi">10</span>
<span class="c">191. </span>
<span class="c">192. </span>    <span class="k">return</span> <span class="n">value</span>
<span class="c">193. </span>
<span class="c">194. </span>
<span class="c">195. </span><span class="k">def</span> <span class="nf">displayCards</span><span class="p">(</span><span class="n">cards</span><span class="p">):</span>
<span class="c">196. </span>    <span class="sd">&quot;&quot;&quot;Display all the cards in the cards list.&quot;&quot;&quot;</span>
<span class="c">197. </span>    <span class="n">rows</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">]</span>  <span class="c1"># The text to display on each row.</span>
<span class="c">198. </span>
<span class="c">199. </span>    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">card</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">cards</span><span class="p">):</span>
<span class="c">200. </span>        <span class="n">rows</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+=</span> <span class="s1">&#39; ___  &#39;</span>  <span class="c1"># Print the top line of the card.</span>
<span class="c">201. </span>        <span class="k">if</span> <span class="n">card</span> <span class="o">==</span> <span class="n">BACKSIDE</span><span class="p">:</span>
<span class="c">202. </span>            <span class="c1"># Print a card&#39;s back:</span>
<span class="c">203. </span>            <span class="n">rows</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+=</span> <span class="s1">&#39;|## | &#39;</span>
<span class="c">204. </span>            <span class="n">rows</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+=</span> <span class="s1">&#39;|###| &#39;</span>
<span class="c">205. </span>            <span class="n">rows</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">+=</span> <span class="s1">&#39;|_##| &#39;</span>
<span class="c">206. </span>        <span class="k">else</span><span class="p">:</span>
<span class="c">207. </span>            <span class="c1"># Print the card&#39;s front:</span>
<span class="c">208. </span>            <span class="n">rank</span><span class="p">,</span> <span class="n">suit</span> <span class="o">=</span> <span class="n">card</span>  <span class="c1"># The card is a tuple data structure.</span>
<span class="c">209. </span>            <span class="n">rows</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+=</span> <span class="s1">&#39;|</span><span class="si">{}</span><span class="s1"> | &#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">rank</span><span class="o">.</span><span class="n">ljust</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
<span class="c">210. </span>            <span class="n">rows</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+=</span> <span class="s1">&#39;| </span><span class="si">{}</span><span class="s1"> | &#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">suit</span><span class="p">)</span>
<span class="c">211. </span>            <span class="n">rows</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">+=</span> <span class="s1">&#39;|_</span><span class="si">{}</span><span class="s1">| &#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">rank</span><span class="o">.</span><span class="n">rjust</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="s1">&#39;_&#39;</span><span class="p">))</span>
<span class="c">212. </span>
<span class="c">213. </span>    <span class="c1"># Print each row on the screen:</span>
<span class="c">214. </span>    <span class="k">for</span> <span class="n">row</span> <span class="ow">in</span> <span class="n">rows</span><span class="p">:</span>
<span class="c">215. </span>        <span class="nb">print</span><span class="p">(</span><span class="n">row</span><span class="p">)</span>
<span class="c">216. </span>
<span class="c">217. </span>
<span class="c">218. </span><span class="k">def</span> <span class="nf">getMove</span><span class="p">(</span><span class="n">playerHand</span><span class="p">,</span> <span class="n">money</span><span class="p">):</span>
<span class="c">219. </span>    <span class="sd">&quot;&quot;&quot;Asks the player for their move, and returns &#39;H&#39; for hit, &#39;S&#39; for</span>
<span class="c">220. </span><span class="sd">    stand, and &#39;D&#39; for double down.&quot;&quot;&quot;</span>
<span class="c">221. </span>    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>  <span class="c1"># Keep looping until the player enters a correct move.</span>
<span class="c">222. </span>        <span class="c1"># Determine what moves the player can make:</span>
<span class="c">223. </span>        <span class="n">moves</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;(H)it&#39;</span><span class="p">,</span> <span class="s1">&#39;(S)tand&#39;</span><span class="p">]</span>
<span class="c">224. </span>
<span class="c">225. </span>        <span class="c1"># The player can double down on their first move, which we can</span>
<span class="c">226. </span>        <span class="c1"># tell because they&#39;ll have exactly two cards:</span>
<span class="c">227. </span>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">playerHand</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span> <span class="ow">and</span> <span class="n">money</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
<span class="c">228. </span>            <span class="n">moves</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;(D)ouble down&#39;</span><span class="p">)</span>
<span class="c">229. </span>
<span class="c">230. </span>        <span class="c1"># Get the player&#39;s move:</span>
<span class="c">231. </span>        <span class="n">movePrompt</span> <span class="o">=</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">moves</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;&gt; &#39;</span>
<span class="c">232. </span>        <span class="n">move</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="n">movePrompt</span><span class="p">)</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
<span class="c">233. </span>        <span class="k">if</span> <span class="n">move</span> <span class="ow">in</span> <span class="p">(</span><span class="s1">&#39;H&#39;</span><span class="p">,</span> <span class="s1">&#39;S&#39;</span><span class="p">):</span>
<span class="c">234. </span>            <span class="k">return</span> <span class="n">move</span>  <span class="c1"># Player has entered a valid move.</span>
<span class="c">235. </span>        <span class="k">if</span> <span class="n">move</span> <span class="o">==</span> <span class="s1">&#39;D&#39;</span> <span class="ow">and</span> <span class="s1">&#39;(D)ouble down&#39;</span> <span class="ow">in</span> <span class="n">moves</span><span class="p">:</span>
<span class="c">236. </span>            <span class="k">return</span> <span class="n">move</span>  <span class="c1"># Player has entered a valid move.</span>
<span class="c">237. </span>
<span class="c">238. </span>
<span class="c">239. </span><span class="c1"># If the program is run (instead of imported), run the game:</span>
<span class="c">240. </span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
<span class="c">241. </span>    <span class="n">main</span><span class="p">()</span>
</pre></div>

<p class="calibre19">After entering the source code and running it a few times, try making experimental changes to it. Blackjack has several custom rules that you could implement. For example, if the first two cards have the same value, a player can split them into two hands and wager on them separately. Also, if the player receives a “blackjack” (the ace of spades and a black jack) for their first two cards, the player wins a ten-to-one payout. You can find out more about the game from <a href="https://en.wikipedia.org/wiki/Blackjack" class="linkurl">https://en.wikipedia.org/wiki/Blackjack</a>.</p>
<h2 id="calibre_link-51" class="calibre5">Exploring the Program</h2>
<p class="bodyfirst">Try to find the answers to the following questions. Experiment with some modifications to the code and rerun the program to see what effect the changes have.</p>
<ol class="decimal">
<li value="1" class="calibre8">How can you make the player start with a different amount of money?</li>
<li value="2" class="calibre8">How does the program prevent the player from betting more money than they have?</li>
<li value="3" class="calibre8">How does the program represent a single card?</li>
<li value="4" class="calibre8">How does the program represent a hand of cards?</li>
<li value="5" class="calibre8">What do each of the strings in the <code class="calibre22">rows</code> list (created on line 197) represent?</li>
<li value="6" class="calibre8">What happens if you delete or comment out <code class="calibre22">random.shuffle(deck)</code> on line 148?</li>
<li value="7" class="calibre8">What happens if you change <code class="calibre22">money -= bet</code> on line 112 to <code class="calibre22">money += bet</code>?</li>
<li value="8" class="calibre8">What happens when <code class="calibre22">showDealerHand</code> in the <code class="calibre22">displayHands()</code> function is set to <code class="calibre22">True</code>? What happens when it is <code class="calibre22">False</code>?</li>
</ol>
</section>
</div>








<a href="project3.html">Prev: Bitmap Message</a> | <a href="project5.html">Next: Bouncing DVD Logo</a>
</body></html>