<html><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><link href="style.css" rel="stylesheet" type="text/css" /><link rel="stylesheet" type="text/css" href="pygments.css"><title>Maze Runner 3D</title></head><body style="background-color: #fffeee;">

<script type="text/javascript">
//<![CDATA[

var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-5459430-3']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();

//]]>
</script>


<div style="background-color: #eeeddd; float: right; height: 310px; font-family: sans-serif;" id="otherbooks">
  <a href="#" onclick="document.getElementById('otherbooks').outerHTML='';" style="vertical-align: top;">(close)</a><br />

  <a target="_blank" href="https://nostarch.com/automatestuff2" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_automate.link');"><img src="/images/cover_automate2_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://nostarch.com/big-book-small-python-projects" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_bigbookpython.link');"><img src="/images/cover_bigbookpython_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://nostarch.com/beyond-basic-stuff-python" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_beyond.link');"><img src="/images/cover_beyond_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://nostarch.com/inventwithpython" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_invent.link');"><img src="/images/cover_invent4th_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://www.amazon.com/Making-Games-Python-Pygame-Sweigart/dp/1469901730?ie=UTF8&amp;tag=playwithpyth-20&amp;linkCode=as2&amp;camp=1789&amp;creative=9325&amp;creativeASIN=1469901730" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_pygame.link');"><img src="/images/cover_makinggames_thumb.webp" style="height: 200px; border: solid black 1px; /"></a>
  <a target="_blank" href="https://nostarch.com/crackingcodes" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_hacking.link');"><img src="/images/cover_crackingcodes_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://nostarch.com/scratchplayground"><img src="/images/cover_scratchprogrammingplayground_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://nostarch.com/codingwithminecraft"><img src="/images/cover_codingwithminecraft_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <br />
  <a href="https://inventwithpython.com/automateudemy">Use this link to get 70% off the Automate the Boring Stuff online video course.</a><br />
  <a href="https://www.patreon.com/AlSweigart">Support me on Patreon</a>
</div>

<a href="project44.html">Prev: Maze Runner 2D</a> | <a href="project46.html">Next: Million Dice Statistics</a>





<div type="bodymatter chapter" class="calibre1" id="calibre_link-198">
<section class="toclist">
<header class="calibre10">
<h1 class="chapter">
<span class="chapternumber">#45</span><br class="calibre14" />
<span class="chaptertitle">Maze Runner 3D</span></h1>
</header>
<figure class="opener">
<img src="images/000002.webp" alt="" class="calibre12" />
</figure>
<p class="chapterintro">This three-dimensional maze runner provides the player with a first-person view from inside a maze. Try to find your way out! You can generate maze files by following the instructions in Project 44, “Maze Runner 2D,” or by downloading maze files from <a href="https://invpy.com/mazes/" class="linkurl">https://invpy.com/mazes/</a>.</p>
<h2 id="calibre_link-199" class="calibre5">The Program in Action</h2>
<p class="bodyfirst">When you run <em class="calibre9">mazerunner3d.py</em>, the output will look like this:</p>
<pre class="calibre24"><code class="calibre22">Maze Runner 3D, by Al Sweigart al@inventwithpython.com
(Maze files are generated by mazemakerrec.py)
Enter the filename of the maze (or LIST or QUIT):
&gt; <b class="calibre6">maze75x11s1.txt</b>
<span class="calibre32">░░░░░░░░░░░░░░░░░░░
░  \           /  ░
░   \_________/   ░
░    |       |    ░
░    |       |    ░
░    |       |    ░
░    |       |    ░
░    |       |    ░
░    |       |    ░
░    |       |    ░
░    |       |    ░
░    |_______|    ░
░   /         \   ░
░  /           \  ░
░░░░░░░░░░░░░░░░░░░</span>
Location (1, 1)  Direction: NORTH
                   (W)
Enter direction: (A) (D)  or QUIT.
&gt; <b class="calibre6">d</b>
<span class="calibre32">░░░░░░░░░░░░░░░░░░░
░  \              ░
░   \_____________░
░    |            ░
░    |            ░
░    |            ░
░    |            ░
░    |            ░
░    |            ░
░    |            ░
░    |            ░
░    |____________░
░   /             ░
░  /              ░
░░░░░░░░░░░░░░░░░░░</span>
Location (1, 1)  Direction: EAST
<var class="calibre27">--snip--</var></code></pre>
<h2 id="calibre_link-200" class="calibre5">How It Works</h2>
<p class="bodyfirst">This 3D-perspective ASCII art starts with the multiline string stored in <code class="calibre22">ALL_OPEN</code>. This string depicts a position in which no paths are closed off by walls. The program then draws the walls, stored in the <code class="calibre22">CLOSED</code> dictionary, on top of the <code class="calibre22">ALL_OPEN</code> string to generate the ASCII art for any possible combination of closed-off paths. For example, here’s how the program generates the view in which the wall is to the left of the player:</p>
<pre class="calibre24"><code class="calibre22">                            \               \
____         ____            \_              \_        ____
   |\       /|                |               |       /|
   ||       ||                |               |       ||
   ||__   __||                |               |__   __||
   || |\ /| ||                |               | |\ /| ||
   || | X | ||        +       |       =       | | X | ||
   || |/ \| ||                |               | |/ \| ||
   ||_/   \_||                |               |_/   \_||
   ||       ||                |               |       ||
___|/       \|___             |               |       \|___
                             /               /
                            /               /</code></pre>
<p class="calibre19">The periods in the ASCII art in the source code get removed before the strings are displayed; they only exist to make entering the code easier, so you don’t insert or leave out blank spaces.</p>
<p class="calibre19">Here is the source code for the 3D maze:</p>
<div class="highlight"><pre><span></span>
<span class="c">  1. </span><span class="sd">&quot;&quot;&quot;Maze 3D, by Al Sweigart al@inventwithpython.com</span>
<span class="c">  2. </span><span class="sd">Move around a maze and try to escape... in 3D!</span>
<span class="c">  3. </span><span class="sd">This code is available at https://nostarch.com/big-book-small-python-programming</span>
<span class="c">  4. </span><span class="sd">Tags: extra-large, artistic, maze, game&quot;&quot;&quot;</span>
<span class="c">  5. </span>
<span class="c">  6. </span><span class="kn">import</span> <span class="nn">copy</span><span class="o">,</span> <span class="nn">sys</span><span class="o">,</span> <span class="nn">os</span>
<span class="c">  7. </span>
<span class="c">  8. </span><span class="c1"># Set up the constants:</span>
<span class="c">  9. </span><span class="n">WALL</span> <span class="o">=</span> <span class="s1">&#39;#&#39;</span>
<span class="c"> 10. </span><span class="n">EMPTY</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span>
<span class="c"> 11. </span><span class="n">START</span> <span class="o">=</span> <span class="s1">&#39;S&#39;</span>
<span class="c"> 12. </span><span class="n">EXIT</span> <span class="o">=</span> <span class="s1">&#39;E&#39;</span>
<span class="c"> 13. </span><span class="n">BLOCK</span> <span class="o">=</span> <span class="nb">chr</span><span class="p">(</span><span class="mi">9617</span><span class="p">)</span>  <span class="c1"># Character 9617 is &#39;░&#39;</span>
<span class="c"> 14. </span><span class="n">NORTH</span> <span class="o">=</span> <span class="s1">&#39;NORTH&#39;</span>
<span class="c"> 15. </span><span class="n">SOUTH</span> <span class="o">=</span> <span class="s1">&#39;SOUTH&#39;</span>
<span class="c"> 16. </span><span class="n">EAST</span> <span class="o">=</span> <span class="s1">&#39;EAST&#39;</span>
<span class="c"> 17. </span><span class="n">WEST</span> <span class="o">=</span> <span class="s1">&#39;WEST&#39;</span>
<span class="c"> 18. </span>
<span class="c"> 19. </span>
<span class="c"> 20. </span><span class="k">def</span> <span class="nf">wallStrToWallDict</span><span class="p">(</span><span class="n">wallStr</span><span class="p">):</span>
<span class="c"> 21. </span>    <span class="sd">&quot;&quot;&quot;Takes a string representation of a wall drawing (like those in</span>
<span class="c"> 22. </span><span class="sd">    ALL_OPEN or CLOSED) and returns a representation in a dictionary</span>
<span class="c"> 23. </span><span class="sd">    with (x, y) tuples as keys and single-character strings of the</span>
<span class="c"> 24. </span><span class="sd">    character to draw at that x, y location.&quot;&quot;&quot;</span>
<span class="c"> 25. </span>    <span class="n">wallDict</span> <span class="o">=</span> <span class="p">{}</span>
<span class="c"> 26. </span>    <span class="n">height</span> <span class="o">=</span> <span class="mi">0</span>
<span class="c"> 27. </span>    <span class="n">width</span> <span class="o">=</span> <span class="mi">0</span>
<span class="c"> 28. </span>    <span class="k">for</span> <span class="n">y</span><span class="p">,</span> <span class="n">line</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">wallStr</span><span class="o">.</span><span class="n">splitlines</span><span class="p">()):</span>
<span class="c"> 29. </span>        <span class="k">if</span> <span class="n">y</span> <span class="o">&gt;</span> <span class="n">height</span><span class="p">:</span>
<span class="c"> 30. </span>            <span class="n">height</span> <span class="o">=</span> <span class="n">y</span>
<span class="c"> 31. </span>        <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">character</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">line</span><span class="p">):</span>
<span class="c"> 32. </span>            <span class="k">if</span> <span class="n">x</span> <span class="o">&gt;</span> <span class="n">width</span><span class="p">:</span>
<span class="c"> 33. </span>                <span class="n">width</span> <span class="o">=</span> <span class="n">x</span>
<span class="c"> 34. </span>            <span class="n">wallDict</span><span class="p">[(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)]</span> <span class="o">=</span> <span class="n">character</span>
<span class="c"> 35. </span>    <span class="n">wallDict</span><span class="p">[</span><span class="s1">&#39;height&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">height</span> <span class="o">+</span> <span class="mi">1</span>
<span class="c"> 36. </span>    <span class="n">wallDict</span><span class="p">[</span><span class="s1">&#39;width&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">width</span> <span class="o">+</span> <span class="mi">1</span>
<span class="c"> 37. </span>    <span class="k">return</span> <span class="n">wallDict</span>
<span class="c"> 38. </span>
<span class="c"> 39. </span><span class="n">EXIT_DICT</span> <span class="o">=</span> <span class="p">{(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">):</span> <span class="s1">&#39;E&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">):</span> <span class="s1">&#39;X&#39;</span><span class="p">,</span> <span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">):</span> <span class="s1">&#39;I&#39;</span><span class="p">,</span>
<span class="c"> 40. </span>             <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">0</span><span class="p">):</span> <span class="s1">&#39;T&#39;</span><span class="p">,</span> <span class="s1">&#39;height&#39;</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span> <span class="s1">&#39;width&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">}</span>
<span class="c"> 41. </span>
<span class="c"> 42. </span><span class="c1"># The way we create the strings to display is by converting the pictures</span>
<span class="c"> 43. </span><span class="c1"># in these multiline strings to dictionaries using wallStrToWallDict().</span>
<span class="c"> 44. </span><span class="c1"># Then we compose the wall for the player&#39;s location and direction by</span>
<span class="c"> 45. </span><span class="c1"># &quot;pasting&quot; the wall dictionaries in CLOSED on top of the wall dictionary</span>
<span class="c"> 46. </span><span class="c1"># in ALL_OPEN.</span>
<span class="c"> 47. </span>
<span class="c"> 48. </span><span class="n">ALL_OPEN</span> <span class="o">=</span> <span class="n">wallStrToWallDict</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;&#39;&#39;</span>
<span class="c"> 49. </span><span class="s1">.................</span>
<span class="c"> 50. </span><span class="s1">____.........____</span>
<span class="c"> 51. </span><span class="s1">...|\......./|...</span>
<span class="c"> 52. </span><span class="s1">...||.......||...</span>
<span class="c"> 53. </span><span class="s1">...||__...__||...</span>
<span class="c"> 54. </span><span class="s1">...||.|\./|.||...</span>
<span class="c"> 55. </span><span class="s1">...||.|.X.|.||...</span>
<span class="c"> 56. </span><span class="s1">...||.|/.\|.||...</span>
<span class="c"> 57. </span><span class="s1">...||_/...\_||...</span>
<span class="c"> 58. </span><span class="s1">...||.......||...</span>
<span class="c"> 59. </span><span class="s1">___|/.......\|___</span>
<span class="c"> 60. </span><span class="s1">.................</span>
<span class="c"> 61. </span><span class="s1">.................&#39;&#39;&#39;</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span>
<span class="c"> 62. </span><span class="c1"># The strip() call is used to remove the newline</span>
<span class="c"> 63. </span><span class="c1"># at the start of this multiline string.</span>
<span class="c"> 64. </span>
<span class="c"> 65. </span><span class="n">CLOSED</span> <span class="o">=</span> <span class="p">{}</span>
<span class="c"> 66. </span><span class="n">CLOSED</span><span class="p">[</span><span class="s1">&#39;A&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">wallStrToWallDict</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;&#39;&#39;</span>
<span class="c"> 67. </span><span class="s1">_____</span>
<span class="c"> 68. </span><span class="s1">.....</span>
<span class="c"> 69. </span><span class="s1">.....</span>
<span class="c"> 70. </span><span class="s1">.....</span>
<span class="c"> 71. </span><span class="s1">_____&#39;&#39;&#39;</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span> <span class="c1"># Paste to 6, 4.</span>
<span class="c"> 72. </span>
<span class="c"> 73. </span><span class="n">CLOSED</span><span class="p">[</span><span class="s1">&#39;B&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">wallStrToWallDict</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;&#39;&#39;</span>
<span class="c"> 74. </span><span class="s1">.\.</span>
<span class="c"> 75. </span><span class="s1">..\</span>
<span class="c"> 76. </span><span class="s1">...</span>
<span class="c"> 77. </span><span class="s1">...</span>
<span class="c"> 78. </span><span class="s1">...</span>
<span class="c"> 79. </span><span class="s1">../</span>
<span class="c"> 80. </span><span class="s1">./.&#39;&#39;&#39;</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span> <span class="c1"># Paste to 4, 3.</span>
<span class="c"> 81. </span>
<span class="c"> 82. </span><span class="n">CLOSED</span><span class="p">[</span><span class="s1">&#39;C&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">wallStrToWallDict</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;&#39;&#39;</span>
<span class="c"> 83. </span><span class="s1">___________</span>
<span class="c"> 84. </span><span class="s1">...........</span>
<span class="c"> 85. </span><span class="s1">...........</span>
<span class="c"> 86. </span><span class="s1">...........</span>
<span class="c"> 87. </span><span class="s1">...........</span>
<span class="c"> 88. </span><span class="s1">...........</span>
<span class="c"> 89. </span><span class="s1">...........</span>
<span class="c"> 90. </span><span class="s1">...........</span>
<span class="c"> 91. </span><span class="s1">...........</span>
<span class="c"> 92. </span><span class="s1">___________&#39;&#39;&#39;</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span> <span class="c1"># Paste to 3, 1.</span>
<span class="c"> 93. </span>
<span class="c"> 94. </span><span class="n">CLOSED</span><span class="p">[</span><span class="s1">&#39;D&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">wallStrToWallDict</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;&#39;&#39;</span>
<span class="c"> 95. </span><span class="s1">./.</span>
<span class="c"> 96. </span><span class="s1">/..</span>
<span class="c"> 97. </span><span class="s1">...</span>
<span class="c"> 98. </span><span class="s1">...</span>
<span class="c"> 99. </span><span class="s1">...</span>
<span class="c">100. </span><span class="s1">\..</span>
<span class="c">101. </span><span class="s1">.\.&#39;&#39;&#39;</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span> <span class="c1"># Paste to 10, 3.</span>
<span class="c">102. </span>
<span class="c">103. </span><span class="n">CLOSED</span><span class="p">[</span><span class="s1">&#39;E&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">wallStrToWallDict</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;&#39;&#39;</span>
<span class="c">104. </span><span class="s1">..\..</span>
<span class="c">105. </span><span class="s1">...\_</span>
<span class="c">106. </span><span class="s1">....|</span>
<span class="c">107. </span><span class="s1">....|</span>
<span class="c">108. </span><span class="s1">....|</span>
<span class="c">109. </span><span class="s1">....|</span>
<span class="c">110. </span><span class="s1">....|</span>
<span class="c">111. </span><span class="s1">....|</span>
<span class="c">112. </span><span class="s1">....|</span>
<span class="c">113. </span><span class="s1">....|</span>
<span class="c">114. </span><span class="s1">....|</span>
<span class="c">115. </span><span class="s1">.../.</span>
<span class="c">116. </span><span class="s1">../..&#39;&#39;&#39;</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span> <span class="c1"># Paste to 0, 0.</span>
<span class="c">117. </span>
<span class="c">118. </span><span class="n">CLOSED</span><span class="p">[</span><span class="s1">&#39;F&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">wallStrToWallDict</span><span class="p">(</span><span class="sa">r</span><span class="s1">&#39;&#39;&#39;</span>
<span class="c">119. </span><span class="s1">../..</span>
<span class="c">120. </span><span class="s1">_/...</span>
<span class="c">121. </span><span class="s1">|....</span>
<span class="c">122. </span><span class="s1">|....</span>
<span class="c">123. </span><span class="s1">|....</span>
<span class="c">124. </span><span class="s1">|....</span>
<span class="c">125. </span><span class="s1">|....</span>
<span class="c">126. </span><span class="s1">|....</span>
<span class="c">127. </span><span class="s1">|....</span>
<span class="c">128. </span><span class="s1">|....</span>
<span class="c">129. </span><span class="s1">|....</span>
<span class="c">130. </span><span class="s1">.\...</span>
<span class="c">131. </span><span class="s1">..\..&#39;&#39;&#39;</span><span class="o">.</span><span class="n">strip</span><span class="p">())</span> <span class="c1"># Paste to 12, 0.</span>
<span class="c">132. </span>
<span class="c">133. </span><span class="k">def</span> <span class="nf">displayWallDict</span><span class="p">(</span><span class="n">wallDict</span><span class="p">):</span>
<span class="c">134. </span>    <span class="sd">&quot;&quot;&quot;Display a wall dictionary, as returned by wallStrToWallDict(), on</span>
<span class="c">135. </span><span class="sd">    the screen.&quot;&quot;&quot;</span>
<span class="c">136. </span>    <span class="nb">print</span><span class="p">(</span><span class="n">BLOCK</span> <span class="o">*</span> <span class="p">(</span><span class="n">wallDict</span><span class="p">[</span><span class="s1">&#39;width&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="mi">2</span><span class="p">))</span>
<span class="c">137. </span>    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">wallDict</span><span class="p">[</span><span class="s1">&#39;height&#39;</span><span class="p">]):</span>
<span class="c">138. </span>        <span class="nb">print</span><span class="p">(</span><span class="n">BLOCK</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="c">139. </span>        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">wallDict</span><span class="p">[</span><span class="s1">&#39;width&#39;</span><span class="p">]):</span>
<span class="c">140. </span>            <span class="n">wall</span> <span class="o">=</span> <span class="n">wallDict</span><span class="p">[(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)]</span>
<span class="c">141. </span>            <span class="k">if</span> <span class="n">wall</span> <span class="o">==</span> <span class="s1">&#39;.&#39;</span><span class="p">:</span>
<span class="c">142. </span>                <span class="n">wall</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span>
<span class="c">143. </span>            <span class="nb">print</span><span class="p">(</span><span class="n">wall</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="c">144. </span>        <span class="nb">print</span><span class="p">(</span><span class="n">BLOCK</span><span class="p">)</span>  <span class="c1"># Print block with a newline.</span>
<span class="c">145. </span>    <span class="nb">print</span><span class="p">(</span><span class="n">BLOCK</span> <span class="o">*</span> <span class="p">(</span><span class="n">wallDict</span><span class="p">[</span><span class="s1">&#39;width&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="mi">2</span><span class="p">))</span>
<span class="c">146. </span>
<span class="c">147. </span>
<span class="c">148. </span><span class="k">def</span> <span class="nf">pasteWallDict</span><span class="p">(</span><span class="n">srcWallDict</span><span class="p">,</span> <span class="n">dstWallDict</span><span class="p">,</span> <span class="n">left</span><span class="p">,</span> <span class="n">top</span><span class="p">):</span>
<span class="c">149. </span>    <span class="sd">&quot;&quot;&quot;Copy the wall representation dictionary in srcWallDict on top of</span>
<span class="c">150. </span><span class="sd">    the one in dstWallDict, offset to the position given by left, top.&quot;&quot;&quot;</span>
<span class="c">151. </span>    <span class="n">dstWallDict</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">dstWallDict</span><span class="p">)</span>
<span class="c">152. </span>    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">srcWallDict</span><span class="p">[</span><span class="s1">&#39;width&#39;</span><span class="p">]):</span>
<span class="c">153. </span>        <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">srcWallDict</span><span class="p">[</span><span class="s1">&#39;height&#39;</span><span class="p">]):</span>
<span class="c">154. </span>            <span class="n">dstWallDict</span><span class="p">[(</span><span class="n">x</span> <span class="o">+</span> <span class="n">left</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="n">top</span><span class="p">)]</span> <span class="o">=</span> <span class="n">srcWallDict</span><span class="p">[(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)]</span>
<span class="c">155. </span>    <span class="k">return</span> <span class="n">dstWallDict</span>
<span class="c">156. </span>
<span class="c">157. </span>
<span class="c">158. </span><span class="k">def</span> <span class="nf">makeWallDict</span><span class="p">(</span><span class="n">maze</span><span class="p">,</span> <span class="n">playerx</span><span class="p">,</span> <span class="n">playery</span><span class="p">,</span> <span class="n">playerDirection</span><span class="p">,</span> <span class="n">exitx</span><span class="p">,</span> <span class="n">exity</span><span class="p">):</span>
<span class="c">159. </span>    <span class="sd">&quot;&quot;&quot;From the player&#39;s position and direction in the maze (which has</span>
<span class="c">160. </span><span class="sd">    an exit at exitx, exity), create the wall representation dictionary</span>
<span class="c">161. </span><span class="sd">    by pasting wall dictionaries on top of ALL_OPEN, then return it.&quot;&quot;&quot;</span>
<span class="c">162. </span>
<span class="c">163. </span>    <span class="c1"># The A-F &quot;sections&quot; (which are relative to the player&#39;s direction)</span>
<span class="c">164. </span>    <span class="c1"># determine which walls in the maze we check to see if we need to</span>
<span class="c">165. </span>    <span class="c1"># paste them over the wall representation dictionary we&#39;re creating.</span>
<span class="c">166. </span>
<span class="c">167. </span>    <span class="k">if</span> <span class="n">playerDirection</span> <span class="o">==</span> <span class="n">NORTH</span><span class="p">:</span>
<span class="c">168. </span>        <span class="c1"># Map of the sections, relative  A</span>
<span class="c">169. </span>        <span class="c1"># to the player @:              BCD (Player facing north)</span>
<span class="c">170. </span>        <span class="c1">#                               E@F</span>
<span class="c">171. </span>        <span class="n">offsets</span> <span class="o">=</span> <span class="p">((</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span>
<span class="c">172. </span>                   <span class="p">(</span><span class="s1">&#39;D&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;E&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;F&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
<span class="c">173. </span>    <span class="k">if</span> <span class="n">playerDirection</span> <span class="o">==</span> <span class="n">SOUTH</span><span class="p">:</span>
<span class="c">174. </span>        <span class="c1"># Map of the sections, relative F@E</span>
<span class="c">175. </span>        <span class="c1"># to the player @:              DCB (Player facing south)</span>
<span class="c">176. </span>        <span class="c1">#                                A</span>
<span class="c">177. </span>        <span class="n">offsets</span> <span class="o">=</span> <span class="p">((</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">2</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
<span class="c">178. </span>                   <span class="p">(</span><span class="s1">&#39;D&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;E&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;F&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">))</span>
<span class="c">179. </span>    <span class="k">if</span> <span class="n">playerDirection</span> <span class="o">==</span> <span class="n">EAST</span><span class="p">:</span>
<span class="c">180. </span>        <span class="c1"># Map of the sections, relative EB</span>
<span class="c">181. </span>        <span class="c1"># to the player @:              @CA (Player facing east)</span>
<span class="c">182. </span>        <span class="c1">#                               FD</span>
<span class="c">183. </span>        <span class="n">offsets</span> <span class="o">=</span> <span class="p">((</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
<span class="c">184. </span>                   <span class="p">(</span><span class="s1">&#39;D&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;E&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;F&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">))</span>
<span class="c">185. </span>    <span class="k">if</span> <span class="n">playerDirection</span> <span class="o">==</span> <span class="n">WEST</span><span class="p">:</span>
<span class="c">186. </span>        <span class="c1"># Map of the sections, relative  DF</span>
<span class="c">187. </span>        <span class="c1"># to the player @:              AC@ (Player facing west)</span>
<span class="c">188. </span>        <span class="c1">#                                BE</span>
<span class="c">189. </span>        <span class="n">offsets</span> <span class="o">=</span> <span class="p">((</span><span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;B&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;C&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span>
<span class="c">190. </span>                   <span class="p">(</span><span class="s1">&#39;D&#39;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;E&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span> <span class="p">(</span><span class="s1">&#39;F&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">))</span>
<span class="c">191. </span>
<span class="c">192. </span>    <span class="n">section</span> <span class="o">=</span> <span class="p">{}</span>
<span class="c">193. </span>    <span class="k">for</span> <span class="n">sec</span><span class="p">,</span> <span class="n">xOff</span><span class="p">,</span> <span class="n">yOff</span> <span class="ow">in</span> <span class="n">offsets</span><span class="p">:</span>
<span class="c">194. </span>        <span class="n">section</span><span class="p">[</span><span class="n">sec</span><span class="p">]</span> <span class="o">=</span> <span class="n">maze</span><span class="o">.</span><span class="n">get</span><span class="p">((</span><span class="n">playerx</span> <span class="o">+</span> <span class="n">xOff</span><span class="p">,</span> <span class="n">playery</span> <span class="o">+</span> <span class="n">yOff</span><span class="p">),</span> <span class="n">WALL</span><span class="p">)</span>
<span class="c">195. </span>        <span class="k">if</span> <span class="p">(</span><span class="n">playerx</span> <span class="o">+</span> <span class="n">xOff</span><span class="p">,</span> <span class="n">playery</span> <span class="o">+</span> <span class="n">yOff</span><span class="p">)</span> <span class="o">==</span> <span class="p">(</span><span class="n">exitx</span><span class="p">,</span> <span class="n">exity</span><span class="p">):</span>
<span class="c">196. </span>            <span class="n">section</span><span class="p">[</span><span class="n">sec</span><span class="p">]</span> <span class="o">=</span> <span class="n">EXIT</span>
<span class="c">197. </span>
<span class="c">198. </span>    <span class="n">wallDict</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">copy</span><span class="p">(</span><span class="n">ALL_OPEN</span><span class="p">)</span>
<span class="c">199. </span>    <span class="n">PASTE_CLOSED_TO</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;A&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="mi">4</span><span class="p">),</span> <span class="s1">&#39;B&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mi">4</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="s1">&#39;C&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mi">3</span><span class="p">,</span> <span class="mi">1</span><span class="p">),</span>
<span class="c">200. </span>                       <span class="s1">&#39;D&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">3</span><span class="p">),</span> <span class="s1">&#39;E&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">),</span> <span class="s1">&#39;F&#39;</span><span class="p">:</span> <span class="p">(</span><span class="mi">12</span><span class="p">,</span> <span class="mi">0</span><span class="p">)}</span>
<span class="c">201. </span>    <span class="k">for</span> <span class="n">sec</span> <span class="ow">in</span> <span class="s1">&#39;ABDCEF&#39;</span><span class="p">:</span>
<span class="c">202. </span>        <span class="k">if</span> <span class="n">section</span><span class="p">[</span><span class="n">sec</span><span class="p">]</span> <span class="o">==</span> <span class="n">WALL</span><span class="p">:</span>
<span class="c">203. </span>            <span class="n">wallDict</span> <span class="o">=</span> <span class="n">pasteWallDict</span><span class="p">(</span><span class="n">CLOSED</span><span class="p">[</span><span class="n">sec</span><span class="p">],</span> <span class="n">wallDict</span><span class="p">,</span>
<span class="c">204. </span>                <span class="n">PASTE_CLOSED_TO</span><span class="p">[</span><span class="n">sec</span><span class="p">][</span><span class="mi">0</span><span class="p">],</span> <span class="n">PASTE_CLOSED_TO</span><span class="p">[</span><span class="n">sec</span><span class="p">][</span><span class="mi">1</span><span class="p">])</span>
<span class="c">205. </span>
<span class="c">206. </span>    <span class="c1"># Draw the EXIT sign if needed:</span>
<span class="c">207. </span>    <span class="k">if</span> <span class="n">section</span><span class="p">[</span><span class="s1">&#39;C&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">EXIT</span><span class="p">:</span>
<span class="c">208. </span>        <span class="n">wallDict</span> <span class="o">=</span> <span class="n">pasteWallDict</span><span class="p">(</span><span class="n">EXIT_DICT</span><span class="p">,</span> <span class="n">wallDict</span><span class="p">,</span> <span class="mi">7</span><span class="p">,</span> <span class="mi">9</span><span class="p">)</span>
<span class="c">209. </span>    <span class="k">if</span> <span class="n">section</span><span class="p">[</span><span class="s1">&#39;E&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">EXIT</span><span class="p">:</span>
<span class="c">210. </span>        <span class="n">wallDict</span> <span class="o">=</span> <span class="n">pasteWallDict</span><span class="p">(</span><span class="n">EXIT_DICT</span><span class="p">,</span> <span class="n">wallDict</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">11</span><span class="p">)</span>
<span class="c">211. </span>    <span class="k">if</span> <span class="n">section</span><span class="p">[</span><span class="s1">&#39;F&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">EXIT</span><span class="p">:</span>
<span class="c">212. </span>        <span class="n">wallDict</span> <span class="o">=</span> <span class="n">pasteWallDict</span><span class="p">(</span><span class="n">EXIT_DICT</span><span class="p">,</span> <span class="n">wallDict</span><span class="p">,</span> <span class="mi">13</span><span class="p">,</span> <span class="mi">11</span><span class="p">)</span>
<span class="c">213. </span>
<span class="c">214. </span>    <span class="k">return</span> <span class="n">wallDict</span>
<span class="c">215. </span>
<span class="c">216. </span>
<span class="c">217. </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Maze Runner 3D, by Al Sweigart al@inventwithpython.com&#39;</span><span class="p">)</span>
<span class="c">218. </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;(Maze files are generated by mazemakerrec.py)&#39;</span><span class="p">)</span>
<span class="c">219. </span>
<span class="c">220. </span><span class="c1"># Get the maze file&#39;s filename from the user:</span>
<span class="c">221. </span><span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
<span class="c">222. </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Enter the filename of the maze (or LIST or QUIT):&#39;</span><span class="p">)</span>
<span class="c">223. </span>    <span class="n">filename</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;&gt; &#39;</span><span class="p">)</span>
<span class="c">224. </span>
<span class="c">225. </span>    <span class="c1"># List all the maze files in the current folder:</span>
<span class="c">226. </span>    <span class="k">if</span> <span class="n">filename</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;LIST&#39;</span><span class="p">:</span>
<span class="c">227. </span>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Maze files found in&#39;</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">getcwd</span><span class="p">())</span>
<span class="c">228. </span>        <span class="k">for</span> <span class="n">fileInCurrentFolder</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">():</span>
<span class="c">229. </span>            <span class="k">if</span> <span class="p">(</span><span class="n">fileInCurrentFolder</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;maze&#39;</span><span class="p">)</span>
<span class="c">230. </span>            <span class="ow">and</span> <span class="n">fileInCurrentFolder</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;.txt&#39;</span><span class="p">)):</span>
<span class="c">231. </span>                <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  &#39;</span><span class="p">,</span> <span class="n">fileInCurrentFolder</span><span class="p">)</span>
<span class="c">232. </span>        <span class="k">continue</span>
<span class="c">233. </span>
<span class="c">234. </span>    <span class="k">if</span> <span class="n">filename</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;QUIT&#39;</span><span class="p">:</span>
<span class="c">235. </span>        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
<span class="c">236. </span>
<span class="c">237. </span>    <span class="k">if</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
<span class="c">238. </span>        <span class="k">break</span>
<span class="c">239. </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;There is no file named&#39;</span><span class="p">,</span> <span class="n">filename</span><span class="p">)</span>
<span class="c">240. </span>
<span class="c">241. </span><span class="c1"># Load the maze from a file:</span>
<span class="c">242. </span><span class="n">mazeFile</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
<span class="c">243. </span><span class="n">maze</span> <span class="o">=</span> <span class="p">{}</span>
<span class="c">244. </span><span class="n">lines</span> <span class="o">=</span> <span class="n">mazeFile</span><span class="o">.</span><span class="n">readlines</span><span class="p">()</span>
<span class="c">245. </span><span class="n">px</span> <span class="o">=</span> <span class="kc">None</span>
<span class="c">246. </span><span class="n">py</span> <span class="o">=</span> <span class="kc">None</span>
<span class="c">247. </span><span class="n">exitx</span> <span class="o">=</span> <span class="kc">None</span>
<span class="c">248. </span><span class="n">exity</span> <span class="o">=</span> <span class="kc">None</span>
<span class="c">249. </span><span class="n">y</span> <span class="o">=</span> <span class="mi">0</span>
<span class="c">250. </span><span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">lines</span><span class="p">:</span>
<span class="c">251. </span>    <span class="n">WIDTH</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">rstrip</span><span class="p">())</span>
<span class="c">252. </span>    <span class="k">for</span> <span class="n">x</span><span class="p">,</span> <span class="n">character</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">line</span><span class="o">.</span><span class="n">rstrip</span><span class="p">()):</span>
<span class="c">253. </span>        <span class="k">assert</span> <span class="n">character</span> <span class="ow">in</span> <span class="p">(</span><span class="n">WALL</span><span class="p">,</span> <span class="n">EMPTY</span><span class="p">,</span> <span class="n">START</span><span class="p">,</span> <span class="n">EXIT</span><span class="p">),</span> <span class="s1">&#39;Invalid character at column </span><span class="si">{}</span><span class="s1">, line </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">y</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
<span class="c">254. </span>        <span class="k">if</span> <span class="n">character</span> <span class="ow">in</span> <span class="p">(</span><span class="n">WALL</span><span class="p">,</span> <span class="n">EMPTY</span><span class="p">):</span>
<span class="c">255. </span>            <span class="n">maze</span><span class="p">[(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)]</span> <span class="o">=</span> <span class="n">character</span>
<span class="c">256. </span>        <span class="k">elif</span> <span class="n">character</span> <span class="o">==</span> <span class="n">START</span><span class="p">:</span>
<span class="c">257. </span>            <span class="n">px</span><span class="p">,</span> <span class="n">py</span> <span class="o">=</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span>
<span class="c">258. </span>            <span class="n">maze</span><span class="p">[(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)]</span> <span class="o">=</span> <span class="n">EMPTY</span>
<span class="c">259. </span>        <span class="k">elif</span> <span class="n">character</span> <span class="o">==</span> <span class="n">EXIT</span><span class="p">:</span>
<span class="c">260. </span>            <span class="n">exitx</span><span class="p">,</span> <span class="n">exity</span> <span class="o">=</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span>
<span class="c">261. </span>            <span class="n">maze</span><span class="p">[(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)]</span> <span class="o">=</span> <span class="n">EMPTY</span>
<span class="c">262. </span>    <span class="n">y</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="c">263. </span><span class="n">HEIGHT</span> <span class="o">=</span> <span class="n">y</span>
<span class="c">264. </span>
<span class="c">265. </span><span class="k">assert</span> <span class="n">px</span> <span class="o">!=</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">py</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;No start point in file.&#39;</span>
<span class="c">266. </span><span class="k">assert</span> <span class="n">exitx</span> <span class="o">!=</span> <span class="kc">None</span> <span class="ow">and</span> <span class="n">exity</span> <span class="o">!=</span> <span class="kc">None</span><span class="p">,</span> <span class="s1">&#39;No exit point in file.&#39;</span>
<span class="c">267. </span><span class="n">pDir</span> <span class="o">=</span> <span class="n">NORTH</span>
<span class="c">268. </span>
<span class="c">269. </span>
<span class="c">270. </span><span class="k">while</span> <span class="kc">True</span><span class="p">:</span>  <span class="c1"># Main game loop.</span>
<span class="c">271. </span>    <span class="n">displayWallDict</span><span class="p">(</span><span class="n">makeWallDict</span><span class="p">(</span><span class="n">maze</span><span class="p">,</span> <span class="n">px</span><span class="p">,</span> <span class="n">py</span><span class="p">,</span> <span class="n">pDir</span><span class="p">,</span> <span class="n">exitx</span><span class="p">,</span> <span class="n">exity</span><span class="p">))</span>
<span class="c">272. </span>
<span class="c">273. </span>    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span> <span class="c1"># Get user move.</span>
<span class="c">274. </span>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Location (</span><span class="si">{}</span><span class="s1">, </span><span class="si">{}</span><span class="s1">)  Direction: </span><span class="si">{}</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="n">px</span><span class="p">,</span> <span class="n">py</span><span class="p">,</span> <span class="n">pDir</span><span class="p">))</span>
<span class="c">275. </span>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;                   (W)&#39;</span><span class="p">)</span>
<span class="c">276. </span>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Enter direction: (A) (D)  or QUIT.&#39;</span><span class="p">)</span>
<span class="c">277. </span>        <span class="n">move</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;&gt; &#39;</span><span class="p">)</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
<span class="c">278. </span>
<span class="c">279. </span>        <span class="k">if</span> <span class="n">move</span> <span class="o">==</span> <span class="s1">&#39;QUIT&#39;</span><span class="p">:</span>
<span class="c">280. </span>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Thanks for playing!&#39;</span><span class="p">)</span>
<span class="c">281. </span>            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
<span class="c">282. </span>
<span class="c">283. </span>        <span class="k">if</span> <span class="p">(</span><span class="n">move</span> <span class="ow">not</span> <span class="ow">in</span> <span class="p">[</span><span class="s1">&#39;F&#39;</span><span class="p">,</span> <span class="s1">&#39;L&#39;</span><span class="p">,</span> <span class="s1">&#39;R&#39;</span><span class="p">,</span> <span class="s1">&#39;W&#39;</span><span class="p">,</span> <span class="s1">&#39;A&#39;</span><span class="p">,</span> <span class="s1">&#39;D&#39;</span><span class="p">]</span>
<span class="c">284. </span>            <span class="ow">and</span> <span class="ow">not</span> <span class="n">move</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;T&#39;</span><span class="p">)):</span>
<span class="c">285. </span>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Please enter one of F, L, or R (or W, A, D).&#39;</span><span class="p">)</span>
<span class="c">286. </span>            <span class="k">continue</span>
<span class="c">287. </span>
<span class="c">288. </span>        <span class="c1"># Move the player according to their intended move:</span>
<span class="c">289. </span>        <span class="k">if</span> <span class="n">move</span> <span class="o">==</span> <span class="s1">&#39;F&#39;</span> <span class="ow">or</span> <span class="n">move</span> <span class="o">==</span> <span class="s1">&#39;W&#39;</span><span class="p">:</span>
<span class="c">290. </span>            <span class="k">if</span> <span class="n">pDir</span> <span class="o">==</span> <span class="n">NORTH</span> <span class="ow">and</span> <span class="n">maze</span><span class="p">[(</span><span class="n">px</span><span class="p">,</span> <span class="n">py</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)]</span> <span class="o">==</span> <span class="n">EMPTY</span><span class="p">:</span>
<span class="c">291. </span>                <span class="n">py</span> <span class="o">-=</span> <span class="mi">1</span>
<span class="c">292. </span>                <span class="k">break</span>
<span class="c">293. </span>            <span class="k">if</span> <span class="n">pDir</span> <span class="o">==</span> <span class="n">SOUTH</span> <span class="ow">and</span> <span class="n">maze</span><span class="p">[(</span><span class="n">px</span><span class="p">,</span> <span class="n">py</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)]</span> <span class="o">==</span> <span class="n">EMPTY</span><span class="p">:</span>
<span class="c">294. </span>                <span class="n">py</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="c">295. </span>                <span class="k">break</span>
<span class="c">296. </span>            <span class="k">if</span> <span class="n">pDir</span> <span class="o">==</span> <span class="n">EAST</span> <span class="ow">and</span> <span class="n">maze</span><span class="p">[(</span><span class="n">px</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">py</span><span class="p">)]</span> <span class="o">==</span> <span class="n">EMPTY</span><span class="p">:</span>
<span class="c">297. </span>                <span class="n">px</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="c">298. </span>                <span class="k">break</span>
<span class="c">299. </span>            <span class="k">if</span> <span class="n">pDir</span> <span class="o">==</span> <span class="n">WEST</span> <span class="ow">and</span> <span class="n">maze</span><span class="p">[(</span><span class="n">px</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="n">py</span><span class="p">)]</span> <span class="o">==</span> <span class="n">EMPTY</span><span class="p">:</span>
<span class="c">300. </span>                <span class="n">px</span> <span class="o">-=</span> <span class="mi">1</span>
<span class="c">301. </span>                <span class="k">break</span>
<span class="c">302. </span>        <span class="k">elif</span> <span class="n">move</span> <span class="o">==</span> <span class="s1">&#39;L&#39;</span> <span class="ow">or</span> <span class="n">move</span> <span class="o">==</span> <span class="s1">&#39;A&#39;</span><span class="p">:</span>
<span class="c">303. </span>            <span class="n">pDir</span> <span class="o">=</span> <span class="p">{</span><span class="n">NORTH</span><span class="p">:</span> <span class="n">WEST</span><span class="p">,</span> <span class="n">WEST</span><span class="p">:</span> <span class="n">SOUTH</span><span class="p">,</span>
<span class="c">304. </span>                    <span class="n">SOUTH</span><span class="p">:</span> <span class="n">EAST</span><span class="p">,</span> <span class="n">EAST</span><span class="p">:</span> <span class="n">NORTH</span><span class="p">}[</span><span class="n">pDir</span><span class="p">]</span>
<span class="c">305. </span>            <span class="k">break</span>
<span class="c">306. </span>        <span class="k">elif</span> <span class="n">move</span> <span class="o">==</span> <span class="s1">&#39;R&#39;</span> <span class="ow">or</span> <span class="n">move</span> <span class="o">==</span> <span class="s1">&#39;D&#39;</span><span class="p">:</span>
<span class="c">307. </span>            <span class="n">pDir</span> <span class="o">=</span> <span class="p">{</span><span class="n">NORTH</span><span class="p">:</span> <span class="n">EAST</span><span class="p">,</span> <span class="n">EAST</span><span class="p">:</span> <span class="n">SOUTH</span><span class="p">,</span>
<span class="c">308. </span>                    <span class="n">SOUTH</span><span class="p">:</span> <span class="n">WEST</span><span class="p">,</span> <span class="n">WEST</span><span class="p">:</span> <span class="n">NORTH</span><span class="p">}[</span><span class="n">pDir</span><span class="p">]</span>
<span class="c">309. </span>            <span class="k">break</span>
<span class="c">310. </span>        <span class="k">elif</span> <span class="n">move</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s1">&#39;T&#39;</span><span class="p">):</span>  <span class="c1"># Cheat code: &#39;T x,y&#39;</span>
<span class="c">311. </span>            <span class="n">px</span><span class="p">,</span> <span class="n">py</span> <span class="o">=</span> <span class="n">move</span><span class="o">.</span><span class="n">split</span><span class="p">()[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;,&#39;</span><span class="p">)</span>
<span class="c">312. </span>            <span class="n">px</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">px</span><span class="p">)</span>
<span class="c">313. </span>            <span class="n">py</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">py</span><span class="p">)</span>
<span class="c">314. </span>            <span class="k">break</span>
<span class="c">315. </span>        <span class="k">else</span><span class="p">:</span>
<span class="c">316. </span>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;You cannot move in that direction.&#39;</span><span class="p">)</span>
<span class="c">317. </span>
<span class="c">318. </span>    <span class="k">if</span> <span class="p">(</span><span class="n">px</span><span class="p">,</span> <span class="n">py</span><span class="p">)</span> <span class="o">==</span> <span class="p">(</span><span class="n">exitx</span><span class="p">,</span> <span class="n">exity</span><span class="p">):</span>
<span class="c">319. </span>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;You have reached the exit! Good job!&#39;</span><span class="p">)</span>
<span class="c">320. </span>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Thanks for playing!&#39;</span><span class="p">)</span>
<span class="c">321. </span>        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
</pre></div>

<h2 id="calibre_link-201" class="calibre5">Exploring the Program</h2>
<p class="bodyfirst">Try to find the answers to the following questions. Experiment with some modifications to the code and rerun the program to see what effect the changes have.</p>
<ol class="decimal">
<li value="1" class="calibre8">What bug do you cause if you change <code class="calibre22">move == 'QUIT'</code> on line 279 to <code class="calibre22">move == 'quit'</code>?</li>
<li value="2" class="calibre8">How can you remove the teleportation cheat?</li>
</ol>
</section>
</div>








<a href="project44.html">Prev: Maze Runner 2D</a> | <a href="project46.html">Next: Million Dice Statistics</a>
</body></html>