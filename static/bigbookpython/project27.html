<html><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><link href="style.css" rel="stylesheet" type="text/css" /><link rel="stylesheet" type="text/css" href="pygments.css"><title>Fish Tank</title></head><body style="background-color: #fffeee;">

<script type="text/javascript">
//<![CDATA[

var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-5459430-3']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();

//]]>
</script>


<div style="background-color: #eeeddd; float: right; height: 310px; font-family: sans-serif;" id="otherbooks">
  <a href="#" onclick="document.getElementById('otherbooks').outerHTML='';" style="vertical-align: top;">(close)</a><br />

  <a target="_blank" href="https://nostarch.com/automatestuff2" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_automate.link');"><img src="/images/cover_automate2_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://nostarch.com/big-book-small-python-projects" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_bigbookpython.link');"><img src="/images/cover_bigbookpython_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://nostarch.com/beyond-basic-stuff-python" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_beyond.link');"><img src="/images/cover_beyond_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://nostarch.com/inventwithpython" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_invent.link');"><img src="/images/cover_invent4th_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://www.amazon.com/Making-Games-Python-Pygame-Sweigart/dp/1469901730?ie=UTF8&amp;tag=playwithpyth-20&amp;linkCode=as2&amp;camp=1789&amp;creative=9325&amp;creativeASIN=1469901730" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_pygame.link');"><img src="/images/cover_makinggames_thumb.webp" style="height: 200px; border: solid black 1px; /"></a>
  <a target="_blank" href="https://nostarch.com/crackingcodes" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_hacking.link');"><img src="/images/cover_crackingcodes_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://nostarch.com/scratchplayground"><img src="/images/cover_scratchprogrammingplayground_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://nostarch.com/codingwithminecraft"><img src="/images/cover_codingwithminecraft_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <br />
  <a href="https://inventwithpython.com/automateudemy">Use this link to get 70% off the Automate the Boring Stuff online video course.</a><br />
  <a href="https://www.patreon.com/AlSweigart">Support me on Patreon</a>
</div>

<a href="project26.html">Prev: Fibonacci</a> | <a href="project28.html">Next: Flooder</a>





<div type="bodymatter chapter" class="calibre1" id="calibre_link-133">
<section class="toclist">
<header class="calibre10">
<h1 class="chapter">
<span class="chapternumber">#27</span><br class="calibre14" />
<span class="chaptertitle">Fish Tank</span></h1>
</header>
<figure class="opener">
<img src="images/000002.webp" alt="" class="calibre12" />
</figure>
<p class="chapterintro">Watch your own virtual fish in a virtual fish tank, complete with air bubblers and kelp plants. Each time you run the program, it randomly generates the fish using different fish types and colors. Take a break and enjoy the calm serenity of this software aquarium, or try programming in some virtual sharks to terrorize its inhabitants! You can’t run this program from your IDE or editor. This program uses the <code class="calibre17">bext</code> module and must be run from the Command Prompt or Terminal in order to display correctly. More information about the <code class="calibre17">bext</code> module can be found at <a href="https://pypi.org/project/bext/." class="linkurl">https://pypi.org/project/bext/.</a></p>
<h2 id="calibre_link-134" class="calibre5">The Program in Action</h2>
<p class="bodyfirst"><a href="#calibre_link-339" id="calibre_link-799" class="linkurl">Figure 27-1</a> show what the output will look like when you run <em class="calibre9">fishtank.py</em>.</p>
<figure class="calibre28">
<img src="images/000005.webp" alt="f27001" class="calibre12" />
<figcaption class="calibre29"><p class="calibre30"><a id="calibre_link-339" class="linkurl">Figure 27-1</a>: The output of the fish tank program, with several fish, kelp plants, and bubbles</p></figcaption>
</figure>
<h2 id="calibre_link-135" class="calibre5">How It Works</h2>
<p class="bodyfirst">Modern graphical programs often generate animations by erasing their entire window and redrawing it 30 or 60 times a second. This gives them a <em class="calibre9">frame rate</em> of 30 or 60 frames per second (FPS). The higher the FPS, the more fluid the animated movement appears.</p>
<p class="calibre19">Drawing to terminal windows is much slower. If we erased the entire terminal window to redraw its contents with the <code class="calibre22">bext</code> module, we typically would only get about 3 or 4 FPS. This would cause a noticeable flicker in the window.</p>
<p class="calibre19">We can speed this up by only drawing characters to the parts of the terminal window that have changed. Most of the fish tank program’s output is empty space, so to make the elements move, the <code class="calibre22">clearAquarium()</code> only has to draw <code class="calibre22">' '</code> space characters to the places where the fish, kelp, and bubbles currently are. This increases our frame rate, reduces flickering, and makes for a much more pleasant fish tank animation.</p>
<div class="highlight"><pre><span></span>
<span class="c">  1. </span><span class="sd">&quot;&quot;&quot;Fish Tank, by Al Sweigart al@inventwithpython.com</span>
<span class="c">  2. </span><span class="sd">A peaceful animation of a fish tank. Press Ctrl-C to stop.</span>
<span class="c">  3. </span><span class="sd">Similar to ASCIIQuarium or @EmojiAquarium, but mine is based on an</span>
<span class="c">  4. </span><span class="sd">older ASCII fish tank program for DOS.</span>
<span class="c">  5. </span><span class="sd">https://robobunny.com/projects/asciiquarium/html/</span>
<span class="c">  6. </span><span class="sd">https://twitter.com/EmojiAquarium</span>
<span class="c">  7. </span><span class="sd">This code is available at https://nostarch.com/big-book-small-python-programming</span>
<span class="c">  8. </span><span class="sd">Tags: extra-large, artistic, bext&quot;&quot;&quot;</span>
<span class="c">  9. </span>
<span class="c"> 10. </span><span class="kn">import</span> <span class="nn">random</span><span class="o">,</span> <span class="nn">sys</span><span class="o">,</span> <span class="nn">time</span>
<span class="c"> 11. </span>
<span class="c"> 12. </span><span class="k">try</span><span class="p">:</span>
<span class="c"> 13. </span>    <span class="kn">import</span> <span class="nn">bext</span>
<span class="c"> 14. </span><span class="k">except</span> <span class="ne">ImportError</span><span class="p">:</span>
<span class="c"> 15. </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;This program requires the bext module, which you&#39;</span><span class="p">)</span>
<span class="c"> 16. </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;can install by following the instructions at&#39;</span><span class="p">)</span>
<span class="c"> 17. </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;https://pypi.org/project/Bext/&#39;</span><span class="p">)</span>
<span class="c"> 18. </span>    <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
<span class="c"> 19. </span>
<span class="c"> 20. </span><span class="c1"># Set up the constants:</span>
<span class="c"> 21. </span><span class="n">WIDTH</span><span class="p">,</span> <span class="n">HEIGHT</span> <span class="o">=</span> <span class="n">bext</span><span class="o">.</span><span class="n">size</span><span class="p">()</span>
<span class="c"> 22. </span><span class="c1"># We can&#39;t print to the last column on Windows without it adding a</span>
<span class="c"> 23. </span><span class="c1"># newline automatically, so reduce the width by one:</span>
<span class="c"> 24. </span><span class="n">WIDTH</span> <span class="o">-=</span> <span class="mi">1</span>
<span class="c"> 25. </span>
<span class="c"> 26. </span><span class="n">NUM_KELP</span> <span class="o">=</span> <span class="mi">2</span>  <span class="c1"># (!) Try changing this to 10.</span>
<span class="c"> 27. </span><span class="n">NUM_FISH</span> <span class="o">=</span> <span class="mi">10</span>  <span class="c1"># (!) Try changing this to 2 or 100.</span>
<span class="c"> 28. </span><span class="n">NUM_BUBBLERS</span> <span class="o">=</span> <span class="mi">1</span>  <span class="c1"># (!) Try changing this to 0 or 10.</span>
<span class="c"> 29. </span><span class="n">FRAMES_PER_SECOND</span> <span class="o">=</span> <span class="mi">4</span>  <span class="c1"># (!) Try changing this number to 1 or 60.</span>
<span class="c"> 30. </span><span class="c1"># (!) Try changing the constants to create a fish tank with only kelp,</span>
<span class="c"> 31. </span><span class="c1"># or only bubblers.</span>
<span class="c"> 32. </span>
<span class="c"> 33. </span><span class="c1"># NOTE: Every string in a fish dictionary should be the same length.</span>
<span class="c"> 34. </span><span class="n">FISH_TYPES</span> <span class="o">=</span> <span class="p">[</span>
<span class="c"> 35. </span>  <span class="p">{</span><span class="s1">&#39;right&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&gt;&lt;&gt;&#39;</span><span class="p">],</span>          <span class="s1">&#39;left&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&lt;&gt;&lt;&#39;</span><span class="p">]},</span>
<span class="c"> 36. </span>  <span class="p">{</span><span class="s1">&#39;right&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&gt;||&gt;&#39;</span><span class="p">],</span>         <span class="s1">&#39;left&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&lt;||&lt;&#39;</span><span class="p">]},</span>
<span class="c"> 37. </span>  <span class="p">{</span><span class="s1">&#39;right&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&gt;))&gt;&#39;</span><span class="p">],</span>         <span class="s1">&#39;left&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&lt;[[&lt;&#39;</span><span class="p">]},</span>
<span class="c"> 38. </span>  <span class="p">{</span><span class="s1">&#39;right&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&gt;||o&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;||.&#39;</span><span class="p">],</span> <span class="s1">&#39;left&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;o||&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;.||&lt;&#39;</span><span class="p">]},</span>
<span class="c"> 39. </span>  <span class="p">{</span><span class="s1">&#39;right&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&gt;))o&#39;</span><span class="p">,</span> <span class="s1">&#39;&gt;)).&#39;</span><span class="p">],</span> <span class="s1">&#39;left&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;o[[&lt;&#39;</span><span class="p">,</span> <span class="s1">&#39;.[[&lt;&#39;</span><span class="p">]},</span>
<span class="c"> 40. </span>  <span class="p">{</span><span class="s1">&#39;right&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&gt;-==&gt;&#39;</span><span class="p">],</span>        <span class="s1">&#39;left&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&lt;==-&lt;&#39;</span><span class="p">]},</span>
<span class="c"> 41. </span>  <span class="p">{</span><span class="s1">&#39;right&#39;</span><span class="p">:</span> <span class="p">[</span><span class="sa">r</span><span class="s1">&#39;&gt;</span><span class="se">\\</span><span class="s1">&gt;&#39;</span><span class="p">],</span>        <span class="s1">&#39;left&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&lt;//&lt;&#39;</span><span class="p">]},</span>
<span class="c"> 42. </span>  <span class="p">{</span><span class="s1">&#39;right&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&gt;&lt;)))*&gt;&#39;</span><span class="p">],</span>      <span class="s1">&#39;left&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&lt;*(((&gt;&lt;&#39;</span><span class="p">]},</span>
<span class="c"> 43. </span>  <span class="p">{</span><span class="s1">&#39;right&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;}-[[[*&gt;&#39;</span><span class="p">],</span>      <span class="s1">&#39;left&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&lt;*]]]-{&#39;</span><span class="p">]},</span>
<span class="c"> 44. </span>  <span class="p">{</span><span class="s1">&#39;right&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;]-&lt;)))b&gt;&#39;</span><span class="p">],</span>     <span class="s1">&#39;left&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&lt;d(((&gt;-[&#39;</span><span class="p">]},</span>
<span class="c"> 45. </span>  <span class="p">{</span><span class="s1">&#39;right&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&gt;&lt;XXX*&gt;&#39;</span><span class="p">],</span>      <span class="s1">&#39;left&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;&lt;*XXX&gt;&lt;&#39;</span><span class="p">]},</span>
<span class="c"> 46. </span>  <span class="p">{</span><span class="s1">&#39;right&#39;</span><span class="p">:</span> <span class="p">[</span><span class="s1">&#39;_.-._.-^=&gt;&#39;</span><span class="p">,</span> <span class="s1">&#39;.-._.-.^=&gt;&#39;</span><span class="p">,</span>
<span class="c"> 47. </span>             <span class="s1">&#39;-._.-._^=&gt;&#39;</span><span class="p">,</span> <span class="s1">&#39;._.-._.^=&gt;&#39;</span><span class="p">],</span>
<span class="c"> 48. </span>   <span class="s1">&#39;left&#39;</span><span class="p">:</span>  <span class="p">[</span><span class="s1">&#39;&lt;=^-._.-._&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;=^.-._.-.&#39;</span><span class="p">,</span>
<span class="c"> 49. </span>             <span class="s1">&#39;&lt;=^_.-._.-&#39;</span><span class="p">,</span> <span class="s1">&#39;&lt;=^._.-._.&#39;</span><span class="p">]},</span>
<span class="c"> 50. </span>  <span class="p">]</span>  <span class="c1"># (!) Try adding your own fish to FISH_TYPES.</span>
<span class="c"> 51. </span><span class="n">LONGEST_FISH_LENGTH</span> <span class="o">=</span> <span class="mi">10</span>  <span class="c1"># Longest single string in FISH_TYPES.</span>
<span class="c"> 52. </span>
<span class="c"> 53. </span><span class="c1"># The x and y positions where a fish runs into the edge of the screen:</span>
<span class="c"> 54. </span><span class="n">LEFT_EDGE</span> <span class="o">=</span> <span class="mi">0</span>
<span class="c"> 55. </span><span class="n">RIGHT_EDGE</span> <span class="o">=</span> <span class="n">WIDTH</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">LONGEST_FISH_LENGTH</span>
<span class="c"> 56. </span><span class="n">TOP_EDGE</span> <span class="o">=</span> <span class="mi">0</span>
<span class="c"> 57. </span><span class="n">BOTTOM_EDGE</span> <span class="o">=</span> <span class="n">HEIGHT</span> <span class="o">-</span> <span class="mi">2</span>
<span class="c"> 58. </span>
<span class="c"> 59. </span>
<span class="c"> 60. </span><span class="k">def</span> <span class="nf">main</span><span class="p">():</span>
<span class="c"> 61. </span>    <span class="k">global</span> <span class="n">FISHES</span><span class="p">,</span> <span class="n">BUBBLERS</span><span class="p">,</span> <span class="n">BUBBLES</span><span class="p">,</span> <span class="n">KELPS</span><span class="p">,</span> <span class="n">STEP</span>
<span class="c"> 62. </span>    <span class="n">bext</span><span class="o">.</span><span class="n">bg</span><span class="p">(</span><span class="s1">&#39;black&#39;</span><span class="p">)</span>
<span class="c"> 63. </span>    <span class="n">bext</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
<span class="c"> 64. </span>
<span class="c"> 65. </span>    <span class="c1"># Generate the global variables:</span>
<span class="c"> 66. </span>    <span class="n">FISHES</span> <span class="o">=</span> <span class="p">[]</span>
<span class="c"> 67. </span>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">NUM_FISH</span><span class="p">):</span>
<span class="c"> 68. </span>        <span class="n">FISHES</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">generateFish</span><span class="p">())</span>
<span class="c"> 69. </span>
<span class="c"> 70. </span>    <span class="c1"># NOTE: Bubbles are drawn, but not the bubblers themselves.</span>
<span class="c"> 71. </span>    <span class="n">BUBBLERS</span> <span class="o">=</span> <span class="p">[]</span>
<span class="c"> 72. </span>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">NUM_BUBBLERS</span><span class="p">):</span>
<span class="c"> 73. </span>        <span class="c1"># Each bubbler starts at a random position.</span>
<span class="c"> 74. </span>        <span class="n">BUBBLERS</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">LEFT_EDGE</span><span class="p">,</span> <span class="n">RIGHT_EDGE</span><span class="p">))</span>
<span class="c"> 75. </span>    <span class="n">BUBBLES</span> <span class="o">=</span> <span class="p">[]</span>
<span class="c"> 76. </span>
<span class="c"> 77. </span>    <span class="n">KELPS</span> <span class="o">=</span> <span class="p">[]</span>
<span class="c"> 78. </span>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">NUM_KELP</span><span class="p">):</span>
<span class="c"> 79. </span>        <span class="n">kelpx</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="n">LEFT_EDGE</span><span class="p">,</span> <span class="n">RIGHT_EDGE</span><span class="p">)</span>
<span class="c"> 80. </span>        <span class="n">kelp</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="n">kelpx</span><span class="p">,</span> <span class="s1">&#39;segments&#39;</span><span class="p">:</span> <span class="p">[]}</span>
<span class="c"> 81. </span>        <span class="c1"># Generate each segment of the kelp:</span>
<span class="c"> 82. </span>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">6</span><span class="p">,</span> <span class="n">HEIGHT</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)):</span>
<span class="c"> 83. </span>            <span class="n">kelp</span><span class="p">[</span><span class="s1">&#39;segments&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="s1">&#39;(&#39;</span><span class="p">,</span> <span class="s1">&#39;)&#39;</span><span class="p">]))</span>
<span class="c"> 84. </span>        <span class="n">KELPS</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">kelp</span><span class="p">)</span>
<span class="c"> 85. </span>
<span class="c"> 86. </span>    <span class="c1"># Run the simulation:</span>
<span class="c"> 87. </span>    <span class="n">STEP</span> <span class="o">=</span> <span class="mi">1</span>
<span class="c"> 88. </span>    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>
<span class="c"> 89. </span>        <span class="n">simulateAquarium</span><span class="p">()</span>
<span class="c"> 90. </span>        <span class="n">drawAquarium</span><span class="p">()</span>
<span class="c"> 91. </span>        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span> <span class="o">/</span> <span class="n">FRAMES_PER_SECOND</span><span class="p">)</span>
<span class="c"> 92. </span>        <span class="n">clearAquarium</span><span class="p">()</span>
<span class="c"> 93. </span>        <span class="n">STEP</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="c"> 94. </span>
<span class="c"> 95. </span>
<span class="c"> 96. </span><span class="k">def</span> <span class="nf">getRandomColor</span><span class="p">():</span>
<span class="c"> 97. </span>    <span class="sd">&quot;&quot;&quot;Return a string of a random color.&quot;&quot;&quot;</span>
<span class="c"> 98. </span>    <span class="k">return</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">((</span><span class="s1">&#39;black&#39;</span><span class="p">,</span> <span class="s1">&#39;red&#39;</span><span class="p">,</span> <span class="s1">&#39;green&#39;</span><span class="p">,</span> <span class="s1">&#39;yellow&#39;</span><span class="p">,</span> <span class="s1">&#39;blue&#39;</span><span class="p">,</span>
<span class="c"> 99. </span>                          <span class="s1">&#39;purple&#39;</span><span class="p">,</span> <span class="s1">&#39;cyan&#39;</span><span class="p">,</span> <span class="s1">&#39;white&#39;</span><span class="p">))</span>
<span class="c">100. </span>
<span class="c">101. </span>
<span class="c">102. </span><span class="k">def</span> <span class="nf">generateFish</span><span class="p">():</span>
<span class="c">103. </span>    <span class="sd">&quot;&quot;&quot;Return a dictionary that represents a fish.&quot;&quot;&quot;</span>
<span class="c">104. </span>    <span class="n">fishType</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">FISH_TYPES</span><span class="p">)</span>
<span class="c">105. </span>
<span class="c">106. </span>    <span class="c1"># Set up colors for each character in the fish text:</span>
<span class="c">107. </span>    <span class="n">colorPattern</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">((</span><span class="s1">&#39;random&#39;</span><span class="p">,</span> <span class="s1">&#39;head-tail&#39;</span><span class="p">,</span> <span class="s1">&#39;single&#39;</span><span class="p">))</span>
<span class="c">108. </span>    <span class="n">fishLength</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">fishType</span><span class="p">[</span><span class="s1">&#39;right&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">])</span>
<span class="c">109. </span>    <span class="k">if</span> <span class="n">colorPattern</span> <span class="o">==</span> <span class="s1">&#39;random&#39;</span><span class="p">:</span>  <span class="c1"># All parts are randomly colored.</span>
<span class="c">110. </span>        <span class="n">colors</span> <span class="o">=</span> <span class="p">[]</span>
<span class="c">111. </span>        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">fishLength</span><span class="p">):</span>
<span class="c">112. </span>            <span class="n">colors</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">getRandomColor</span><span class="p">())</span>
<span class="c">113. </span>    <span class="k">if</span> <span class="n">colorPattern</span> <span class="o">==</span> <span class="s1">&#39;single&#39;</span> <span class="ow">or</span> <span class="n">colorPattern</span> <span class="o">==</span> <span class="s1">&#39;head-tail&#39;</span><span class="p">:</span>
<span class="c">114. </span>        <span class="n">colors</span> <span class="o">=</span> <span class="p">[</span><span class="n">getRandomColor</span><span class="p">()]</span> <span class="o">*</span> <span class="n">fishLength</span>  <span class="c1"># All the same color.</span>
<span class="c">115. </span>    <span class="k">if</span> <span class="n">colorPattern</span> <span class="o">==</span> <span class="s1">&#39;head-tail&#39;</span><span class="p">:</span>  <span class="c1"># Head/tail different from body.</span>
<span class="c">116. </span>        <span class="n">headTailColor</span> <span class="o">=</span> <span class="n">getRandomColor</span><span class="p">()</span>
<span class="c">117. </span>        <span class="n">colors</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">headTailColor</span>  <span class="c1"># Set head color.</span>
<span class="c">118. </span>        <span class="n">colors</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">headTailColor</span>  <span class="c1"># Set tail color.</span>
<span class="c">119. </span>
<span class="c">120. </span>    <span class="c1"># Set up the rest of fish data structure:</span>
<span class="c">121. </span>    <span class="n">fish</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;right&#39;</span><span class="p">:</span>            <span class="n">fishType</span><span class="p">[</span><span class="s1">&#39;right&#39;</span><span class="p">],</span>
<span class="c">122. </span>            <span class="s1">&#39;left&#39;</span><span class="p">:</span>             <span class="n">fishType</span><span class="p">[</span><span class="s1">&#39;left&#39;</span><span class="p">],</span>
<span class="c">123. </span>            <span class="s1">&#39;colors&#39;</span><span class="p">:</span>           <span class="n">colors</span><span class="p">,</span>
<span class="c">124. </span>            <span class="s1">&#39;hSpeed&#39;</span><span class="p">:</span>           <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">),</span>
<span class="c">125. </span>            <span class="s1">&#39;vSpeed&#39;</span><span class="p">:</span>           <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">5</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span>
<span class="c">126. </span>            <span class="s1">&#39;timeToHDirChange&#39;</span><span class="p">:</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">60</span><span class="p">),</span>
<span class="c">127. </span>            <span class="s1">&#39;timeToVDirChange&#39;</span><span class="p">:</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">20</span><span class="p">),</span>
<span class="c">128. </span>            <span class="s1">&#39;goingRight&#39;</span><span class="p">:</span>       <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">]),</span>
<span class="c">129. </span>            <span class="s1">&#39;goingDown&#39;</span><span class="p">:</span>        <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">([</span><span class="kc">True</span><span class="p">,</span> <span class="kc">False</span><span class="p">])}</span>
<span class="c">130. </span>
<span class="c">131. </span>    <span class="c1"># &#39;x&#39; is always the leftmost side of the fish body:</span>
<span class="c">132. </span>    <span class="n">fish</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">WIDTH</span> <span class="o">-</span> <span class="mi">1</span> <span class="o">-</span> <span class="n">LONGEST_FISH_LENGTH</span><span class="p">)</span>
<span class="c">133. </span>    <span class="n">fish</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">HEIGHT</span> <span class="o">-</span> <span class="mi">2</span><span class="p">)</span>
<span class="c">134. </span>    <span class="k">return</span> <span class="n">fish</span>
<span class="c">135. </span>
<span class="c">136. </span>
<span class="c">137. </span><span class="k">def</span> <span class="nf">simulateAquarium</span><span class="p">():</span>
<span class="c">138. </span>    <span class="sd">&quot;&quot;&quot;Simulate the movements in the aquarium for one step.&quot;&quot;&quot;</span>
<span class="c">139. </span>    <span class="k">global</span> <span class="n">FISHES</span><span class="p">,</span> <span class="n">BUBBLERS</span><span class="p">,</span> <span class="n">BUBBLES</span><span class="p">,</span> <span class="n">KELP</span><span class="p">,</span> <span class="n">STEP</span>
<span class="c">140. </span>
<span class="c">141. </span>    <span class="c1"># Simulate the fish for one step:</span>
<span class="c">142. </span>    <span class="k">for</span> <span class="n">fish</span> <span class="ow">in</span> <span class="n">FISHES</span><span class="p">:</span>
<span class="c">143. </span>        <span class="c1"># Move the fish horizontally:</span>
<span class="c">144. </span>        <span class="k">if</span> <span class="n">STEP</span> <span class="o">%</span> <span class="n">fish</span><span class="p">[</span><span class="s1">&#39;hSpeed&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<span class="c">145. </span>            <span class="k">if</span> <span class="n">fish</span><span class="p">[</span><span class="s1">&#39;goingRight&#39;</span><span class="p">]:</span>
<span class="c">146. </span>                <span class="k">if</span> <span class="n">fish</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">RIGHT_EDGE</span><span class="p">:</span>
<span class="c">147. </span>                    <span class="n">fish</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>  <span class="c1"># Move the fish right.</span>
<span class="c">148. </span>                <span class="k">else</span><span class="p">:</span>
<span class="c">149. </span>                    <span class="n">fish</span><span class="p">[</span><span class="s1">&#39;goingRight&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>  <span class="c1"># Turn the fish around.</span>
<span class="c">150. </span>                    <span class="n">fish</span><span class="p">[</span><span class="s1">&#39;colors&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>  <span class="c1"># Turn the colors around.</span>
<span class="c">151. </span>            <span class="k">else</span><span class="p">:</span>
<span class="c">152. </span>                <span class="k">if</span> <span class="n">fish</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">LEFT_EDGE</span><span class="p">:</span>
<span class="c">153. </span>                    <span class="n">fish</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">]</span> <span class="o">-=</span> <span class="mi">1</span>  <span class="c1"># Move the fish left.</span>
<span class="c">154. </span>                <span class="k">else</span><span class="p">:</span>
<span class="c">155. </span>                    <span class="n">fish</span><span class="p">[</span><span class="s1">&#39;goingRight&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># Turn the fish around.</span>
<span class="c">156. </span>                    <span class="n">fish</span><span class="p">[</span><span class="s1">&#39;colors&#39;</span><span class="p">]</span><span class="o">.</span><span class="n">reverse</span><span class="p">()</span>  <span class="c1"># Turn the colors around.</span>
<span class="c">157. </span>
<span class="c">158. </span>        <span class="c1"># Fish can randomly change their horizontal direction:</span>
<span class="c">159. </span>        <span class="n">fish</span><span class="p">[</span><span class="s1">&#39;timeToHDirChange&#39;</span><span class="p">]</span> <span class="o">-=</span> <span class="mi">1</span>
<span class="c">160. </span>        <span class="k">if</span> <span class="n">fish</span><span class="p">[</span><span class="s1">&#39;timeToHDirChange&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<span class="c">161. </span>            <span class="n">fish</span><span class="p">[</span><span class="s1">&#39;timeToHDirChange&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">60</span><span class="p">)</span>
<span class="c">162. </span>            <span class="c1"># Turn the fish around:</span>
<span class="c">163. </span>            <span class="n">fish</span><span class="p">[</span><span class="s1">&#39;goingRight&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">fish</span><span class="p">[</span><span class="s1">&#39;goingRight&#39;</span><span class="p">]</span>
<span class="c">164. </span>
<span class="c">165. </span>        <span class="c1"># Move the fish vertically:</span>
<span class="c">166. </span>        <span class="k">if</span> <span class="n">STEP</span> <span class="o">%</span> <span class="n">fish</span><span class="p">[</span><span class="s1">&#39;vSpeed&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<span class="c">167. </span>            <span class="k">if</span> <span class="n">fish</span><span class="p">[</span><span class="s1">&#39;goingDown&#39;</span><span class="p">]:</span>
<span class="c">168. </span>                <span class="k">if</span> <span class="n">fish</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">BOTTOM_EDGE</span><span class="p">:</span>
<span class="c">169. </span>                    <span class="n">fish</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>  <span class="c1"># Move the fish down.</span>
<span class="c">170. </span>                <span class="k">else</span><span class="p">:</span>
<span class="c">171. </span>                    <span class="n">fish</span><span class="p">[</span><span class="s1">&#39;goingDown&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>  <span class="c1"># Turn the fish around.</span>
<span class="c">172. </span>            <span class="k">else</span><span class="p">:</span>
<span class="c">173. </span>                <span class="k">if</span> <span class="n">fish</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">TOP_EDGE</span><span class="p">:</span>
<span class="c">174. </span>                    <span class="n">fish</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">]</span> <span class="o">-=</span> <span class="mi">1</span>  <span class="c1"># Move the fish up.</span>
<span class="c">175. </span>                <span class="k">else</span><span class="p">:</span>
<span class="c">176. </span>                    <span class="n">fish</span><span class="p">[</span><span class="s1">&#39;goingDown&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>  <span class="c1"># Turn the fish around.</span>
<span class="c">177. </span>
<span class="c">178. </span>        <span class="c1"># Fish can randomly change their vertical direction:</span>
<span class="c">179. </span>        <span class="n">fish</span><span class="p">[</span><span class="s1">&#39;timeToVDirChange&#39;</span><span class="p">]</span> <span class="o">-=</span> <span class="mi">1</span>
<span class="c">180. </span>        <span class="k">if</span> <span class="n">fish</span><span class="p">[</span><span class="s1">&#39;timeToVDirChange&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<span class="c">181. </span>            <span class="n">fish</span><span class="p">[</span><span class="s1">&#39;timeToVDirChange&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span>
<span class="c">182. </span>            <span class="c1"># Turn the fish around:</span>
<span class="c">183. </span>            <span class="n">fish</span><span class="p">[</span><span class="s1">&#39;goingDown&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">fish</span><span class="p">[</span><span class="s1">&#39;goingDown&#39;</span><span class="p">]</span>
<span class="c">184. </span>
<span class="c">185. </span>    <span class="c1"># Generate bubbles from bubblers:</span>
<span class="c">186. </span>    <span class="k">for</span> <span class="n">bubbler</span> <span class="ow">in</span> <span class="n">BUBBLERS</span><span class="p">:</span>
<span class="c">187. </span>        <span class="c1"># There is a 1 in 5 chance of making a bubble:</span>
<span class="c">188. </span>        <span class="k">if</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">5</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
<span class="c">189. </span>            <span class="n">BUBBLES</span><span class="o">.</span><span class="n">append</span><span class="p">({</span><span class="s1">&#39;x&#39;</span><span class="p">:</span> <span class="n">bubbler</span><span class="p">,</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span> <span class="n">HEIGHT</span> <span class="o">-</span> <span class="mi">2</span><span class="p">})</span>
<span class="c">190. </span>
<span class="c">191. </span>    <span class="c1"># Move the bubbles:</span>
<span class="c">192. </span>    <span class="k">for</span> <span class="n">bubble</span> <span class="ow">in</span> <span class="n">BUBBLES</span><span class="p">:</span>
<span class="c">193. </span>        <span class="n">diceRoll</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">6</span><span class="p">)</span>
<span class="c">194. </span>        <span class="k">if</span> <span class="p">(</span><span class="n">diceRoll</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">bubble</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">LEFT_EDGE</span><span class="p">):</span>
<span class="c">195. </span>            <span class="n">bubble</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">]</span> <span class="o">-=</span> <span class="mi">1</span>  <span class="c1"># Bubble goes left.</span>
<span class="c">196. </span>        <span class="k">elif</span> <span class="p">(</span><span class="n">diceRoll</span> <span class="o">==</span> <span class="mi">2</span><span class="p">)</span> <span class="ow">and</span> <span class="p">(</span><span class="n">bubble</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">]</span> <span class="o">!=</span> <span class="n">RIGHT_EDGE</span><span class="p">):</span>
<span class="c">197. </span>            <span class="n">bubble</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>  <span class="c1"># Bubble goes right.</span>
<span class="c">198. </span>
<span class="c">199. </span>        <span class="n">bubble</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">]</span> <span class="o">-=</span> <span class="mi">1</span>  <span class="c1"># The bubble always goes up.</span>
<span class="c">200. </span>
<span class="c">201. </span>    <span class="c1"># Iterate over BUBBLES in reverse because I&#39;m deleting from BUBBLES</span>
<span class="c">202. </span>    <span class="c1"># while iterating over it.</span>
<span class="c">203. </span>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">BUBBLES</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">):</span>
<span class="c">204. </span>        <span class="k">if</span> <span class="n">BUBBLES</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="s1">&#39;y&#39;</span><span class="p">]</span> <span class="o">==</span> <span class="n">TOP_EDGE</span><span class="p">:</span>  <span class="c1"># Delete bubbles that reach the top.</span>
<span class="c">205. </span>            <span class="k">del</span> <span class="n">BUBBLES</span><span class="p">[</span><span class="n">i</span><span class="p">]</span>
<span class="c">206. </span>
<span class="c">207. </span>    <span class="c1"># Simulate the kelp waving for one step:</span>
<span class="c">208. </span>    <span class="k">for</span> <span class="n">kelp</span> <span class="ow">in</span> <span class="n">KELPS</span><span class="p">:</span>
<span class="c">209. </span>        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">kelpSegment</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">kelp</span><span class="p">[</span><span class="s1">&#39;segments&#39;</span><span class="p">]):</span>
<span class="c">210. </span>            <span class="c1"># 1 in 20 chance to change waving:</span>
<span class="c">211. </span>            <span class="k">if</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="mi">20</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
<span class="c">212. </span>                <span class="k">if</span> <span class="n">kelpSegment</span> <span class="o">==</span> <span class="s1">&#39;(&#39;</span><span class="p">:</span>
<span class="c">213. </span>                    <span class="n">kelp</span><span class="p">[</span><span class="s1">&#39;segments&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;)&#39;</span>
<span class="c">214. </span>                <span class="k">elif</span> <span class="n">kelpSegment</span> <span class="o">==</span> <span class="s1">&#39;)&#39;</span><span class="p">:</span>
<span class="c">215. </span>                    <span class="n">kelp</span><span class="p">[</span><span class="s1">&#39;segments&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;(&#39;</span>
<span class="c">216. </span>
<span class="c">217. </span>
<span class="c">218. </span><span class="k">def</span> <span class="nf">drawAquarium</span><span class="p">():</span>
<span class="c">219. </span>    <span class="sd">&quot;&quot;&quot;Draw the aquarium on the screen.&quot;&quot;&quot;</span>
<span class="c">220. </span>    <span class="k">global</span> <span class="n">FISHES</span><span class="p">,</span> <span class="n">BUBBLERS</span><span class="p">,</span> <span class="n">BUBBLES</span><span class="p">,</span> <span class="n">KELP</span><span class="p">,</span> <span class="n">STEP</span>
<span class="c">221. </span>
<span class="c">222. </span>    <span class="c1"># Draw quit message.</span>
<span class="c">223. </span>    <span class="n">bext</span><span class="o">.</span><span class="n">fg</span><span class="p">(</span><span class="s1">&#39;white&#39;</span><span class="p">)</span>
<span class="c">224. </span>    <span class="n">bext</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>
<span class="c">225. </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Fish Tank, by Al Sweigart    Ctrl-C to quit.&#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="c">226. </span>
<span class="c">227. </span>    <span class="c1"># Draw the bubbles:</span>
<span class="c">228. </span>    <span class="n">bext</span><span class="o">.</span><span class="n">fg</span><span class="p">(</span><span class="s1">&#39;white&#39;</span><span class="p">)</span>
<span class="c">229. </span>    <span class="k">for</span> <span class="n">bubble</span> <span class="ow">in</span> <span class="n">BUBBLES</span><span class="p">:</span>
<span class="c">230. </span>        <span class="n">bext</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="n">bubble</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">],</span> <span class="n">bubble</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">])</span>
<span class="c">231. </span>        <span class="nb">print</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">((</span><span class="s1">&#39;o&#39;</span><span class="p">,</span> <span class="s1">&#39;O&#39;</span><span class="p">)),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="c">232. </span>
<span class="c">233. </span>    <span class="c1"># Draw the fish:</span>
<span class="c">234. </span>    <span class="k">for</span> <span class="n">fish</span> <span class="ow">in</span> <span class="n">FISHES</span><span class="p">:</span>
<span class="c">235. </span>        <span class="n">bext</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="n">fish</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">],</span> <span class="n">fish</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">])</span>
<span class="c">236. </span>
<span class="c">237. </span>        <span class="c1"># Get the correct right- or left-facing fish text.</span>
<span class="c">238. </span>        <span class="k">if</span> <span class="n">fish</span><span class="p">[</span><span class="s1">&#39;goingRight&#39;</span><span class="p">]:</span>
<span class="c">239. </span>            <span class="n">fishText</span> <span class="o">=</span> <span class="n">fish</span><span class="p">[</span><span class="s1">&#39;right&#39;</span><span class="p">][</span><span class="n">STEP</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">fish</span><span class="p">[</span><span class="s1">&#39;right&#39;</span><span class="p">])]</span>
<span class="c">240. </span>        <span class="k">else</span><span class="p">:</span>
<span class="c">241. </span>            <span class="n">fishText</span> <span class="o">=</span> <span class="n">fish</span><span class="p">[</span><span class="s1">&#39;left&#39;</span><span class="p">][</span><span class="n">STEP</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">fish</span><span class="p">[</span><span class="s1">&#39;left&#39;</span><span class="p">])]</span>
<span class="c">242. </span>
<span class="c">243. </span>        <span class="c1"># Draw each character of the fish text in the right color.</span>
<span class="c">244. </span>        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">fishPart</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">fishText</span><span class="p">):</span>
<span class="c">245. </span>            <span class="n">bext</span><span class="o">.</span><span class="n">fg</span><span class="p">(</span><span class="n">fish</span><span class="p">[</span><span class="s1">&#39;colors&#39;</span><span class="p">][</span><span class="n">i</span><span class="p">])</span>
<span class="c">246. </span>            <span class="nb">print</span><span class="p">(</span><span class="n">fishPart</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="c">247. </span>
<span class="c">248. </span>    <span class="c1"># Draw the kelp:</span>
<span class="c">249. </span>    <span class="n">bext</span><span class="o">.</span><span class="n">fg</span><span class="p">(</span><span class="s1">&#39;green&#39;</span><span class="p">)</span>
<span class="c">250. </span>    <span class="k">for</span> <span class="n">kelp</span> <span class="ow">in</span> <span class="n">KELPS</span><span class="p">:</span>
<span class="c">251. </span>        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">kelpSegment</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">kelp</span><span class="p">[</span><span class="s1">&#39;segments&#39;</span><span class="p">]):</span>
<span class="c">252. </span>            <span class="k">if</span> <span class="n">kelpSegment</span> <span class="o">==</span> <span class="s1">&#39;(&#39;</span><span class="p">:</span>
<span class="c">253. </span>                <span class="n">bext</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="n">kelp</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">],</span> <span class="n">BOTTOM_EDGE</span> <span class="o">-</span> <span class="n">i</span><span class="p">)</span>
<span class="c">254. </span>            <span class="k">elif</span> <span class="n">kelpSegment</span> <span class="o">==</span> <span class="s1">&#39;)&#39;</span><span class="p">:</span>
<span class="c">255. </span>                <span class="n">bext</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="n">kelp</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">BOTTOM_EDGE</span> <span class="o">-</span> <span class="n">i</span><span class="p">)</span>
<span class="c">256. </span>            <span class="nb">print</span><span class="p">(</span><span class="n">kelpSegment</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="c">257. </span>
<span class="c">258. </span>    <span class="c1"># Draw the sand on the bottom:</span>
<span class="c">259. </span>    <span class="n">bext</span><span class="o">.</span><span class="n">fg</span><span class="p">(</span><span class="s1">&#39;yellow&#39;</span><span class="p">)</span>
<span class="c">260. </span>    <span class="n">bext</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">HEIGHT</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
<span class="c">261. </span>    <span class="nb">print</span><span class="p">(</span><span class="nb">chr</span><span class="p">(</span><span class="mi">9617</span><span class="p">)</span> <span class="o">*</span> <span class="p">(</span><span class="n">WIDTH</span> <span class="o">-</span> <span class="mi">1</span><span class="p">),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>  <span class="c1"># Draws &#39;░&#39; characters.</span>
<span class="c">262. </span>
<span class="c">263. </span>    <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>  <span class="c1"># (Required for bext-using programs.)</span>
<span class="c">264. </span>
<span class="c">265. </span>
<span class="c">266. </span><span class="k">def</span> <span class="nf">clearAquarium</span><span class="p">():</span>
<span class="c">267. </span>    <span class="sd">&quot;&quot;&quot;Draw empty spaces over everything on the screen.&quot;&quot;&quot;</span>
<span class="c">268. </span>    <span class="k">global</span> <span class="n">FISHES</span><span class="p">,</span> <span class="n">BUBBLERS</span><span class="p">,</span> <span class="n">BUBBLES</span><span class="p">,</span> <span class="n">KELP</span>
<span class="c">269. </span>
<span class="c">270. </span>    <span class="c1"># Draw the bubbles:</span>
<span class="c">271. </span>    <span class="k">for</span> <span class="n">bubble</span> <span class="ow">in</span> <span class="n">BUBBLES</span><span class="p">:</span>
<span class="c">272. </span>        <span class="n">bext</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="n">bubble</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">],</span> <span class="n">bubble</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">])</span>
<span class="c">273. </span>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="c">274. </span>
<span class="c">275. </span>    <span class="c1"># Draw the fish:</span>
<span class="c">276. </span>    <span class="k">for</span> <span class="n">fish</span> <span class="ow">in</span> <span class="n">FISHES</span><span class="p">:</span>
<span class="c">277. </span>        <span class="n">bext</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="n">fish</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">],</span> <span class="n">fish</span><span class="p">[</span><span class="s1">&#39;y&#39;</span><span class="p">])</span>
<span class="c">278. </span>
<span class="c">279. </span>        <span class="c1"># Draw each character of the fish text in the right color.</span>
<span class="c">280. </span>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; &#39;</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">fish</span><span class="p">[</span><span class="s1">&#39;left&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]),</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="c">281. </span>
<span class="c">282. </span>    <span class="c1"># Draw the kelp:</span>
<span class="c">283. </span>    <span class="k">for</span> <span class="n">kelp</span> <span class="ow">in</span> <span class="n">KELPS</span><span class="p">:</span>
<span class="c">284. </span>        <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">kelpSegment</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">kelp</span><span class="p">[</span><span class="s1">&#39;segments&#39;</span><span class="p">]):</span>
<span class="c">285. </span>            <span class="n">bext</span><span class="o">.</span><span class="n">goto</span><span class="p">(</span><span class="n">kelp</span><span class="p">[</span><span class="s1">&#39;x&#39;</span><span class="p">],</span> <span class="n">HEIGHT</span> <span class="o">-</span> <span class="mi">2</span> <span class="o">-</span> <span class="n">i</span><span class="p">)</span>
<span class="c">286. </span>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;  &#39;</span><span class="p">,</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>
<span class="c">287. </span>
<span class="c">288. </span>    <span class="n">sys</span><span class="o">.</span><span class="n">stdout</span><span class="o">.</span><span class="n">flush</span><span class="p">()</span>  <span class="c1"># (Required for bext-using programs.)</span>
<span class="c">289. </span>
<span class="c">290. </span>
<span class="c">291. </span><span class="c1"># If this program was run (instead of imported), run the game:</span>
<span class="c">292. </span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
<span class="c">293. </span>    <span class="k">try</span><span class="p">:</span>
<span class="c">294. </span>        <span class="n">main</span><span class="p">()</span>
<span class="c">295. </span>    <span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
<span class="c">296. </span>        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>  <span class="c1"># When Ctrl-C is pressed, end the program.</span>
</pre></div>

<p class="calibre19">After entering the source code and running it a few times, try making experimental changes to it. The comments marked with <code class="calibre22">(!)</code> have suggestions for small changes you can make. On your own, you can also try to figure out how to do the following:</p>
<ul class="calibre25">
<li class="calibre8">Add crabs that move along on the sandy bottom.</li>
<li class="calibre8">Add an ASCII-art castle that appears randomly on the sandy bottom.</li>
<li class="calibre8">Make the fish randomly increase their speed for a short burst.</li>
</ul>
<h2 id="calibre_link-136" class="calibre5">Exploring the Program</h2>
<p class="bodyfirst">Try to find the answers to the following questions. Experiment with some modifications to the code and rerun the program to see what effect the changes have.</p>
<ol class="decimal">
<li value="1" class="calibre8">What happens if you change <code class="calibre22">LONGEST_FISH_LENGTH = 10</code> on line 51 to <code class="calibre22">LONGEST_FISH_LENGTH = 50</code>?</li>
<li value="2" class="calibre8">What happens if you change <code class="calibre22">'right': fishType['right']</code> on line 121 to <code class="calibre22">'right': fishType['left']</code>?</li>
<li value="3" class="calibre8">What happens if you change <code class="calibre22">bext.fg('green')</code> on line 249 to <code class="calibre22">bext.fg('red')</code>?</li>
<li value="4" class="calibre8">What happens if you delete or comment out <code class="calibre22">clearAquarium()</code> on line 92?</li>
<li value="5" class="calibre8">What happens if you change <code class="calibre22">bext.fg(fish['colors'][i])</code> on line 245 to <code class="calibre22">bext.fg('random')</code>?</li>
<li value="6" class="calibre8">What happens if you change <code class="calibre22">random.randint(10, 60)</code> on line 161 to <code class="calibre22">1</code>?</li>
</ol>
</section>
</div>








<a href="project26.html">Prev: Fibonacci</a> | <a href="project28.html">Next: Flooder</a>
</body></html>