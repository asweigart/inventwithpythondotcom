<html><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><link href="style.css" rel="stylesheet" type="text/css" /><link rel="stylesheet" type="text/css" href="pygments.css"><title>Conway's Game of Life</title></head><body style="background-color: #fffeee;">

<script type="text/javascript">
//<![CDATA[

var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-5459430-3']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();

//]]>
</script>


<div style="background-color: #eeeddd; float: right; height: 310px; font-family: sans-serif;" id="otherbooks">
  <a href="#" onclick="document.getElementById('otherbooks').outerHTML='';" style="vertical-align: top;">(close)</a><br />

  <a target="_blank" href="https://nostarch.com/automatestuff2" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_automate.link');"><img src="/images/cover_automate2_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://nostarch.com/big-book-small-python-projects" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_bigbookpython.link');"><img src="/images/cover_bigbookpython_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://nostarch.com/beyond-basic-stuff-python" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_beyond.link');"><img src="/images/cover_beyond_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://nostarch.com/inventwithpython" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_invent.link');"><img src="/images/cover_invent4th_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://www.amazon.com/Making-Games-Python-Pygame-Sweigart/dp/1469901730?ie=UTF8&amp;tag=playwithpyth-20&amp;linkCode=as2&amp;camp=1789&amp;creative=9325&amp;creativeASIN=1469901730" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_pygame.link');"><img src="/images/cover_makinggames_thumb.webp" style="height: 200px; border: solid black 1px; /"></a>
  <a target="_blank" href="https://nostarch.com/crackingcodes" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_hacking.link');"><img src="/images/cover_crackingcodes_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://nostarch.com/scratchplayground"><img src="/images/cover_scratchprogrammingplayground_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://nostarch.com/codingwithminecraft"><img src="/images/cover_codingwithminecraft_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <br />
  <a href="https://inventwithpython.com/automateudemy">Use this link to get 70% off the Automate the Boring Stuff online video course.</a><br />
  <a href="https://www.patreon.com/AlSweigart">Support me on Patreon</a>
</div>

<a href="project12.html">Prev: Collatz Sequence</a> | <a href="project14.html">Next: Countdown</a>





<div type="bodymatter chapter" class="calibre1" id="calibre_link-0">
<section class="toclist">
<header class="calibre10">
<h1 class="chapter">
<span class="chapternumber">#13</span><br class="calibre14" />
<span class="chaptertitle">Conway’s Game of Life</span></h1>
</header>
<figure class="opener">
<img src="images/000002.webp" alt="" class="calibre12" />
</figure>
<p class="chapterintro">Conway’s Game of Life is a cellular automata simulation that follows simple rules to create interesting patterns. It was invented by mathematician John Conway in 1970 and popularized by Martin Gardner’s “Mathematical Games” column in <em class="calibre9">Scientific American</em>. Today, it’s a favorite among programmers and computer scientists, though it’s more an interesting visualization than a true “game.” The two-dimensional board has a grid of “cells,” each of which follows three simple rules:</p>
<ul class="calibre25">
<li class="calibre8">Living cells with two or three neighbors stay alive in the next step of the simulation.</li>
<li class="calibre8">Dead cells with exactly three neighbors become alive in the next step of the simulation.</li>
<li class="calibre8">Any other cell dies or stays dead in the next step of the simulation.</li>
</ul>
<p class="calibre19">The living or dead state of the cells in the next step of the simulation depends entirely on their current state. The cells don’t “remember” any older states. There is a large body of research regarding the patterns that these simple rules produce. Tragically, Professor Conway passed away of complications from COVID-19 in April 2020. More information about Conway’s Game of Life can be found at <a href="https://en.wikipedia.org/wiki/Conway%27s_Game_of_Life" class="linkurl">https://en.wikipedia.org/wiki/Conway%27s_Game_of_Life</a>, and more information about Martin Gardner at <a href="https://en.wikipedia.org/wiki/Martin_Gardner" class="linkurl">https://en.wikipedia.org/wiki/Martin_Gardner</a>.</p>
<h2 id="calibre_link-82" class="calibre5">The Program in Action</h2>
<p class="bodyfirst">When you run <em class="calibre9">conwaysgameoflife.py</em>, the output will look like this:</p>
<pre class="calibre24"><code class="calibre22">             O                  O                 OO      O  O
O     O    O  O                 O                      O OOOO          O OO
OO    O   O                     O          O            O              O O
OO        O    O                          OO                        OO
OO        OO                             O O    O                    OO
                                         OO    O O                    O  OO
            OOO                          OO    OO                       O
                                                O    OOO
                                    O             O                     O O
                   OO             OO OO             OO  O
                   OOO               OO          OOOO    O  O
             O     OO                O O       O  OO  OO O   O    OO
             O  O                 O    O          O   OO O    O  OOO
             O                     OOOO  OO       OO   O    OOOOO O
OO            O                      O   OOO     O OOO        OOOO       O</code></pre>
<h2 id="calibre_link-83" class="calibre5">How It Works</h2>
<p class="bodyfirst">The state of the cells is stored in dictionaries in the <code class="calibre22">cells</code> and <code class="calibre22">nextCells</code> variables. Both dictionaries have <code class="calibre22">(x, y)</code> tuples for keys (where <code class="calibre22">x</code> and <code class="calibre22">y</code> are integers), <code class="calibre22">'O'</code> for living cells, and <code class="calibre22">' '</code> for dead cells. Lines 40 to 44 are set up to print a representation of these dictionaries onto the screen. The <code class="calibre22">cells</code> variable’s dictionary represents the current state of the cells, while <code class="calibre22">nextCells</code> stores the dictionary for the cells in the next step in the simulation.</p>
<div class="highlight"><pre><span></span>
<span class="c"> 1. </span><span class="sd">&quot;&quot;&quot;Conway&#39;s Game of Life, by Al Sweigart al@inventwithpython.com</span>
<span class="c"> 2. </span><span class="sd">The classic cellular automata simulation. Press Ctrl-C to stop.</span>
<span class="c"> 3. </span><span class="sd">More info at: https://en.wikipedia.org/wiki/Conway%27s_Game_of_Life</span>
<span class="c"> 4. </span><span class="sd">This code is available at https://nostarch.com/big-book-small-python-programming</span>
<span class="c"> 5. </span><span class="sd">Tags: short, artistic, simulation&quot;&quot;&quot;</span>
<span class="c"> 6. </span>
<span class="c"> 7. </span><span class="kn">import</span> <span class="nn">copy</span><span class="o">,</span> <span class="nn">random</span><span class="o">,</span> <span class="nn">sys</span><span class="o">,</span> <span class="nn">time</span>
<span class="c"> 8. </span>
<span class="c"> 9. </span><span class="c1"># Set up the constants:</span>
<span class="c">10. </span><span class="n">WIDTH</span> <span class="o">=</span> <span class="mi">79</span>   <span class="c1"># The width of the cell grid.</span>
<span class="c">11. </span><span class="n">HEIGHT</span> <span class="o">=</span> <span class="mi">20</span>  <span class="c1"># The height of the cell grid.</span>
<span class="c">12. </span>
<span class="c">13. </span><span class="c1"># (!) Try changing ALIVE to &#39;#&#39; or another character:</span>
<span class="c">14. </span><span class="n">ALIVE</span> <span class="o">=</span> <span class="s1">&#39;O&#39;</span>  <span class="c1"># The character representing a living cell.</span>
<span class="c">15. </span><span class="c1"># (!) Try changing DEAD to &#39;.&#39; or another character:</span>
<span class="c">16. </span><span class="n">DEAD</span> <span class="o">=</span> <span class="s1">&#39; &#39;</span>   <span class="c1"># The character representing a dead cell.</span>
<span class="c">17. </span>
<span class="c">18. </span><span class="c1"># (!) Try changing ALIVE to &#39;|&#39; and DEAD to &#39;-&#39;.</span>
<span class="c">19. </span>
<span class="c">20. </span><span class="c1"># The cells and nextCells are dictionaries for the state of the game.</span>
<span class="c">21. </span><span class="c1"># Their keys are (x, y) tuples and their values are one of the ALIVE</span>
<span class="c">22. </span><span class="c1"># or DEAD values.</span>
<span class="c">23. </span><span class="n">nextCells</span> <span class="o">=</span> <span class="p">{}</span>
<span class="c">24. </span><span class="c1"># Put random dead and alive cells into nextCells:</span>
<span class="c">25. </span><span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">WIDTH</span><span class="p">):</span>  <span class="c1"># Loop over every possible column.</span>
<span class="c">26. </span>    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">HEIGHT</span><span class="p">):</span>  <span class="c1"># Loop over every possible row.</span>
<span class="c">27. </span>        <span class="c1"># 50/50 chance for starting cells being alive or dead.</span>
<span class="c">28. </span>        <span class="k">if</span> <span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<span class="c">29. </span>            <span class="n">nextCells</span><span class="p">[(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)]</span> <span class="o">=</span> <span class="n">ALIVE</span>  <span class="c1"># Add a living cell.</span>
<span class="c">30. </span>        <span class="k">else</span><span class="p">:</span>
<span class="c">31. </span>            <span class="n">nextCells</span><span class="p">[(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)]</span> <span class="o">=</span> <span class="n">DEAD</span>  <span class="c1"># Add a dead cell.</span>
<span class="c">32. </span>
<span class="c">33. </span><span class="k">while</span> <span class="kc">True</span><span class="p">:</span>  <span class="c1"># Main program loop.</span>
<span class="c">34. </span>    <span class="c1"># Each iteration of this loop is a step of the simulation.</span>
<span class="c">35. </span>
<span class="c">36. </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">*</span> <span class="mi">50</span><span class="p">)</span>  <span class="c1"># Separate each step with newlines.</span>
<span class="c">37. </span>    <span class="n">cells</span> <span class="o">=</span> <span class="n">copy</span><span class="o">.</span><span class="n">deepcopy</span><span class="p">(</span><span class="n">nextCells</span><span class="p">)</span>
<span class="c">38. </span>
<span class="c">39. </span>    <span class="c1"># Print cells on the screen:</span>
<span class="c">40. </span>    <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">HEIGHT</span><span class="p">):</span>
<span class="c">41. </span>        <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">WIDTH</span><span class="p">):</span>
<span class="c">42. </span>            <span class="nb">print</span><span class="p">(</span><span class="n">cells</span><span class="p">[(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)],</span> <span class="n">end</span><span class="o">=</span><span class="s1">&#39;&#39;</span><span class="p">)</span>  <span class="c1"># Print the # or space.</span>
<span class="c">43. </span>        <span class="nb">print</span><span class="p">()</span>  <span class="c1"># Print a newline at the end of the row.</span>
<span class="c">44. </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Press Ctrl-C to quit.&#39;</span><span class="p">)</span>
<span class="c">45. </span>
<span class="c">46. </span>    <span class="c1"># Calculate the next step&#39;s cells based on current step&#39;s cells:</span>
<span class="c">47. </span>    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">WIDTH</span><span class="p">):</span>
<span class="c">48. </span>        <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">HEIGHT</span><span class="p">):</span>
<span class="c">49. </span>            <span class="c1"># Get the neighboring coordinates of (x, y), even if they</span>
<span class="c">50. </span>            <span class="c1"># wrap around the edge:</span>
<span class="c">51. </span>            <span class="n">left</span>  <span class="o">=</span> <span class="p">(</span><span class="n">x</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="n">WIDTH</span>
<span class="c">52. </span>            <span class="n">right</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="n">WIDTH</span>
<span class="c">53. </span>            <span class="n">above</span> <span class="o">=</span> <span class="p">(</span><span class="n">y</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="n">HEIGHT</span>
<span class="c">54. </span>            <span class="n">below</span> <span class="o">=</span> <span class="p">(</span><span class="n">y</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">%</span> <span class="n">HEIGHT</span>
<span class="c">55. </span>
<span class="c">56. </span>            <span class="c1"># Count the number of living neighbors:</span>
<span class="c">57. </span>            <span class="n">numNeighbors</span> <span class="o">=</span> <span class="mi">0</span>
<span class="c">58. </span>            <span class="k">if</span> <span class="n">cells</span><span class="p">[(</span><span class="n">left</span><span class="p">,</span> <span class="n">above</span><span class="p">)]</span> <span class="o">==</span> <span class="n">ALIVE</span><span class="p">:</span>
<span class="c">59. </span>                <span class="n">numNeighbors</span> <span class="o">+=</span> <span class="mi">1</span>  <span class="c1"># Top-left neighbor is alive.</span>
<span class="c">60. </span>            <span class="k">if</span> <span class="n">cells</span><span class="p">[(</span><span class="n">x</span><span class="p">,</span> <span class="n">above</span><span class="p">)]</span> <span class="o">==</span> <span class="n">ALIVE</span><span class="p">:</span>
<span class="c">61. </span>                <span class="n">numNeighbors</span> <span class="o">+=</span> <span class="mi">1</span>  <span class="c1"># Top neighbor is alive.</span>
<span class="c">62. </span>            <span class="k">if</span> <span class="n">cells</span><span class="p">[(</span><span class="n">right</span><span class="p">,</span> <span class="n">above</span><span class="p">)]</span> <span class="o">==</span> <span class="n">ALIVE</span><span class="p">:</span>
<span class="c">63. </span>                <span class="n">numNeighbors</span> <span class="o">+=</span> <span class="mi">1</span>  <span class="c1"># Top-right neighbor is alive.</span>
<span class="c">64. </span>            <span class="k">if</span> <span class="n">cells</span><span class="p">[(</span><span class="n">left</span><span class="p">,</span> <span class="n">y</span><span class="p">)]</span> <span class="o">==</span> <span class="n">ALIVE</span><span class="p">:</span>
<span class="c">65. </span>                <span class="n">numNeighbors</span> <span class="o">+=</span> <span class="mi">1</span>  <span class="c1"># Left neighbor is alive.</span>
<span class="c">66. </span>            <span class="k">if</span> <span class="n">cells</span><span class="p">[(</span><span class="n">right</span><span class="p">,</span> <span class="n">y</span><span class="p">)]</span> <span class="o">==</span> <span class="n">ALIVE</span><span class="p">:</span>
<span class="c">67. </span>                <span class="n">numNeighbors</span> <span class="o">+=</span> <span class="mi">1</span>  <span class="c1"># Right neighbor is alive.</span>
<span class="c">68. </span>            <span class="k">if</span> <span class="n">cells</span><span class="p">[(</span><span class="n">left</span><span class="p">,</span> <span class="n">below</span><span class="p">)]</span> <span class="o">==</span> <span class="n">ALIVE</span><span class="p">:</span>
<span class="c">69. </span>                <span class="n">numNeighbors</span> <span class="o">+=</span> <span class="mi">1</span>  <span class="c1"># Bottom-left neighbor is alive.</span>
<span class="c">70. </span>            <span class="k">if</span> <span class="n">cells</span><span class="p">[(</span><span class="n">x</span><span class="p">,</span> <span class="n">below</span><span class="p">)]</span> <span class="o">==</span> <span class="n">ALIVE</span><span class="p">:</span>
<span class="c">71. </span>                <span class="n">numNeighbors</span> <span class="o">+=</span> <span class="mi">1</span>  <span class="c1"># Bottom neighbor is alive.</span>
<span class="c">72. </span>            <span class="k">if</span> <span class="n">cells</span><span class="p">[(</span><span class="n">right</span><span class="p">,</span> <span class="n">below</span><span class="p">)]</span> <span class="o">==</span> <span class="n">ALIVE</span><span class="p">:</span>
<span class="c">73. </span>                <span class="n">numNeighbors</span> <span class="o">+=</span> <span class="mi">1</span>  <span class="c1"># Bottom-right neighbor is alive.</span>
<span class="c">74. </span>
<span class="c">75. </span>            <span class="c1"># Set cell based on Conway&#39;s Game of Life rules:</span>
<span class="c">76. </span>            <span class="k">if</span> <span class="n">cells</span><span class="p">[(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)]</span> <span class="o">==</span> <span class="n">ALIVE</span> <span class="ow">and</span> <span class="p">(</span><span class="n">numNeighbors</span> <span class="o">==</span> <span class="mi">2</span>
<span class="c">77. </span>                <span class="ow">or</span> <span class="n">numNeighbors</span> <span class="o">==</span> <span class="mi">3</span><span class="p">):</span>
<span class="c">78. </span>                    <span class="c1"># Living cells with 2 or 3 neighbors stay alive:</span>
<span class="c">79. </span>                    <span class="n">nextCells</span><span class="p">[(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)]</span> <span class="o">=</span> <span class="n">ALIVE</span>
<span class="c">80. </span>            <span class="k">elif</span> <span class="n">cells</span><span class="p">[(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)]</span> <span class="o">==</span> <span class="n">DEAD</span> <span class="ow">and</span> <span class="n">numNeighbors</span> <span class="o">==</span> <span class="mi">3</span><span class="p">:</span>
<span class="c">81. </span>                <span class="c1"># Dead cells with 3 neighbors become alive:</span>
<span class="c">82. </span>                <span class="n">nextCells</span><span class="p">[(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)]</span> <span class="o">=</span> <span class="n">ALIVE</span>
<span class="c">83. </span>            <span class="k">else</span><span class="p">:</span>
<span class="c">84. </span>                <span class="c1"># Everything else dies or stays dead:</span>
<span class="c">85. </span>                <span class="n">nextCells</span><span class="p">[(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">)]</span> <span class="o">=</span> <span class="n">DEAD</span>
<span class="c">86. </span>
<span class="c">87. </span>    <span class="k">try</span><span class="p">:</span>
<span class="c">88. </span>        <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>  <span class="c1"># Add a 1 second pause to reduce flickering.</span>
<span class="c">89. </span>    <span class="k">except</span> <span class="ne">KeyboardInterrupt</span><span class="p">:</span>
<span class="c">90. </span>        <span class="nb">print</span><span class="p">(</span><span class="s2">&quot;Conway&#39;s Game of Life&quot;</span><span class="p">)</span>
<span class="c">91. </span>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;By Al Sweigart al@inventwithpython.com&#39;</span><span class="p">)</span>
<span class="c">92. </span>        <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>  <span class="c1"># When Ctrl-C is pressed, end the program.</span>
</pre></div>

<p class="calibre19">After entering the source code and running it a few times, try making experimental changes to it. The comments marked with <code class="calibre22">(!)</code> have suggestions for small changes you can make. On your own, you can also try to figure out how to do the following:</p>
<ul class="calibre25">
<li class="calibre8">Adjust the percentage of cells that start as living, instead of always using 50 percent.</li>
<li class="calibre8">Add the ability to read in the initial state from a text file, so the user can edit the starting cell states manually.</li>
</ul>
<h2 id="calibre_link-84" class="calibre5">Exploring the Program</h2>
<p class="bodyfirst">Try to find the answers to the following questions. Experiment with some modifications to the code and rerun the program to see what effect the changes have.</p>
<ol class="decimal">
<li value="1" class="calibre8">What happens when you change <code class="calibre22">WIDTH = 79</code> on line 10 to <code class="calibre22">WIDTH = 7</code>?</li>
<li value="2" class="calibre8">What happens if you delete or comment out <code class="calibre22">print('\n' * 50)</code> on line 36?</li>
<li value="3" class="calibre8">What happens if you change <code class="calibre22">random.randint(0, 1)</code> on line 28 to <code class="calibre22">random.randint(0, 10)</code>?</li>
<li value="4" class="calibre8">What happens if you change <code class="calibre22">nextCells[(x, y)] = DEAD</code> on line 85 to <code class="calibre22">nextCells[(x, y)] = ALIVE</code>?</li>
</ol>
</section>
</div>








<a href="project12.html">Prev: Collatz Sequence</a> | <a href="project14.html">Next: Countdown</a>
</body></html>