<html><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><link href="style.css" rel="stylesheet" type="text/css" /><link rel="stylesheet" type="text/css" href="pygments.css"><title>Seven-Segment Display Module</title></head><body style="background-color: #fffeee;">

<script type="text/javascript">
//<![CDATA[

var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-5459430-3']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();

//]]>
</script>


<div style="background-color: #eeeddd; float: right; height: 310px; font-family: sans-serif;" id="otherbooks">
  <a href="#" onclick="document.getElementById('otherbooks').outerHTML='';" style="vertical-align: top;">(close)</a><br />

  <a target="_blank" href="https://nostarch.com/automatestuff2" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_automate.link');"><img src="/images/cover_automate2_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://nostarch.com/big-book-small-python-projects" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_bigbookpython.link');"><img src="/images/cover_bigbookpython_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://nostarch.com/beyond-basic-stuff-python" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_beyond.link');"><img src="/images/cover_beyond_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://nostarch.com/inventwithpython" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_invent.link');"><img src="/images/cover_invent4th_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://www.amazon.com/Making-Games-Python-Pygame-Sweigart/dp/1469901730?ie=UTF8&amp;tag=playwithpyth-20&amp;linkCode=as2&amp;camp=1789&amp;creative=9325&amp;creativeASIN=1469901730" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_pygame.link');"><img src="/images/cover_makinggames_thumb.webp" style="height: 200px; border: solid black 1px; /"></a>
  <a target="_blank" href="https://nostarch.com/crackingcodes" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_hacking.link');"><img src="/images/cover_crackingcodes_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://nostarch.com/scratchplayground"><img src="/images/cover_scratchprogrammingplayground_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://nostarch.com/codingwithminecraft"><img src="/images/cover_codingwithminecraft_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <br />
  <a href="https://inventwithpython.com/automateudemy">Use this link to get 70% off the Automate the Boring Stuff online video course.</a><br />
  <a href="https://www.patreon.com/AlSweigart">Support me on Patreon</a>
</div>

<a href="project63.html">Prev: Royal Game of Ur</a> | <a href="project65.html">Next: Shining Carpet</a>





<div type="bodymatter chapter" class="calibre1" id="calibre_link-267">
<section class="toclist">
<header class="calibre10">
<h1 class="chapter">
<span class="chapternumber">#64</span><br class="calibre14" />
<span class="chaptertitle">Seven-Segment Display Module</span></h1>
</header>
<figure class="opener">
<img src="images/000002.webp" alt="" class="calibre12" />
</figure>
<p class="chapterintro">A seven-segment display is a type of LCD component used to display numbers in pocket calculators, microwave ovens, and other small electronic devices. Through different combinations of seven line-shaped segments in an LCD, a seven-segment display can represent the digits 0 through 9. They look like this:</p>
<pre class="calibre24"><code class="calibre22">   __         __    __          __    __   __    __    __
  |  |    |   __|   __|  |__|  |__   |__     |  |__|  |__|
  |__|    |  |__    __|     |   __|  |__|    |  |__|   __|</code></pre>
<p class="calibre19">The benefit of this program is that other programs can import it as a module. Project 14, “Countdown,” and Project 19, “Digital Clock,” import the <em class="calibre9">sevseg.py</em> file so they can use its <code class="calibre22">getSevSegStr()</code> function. You can find more information about seven-segment displays and other variations at <a href="https://en.wikipedia.org/wiki/Seven-segment_display" class="linkurl">https://en.wikipedia.org/wiki/Seven-segment_display</a>.</p>
<h2 id="calibre_link-268" class="calibre5">The Program in Action</h2>
<p class="bodyfirst">Even though it’s a module, <em class="calibre9">sevseg.py</em> outputs a sample demo of the digits it produces when you run the program directly. The output will look like this:</p>
<pre class="calibre24"><code class="calibre22">This module is meant to be imported rather than run.
For example, this code:
    import sevseg
    myNumber = sevseg.getSevSegStr(42, 3)
    print(myNumber)

Will print 42, zero-padded to three digits:
 __        __
|  | |__|  __|
|__|    | |__</code></pre>
<h2 id="calibre_link-269" class="calibre5">How It Works</h2>
<p class="bodyfirst">The <code class="calibre22">getSevSegStr()</code> function first creates a list of three strings. The strings represent the top, middle, and bottom row of the numeric digits. Lines 27 to 75 have a long list of <code class="calibre22">if</code>-<code class="calibre22">elif</code> statements for each digit (and the decimal point and minus sign) that concatenates the rows of each digit to these strings. These three strings are joined together with newlines on line 84 so that the function returns a single multiline string suitable to pass to <code class="calibre22">print()</code>.</p>
<div class="highlight"><pre><span></span>
<span class="c">  1. </span><span class="sd">&quot;&quot;&quot;Sevseg, by Al Sweigart al@inventwithpython.com</span>
<span class="c">  2. </span><span class="sd">A seven-segment number display module, used by the Countdown and Digital</span>
<span class="c">  3. </span><span class="sd">Clock programs.</span>
<span class="c">  4. </span><span class="sd">More info at https://en.wikipedia.org/wiki/Seven-segment_display</span>
<span class="c">  5. </span><span class="sd">This code is available at https://nostarch.com/big-book-small-python-programming</span>
<span class="c">  6. </span><span class="sd">Tags: short, module&quot;&quot;&quot;</span>
<span class="c">  7. </span>
<span class="c">  8. </span><span class="sd">&quot;&quot;&quot;A labeled seven-segment display, with each segment labeled A to G:</span>
<span class="c">  9. </span><span class="sd"> __A__</span>
<span class="c"> 10. </span><span class="sd">|     |    Each digit in a seven-segment display:</span>
<span class="c"> 11. </span><span class="sd">F     B     __       __   __        __   __  __   __   __</span>
<span class="c"> 12. </span><span class="sd">|__G__|    |  |   |  __|  __| |__| |__  |__    | |__| |__|</span>
<span class="c"> 13. </span><span class="sd">|     |    |__|   | |__   __|    |  __| |__|   | |__|  __|</span>
<span class="c"> 14. </span><span class="sd">E     C</span>
<span class="c"> 15. </span><span class="sd">|__D__|&quot;&quot;&quot;</span>
<span class="c"> 16. </span>
<span class="c"> 17. </span>
<span class="c"> 18. </span><span class="k">def</span> <span class="nf">getSevSegStr</span><span class="p">(</span><span class="n">number</span><span class="p">,</span> <span class="n">minWidth</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
<span class="c"> 19. </span>    <span class="sd">&quot;&quot;&quot;Return a seven-segment display string of number. The returned</span>
<span class="c"> 20. </span><span class="sd">    string will be padded with zeros if it is smaller than minWidth.&quot;&quot;&quot;</span>
<span class="c"> 21. </span>
<span class="c"> 22. </span>    <span class="c1"># Convert number to string in case it&#39;s an int or float:</span>
<span class="c"> 23. </span>    <span class="n">number</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">number</span><span class="p">)</span><span class="o">.</span><span class="n">zfill</span><span class="p">(</span><span class="n">minWidth</span><span class="p">)</span>
<span class="c"> 24. </span>
<span class="c"> 25. </span>    <span class="n">rows</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">]</span>
<span class="c"> 26. </span>    <span class="k">for</span> <span class="n">i</span><span class="p">,</span> <span class="n">numeral</span> <span class="ow">in</span> <span class="nb">enumerate</span><span class="p">(</span><span class="n">number</span><span class="p">):</span>
<span class="c"> 27. </span>        <span class="k">if</span> <span class="n">numeral</span> <span class="o">==</span> <span class="s1">&#39;.&#39;</span><span class="p">:</span>  <span class="c1"># Render the decimal point.</span>
<span class="c"> 28. </span>            <span class="n">rows</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+=</span> <span class="s1">&#39; &#39;</span>
<span class="c"> 29. </span>            <span class="n">rows</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+=</span> <span class="s1">&#39; &#39;</span>
<span class="c"> 30. </span>            <span class="n">rows</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+=</span> <span class="s1">&#39;.&#39;</span>
<span class="c"> 31. </span>            <span class="k">continue</span>  <span class="c1"># Skip the space in between digits.</span>
<span class="c"> 32. </span>        <span class="k">elif</span> <span class="n">numeral</span> <span class="o">==</span> <span class="s1">&#39;-&#39;</span><span class="p">:</span>  <span class="c1"># Render the negative sign:</span>
<span class="c"> 33. </span>            <span class="n">rows</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+=</span> <span class="s1">&#39;    &#39;</span>
<span class="c"> 34. </span>            <span class="n">rows</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+=</span> <span class="s1">&#39; __ &#39;</span>
<span class="c"> 35. </span>            <span class="n">rows</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+=</span> <span class="s1">&#39;    &#39;</span>
<span class="c"> 36. </span>        <span class="k">elif</span> <span class="n">numeral</span> <span class="o">==</span> <span class="s1">&#39;0&#39;</span><span class="p">:</span>  <span class="c1"># Render the 0.</span>
<span class="c"> 37. </span>            <span class="n">rows</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+=</span> <span class="s1">&#39; __ &#39;</span>
<span class="c"> 38. </span>            <span class="n">rows</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+=</span> <span class="s1">&#39;|  |&#39;</span>
<span class="c"> 39. </span>            <span class="n">rows</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+=</span> <span class="s1">&#39;|__|&#39;</span>
<span class="c"> 40. </span>        <span class="k">elif</span> <span class="n">numeral</span> <span class="o">==</span> <span class="s1">&#39;1&#39;</span><span class="p">:</span>  <span class="c1"># Render the 1.</span>
<span class="c"> 41. </span>            <span class="n">rows</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+=</span> <span class="s1">&#39;    &#39;</span>
<span class="c"> 42. </span>            <span class="n">rows</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+=</span> <span class="s1">&#39;   |&#39;</span>
<span class="c"> 43. </span>            <span class="n">rows</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+=</span> <span class="s1">&#39;   |&#39;</span>
<span class="c"> 44. </span>        <span class="k">elif</span> <span class="n">numeral</span> <span class="o">==</span> <span class="s1">&#39;2&#39;</span><span class="p">:</span>  <span class="c1"># Render the 2.</span>
<span class="c"> 45. </span>            <span class="n">rows</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+=</span> <span class="s1">&#39; __ &#39;</span>
<span class="c"> 46. </span>            <span class="n">rows</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+=</span> <span class="s1">&#39; __|&#39;</span>
<span class="c"> 47. </span>            <span class="n">rows</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+=</span> <span class="s1">&#39;|__ &#39;</span>
<span class="c"> 48. </span>        <span class="k">elif</span> <span class="n">numeral</span> <span class="o">==</span> <span class="s1">&#39;3&#39;</span><span class="p">:</span>  <span class="c1"># Render the 3.</span>
<span class="c"> 49. </span>            <span class="n">rows</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+=</span> <span class="s1">&#39; __ &#39;</span>
<span class="c"> 50. </span>            <span class="n">rows</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+=</span> <span class="s1">&#39; __|&#39;</span>
<span class="c"> 51. </span>            <span class="n">rows</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+=</span> <span class="s1">&#39; __|&#39;</span>
<span class="c"> 52. </span>        <span class="k">elif</span> <span class="n">numeral</span> <span class="o">==</span> <span class="s1">&#39;4&#39;</span><span class="p">:</span>  <span class="c1"># Render the 4.</span>
<span class="c"> 53. </span>            <span class="n">rows</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+=</span> <span class="s1">&#39;    &#39;</span>
<span class="c"> 54. </span>            <span class="n">rows</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+=</span> <span class="s1">&#39;|__|&#39;</span>
<span class="c"> 55. </span>            <span class="n">rows</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+=</span> <span class="s1">&#39;   |&#39;</span>
<span class="c"> 56. </span>        <span class="k">elif</span> <span class="n">numeral</span> <span class="o">==</span> <span class="s1">&#39;5&#39;</span><span class="p">:</span>  <span class="c1"># Render the 5.</span>
<span class="c"> 57. </span>            <span class="n">rows</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+=</span> <span class="s1">&#39; __ &#39;</span>
<span class="c"> 58. </span>            <span class="n">rows</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+=</span> <span class="s1">&#39;|__ &#39;</span>
<span class="c"> 59. </span>            <span class="n">rows</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+=</span> <span class="s1">&#39; __|&#39;</span>
<span class="c"> 60. </span>        <span class="k">elif</span> <span class="n">numeral</span> <span class="o">==</span> <span class="s1">&#39;6&#39;</span><span class="p">:</span>  <span class="c1"># Render the 6.</span>
<span class="c"> 61. </span>            <span class="n">rows</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+=</span> <span class="s1">&#39; __ &#39;</span>
<span class="c"> 62. </span>            <span class="n">rows</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+=</span> <span class="s1">&#39;|__ &#39;</span>
<span class="c"> 63. </span>            <span class="n">rows</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+=</span> <span class="s1">&#39;|__|&#39;</span>
<span class="c"> 64. </span>        <span class="k">elif</span> <span class="n">numeral</span> <span class="o">==</span> <span class="s1">&#39;7&#39;</span><span class="p">:</span>  <span class="c1"># Render the 7.</span>
<span class="c"> 65. </span>            <span class="n">rows</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+=</span> <span class="s1">&#39; __ &#39;</span>
<span class="c"> 66. </span>            <span class="n">rows</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+=</span> <span class="s1">&#39;   |&#39;</span>
<span class="c"> 67. </span>            <span class="n">rows</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+=</span> <span class="s1">&#39;   |&#39;</span>
<span class="c"> 68. </span>        <span class="k">elif</span> <span class="n">numeral</span> <span class="o">==</span> <span class="s1">&#39;8&#39;</span><span class="p">:</span>  <span class="c1"># Render the 8.</span>
<span class="c"> 69. </span>            <span class="n">rows</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+=</span> <span class="s1">&#39; __ &#39;</span>
<span class="c"> 70. </span>            <span class="n">rows</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+=</span> <span class="s1">&#39;|__|&#39;</span>
<span class="c"> 71. </span>            <span class="n">rows</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+=</span> <span class="s1">&#39;|__|&#39;</span>
<span class="c"> 72. </span>        <span class="k">elif</span> <span class="n">numeral</span> <span class="o">==</span> <span class="s1">&#39;9&#39;</span><span class="p">:</span>  <span class="c1"># Render the 9.</span>
<span class="c"> 73. </span>            <span class="n">rows</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+=</span> <span class="s1">&#39; __ &#39;</span>
<span class="c"> 74. </span>            <span class="n">rows</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+=</span> <span class="s1">&#39;|__|&#39;</span>
<span class="c"> 75. </span>            <span class="n">rows</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+=</span> <span class="s1">&#39; __|&#39;</span>
<span class="c"> 76. </span>
<span class="c"> 77. </span>        <span class="c1"># Add a space (for the space in between numerals) if this</span>
<span class="c"> 78. </span>        <span class="c1"># isn&#39;t the last numeral and the decimal point isn&#39;t next:</span>
<span class="c"> 79. </span>        <span class="k">if</span> <span class="n">i</span> <span class="o">!=</span> <span class="nb">len</span><span class="p">(</span><span class="n">number</span><span class="p">)</span> <span class="o">-</span> <span class="mi">1</span> <span class="ow">and</span> <span class="n">number</span><span class="p">[</span><span class="n">i</span> <span class="o">+</span> <span class="mi">1</span><span class="p">]</span> <span class="o">!=</span> <span class="s1">&#39;.&#39;</span><span class="p">:</span>
<span class="c"> 80. </span>            <span class="n">rows</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">+=</span> <span class="s1">&#39; &#39;</span>
<span class="c"> 81. </span>            <span class="n">rows</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+=</span> <span class="s1">&#39; &#39;</span>
<span class="c"> 82. </span>            <span class="n">rows</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">+=</span> <span class="s1">&#39; &#39;</span>
<span class="c"> 83. </span>
<span class="c"> 84. </span>    <span class="k">return</span> <span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">rows</span><span class="p">)</span>
<span class="c"> 85. </span>
<span class="c"> 86. </span>
<span class="c"> 87. </span><span class="c1"># If this program isn&#39;t being imported, display the numbers 00 to 99.</span>
<span class="c"> 88. </span><span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
<span class="c"> 89. </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;This module is meant to be imported rather than run.&#39;</span><span class="p">)</span>
<span class="c"> 90. </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;For example, this code:&#39;</span><span class="p">)</span>
<span class="c"> 91. </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;    import sevseg&#39;</span><span class="p">)</span>
<span class="c"> 92. </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;    myNumber = sevseg.getSevSegStr(42, 3)&#39;</span><span class="p">)</span>
<span class="c"> 93. </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;    print(myNumber)&#39;</span><span class="p">)</span>
<span class="c"> 94. </span>    <span class="nb">print</span><span class="p">()</span>
<span class="c"> 95. </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;...will print 42, zero-padded to three digits:&#39;</span><span class="p">)</span>
<span class="c"> 96. </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39; __        __ &#39;</span><span class="p">)</span>
<span class="c"> 97. </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;|  | |__|  __|&#39;</span><span class="p">)</span>
<span class="c"> 98. </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;|__|    | |__ &#39;</span><span class="p">)</span>
</pre></div>

<p class="calibre19">After entering the source code and running it a few times, try making experimental changes to it. On your own, you can also try to figure out how to do the following:</p>
<ul class="calibre25">
<li class="calibre8">Create new fonts for numbers, such as using five rows and the block character string returned by <code class="calibre22">chr(9608)</code>.</li>
<li class="calibre8">Look at the Wikipedia article for seven-segment displays to find out how to display letters and then add those to <em class="calibre9">sevseg.py</em>.</li>
<li class="calibre8">Learn about sixteen-segment displays from <a href="https://en.wikipedia.org/wiki/Sixteen-segment_display" class="linkurl">https://en.wikipedia.org/wiki/Sixteen-segment_display</a> and create a <em class="calibre9">sixteenseg.py</em> module to generate numbers in that style.</li>
</ul>
<h2 id="calibre_link-270" class="calibre5">Exploring the Program</h2>
<p class="bodyfirst">Try to find the answers to the following questions. Experiment with some modifications to the code and rerun the program to see what effect the changes have.</p>
<ol class="decimal">
<li value="1" class="calibre8">What happens if you change the single-space strings on lines 80, 81, and 82 to empty strings?</li>
<li value="2" class="calibre8">What happens if you change the <code class="calibre22">minWidth=0</code> default argument on line 18 to <code class="calibre22">minWidth=8</code>?</li>
</ol>
</section>
</div>








<a href="project63.html">Prev: Royal Game of Ur</a> | <a href="project65.html">Next: Shining Carpet</a>
</body></html>