<html><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8" /><link href="style.css" rel="stylesheet" type="text/css" /><link rel="stylesheet" type="text/css" href="pygments.css"><title>Snail Race</title></head><body style="background-color: #fffeee;">

<script type="text/javascript">
//<![CDATA[

var _gaq = _gaq || [];
_gaq.push(['_setAccount', 'UA-5459430-3']);
_gaq.push(['_trackPageview']);

(function() {
  var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
  ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
  var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();

//]]>
</script>


<div style="background-color: #eeeddd; float: right; height: 310px; font-family: sans-serif;" id="otherbooks">
  <a href="#" onclick="document.getElementById('otherbooks').outerHTML='';" style="vertical-align: top;">(close)</a><br />

  <a target="_blank" href="https://nostarch.com/automatestuff2" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_automate.link');"><img src="/images/cover_automate2_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://nostarch.com/big-book-small-python-projects" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_bigbookpython.link');"><img src="/images/cover_bigbookpython_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://nostarch.com/beyond-basic-stuff-python" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_beyond.link');"><img src="/images/cover_beyond_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://nostarch.com/inventwithpython" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_invent.link');"><img src="/images/cover_invent4th_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://www.amazon.com/Making-Games-Python-Pygame-Sweigart/dp/1469901730?ie=UTF8&amp;tag=playwithpyth-20&amp;linkCode=as2&amp;camp=1789&amp;creative=9325&amp;creativeASIN=1469901730" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_pygame.link');"><img src="/images/cover_makinggames_thumb.webp" style="height: 200px; border: solid black 1px; /"></a>
  <a target="_blank" href="https://nostarch.com/crackingcodes" onclick="javascript: pageTracker._trackPageview('/affiliate_chapters_hacking.link');"><img src="/images/cover_crackingcodes_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://nostarch.com/scratchplayground"><img src="/images/cover_scratchprogrammingplayground_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <a target="_blank" href="https://nostarch.com/codingwithminecraft"><img src="/images/cover_codingwithminecraft_thumb.webp" style="height: 200px; border: solid black 1px;" /></a>
  <br />
  <a href="https://inventwithpython.com/automateudemy">Use this link to get 70% off the Automate the Boring Stuff online video course.</a><br />
  <a href="https://www.patreon.com/AlSweigart">Support me on Patreon</a>
</div>

<a href="project68.html">Prev: Sliding Tile Puzzle</a> | <a href="project70.html">Next: Soroban Japanese Abacus</a>





<div type="bodymatter chapter" class="calibre1" id="calibre_link-287">
<section class="toclist">
<header class="calibre10">
<h1 class="chapter">
<span class="chapternumber">#69</span><br class="calibre14" />
<span class="chaptertitle">Snail Race</span></h1>
</header>
<figure class="opener">
<img src="images/000002.webp" alt="" class="calibre12" />
</figure>
<p class="chapterintro">You won’t be able to handle the fast-paced excitement of these racing . . . snails. But what they lack in speed they make up for in ASCII-art cuteness. Each snail (represented by an <code class="calibre17">@</code> character for the shell and <code class="calibre17">v</code> for the two eyestalks) moves slowly but surely toward the finish line. Up to eight snails, each with a custom name, can race each other, leaving a slime trail in their wake. This program is good for beginners.</p>
<h2 id="calibre_link-288" class="calibre5">The Program in Action</h2>
<p class="bodyfirst">When you run <em class="calibre9">snailrace.py</em>, the output will look like this:</p>
<pre class="calibre24"><code class="calibre22">Snail Race, by Al Sweigart al@inventwithpython.com

    @v &lt;-- snail

How many snails will race? Max: 8
&gt; <b class="calibre6">3</b>
Enter snail #1's name:
&gt; <b class="calibre6">Alice</b>
Enter snail #2's name:
&gt; <b class="calibre6">Bob</b>
Enter snail #3's name:
&gt; <b class="calibre6">Carol</b>
START                                   FINISH
|                                       |
      Alice
......@v
     Bob
.....@v
       Carol
.......@v
<var class="calibre27">--snip--</var></code></pre>
<h2 id="calibre_link-289" class="calibre5">How It Works</h2>
<p class="bodyfirst">This program makes use of two data structures, stored in two variables: <code class="calibre22">snailNames</code> is a list of strings of each snail’s name, and <code class="calibre22">snailProgress</code> is a dictionary whose keys are the snails’ names and whose values are integers representing how many spaces the snails have moved. Lines 79 to 82 read the data in these two variables to draw the snails at appropriate places on the screen.</p>
<div class="highlight"><pre><span></span>
<span class="c"> 1. </span><span class="sd">&quot;&quot;&quot;Snail Race, by Al Sweigart al@inventwithpython.com</span>
<span class="c"> 2. </span><span class="sd">Fast-paced snail racing action!</span>
<span class="c"> 3. </span><span class="sd">This code is available at https://nostarch.com/big-book-small-python-programming</span>
<span class="c"> 4. </span><span class="sd">Tags: short, artistic, beginner, game, multiplayer&quot;&quot;&quot;</span>
<span class="c"> 5. </span>
<span class="c"> 6. </span><span class="kn">import</span> <span class="nn">random</span><span class="o">,</span> <span class="nn">time</span><span class="o">,</span> <span class="nn">sys</span>
<span class="c"> 7. </span>
<span class="c"> 8. </span><span class="c1"># Set up the constants:</span>
<span class="c"> 9. </span><span class="n">MAX_NUM_SNAILS</span> <span class="o">=</span> <span class="mi">8</span>
<span class="c">10. </span><span class="n">MAX_NAME_LENGTH</span> <span class="o">=</span> <span class="mi">20</span>
<span class="c">11. </span><span class="n">FINISH_LINE</span> <span class="o">=</span> <span class="mi">40</span>  <span class="c1"># (!) Try modifying this number.</span>
<span class="c">12. </span>
<span class="c">13. </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;&#39;&#39;Snail Race, by Al Sweigart al@inventwithpython.com</span>
<span class="c">14. </span>
<span class="c">15. </span><span class="s1">    @v &lt;-- snail</span>
<span class="c">16. </span>
<span class="c">17. </span><span class="s1">&#39;&#39;&#39;</span><span class="p">)</span>
<span class="c">18. </span>
<span class="c">19. </span><span class="c1"># Ask how many snails to race:</span>
<span class="c">20. </span><span class="k">while</span> <span class="kc">True</span><span class="p">:</span>  <span class="c1"># Keep asking until the player enters a number.</span>
<span class="c">21. </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;How many snails will race? Max:&#39;</span><span class="p">,</span> <span class="n">MAX_NUM_SNAILS</span><span class="p">)</span>
<span class="c">22. </span>    <span class="n">response</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;&gt; &#39;</span><span class="p">)</span>
<span class="c">23. </span>    <span class="k">if</span> <span class="n">response</span><span class="o">.</span><span class="n">isdecimal</span><span class="p">():</span>
<span class="c">24. </span>        <span class="n">numSnailsRacing</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">response</span><span class="p">)</span>
<span class="c">25. </span>        <span class="k">if</span> <span class="mi">1</span> <span class="o">&lt;</span> <span class="n">numSnailsRacing</span> <span class="o">&lt;=</span> <span class="n">MAX_NUM_SNAILS</span><span class="p">:</span>
<span class="c">26. </span>            <span class="k">break</span>
<span class="c">27. </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Enter a number between 2 and&#39;</span><span class="p">,</span> <span class="n">MAX_NUM_SNAILS</span><span class="p">)</span>
<span class="c">28. </span>
<span class="c">29. </span><span class="c1"># Enter the names of each snail:</span>
<span class="c">30. </span><span class="n">snailNames</span> <span class="o">=</span> <span class="p">[]</span>  <span class="c1"># List of the string snail names.</span>
<span class="c">31. </span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">numSnailsRacing</span> <span class="o">+</span> <span class="mi">1</span><span class="p">):</span>
<span class="c">32. </span>    <span class="k">while</span> <span class="kc">True</span><span class="p">:</span>  <span class="c1"># Keep asking until the player enters a valid name.</span>
<span class="c">33. </span>        <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Enter snail #&#39;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">i</span><span class="p">)</span> <span class="o">+</span> <span class="s2">&quot;&#39;s name:&quot;</span><span class="p">)</span>
<span class="c">34. </span>        <span class="n">name</span> <span class="o">=</span> <span class="nb">input</span><span class="p">(</span><span class="s1">&#39;&gt; &#39;</span><span class="p">)</span>
<span class="c">35. </span>        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">name</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
<span class="c">36. </span>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Please enter a name.&#39;</span><span class="p">)</span>
<span class="c">37. </span>        <span class="k">elif</span> <span class="n">name</span> <span class="ow">in</span> <span class="n">snailNames</span><span class="p">:</span>
<span class="c">38. </span>            <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;Choose a name that has not already been used.&#39;</span><span class="p">)</span>
<span class="c">39. </span>        <span class="k">else</span><span class="p">:</span>
<span class="c">40. </span>            <span class="k">break</span>  <span class="c1"># The entered name is acceptable.</span>
<span class="c">41. </span>    <span class="n">snailNames</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">name</span><span class="p">)</span>
<span class="c">42. </span>
<span class="c">43. </span><span class="c1"># Display each snail at the start line.</span>
<span class="c">44. </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">*</span> <span class="mi">40</span><span class="p">)</span>
<span class="c">45. </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;START&#39;</span> <span class="o">+</span> <span class="p">(</span><span class="s1">&#39; &#39;</span> <span class="o">*</span> <span class="p">(</span><span class="n">FINISH_LINE</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="s1">&#39;START&#39;</span><span class="p">))</span> <span class="o">+</span> <span class="s1">&#39;FINISH&#39;</span><span class="p">))</span>
<span class="c">46. </span><span class="nb">print</span><span class="p">(</span><span class="s1">&#39;|&#39;</span> <span class="o">+</span> <span class="p">(</span><span class="s1">&#39; &#39;</span> <span class="o">*</span> <span class="p">(</span><span class="n">FINISH_LINE</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="s1">&#39;|&#39;</span><span class="p">))</span> <span class="o">+</span> <span class="s1">&#39;|&#39;</span><span class="p">))</span>
<span class="c">47. </span><span class="n">snailProgress</span> <span class="o">=</span> <span class="p">{}</span>
<span class="c">48. </span><span class="k">for</span> <span class="n">snailName</span> <span class="ow">in</span> <span class="n">snailNames</span><span class="p">:</span>
<span class="c">49. </span>    <span class="nb">print</span><span class="p">(</span><span class="n">snailName</span><span class="p">[:</span><span class="n">MAX_NAME_LENGTH</span><span class="p">])</span>
<span class="c">50. </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;@v&#39;</span><span class="p">)</span>
<span class="c">51. </span>    <span class="n">snailProgress</span><span class="p">[</span><span class="n">snailName</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span>
<span class="c">52. </span>
<span class="c">53. </span><span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">1.5</span><span class="p">)</span>  <span class="c1"># The pause right before the race starts.</span>
<span class="c">54. </span>
<span class="c">55. </span><span class="k">while</span> <span class="kc">True</span><span class="p">:</span>  <span class="c1"># Main program loop.</span>
<span class="c">56. </span>    <span class="c1"># Pick random snails to move forward:</span>
<span class="c">57. </span>    <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="n">numSnailsRacing</span> <span class="o">//</span> <span class="mi">2</span><span class="p">)):</span>
<span class="c">58. </span>        <span class="n">randomSnailName</span> <span class="o">=</span> <span class="n">random</span><span class="o">.</span><span class="n">choice</span><span class="p">(</span><span class="n">snailNames</span><span class="p">)</span>
<span class="c">59. </span>        <span class="n">snailProgress</span><span class="p">[</span><span class="n">randomSnailName</span><span class="p">]</span> <span class="o">+=</span> <span class="mi">1</span>
<span class="c">60. </span>
<span class="c">61. </span>        <span class="c1"># Check if a snail has reached the finish line:</span>
<span class="c">62. </span>        <span class="k">if</span> <span class="n">snailProgress</span><span class="p">[</span><span class="n">randomSnailName</span><span class="p">]</span> <span class="o">==</span> <span class="n">FINISH_LINE</span><span class="p">:</span>
<span class="c">63. </span>            <span class="nb">print</span><span class="p">(</span><span class="n">randomSnailName</span><span class="p">,</span> <span class="s1">&#39;has won!&#39;</span><span class="p">)</span>
<span class="c">64. </span>            <span class="n">sys</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>
<span class="c">65. </span>
<span class="c">66. </span>    <span class="c1"># (!) EXPERIMENT: Add a cheat here that increases a snail&#39;s progress</span>
<span class="c">67. </span>    <span class="c1"># if it has your name.</span>
<span class="c">68. </span>
<span class="c">69. </span>    <span class="n">time</span><span class="o">.</span><span class="n">sleep</span><span class="p">(</span><span class="mf">0.5</span><span class="p">)</span>  <span class="c1"># (!) EXPERIMENT: Try changing this value.</span>
<span class="c">70. </span>
<span class="c">71. </span>    <span class="c1"># (!) EXPERIMENT: What happens if you comment this line out?</span>
<span class="c">72. </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span> <span class="o">*</span> <span class="mi">40</span><span class="p">)</span>
<span class="c">73. </span>
<span class="c">74. </span>    <span class="c1"># Display the start and finish lines:</span>
<span class="c">75. </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;START&#39;</span> <span class="o">+</span> <span class="p">(</span><span class="s1">&#39; &#39;</span> <span class="o">*</span> <span class="p">(</span><span class="n">FINISH_LINE</span> <span class="o">-</span> <span class="nb">len</span><span class="p">(</span><span class="s1">&#39;START&#39;</span><span class="p">))</span> <span class="o">+</span> <span class="s1">&#39;FINISH&#39;</span><span class="p">))</span>
<span class="c">76. </span>    <span class="nb">print</span><span class="p">(</span><span class="s1">&#39;|&#39;</span> <span class="o">+</span> <span class="p">(</span><span class="s1">&#39; &#39;</span> <span class="o">*</span> <span class="p">(</span><span class="n">FINISH_LINE</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span> <span class="o">+</span> <span class="s1">&#39;|&#39;</span><span class="p">))</span>
<span class="c">77. </span>
<span class="c">78. </span>    <span class="c1"># Display the snails (with name tags):</span>
<span class="c">79. </span>    <span class="k">for</span> <span class="n">snailName</span> <span class="ow">in</span> <span class="n">snailNames</span><span class="p">:</span>
<span class="c">80. </span>        <span class="n">spaces</span> <span class="o">=</span> <span class="n">snailProgress</span><span class="p">[</span><span class="n">snailName</span><span class="p">]</span>
<span class="c">81. </span>        <span class="nb">print</span><span class="p">((</span><span class="s1">&#39; &#39;</span> <span class="o">*</span> <span class="n">spaces</span><span class="p">)</span> <span class="o">+</span> <span class="n">snailName</span><span class="p">[:</span><span class="n">MAX_NAME_LENGTH</span><span class="p">])</span>
<span class="c">82. </span>        <span class="nb">print</span><span class="p">((</span><span class="s1">&#39;.&#39;</span> <span class="o">*</span> <span class="n">snailProgress</span><span class="p">[</span><span class="n">snailName</span><span class="p">])</span> <span class="o">+</span> <span class="s1">&#39;@v&#39;</span><span class="p">)</span>
</pre></div>

<p class="calibre19">After entering the source code and running it a few times, try making experimental changes to it. The comments marked with <code class="calibre22">(!)</code> have suggestions for small changes you can make. On your own, you can also try to figure out how to do the following:</p>
<ul class="calibre25">
<li class="calibre8">Add a random “speed boost” that launches the snail four spaces ahead instead of one.</li>
<li class="calibre8">Add a “sleep mode” that snails can randomly enter during the race. This mode causes them to stop for a few turns and <code class="calibre22">zzz</code> to appear next to them.</li>
<li class="calibre8">Add support for ties, in case snails reach the finish line at the same time.</li>
</ul>
<h2 id="calibre_link-290" class="calibre5">Exploring the Program</h2>
<p class="bodyfirst">Try to find the answers to the following questions. Experiment with some modifications to the code and rerun the program to see what effect the changes have.</p>
<ol class="decimal">
<li value="1" class="calibre8">What happens if you change <code class="calibre22">snailName[:MAX_NAME_LENGTH]</code> on line 81 to <code class="calibre22">snailNames[0]</code>?</li>
<li value="2" class="calibre8">What happens if you change <code class="calibre22">print('@v')</code> on line 50 to <code class="calibre22">print('v@')</code>?</li>
</ol>
</section>
</div>








<a href="project68.html">Prev: Sliding Tile Puzzle</a> | <a href="project70.html">Next: Soroban Japanese Abacus</a>
</body></html>